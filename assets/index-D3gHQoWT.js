const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrafficChartv2-BLwHc19N.js","assets/react-Db6E7Rwa.js","assets/uplot-BYS-uAUq.js","assets/uplot-D1GxaB_c.css","assets/radix-ui-C6HGrVjW.js","assets/framer-motion-DZRHEdI-.js","assets/lucide-BL7D06Js.js","assets/protobuf-BZJZG19G.js"])))=>i.map(i=>d[i]);
import{r as h,ad as Wt,_ as W,j as e,ae as C,af as ls,$ as On,ag as kt,ah as $n,ai as ce,aj as at,ak as tt,al as Zt,am as qn,an as eo,ao as so}from"./react-Db6E7Rwa.js";import{P as ao,R as to,T as no,C as oo,D as lo,V as ro,S as co,a as io,b as mo,c as ho,d as uo,e as xo,O as bo,f as go,g as Bt,h as po,i as fo,j as jo,k as vo,l as yo,m as Ao,I as No,n as Co,o as wo,G as So,L as Io,p as Wo,q as ko,H as Zo,r as Bo,s as Ro,t as Go,A as Yo,u as Eo,v as Vo,w as Za,x as Ba,y as Xo,z as Fo,B as Lo,E as zo,F as Jo,J as Ko,K as Ho,M as Do,N as Mo,Q as Uo,U as Qo,W as Po,X as To,Y as _o,Z as Rt,_ as Gt}from"./radix-ui-C6HGrVjW.js";import{A as Pe,m as T,L as Oo}from"./framer-motion-DZRHEdI-.js";import{C as Re,H as $o,E as Yt,D as qo,F as el,A as Et,S as Vt,M as sl,P as _,a as al,b as Xt,c as rs,d as cs,e as tl,f as nl,g as ol,T as $,h as ys,i as As,j as Ra,k as Ga,l as ll,I as Ns,Z as rl,m as Ft,n as Lt,G as Ya,N as cl,o as zt,p as Fe,q as Jt,r as il,L as Kt,s as Cs,t as oa,R as Ea,u as dl,v as is,B as ml,w as hl,x as ul,y as xl,z as bl,J as Ht,K as gl,O as nt,Q as pl,U as fl,V as jl,W as Le,X as Dt,Y as vl,_ as yl,$ as Mt,a0 as Al,a1 as Va,a2 as Nl,a3 as Cl,a4 as wl,a5 as Sl,a6 as Il,a7 as Ut,a8 as Wl,a9 as Xa,aa as Fa,ab as kl,ac as Qt,ad as Zl,ae as Bl,af as Rl,ag as Pt,ah as Gl,ai as Yl,aj as El,ak as Vl,al as Xl,am as Fl,an as Tt,ao as Ll,ap as zl,aq as Jl}from"./lucide-BL7D06Js.js";import{f as La,c as _t,t as la,a as q,b as ee,e as fe,m as A,s as Se,d as zs,g as Ot,h as Kl,i as $t,j as m,T as Hl,S as je,k as sa,E as ra,l as Dl,n as ws}from"./protobuf-BZJZG19G.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();const ot=()=>{let s=window.location.hash.replace(/^#/,"")||"/";return s!=="/"&&s.endsWith("/")&&(s=s.slice(0,-1)),s},Ml=()=>{const[s,a]=h.useState(ot());h.useEffect(()=>{const n=()=>a(ot());return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]);const t=h.useCallback(n=>{window.location.hash=n},[]);return[s,t]},pa=["/","/docs/group","/docs/group/subscribe","/docs/group/publish","/docs/group/activates","/docs/inbound","/docs/bypass","/docs/bypass/list","/docs/bypass/tag","/docs/bypass/resolver","/docs/bypass/test","/docs/bypass/block","/docs/connections/v2","/docs/connections/history","/docs/connections/failed","/docs/config","/docs/webui","/docs/config/backup","/docs/config/log","/docs/config/pprof","/docs/config/documents","/docs/config/licenses","/docs/config/about"],Ul=s=>s==="/"?"/":s.replace(/\/+$/,""),lt=s=>{const a=Ul(s);let t=pa.indexOf(a);if(t!==-1)return t;let n=0;for(let o=0;o<pa.length;o++){const l=pa[o];a.startsWith(l)&&l.length>n&&(n=l.length,t=o)}return t!==-1?t:0};function Ql(){const[s]=Wt(),a=h.useRef(s),t=lt(a.current),n=lt(s),o=a.current===s?0:n>t?1:-1;return h.useEffect(()=>{a.current=s},[s]),{direction:o,location:s}}const Pl={Info:s=>{console.log(s)},Error:s=>{console.error(s)}},J=h.createContext(Pl),Tl=({children:s,duration:a=4e3})=>{const[t,n]=h.useState([]),o=h.useCallback((c,i)=>{const d=Date.now().toString(36)+Math.random().toString(36).substring(2);n(b=>{const x=[...b,{text:c,type:i,id:d}];return x.length>5?x.slice(x.length-5):x})},[]),l=(c,i)=>{i||n(d=>d.filter(b=>b.id!==c))},r=W.useMemo(()=>({Info:c=>o(c,"info"),Error:c=>o(c,"error")}),[o]);return e.jsxs(J.Provider,{value:r,children:[s,e.jsxs(ao,{duration:a,children:[e.jsx(Pe,{mode:"popLayout",initial:!1,children:t.map(c=>e.jsx(to,{asChild:!0,forceMount:!0,onOpenChange:i=>l(c.id,i),children:e.jsxs(T.li,{layout:!0,initial:{opacity:0,x:200,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:200,scale:.9,transition:{duration:.2}},transition:{type:"spring",stiffness:500,damping:30},drag:"x",dragConstraints:{left:0,right:300},dragElastic:.05,onDragEnd:(i,d)=>{d.offset.x>100&&l(c.id,!1)},className:C("bg-[rgba(var(--bs-body-bg-rgb,255,255,255),0.7)] backdrop-blur-[8px] rounded-[8px] border border-[var(--bs-border-color-translucent,rgba(0,0,0,0.1))] shadow-[0_0.5rem_1rem_rgba(0,0,0,0.1)] flex flex-col overflow-hidden",c.type==="info"&&"border-l-4 border-l-[var(--bs-info)]",c.type==="error"&&"border-l-4 border-l-[var(--bs-danger)]"),style:{listStyle:"none"},children:[e.jsxs("div",{className:"flex justify-between items-center py-[0.5rem] px-[0.75rem] bg-[rgba(var(--bs-tertiary-bg-rgb,248,249,250),0.5)] border-b border-[var(--bs-border-color-translucent)]",children:[e.jsx(no,{className:"text-[0.85rem] font-bold text-[var(--bs-body-color)] m-0",children:c.type==="error"?"System Error":"Notification"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("small",{className:"text-muted",style:{fontSize:"0.75rem"},children:"just now"}),e.jsx(oo,{className:"bg-transparent border-0 text-[var(--bs-secondary-color)] cursor-pointer opacity-50 transition-opacity duration-200 px-[4px] text-[1.2rem] leading-none hover:opacity-100","aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]})]}),e.jsx(lo,{className:"py-[0.75rem] px-[1rem] text-[var(--bs-body-color)] text-[0.9rem] leading-[1.4]",children:c.text})]})},c.id))}),e.jsx(ro,{className:"fixed top-0 right-0 flex flex-col p-[20px] gap-[10px] w-[380px] max-w-[100vw] m-0 list-none z-[2147483647] outline-none"})]})]})},_l=T(co),y=h.forwardRef(({className:s,variant:a="default",asChild:t=!1,size:n="default",...o},l)=>{const r=t?_l:T.button,c="inline-flex items-center justify-center py-1.5 px-3 text-base leading-normal font-medium font-inherit appearance-none shadow-none cursor-pointer border rounded-[12px] transition-all duration-200 relative no-underline select-none align-middle focus:outline-none disabled:opacity-65 disabled:pointer-events-none aria-disabled:opacity-65 aria-disabled:pointer-events-none",i={default:C("bg-[var(--bs-tertiary-bg)] border-sidebar-border text-[var(--bs-body-color)]","hover:bg-sidebar-hover hover:border-sidebar-active hover:text-sidebar-active hover:z-20","active:bg-sidebar-hover active:border-sidebar-active active:text-sidebar-active active:shadow-none active:outline-none active:z-30","focus-visible:bg-sidebar-hover focus-visible:border-sidebar-active focus-visible:text-sidebar-active focus-visible:shadow-none focus-visible:outline-none focus-visible:z-30","data-[state=open]:bg-sidebar-hover data-[state=open]:border-sidebar-active data-[state=open]:text-sidebar-active data-[state=open]:shadow-none data-[state=open]:outline-none data-[state=open]:z-30"),danger:C("!bg-[var(--bs-danger)] !border-[var(--bs-danger)] !text-white","hover:!border-[#b02a37] hover:!text-white hover:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","active:!border-[#b02a37] active:!text-white active:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","focus-visible:!border-[#b02a37] focus-visible:!text-white focus-visible:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","data-[state=open]:!border-[#b02a37] data-[state=open]:!text-white data-[state=open]:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]"),"outline-danger":C("bg-transparent !border-[var(--bs-danger)] !text-[var(--bs-danger)]","hover:!bg-[var(--bs-danger)] hover:!text-white","active:!bg-[var(--bs-danger)] active:!border-[#b02a37] active:!text-white active:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","focus-visible:!bg-[var(--bs-danger)] focus-visible:!border-[#b02a37] focus-visible:!text-white focus-visible:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","data-[state=open]:!bg-[var(--bs-danger)] data-[state=open]:!border-[#b02a37] data-[state=open]:!text-white data-[state=open]:shadow-[0_0_0_0.25rem_rgba(220,53,69,0.5)]","disabled:bg-transparent disabled:text-[var(--bs-danger)] disabled:opacity-50"),primary:C("!bg-sidebar-active !border-sidebar-active !text-white","hover:!bg-sidebar-active hover:!border-sidebar-active hover:!text-white hover:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)] hover:opacity-90","active:!bg-sidebar-active active:!border-sidebar-active active:!text-white active:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)] active:opacity-90","focus-visible:!bg-sidebar-active focus-visible:!border-sidebar-active focus-visible:!text-white focus-visible:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)] focus-visible:opacity-90","data-[state=open]:!bg-sidebar-active data-[state=open]:!border-sidebar-active data-[state=open]:!text-white data-[state=open]:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)] data-[state=open]:opacity-90"),"outline-primary":C("bg-transparent !border-sidebar-active !text-sidebar-active","hover:!bg-sidebar-active hover:!text-white","active:bg-transparent active:!border-sidebar-active active:!text-sidebar-active active:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)]","focus-visible:bg-transparent focus-visible:!border-sidebar-active focus-visible:!text-sidebar-active focus-visible:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)]","data-[state=open]:bg-transparent data-[state=open]:!border-sidebar-active data-[state=open]:!text-sidebar-active data-[state=open]:shadow-[0_0_0_0.25rem_var(--sidebar-active-color)]","disabled:bg-transparent disabled:text-sidebar-active disabled:opacity-50"),"outline-secondary":C("bg-transparent !border-sidebar-border !text-sidebar-color","hover:!bg-sidebar-hover hover:!border-sidebar-active hover:!text-sidebar-active")},d={default:"",sm:"h-8 px-3 text-sm rounded-[12px]",xs:"py-[0.15rem] px-[0.4rem] text-xs rounded-[6px]",icon:"p-[0.4rem] inline-flex items-center justify-center leading-none flex-none w-auto [&>i]:text-[1rem] [&>i]:align-middle [&>svg]:text-[1rem] [&>svg]:align-middle"};return e.jsx(r,{className:C(c,i[a],d[n],s),ref:l,whileHover:{scale:1.05,filter:"brightness(1.05)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...o})});y.displayName="Button";const qt=W.forwardRef(({className:s,show:a,onHide:t,children:n,...o},l)=>e.jsxs(e.Fragment,{children:[e.jsx(T.div,{ref:l,className:C("fixed z-[1050] top-sidebar-gap h-[calc(100vh-2*var(--sidebar-gap))] w-[260px] bg-sidebar-bg text-sidebar-color rounded-sidebar-radius border border-sidebar-border shadow-sidebar py-6 overflow-y-auto backdrop-filter-none [&::-webkit-scrollbar]:w-0","lg:w-[260px] w-[280px] max-w-[calc(100vw-32px)] lg:max-w-none lg:shadow-sidebar shadow-none lg:m-0","left-[-300px] lg:left-sidebar-gap",s),initial:!1,animate:a?{x:320}:{x:0},transition:{type:"spring",stiffness:400,damping:40},...o,children:n}),e.jsx(Pe,{children:a&&e.jsx(T.div,{className:"fixed top-0 left-0 w-full h-full bg-black/50 z-[1040] lg:hidden",onClick:t,"aria-hidden":"true",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})})]}));qt.displayName="Sidebar";const en=W.forwardRef(({className:s,...a},t)=>e.jsx("nav",{className:C("flex flex-col px-4 gap-[6px]",s),ref:t,...a}));en.displayName="SidebarNav";const sn=W.forwardRef(({className:s,active:a,children:t,icon:n,...o},l)=>e.jsxs("a",{ref:l,className:C("flex items-center w-full px-[18px] py-[12px] text-[0.95rem] font-medium text-sidebar-color rounded-[14px] transition-all duration-200 border-none tracking-[0.3px] no-underline cursor-pointer bg-transparent outline-none focus:outline-none","hover:bg-sidebar-hover hover:text-sidebar-active [&>svg]:hover:scale-[1.15] [&>svg]:hover:-rotate-[5deg]",a&&"!bg-sidebar-active-bg !text-sidebar-active font-semibold shadow-sidebar-active",s),...o,children:[n&&e.jsx("span",{className:"flex justify-center items-center text-[1.2rem] w-6 mr-[14px] transition-transform",children:n}),t]}));sn.displayName="SidebarItem";const an=W.forwardRef(({className:s,children:a,title:t,active:n,icon:o,defaultOpen:l,open:r,onOpenChange:c,...i},d)=>e.jsxs(io,{open:r,defaultOpen:l,onOpenChange:c,className:C(s),ref:d,...i,children:[e.jsx(mo,{asChild:!0,children:e.jsxs("button",{type:"button",className:C("group flex items-center w-full px-[18px] py-[12px] text-[0.95rem] font-medium text-sidebar-color rounded-[14px] transition-all duration-200 border-none tracking-[0.3px] cursor-pointer bg-transparent outline-none focus:outline-none","hover:bg-sidebar-hover hover:text-sidebar-active [&>span>svg]:hover:scale-[1.15] [&>span>svg]:hover:-rotate-[5deg]",n&&"!bg-sidebar-active-bg !text-sidebar-active font-semibold shadow-sidebar-active"),children:[o&&e.jsx("span",{className:"flex justify-center items-center text-[1.2rem] w-6 mr-[14px] transition-transform",children:o}),t,e.jsx(Re,{className:C("ml-auto text-xs opacity-60 transition-transform w-auto","group-data-[state=open]:rotate-90 group-data-[state=open]:text-sidebar-active group-data-[state=open]:opacity-100"),size:16})]})}),e.jsx(ho,{className:"overflow-hidden data-[state=open]:animate-slideDown data-[state=closed]:animate-slideUp",children:e.jsx("div",{className:"relative ml-[28px] py-[6px] border-l border-sidebar-border",children:a})})]}));an.displayName="SidebarCollapsible";const tn=W.forwardRef(({className:s,active:a,children:t,...n},o)=>e.jsx("a",{ref:o,className:C("relative flex items-center w-full pl-[24px] pr-[12px] py-[8px] text-[0.85rem] text-sidebar-color opacity-80 transition-colors duration-200 no-underline cursor-pointer bg-transparent border-none","hover:opacity-100 hover:text-sidebar-active hover:bg-sidebar-hover hover:rounded-[8px] hover:translate-x-[4px]",a&&"!text-sidebar-active opacity-100 font-semibold hover:translate-x-0",a&&"before:content-[''] before:absolute before:left-[-4px] before:top-1/2 before:-translate-y-1/2 before:w-[7px] before:h-[7px] before:rounded-full before:bg-sidebar-bg before:border-2 before:border-sidebar-active before:shadow-sidebar-active before:z-10",s),...n,children:t}));tn.displayName="SidebarSubLink";const gs=({className:s,...a})=>e.jsx("div",{className:C("border-t border-divider my-2 w-full",s),...a});function Ol({show:s,onHide:a}){const[t,n]=Wt(),o=l=>{l&&(l.startsWith("http")?window.open(l,"_blank"):n(l)),window.innerWidth<1024&&a()};return e.jsx(qt,{show:s,onHide:a,children:e.jsxs(en,{children:[e.jsx(sn,{onClick:()=>o("/"),active:t==="/",icon:e.jsx($o,{}),children:"HOME"}),e.jsxs(Bs,{title:"OUTBOUND",icon:e.jsx(Yt,{}),activePath:t,matchPath:"/docs/group/",children:[e.jsx(Q,{path:"/docs/group/",current:t,onSelect:o,children:"Outbound"}),e.jsx(Q,{path:"/docs/group/subscribe",current:t,onSelect:o,children:"Subscribe"}),e.jsx(Q,{path:"/docs/group/publish",current:t,onSelect:o,children:"Publish"}),e.jsx(Q,{path:"/docs/group/activates",current:t,onSelect:o,children:"Activates"})]}),e.jsx(Bs,{title:"INBOUND",icon:e.jsx(qo,{}),activePath:t,matchPath:"/docs/inbound/",children:e.jsx(Q,{path:"/docs/inbound/",current:t,onSelect:o,children:"Config"})}),e.jsxs(Bs,{title:"BYPASS",icon:e.jsx(el,{}),activePath:t,matchPath:"/docs/bypass/",children:[e.jsx(Q,{path:"/docs/bypass/",current:t,onSelect:o,children:"Rule"}),e.jsx(Q,{path:"/docs/bypass/list",current:t,onSelect:o,children:"List"}),e.jsx(Q,{path:"/docs/bypass/tag",current:t,onSelect:o,children:"Tag"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/bypass/resolver/",current:t,onSelect:o,children:"Resolver"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/bypass/test",current:t,onSelect:o,children:"Test Route"}),e.jsx(Q,{path:"/docs/bypass/block",current:t,onSelect:o,children:"Block History"})]}),e.jsxs(Bs,{title:"CONNECTIONS",icon:e.jsx(Et,{}),activePath:t,matchPath:"/docs/connections/",children:[e.jsx(Q,{path:"/docs/connections/v2",current:t,onSelect:o,children:"Connections"}),e.jsx(Q,{path:"/docs/connections/history",current:t,onSelect:o,children:"History"}),e.jsx(Q,{path:"/docs/connections/failed",current:t,onSelect:o,children:"Failed History"})]}),e.jsxs(Bs,{title:"SETTING",icon:e.jsx(Vt,{}),activePath:t,matchPath:"/docs/config/",children:[e.jsx(Q,{path:"/docs/config/",current:t,onSelect:o,children:"Config"}),e.jsx(Q,{path:"/docs/webui/",current:t,onSelect:o,children:"WebUI"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/config/backup/",current:t,onSelect:o,children:"Backup"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/config/log/",current:t,onSelect:o,children:"Log"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/config/pprof/",current:t,onSelect:o,children:"Pprof"}),e.jsx(Q,{path:"/docs/config/documents/",current:t,onSelect:o,children:"Documents"}),e.jsx(gs,{}),e.jsx(Q,{path:"/docs/config/licenses",current:t,onSelect:o,children:"Licenses"}),e.jsx(Q,{path:"/docs/config/about",current:t,onSelect:o,children:"About"})]})]})})}const aa=s=>s==="/"?"/":s.replace(/\/+$/,"");function Bs({title:s,icon:a,activePath:t,matchPath:n,children:o}){const l=aa(t).startsWith(aa(n)),[r,c]=h.useState(!1),[i,d]=h.useState(!1);return h.useEffect(()=>{d(!0),(window.innerWidth>=1024||l)&&c(!0)},[]),h.useEffect(()=>{l&&!r&&c(!0)},[l]),e.jsx(an,{title:s,icon:a,open:i?r:!1,onOpenChange:c,active:l,children:o})}function Q({path:s,current:a,onSelect:t,children:n}){const o=aa(a)===aa(s);return e.jsx(tn,{onClick:l=>{l.preventDefault(),t(s)},active:o,href:s,children:n})}function $l({children:s}){const[a,t]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"lg:!hidden !fixed top-[15px] left-[15px] z-[1030] w-[44px] h-[44px] shadow-[0_4px_15px_rgba(0,0,0,0.1)]",onClick:()=>t(!a),"aria-label":"Toggle navigation",children:e.jsx(sl,{})}),e.jsx(Ol,{show:a,onHide:()=>t(!1)}),e.jsx("main",{className:"min-h-screen lg:pt-0",children:s})]})}const ql="modulepreload",er=function(s){return"/"+s},rt={},sr=function(a,t,n){let o=Promise.resolve();if(t&&t.length>0){let i=function(d){return Promise.all(d.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=r?.nonce||r?.getAttribute("nonce");o=i(t.map(d=>{if(d=er(d),d in rt)return;rt[d]=!0;const b=d.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${x}`))return;const g=document.createElement("link");if(g.rel=b?"stylesheet":ql,b||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),b)return new Promise((p,u)=>{g.addEventListener("load",p),g.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return o.then(r=>{for(const c of r||[])c.status==="rejected"&&l(c.reason);return a().catch(l)})},ct={primary:"bg-blue-500/10 text-blue-600 dark:text-blue-400",secondary:"bg-gray-500/10 text-gray-600 dark:text-gray-400",success:"bg-green-500/10 text-green-600 dark:text-green-400",danger:"bg-red-500/10 text-red-600 dark:text-red-400",warning:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400",info:"bg-cyan-500/10 text-cyan-600 dark:text-cyan-400",light:"bg-white/10 text-gray-800 dark:text-white",dark:"bg-gray-900/10 text-gray-900 dark:text-gray-100 dark:bg-white/10"},me=({variant:s="primary",pill:a,className:t,children:n,...o})=>e.jsx("span",{className:C("inline-flex items-center justify-center px-[0.65em] py-[0.35em] text-xs font-bold leading-none",ct[s]||ct.primary,a?"rounded-full":"rounded",t),...o,children:n}),F=({children:s,className:a,style:t})=>e.jsx("div",{className:C("flex flex-col relative mb-8 overflow-hidden bg-sidebar-bg border border-sidebar-border rounded-[20px] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.1),0_10px_10px_-5px_rgba(0,0,0,0.04)] transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]","hover:-translate-y-1 hover:border-indigo-500/30 hover:shadow-[0_0_30px_rgba(99,102,241,0.1)]",a),style:{viewTransitionName:"config-card-root",...t},children:s}),M=({children:s,className:a,style:t})=>e.jsx("div",{className:C("flex items-center justify-between px-3 py-3 border-b border-sidebar-border",a),style:t,children:s}),L=({children:s,className:a,style:t})=>e.jsx("div",{className:C("grow p-6",a),style:t,children:s}),it=({children:s,className:a,style:t})=>e.jsx("div",{className:C("flex items-center mb-3 text-[1.1rem] font-semibold",a),style:t,children:s}),Ie=({children:s,className:a,style:t})=>e.jsx("div",{className:C("px-6 py-4 bg-transparent border-t border-sidebar-border",a),style:t,children:s}),Ue=({children:s,className:a,style:t,onClick:n})=>e.jsx("div",{className:C("flex items-center min-h-[72px] p-4 cursor-pointer rounded-xl border border-transparent transition-all duration-200","bg-[var(--list-item-bg)]","hover:bg-[var(--list-item-hover)] hover:border-[var(--list-item-border-hover)] hover:-translate-y-0.5",a),style:t,onClick:n,children:s});function Ss({items:s,onClickItem:a,footer:t,renderListItem:n,header:o,getKey:l}){return e.jsxs(F,{children:[o&&e.jsx(M,{children:o}),e.jsx(L,{children:e.jsx("div",{className:"flex flex-col gap-3",children:s.length>0?e.jsx(Pe,{initial:!1,mode:"popLayout",children:s.map((r,c)=>{const i=l?l(r):c;return e.jsx(T.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10,transition:{duration:.15}},transition:{duration:.2},children:e.jsx(Ue,{onClick:a?()=>a(r,c):void 0,children:n(r,c)})},i)})}):e.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-gray-500 dark:text-gray-400 p-5 opacity-50",children:[e.jsx(Xt,{className:"block mb-2 mx-auto",size:40}),"No records found."]})})}),t&&e.jsx(Ie,{children:e.jsx("div",{className:"flex justify-center",children:t})})]})}const D=({children:s,className:a,...t})=>e.jsx("label",{className:C("block mb-2 text-[13px] font-medium leading-[1.2] text-gray-500 whitespace-nowrap overflow-hidden text-ellipsis cursor-pointer dark:text-gray-400",a),...t,children:s});function ca({items:s,onClickItem:a,footer:t,renderListItem:n,header:o,onAddNew:l,adding:r}){const[c,i]=h.useState({value:""});return e.jsxs(F,{children:[o&&e.jsx(M,{children:o}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))"},children:[s.map((d,b)=>e.jsx("div",{className:"flex",children:e.jsx(Ue,{className:"w-full",onClick:()=>a?.(d,b),children:n(d,b)})},b)),l&&e.jsx("div",{className:"flex",children:e.jsx(Ue,{className:"w-full border border-dashed border-sidebar-border bg-[var(--bs-secondary-bg)] px-5 py-2",children:e.jsxs("div",{className:"flex items-center w-full min-h-[42px]",children:[e.jsx("input",{value:c.value,onChange:d=>i({value:d.target.value}),placeholder:"Create new...",className:"w-full p-2 text-base bg-transparent border-0 focus:outline-none placeholder:text-gray-400 dark:placeholder:text-gray-500",onKeyDown:d=>{!c.value||r||d.key==="Enter"&&l(c.value)},autoComplete:"off",disabled:r}),e.jsx("button",{onClick:()=>{!c.value||r||l(c.value)},className:"p-2 bg-transparent border-0 text-blue-600 dark:text-blue-400 cursor-pointer disabled:text-gray-500 disabled:cursor-not-allowed",disabled:r,children:r?e.jsx("div",{className:"inline-block w-5 h-5 align-text-bottom border-2 border-current border-r-transparent rounded-full animate-spin"}):e.jsx(_,{size:20})})]})})})]}),s.length===0&&!l&&e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 p-3",children:"No records found."})]}),t&&e.jsx(Ie,{children:t})]})}const Be=({icon:s,text:a,color:t="primary"})=>e.jsxs(me,{variant:t,className:"flex items-center gap-1 !px-2 !py-1 text-[0.7rem] uppercase whitespace-nowrap",children:[e.jsx(s,{size:12}),e.jsx("span",{children:a})]}),O=({children:s,className:a,style:t})=>e.jsx("div",{className:a,style:t,children:s}),Qe=({children:s})=>e.jsx("div",{className:"p-6 bg-[var(--modal-settings-bg)] border border-[var(--modal-settings-border)] rounded-lg transition-colors duration-300",children:s}),K=({icon:s,color:a,borderColor:t,background:n,className:o,textClassName:l,style:r,title:c,description:i})=>e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:C("flex shrink-0 items-center justify-center w-12 h-12 mr-5 text-xl rounded-[14px] border",o),style:{color:a,borderColor:t||`${a}33`,background:n||`${a}1A`,...r},children:e.jsx(s,{})}),c&&e.jsxs("div",{className:C("overflow-hidden",l),title:`${c}${i?` - ${i}`:""}`,children:[e.jsx("h5",{className:"mb-0 font-bold truncate",children:c}),e.jsx("small",{className:"block text-gray-500 dark:text-gray-400 truncate",children:i})]})]}),za=({icon:s,color:a,borderColor:t,background:n,className:o,style:l})=>e.jsx("div",{className:C("flex shrink-0 items-center justify-center w-12 h-12 rounded-full border",o),style:{color:a,borderColor:t||`${a}33`,background:n||`${a}1A`,...l},children:e.jsx(s,{})}),nn=({onEnter:s,className:a,style:t,size:n,inputStyle:o,inputClassName:l})=>{const[r,c]=h.useState("");return e.jsxs("div",{className:C("relative",a),style:t,children:[e.jsx("div",{className:C("absolute top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",n==="sm"?"left-[0.8rem]":"left-4"),children:e.jsx(al,{size:n==="sm"?14:18})}),e.jsx("input",{value:r,onChange:i=>c(i.target.value),placeholder:"Search...",onKeyDown:i=>i.key==="Enter"&&s(r.toLowerCase()),className:C("w-full bg-[var(--bs-secondary-bg)] border border-sidebar-border rounded-full focus:bg-[var(--bs-body-bg)] focus:border-blue-500 focus:outline-none transition-colors",n==="sm"?"h-8 pl-10 text-sm":"h-10 pl-12",l),style:o,autoComplete:"off"})]})},on=({msg:s,code:a,raw:t})=>e.jsxs("div",{className:"p-4 rounded bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800/30",children:[e.jsxs("h4",{className:"font-semibold text-lg mb-2",children:[a," - ",s]}),e.jsx("pre",{className:"mb-0 text-sm whitespace-pre-wrap",children:t})]});let Ja="",Ka="api_url_v2";function Ha(){let s=localStorage.getItem(Ka);return s?JSON.parse(s):Ja}let ln="https://clients3.google.com/generate_204",rn="latency_dns_url_v2",cn="dns.nextdns.io:853",dn="latency_http_url_v2",mn=!0,hn="latency_ipv6_v2",un="http://ip.sb",xn="latency_ip_url_v2",bn="stun.nextcloud.com:3478",gn="latency_stun_url_v2",pn="stun.nextcloud.com:443",fn="latency_stun_tcp_url_v2";function z(s,a){return ls(s?ve(s):null,s?Is(s):null,a)}const ve=s=>`/${s.parent.typeName}/${s.name}`;function Is(s,a,t){return()=>t?_t(s.output,t):fetch(`${Ha()}${ve(s)}`,{method:"POST",body:a?la(s.input,a):void 0}).then(async n=>{if(!n.ok)throw{code:n.status,msg:n.statusText,raw:n.text()};return La(s.output,new Uint8Array(await n.arrayBuffer()))})}async function G(s,a){const t=await fetch(`${Ha()}${ve(s)}`,{method:"POST",body:a?la(s.input,a):void 0});return t.ok?{data:La(s.output,new Uint8Array(await t.arrayBuffer()))}:{error:{code:t.status,msg:await t.text()}}}function jn(s,a,t,n){const o=Ha();return(l,{next:r})=>{const c=new URL(o!==""?o:window.location.toString());c.hash="",c.pathname=ve(s),c.protocol=c.protocol==="https:"?"wss:":"ws:";let i,d=!1,b=[],x=null;const g=()=>{if(b.length===0)return;const u=b;b=[],x=null,r(null,v=>t(u,v))},p=()=>{d||(console.log(`connecting to: ${c}`),i=new WebSocket(c),i.binaryType="arraybuffer",i.addEventListener("open",u=>{console.log(`connect to: ${c}, event type: ${u.type}`),i?.send(la(s.input,a))}),i.addEventListener("message",u=>{const v=La(s.output,new Uint8Array(u.data));n?.throttle?(b.push(v),x||(x=setTimeout(g,n.throttle))):r(null,j=>t([v],j))}),i.addEventListener("error",u=>{const v="websocket have some error";r({msg:v,code:500}),console.log(v,u.type)}),i.addEventListener("close",u=>{console.log("websocket closed, code: "+u.code+", isClosed: ",d),d||n?.onDisconnect?.(),r(null,void 0),!d&&(console.log("reconnect after 2 seconds"),setTimeout(()=>p(),2e3))}))};return p(),()=>{d=!0,x&&(clearTimeout(x),x=null),i!==void 0&&(console.log(`close: ${l}`),i.close(),i=void 0)}}}function ar(s,a){const t=W.lazy(s);let n=a?.fallback||null;if(!n&&a?.loading){if(W.isValidElement(a.loading))n=a.loading;else if(typeof a.loading=="function"){const l=a.loading;n=e.jsx(l,{})}}return l=>e.jsx(h.Suspense,{fallback:n,children:e.jsx(t,{...l})})}const H=({className:s,size:a="md",...t})=>{const n=a==="sm"?"w-4 h-4 border-2":"w-6 h-6 border-4";return e.jsx("div",{className:C("inline-block rounded-full animate-spin border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",n,s),role:"status",...t,children:e.jsx("span",{className:"sr-only",children:"Loading..."})})};function Y(s){return e.jsxs("div",{className:"z-[1090] flex flex-col justify-center items-center",style:{height:"100%",...s.style},children:[s.children!==void 0&&e.jsx(e.Fragment,{children:e.jsx(ye,{statusCode:s.code!==void 0?s.code:500,title:s.children})}),e.jsx("div",{className:"p-2",children:e.jsx(H,{})})]})}const ye=({statusCode:s,title:a,raw:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold text-center",children:[s," | ",e.jsx("a",{className:"text-base font-normal no-underline text-inherit cursor-pointer",children:a})]}),t&&e.jsx("pre",{className:"my-2 text-xl text-center text-red-500",children:t})]}),Da=({children:s,className:a})=>e.jsx("ul",{className:C("list-none p-0 m-0",a),children:s}),k=({label:s,value:a,className:t})=>a==null||a===""?null:e.jsx("li",{className:C("py-3 border-b border-sidebar-border last:border-b-0 transition-colors duration-200",t),children:e.jsxs("div",{className:"flex flex-col gap-1 min-[576px]:flex-row min-[576px]:justify-between min-[576px]:items-start min-[576px]:gap-4",children:[e.jsx("div",{className:"notranslate shrink-0 min-w-[120px] text-sm font-semibold text-sidebar-header capitalize leading-normal",children:s}),e.jsx("div",{className:"notranslate grow text-[15px] font-normal text-sidebar-color leading-normal break-all min-[576px]:text-right",children:a})]})}),tr=({children:s,className:a})=>e.jsx("li",{className:C("py-3 border-b border-sidebar-border last:border-b-0 transition-colors duration-200",a),children:s}),P=q("ChNjb25maWcvYnlwYXNzLnByb3RvEg55dWhhaWluLmJ5cGFzcyLXAQoIY29uZmlndjISTwoOdWRwX3Byb3h5X2ZxZG4YASABKA4yJy55dWhhaWluLmJ5cGFzcy51ZHBfcHJveHlfZnFkbl9zdHJhdGVneVIOdWRwX3Byb3h5X2ZxZG4SKAoPcmVzb2x2ZV9sb2NhbGx5GAIgASgIUg9yZXNvbHZlX2xvY2FsbHkSKAoPZGlyZWN0X3Jlc29sdmVyGAMgASgJUg9kaXJlY3RfcmVzb2x2ZXISJgoOcHJveHlfcmVzb2x2ZXIYBCABKAlSDnByb3h5X3Jlc29sdmVyIkQKD21heG1pbmRkYl9nZW9pcBIiCgxkb3dubG9hZF91cmwYASABKAlSDGRvd25sb2FkX3VybBINCgVlcnJvchgCIAEoCSKgBAoNYnlwYXNzX2NvbmZpZxJPCg51ZHBfcHJveHlfZnFkbhgGIAEoDjInLnl1aGFpaW4uYnlwYXNzLnVkcF9wcm94eV9mcWRuX3N0cmF0ZWd5Ug51ZHBfcHJveHlfZnFkbhIoCg9yZXNvbHZlX2xvY2FsbHkYCSABKAhSD3Jlc29sdmVfbG9jYWxseRIoCg9kaXJlY3RfcmVzb2x2ZXIYCiABKAlSD2RpcmVjdF9yZXNvbHZlchImCg5wcm94eV9yZXNvbHZlchgLIAEoCVIOcHJveHlfcmVzb2x2ZXISMgoIcnVsZXNfdjIYDCADKAsyFi55dWhhaWluLmJ5cGFzcy5ydWxldjJSCHJ1bGVzX3YyEjcKBWxpc3RzGA0gAygLMigueXVoYWlpbi5ieXBhc3MuYnlwYXNzX2NvbmZpZy5MaXN0c0VudHJ5EkkKD21heG1pbmRkYl9nZW9pcBgQIAEoCzIfLnl1aGFpaW4uYnlwYXNzLm1heG1pbmRkYl9nZW9pcFIPbWF4bWluZGRiX2dlb2lwEkYKDnJlZnJlc2hfY29uZmlnGBEgASgLMh4ueXVoYWlpbi5ieXBhc3MucmVmcmVzaF9jb25maWdSDnJlZnJlc2hfY29uZmlnGkIKCkxpc3RzRW50cnkSCwoDa2V5GAEgASgJEiMKBXZhbHVlGAIgASgLMhQueXVoYWlpbi5ieXBhc3MubGlzdDoCOAEieQoOcmVmcmVzaF9jb25maWcSKgoQcmVmcmVzaF9pbnRlcnZhbBgBIAEoBFIQcmVmcmVzaF9pbnRlcnZhbBIsChFsYXN0X3JlZnJlc2hfdGltZRgCIAEoBFIRbGFzdF9yZWZyZXNoX3RpbWUSDQoFZXJyb3IYAyABKAkipgMKC21vZGVfY29uZmlnEiIKBG1vZGUYASABKA4yFC55dWhhaWluLmJ5cGFzcy5tb2RlEgsKA3RhZxgCIAEoCRIQCghob3N0bmFtZRgDIAMoCRJMChByZXNvbHZlX3N0cmF0ZWd5GAQgASgOMiAueXVoYWlpbi5ieXBhc3MucmVzb2x2ZV9zdHJhdGVneVIQcmVzb2x2ZV9zdHJhdGVneRJhChd1ZHBfcHJveHlfZnFkbl9zdHJhdGVneRgGIAEoDjInLnl1aGFpaW4uYnlwYXNzLnVkcF9wcm94eV9mcWRuX3N0cmF0ZWd5Uhd1ZHBfcHJveHlfZnFkbl9zdHJhdGVneRIQCghyZXNvbHZlchgIIAEoCRJJCgplcnJvcl9tc2dzGAcgAygLMioueXVoYWlpbi5ieXBhc3MubW9kZV9jb25maWcuRXJyb3JNc2dzRW50cnlSCWVycm9yX21zZxowCg5FcnJvck1zZ3NFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBSgQIBRAGUg51ZHBfcHJveHlfZnFkbiL5AQoLcmVtb3RlX3J1bGUSDwoHZW5hYmxlZBgBIAEoCBIMCgRuYW1lGAIgASgJEjAKBGZpbGUYAyABKAsyIC55dWhhaWluLmJ5cGFzcy5yZW1vdGVfcnVsZV9maWxlSAASMAoEaHR0cBgEIAEoCzIgLnl1aGFpaW4uYnlwYXNzLnJlbW90ZV9ydWxlX2h0dHBIABIcCgllcnJvcl9tc2cYBSABKAlSCWVycm9yX21zZxI/CgxkZWZhdWx0X21vZGUYBiABKAsyGy55dWhhaWluLmJ5cGFzcy5tb2RlX2NvbmZpZ1IMZGVmYXVsdF9tb2RlQggKBm9iamVjdCIgChByZW1vdGVfcnVsZV9maWxlEgwKBHBhdGgYASABKAkiLwoQcmVtb3RlX3J1bGVfaHR0cBILCgN1cmwYASABKAkSDgoGbWV0aG9kGAIgASgJIhQKBGhvc3QSDAoEbGlzdBgBIAEoCSIXCgdwcm9jZXNzEgwKBGxpc3QYASABKAkiJQoGc291cmNlEgwKBG5hbWUYASABKAkSDQoFbmFtZXMYAiADKAkiFQoEcG9ydBINCgVwb3J0cxgBIAEoCSIaCgVnZW9pcBIRCgljb3VudHJpZXMYASABKAkihwIKBHJ1bGUSJAoEaG9zdBgBIAEoCzIULnl1aGFpaW4uYnlwYXNzLmhvc3RIABIqCgdwcm9jZXNzGAIgASgLMhcueXVoYWlpbi5ieXBhc3MucHJvY2Vzc0gAEikKB2luYm91bmQYAyABKAsyFi55dWhhaWluLmJ5cGFzcy5zb3VyY2VIABIqCgduZXR3b3JrGAQgASgLMhcueXVoYWlpbi5ieXBhc3MubmV0d29ya0gAEiQKBHBvcnQYBSABKAsyFC55dWhhaWluLmJ5cGFzcy5wb3J0SAASJgoFZ2VvaXAYBiABKAsyFS55dWhhaWluLmJ5cGFzcy5nZW9pcEgAQggKBm9iamVjdCJvCgduZXR3b3JrEjUKB25ldHdvcmsYASABKA4yJC55dWhhaWluLmJ5cGFzcy5uZXR3b3JrLm5ldHdvcmtfdHlwZSItCgxuZXR3b3JrX3R5cGUSCwoHdW5rbm93bhAAEgcKA3RjcBABEgcKA3VkcBACIikKAm9yEiMKBXJ1bGVzGAEgAygLMhQueXVoYWlpbi5ieXBhc3MucnVsZSKtAgoGcnVsZXYyEgwKBG5hbWUYASABKAkSIgoEbW9kZRgCIAEoDjIULnl1aGFpaW4uYnlwYXNzLm1vZGUSCwoDdGFnGAMgASgJEkwKEHJlc29sdmVfc3RyYXRlZ3kYBCABKA4yIC55dWhhaWluLmJ5cGFzcy5yZXNvbHZlX3N0cmF0ZWd5UhByZXNvbHZlX3N0cmF0ZWd5EmEKF3VkcF9wcm94eV9mcWRuX3N0cmF0ZWd5GAUgASgOMicueXVoYWlpbi5ieXBhc3MudWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3lSF3VkcF9wcm94eV9mcWRuX3N0cmF0ZWd5EhAKCHJlc29sdmVyGAYgASgJEiEKBXJ1bGVzGAcgAygLMhIueXVoYWlpbi5ieXBhc3Mub3IikgIKBGxpc3QSPAoJbGlzdF90eXBlGAEgASgOMiMueXVoYWlpbi5ieXBhc3MubGlzdC5saXN0X3R5cGVfZW51bVIEdHlwZRIMCgRuYW1lGAIgASgJEisKBWxvY2FsGAMgASgLMhoueXVoYWlpbi5ieXBhc3MubGlzdF9sb2NhbEgAEi0KBnJlbW90ZRgEIAEoCzIbLnl1aGFpaW4uYnlwYXNzLmxpc3RfcmVtb3RlSAASHgoKZXJyb3JfbXNncxgFIAMoCVIKZXJyb3JfbXNncyI6Cg5saXN0X3R5cGVfZW51bRIICgRob3N0EAASCwoHcHJvY2VzcxABEhEKDWhvc3RzX2FzX2hvc3QQAkIGCgRsaXN0IhsKCmxpc3RfbG9jYWwSDQoFbGlzdHMYASADKAkiGwoLbGlzdF9yZW1vdGUSDAoEdXJscxgBIAMoCSo0CgRtb2RlEgoKBmJ5cGFzcxAAEgoKBmRpcmVjdBABEgkKBXByb3h5EAISCQoFYmxvY2sQAypfChByZXNvbHZlX3N0cmF0ZWd5EgsKB2RlZmF1bHQQABIPCgtwcmVmZXJfaXB2NBABEg0KCW9ubHlfaXB2NBACEg8KC3ByZWZlcl9pcHY2EAMSDQoJb25seV9pcHY2EAQqXQoXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kSIwofdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3lfZGVmYXVsdBAAEgsKB3Jlc29sdmUQARIQCgxza2lwX3Jlc29sdmUQAkI4Wi5naXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvY29uZmlnkgMF0j4CEANiCGVkaXRpb25zcOgH",[ee]),nr=A(P,1),dt=A(P,3),Ma=A(P,8),or=A(P,9),mt=A(P,10),lr=A(P,11),rr=A(P,12),Ee=A(P,13),cr=A(P,14);var $s=(s=>(s[s.unknown=0]="unknown",s[s.tcp=1]="tcp",s[s.udp=2]="udp",s))($s||{});const ir=A(P,15),vn=A(P,16),dr=A(P,17);var yn=(s=>(s[s.host=0]="host",s[s.process=1]="process",s[s.hosts_as_host=2]="hosts_as_host",s))(yn||{});const mr=fe(P,17,0),ya=A(P,18),ht=A(P,19);var Ws=(s=>(s[s.bypass=0]="bypass",s[s.direct=1]="direct",s[s.proxy=2]="proxy",s[s.block=3]="block",s))(Ws||{});const hr=fe(P,0);var An=(s=>(s[s.default=0]="default",s[s.prefer_ipv4=1]="prefer_ipv4",s[s.only_ipv4=2]="only_ipv4",s[s.prefer_ipv6=3]="prefer_ipv6",s[s.only_ipv6=4]="only_ipv6",s))(An||{});const ur=fe(P,1);var es=(s=>(s[s.udp_proxy_fqdn_strategy_default=0]="udp_proxy_fqdn_strategy_default",s[s.resolve=1]="resolve",s[s.skip_resolve=2]="skip_resolve",s))(es||{});const ut=fe(P,2),ia=q("ChZzdGF0aXN0aWMvY29uZmlnLnByb3RvEhF5dWhhaWluLnN0YXRpc3RpYyKEAQoIbmV0X3R5cGUSNQoJY29ubl90eXBlGAEgASgOMhcueXVoYWlpbi5zdGF0aXN0aWMudHlwZVIJY29ubl90eXBlEkEKD3VuZGVybHlpbmdfdHlwZRgCIAEoDjIXLnl1aGFpaW4uc3RhdGlzdGljLnR5cGVSD3VuZGVybHlpbmdfdHlwZSKSBgoKY29ubmVjdGlvbhIMCgRhZGRyGAEgASgJEgoKAmlkGAIgASgEEikKBHR5cGUYAyABKAsyGy55dWhhaWluLnN0YXRpc3RpYy5uZXRfdHlwZRIOCgZzb3VyY2UYBSABKAkSDwoHaW5ib3VuZBgGIAEoCRIiCgxpbmJvdW5kX25hbWUYGyABKAlSDGluYm91bmRfbmFtZRIRCglpbnRlcmZhY2UYHSABKAkSEAoIb3V0Ym91bmQYGCABKAkSHQoKbG9jYWxfYWRkchgaIAEoCVIJTG9jYWxBZGRyEhQKDGRlc3Rpb25hdGlvbhgHIAEoCRIYCgdmYWtlX2lwGAggASgJUgdmYWtlX2lwEg0KBWhvc3RzGAkgASgJEg4KBmRvbWFpbhgKIAEoCRIKCgJpcBgLIAEoCRILCgN0YWcYDCABKAkSDAoEaGFzaBgNIAEoCRIcCglub2RlX25hbWUYGSABKAlSCW5vZGVfbmFtZRIQCghwcm90b2NvbBgOIAEoCRIPCgdwcm9jZXNzGA8gASgJEgsKA3BpZBgQIAEoBBILCgN1aWQYESABKAQSKAoPdGxzX3NlcnZlcl9uYW1lGBIgASgJUg90bHNfc2VydmVyX25hbWUSHAoJaHR0cF9ob3N0GBMgASgJUglodHRwX2hvc3QSEQoJY29tcG9uZW50GBQgASgJEiYKDnVkcF9taWdyYXRlX2lkGBUgASgEUg51ZHBfbWlncmF0ZV9pZBIiCgRtb2RlGBYgASgOMhQueXVoYWlpbi5ieXBhc3MubW9kZRJMCg1tYXRjaF9oaXN0b3J5GBwgAygLMiYueXVoYWlpbi5zdGF0aXN0aWMubWF0Y2hfaGlzdG9yeV9lbnRyeVINbWF0Y2hfaGlzdG9yeRIQCghyZXNvbHZlchgeIAEoCRILCgNnZW8YHyABKAkSIgoMb3V0Ym91bmRfZ2VvGCAgASgJUgxvdXRib3VuZF9nZW8SDQoFbGlzdHMYISADKAlKBAgEEAVKBAgXEBhSBWV4dHJhUgttb2RlX3JlYXNvbiI9CgxtYXRjaF9yZXN1bHQSHAoJbGlzdF9uYW1lGAEgASgJUglsaXN0X25hbWUSDwoHbWF0Y2hlZBgCIAEoCCJlChNtYXRjaF9oaXN0b3J5X2VudHJ5EhwKCXJ1bGVfbmFtZRgBIAEoCVIJcnVsZV9uYW1lEjAKB2hpc3RvcnkYAiADKAsyHy55dWhhaWluLnN0YXRpc3RpYy5tYXRjaF9yZXN1bHQqjwEKBHR5cGUSCwoHdW5rbm93bhAAEgcKA3RjcBABEggKBHRjcDQQAhIICgR0Y3A2EAMSBwoDdWRwEAQSCAoEdWRwNBAFEggKBHVkcDYQBhIGCgJpcBAHEgcKA2lwNBAIEgcKA2lwNhAJEggKBHVuaXgQChIMCgh1bml4Z3JhbRALEg4KCnVuaXhwYWNrZXQQDEI7WjFnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvc3RhdGlzdGljkgMF0j4CEANiCGVkaXRpb25zcOgH",[ee,P]),Nn=A(ia,1);var we=(s=>(s[s.unknown=0]="unknown",s[s.tcp=1]="tcp",s[s.tcp4=2]="tcp4",s[s.tcp6=3]="tcp6",s[s.udp=4]="udp",s[s.udp4=5]="udp4",s[s.udp6=6]="udp6",s[s.ip=7]="ip",s[s.ip4=8]="ip4",s[s.ip6=9]="ip6",s[s.unix=10]="unix",s[s.unixgram=11]="unixgram",s[s.unixpacket=12]="unixpacket",s))(we||{});const Cn=fe(ia,0),wn=q("ChNhcGkvc3RhdGlzdGljLnByb3RvEhV5dWhhaWluLmFwaS5zdGF0aXN0aWMiKwoHY291bnRlchIQCghkb3dubG9hZBgBIAEoBBIOCgZ1cGxvYWQYAiABKAQiwgEKCnRvdGFsX2Zsb3cSEAoIZG93bmxvYWQYASABKAQSDgoGdXBsb2FkGAIgASgEEkEKCGNvdW50ZXJzGAMgAygLMi8ueXVoYWlpbi5hcGkuc3RhdGlzdGljLnRvdGFsX2Zsb3cuQ291bnRlcnNFbnRyeRpPCg1Db3VudGVyc0VudHJ5EgsKA2tleRgBIAEoBBItCgV2YWx1ZRgCIAEoCzIeLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy5jb3VudGVyOgI4ASL2AQoLbm90aWZ5X2RhdGESNwoKdG90YWxfZmxvdxgDIAEoCzIhLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy50b3RhbF9mbG93SAASTwoWbm90aWZ5X25ld19jb25uZWN0aW9ucxgBIAEoCzItLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy5ub3RpZnlfbmV3X2Nvbm5lY3Rpb25zSAASVQoZbm90aWZ5X3JlbW92ZV9jb25uZWN0aW9ucxgCIAEoCzIwLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy5ub3RpZnlfcmVtb3ZlX2Nvbm5lY3Rpb25zSABCBgoEZGF0YSJMChZub3RpZnlfbmV3X2Nvbm5lY3Rpb25zEjIKC2Nvbm5lY3Rpb25zGAEgAygLMh0ueXVoYWlpbi5zdGF0aXN0aWMuY29ubmVjdGlvbiIoChlub3RpZnlfcmVtb3ZlX2Nvbm5lY3Rpb25zEgsKA2lkcxgBIAMoBCK3AQoOZmFpbGVkX2hpc3RvcnkSKQoIcHJvdG9jb2wYASABKA4yFy55dWhhaWluLnN0YXRpc3RpYy50eXBlEgwKBGhvc3QYAiABKAkSDQoFZXJyb3IYAyABKAkSDwoHcHJvY2VzcxgEIAEoCRIoCgR0aW1lGAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIiCgxmYWlsZWRfY291bnQYBiABKARSDGZhaWxlZF9jb3VudCKBAQoTZmFpbGVkX2hpc3RvcnlfbGlzdBI2CgdvYmplY3RzGAEgAygLMiUueXVoYWlpbi5hcGkuc3RhdGlzdGljLmZhaWxlZF9oaXN0b3J5EjIKFGR1bXBfcHJvY2Vzc19lbmFibGVkGAIgASgIUhRkdW1wX3Byb2Nlc3NfZW5hYmxlZCJ5CgthbGxfaGlzdG9yeRIxCgpjb25uZWN0aW9uGAEgASgLMh0ueXVoYWlpbi5zdGF0aXN0aWMuY29ubmVjdGlvbhINCgVjb3VudBgCIAEoBBIoCgR0aW1lGAMgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCJ7ChBhbGxfaGlzdG9yeV9saXN0EjMKB29iamVjdHMYASADKAsyIi55dWhhaWluLmFwaS5zdGF0aXN0aWMuYWxsX2hpc3RvcnkSMgoUZHVtcF9wcm9jZXNzX2VuYWJsZWQYAiABKAhSFGR1bXBfcHJvY2Vzc19lbmFibGVkMucDCgtjb25uZWN0aW9ucxJOCgVjb25ucxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRotLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy5ub3RpZnlfbmV3X2Nvbm5lY3Rpb25zElYKCmNsb3NlX2Nvbm4SMC55dWhhaWluLmFwaS5zdGF0aXN0aWMubm90aWZ5X3JlbW92ZV9jb25uZWN0aW9ucxoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJCCgV0b3RhbBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRohLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy50b3RhbF9mbG93EkYKBm5vdGlmeRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoiLnl1aGFpaW4uYXBpLnN0YXRpc3RpYy5ub3RpZnlfZGF0YTABElQKDmZhaWxlZF9oaXN0b3J5EhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GioueXVoYWlpbi5hcGkuc3RhdGlzdGljLmZhaWxlZF9oaXN0b3J5X2xpc3QSTgoLYWxsX2hpc3RvcnkSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaJy55dWhhaWluLmFwaS5zdGF0aXN0aWMuYWxsX2hpc3RvcnlfbGlzdEI1WitnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvYXBpkgMF0j4CEANiCGVkaXRpb25zcOgH",[zs,ia,Ot,ee]),xr=A(wn,4),ts=Se(wn,0),Rs=({label:s,value:a,error:t})=>e.jsxs("div",{className:`
                grow basis-[calc(25%-1.25rem)] min-w-[200px] relative p-4
                bg-[var(--metric-bg)] border border-[var(--metric-border)] rounded-2xl
                flex flex-col justify-center
                transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1),0_2px_4px_-1px_rgba(0,0,0,0.06)]
                hover:-translate-y-[5px] hover:border-[rgba(99,102,241,0.3)] hover:shadow-[0_0_30px_rgba(99,102,241,0.1)]
            `,children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-[var(--metric-label,#64748b)] mb-1 font-semibold",children:s}),e.jsx("div",{className:`text-[1.35rem] font-bold font-mono text-[var(--metric-value,#0f172a)] animate-dataUpdate ${t?"text-red-500":""}`,children:t||a})]}),ps={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"};function br(s){return s>=0x4000000000000?{bytes:s/0x4000000000000,unit:ps.PB}:s>=1099511627776?{bytes:s/1099511627776,unit:ps.TB}:s>=1073741824?{bytes:s/1073741824,unit:ps.GB}:s>=1048576?{bytes:s/1048576,unit:ps.MB}:s>=1024?{bytes:s/1024,unit:ps.KB}:{bytes:s,unit:ps.B}}const js=(s=0,a=2,t="")=>{const{bytes:n,unit:o}=br(s);return`${n.toFixed(a)}${t}${o}`};class xt{download;download_rate;upload;upload_rate;counters;time;constructor(a=0,t=0,n=0,o=0,l={}){this.download=a,this.download_rate=t,this.upload=n,this.upload_rate=o,this.counters=l,this.time=new Date}DownloadString(){return`${js(this.download_rate,2," ")+"/S"}`}UploadString(){return`${js(this.upload_rate,2," ")+"/S"}`}DownloadTotalString(){return js(this.download)}UploadTotalString(){return js(this.upload)}}const gr=(s,a)=>{const t=(new Date().getTime()-a.time.getTime())/1e3;if((a.download!==0||a.upload!==0)&&t!==0){const n=Number(s.download),o=Number(s.upload);return{download_rate:n>a.download?(n-a.download)/t:0,upload_rate:o>a.upload?(o-a.upload)/t:0}}return{download_rate:0,upload_rate:0}},pr=()=>{const[s,a]=h.useState(new xt(0,0,0,0,{}));return ls(ve(ts.method.total),async()=>G(ts.method.total).then(async({data:t,error:n})=>{if(n)throw n;if(t){const o=gr(t,s),l=new xt(Number(t.download),o.download_rate,Number(t.upload),o.upload_rate,t.counters);return a(l),l}}),{refreshInterval:2e3})},fr=({lastFlow:s,flow_error:a,extra_fields:t})=>e.jsxs("div",{className:"flex flex-wrap gap-3 w-full mb-3",style:{viewTransitionName:"flow-card-root !important"},children:[e.jsx(Rs,{label:"Total Download",value:s?s.DownloadTotalString():"Loading...",error:a?.msg}),e.jsx(Rs,{label:"Download Rate",value:s?s.DownloadString():"Loading...",error:a?.msg}),e.jsx(Rs,{label:"Total Upload",value:s?s.UploadTotalString():"Loading...",error:a?.msg}),e.jsx(Rs,{label:"Upload Rate",value:s?s.UploadString():"Loading...",error:a?.msg}),t&&t.map((n,o)=>e.jsx(Rs,{label:n.label,value:n.value||"Loading...",error:n.error},`extra-field-${o}`))]}),Sn=W.memo(({onUpdate:s,onFlow:a,extra_fields:t})=>{const{data:n,error:o}=pr();return h.useEffect(()=>{s&&n&&s(n.counters),a&&n&&a(n)},[s,a,n]),e.jsx(fr,{lastFlow:n,flow_error:o,extra_fields:t})}),In=({value:s,startContent:a,endContent:t,showNodeModal:n})=>e.jsx(e.Fragment,{children:e.jsxs(Da,{children:[a,e.jsx(k,{label:"Id",value:s.id.toString()}),e.jsx(k,{label:"Addr",value:s.addr}),e.jsx(k,{label:"Geo",value:s.geo}),e.jsx(k,{label:"Type",value:s.type?.connType?we[s.type?.connType]:void 0}),e.jsx(k,{label:"UnderlyingType",value:s.type?.underlyingType?we[s.type?.underlyingType]:void 0}),e.jsx(k,{label:"Inbound",value:s.inboundName}),e.jsx(k,{label:"InboundAddr",value:s.inbound}),e.jsx(k,{label:"Source",value:s.source}),e.jsx(k,{label:"RemoteAddr",value:s.outbound}),e.jsx(k,{label:"Remote Geo",value:s.outboundGeo}),e.jsx(k,{label:"Interface",value:s.interface}),e.jsx(k,{label:"LocalAddr",value:s.localAddr}),e.jsx(k,{label:"Destination",value:s.destionation}),e.jsx(k,{label:"FakeIP",value:s.fakeIp}),e.jsx(k,{label:"Hosts",value:s.hosts}),e.jsx(k,{label:"Domain",value:s.domain}),e.jsx(k,{label:"IP",value:s.ip}),e.jsx(k,{label:"Tag",value:s.tag}),e.jsx(k,{label:"Lists",value:s.lists?.join(", ")}),e.jsx(k,{label:"Resolver",value:s.resolver}),(s.nodeName||s.hash)&&e.jsx(k,{label:"Point",value:n?e.jsx("a",{href:"#",onClick:o=>{o.preventDefault(),n(s.hash)},children:s.nodeName?s.nodeName:s.hash}):e.jsx(e.Fragment,{children:s.nodeName?s.nodeName:s.hash})}),e.jsx(k,{label:"Protocol",value:s.protocol}),e.jsx(k,{label:"Process",value:s.process}),e.jsx(k,{label:"TlsServerName",value:s.tlsServerName}),e.jsx(k,{label:"HttpHost",value:s.httpHost}),e.jsx(k,{label:"Component",value:s.component}),e.jsx(k,{label:"Mode",value:Ws[s.mode]}),e.jsx(k,{label:"UdpMigrateId",value:s.udpMigrateId?s.udpMigrateId.toString():""}),e.jsx(k,{label:"Pid",value:s.pid?s.pid.toString():""}),e.jsx(k,{label:"Uid",value:s.uid?s.uid.toString():""}),e.jsx(vr,{value:s.matchHistory||[]}),t]})}),jr=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500 opacity-80",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),vr=({value:s})=>!s||s.length===0?null:e.jsx(tr,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3 w-full",children:[e.jsx("div",{className:"notranslate capitalize shrink-0 mb-3 sm:mb-0 text-sidebar-header font-semibold min-w-[110px] text-sm",children:"MatchHistory"}),e.jsx("div",{className:"grow w-full flex flex-col gap-3",children:s.map((a,t)=>e.jsxs("div",{className:"rounded-xl p-3 border border-sidebar-border bg-sidebar-hover",children:[e.jsx("div",{className:"mb-2 pb-2 border-b border-sidebar-border flex justify-between items-center",children:e.jsx("span",{className:"text-xs text-sidebar-header font-bold uppercase tracking-wider",children:a.ruleName})}),e.jsx("div",{className:"flex flex-col gap-2",children:a.history&&a.history.map((n,o)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"notranslate break-all text-sm text-sidebar-color",children:n.listName}),e.jsxs("div",{className:"flex items-center gap-2 pl-3 shrink-0",children:[e.jsx("span",{className:C("text-xs font-medium",n.matched?"text-green-500 opacity-100":"text-sidebar-color opacity-70"),children:n.matched?"Hit":"Miss"}),e.jsx("div",{className:C("flex items-center justify-center rounded-full w-6 h-6",n.matched?"bg-green-500/10":"bg-white/5"),children:n.matched?e.jsx(rs,{size:14}):e.jsx(jr,{})})]})]},"list-"+n.listName+o))})]},"rule-"+a.ruleName+t))})]})});function Ls({statusCode:s,title:a,description:t}){return e.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[e.jsx("h1",{children:s}),e.jsx("p",{children:a}),e.jsx("p",{children:t})]})}let Wn={x:0,y:0},bt=!1;const yr=s=>{Wn={x:s.clientX,y:s.clientY}},Ar=()=>(h.useEffect(()=>{bt||(window.addEventListener("click",yr,!0),bt=!0)},[]),()=>Wn),kn=h.createContext({open:!1,transformOrigin:"center center"}),ne=({children:s,open:a,onOpenChange:t,...n})=>{const o=Ar(),[l,r]=h.useState("center center");return h.useEffect(()=>{if(a){const c=o();if(c.x!==0||c.y!==0){r(`${c.x}px ${c.y}px`);return}}},[a]),e.jsx(uo,{open:a,onOpenChange:t,...n,children:e.jsx(kn.Provider,{value:{open:!!a,transformOrigin:l},children:s})})},Nr=xo,Cr=Bt,wr={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0,transition:{duration:.2}}},Sr={hidden:{opacity:0,scale:.2,y:"-50%",x:"-50%"},visible:{opacity:1,scale:1,y:"-50%",x:"-50%",transition:{type:"spring",damping:25,stiffness:300}},exit:{opacity:0,scale:.2,y:"-50%",x:"-50%",transition:{duration:.2}}},ae=({className:s,children:a,style:t,...n})=>{const{open:o,transformOrigin:l}=h.useContext(kn);return e.jsx(Pe,{children:o&&e.jsxs(Nr,{forceMount:!0,children:[e.jsx(bo,{asChild:!0,forceMount:!0,children:e.jsx(T.div,{className:"fixed inset-0 z-[1050] bg-black/50",variants:wr,initial:"hidden",animate:"visible",exit:"exit"})}),e.jsx(go,{asChild:!0,forceMount:!0,children:e.jsx(T.div,{className:C("fixed top-1/2 left-1/2 w-[90vw] max-w-[var(--bs-modal-width,500px)] max-h-[85vh] z-[1055] flex flex-col outline-none overflow-hidden bg-[var(--bs-body-bg)] text-[var(--bs-modal-color)] border border-sidebar-border rounded-[32px] shadow-[var(--bs-modal-box-shadow)] p-[5px] will-change-[transform,opacity]",s),variants:Sr,initial:"hidden",animate:"visible",exit:"exit",style:{transformOrigin:l,...t},...n,children:a})})]})})};ae.displayName="ModalContent";const oe=({className:s,children:a,closeButton:t=!1,...n})=>e.jsxs("div",{className:C("flex items-center justify-between p-[var(--bs-modal-header-padding,1rem_1rem)] border-b border-[var(--sidebar-border-color,#dee2e6)]",s),...n,children:[a,t&&e.jsx(Bt,{className:"flex items-center justify-center p-2 -m-2 ml-auto text-2xl leading-none text-[var(--bs-secondary-color,#6c757d)] opacity-50 transition-opacity duration-200 bg-transparent border-0 cursor-pointer hover:opacity-100 hover:text-[var(--bs-body-color,#000)] hover:no-underline focus:outline-none","aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),te=({className:s,...a})=>e.jsx(po,{className:C("m-0 leading-[var(--bs-modal-title-line-height,1.5)] text-[1.25rem] font-medium",s),...a});te.displayName="ModalTitle";const le=({className:s,...a})=>e.jsx("div",{className:C("relative flex-auto p-[var(--bs-modal-inner-padding,1rem)] overflow-y-auto",s),...a}),re=({className:s,...a})=>e.jsx("div",{className:C("flex flex-wrap items-center justify-end p-[calc(var(--bs-modal-inner-padding,1rem)*0.75)] border-t border-sidebar-border gap-2",s),...a}),Te=({content:s,show:a,onOk:t,onHide:n,title:o})=>e.jsx(ne,{open:a,onOpenChange:n,children:e.jsxs(ae,{children:[e.jsx(oe,{style:{border:"0px"},children:e.jsx(te,{children:o})}),s&&e.jsx(le,{children:s}),e.jsxs(re,{style:{border:"0px"},children:[e.jsx(y,{onClick:n,children:"Cancel"}),e.jsx(y,{variant:"outline-danger",onClick:()=>{t(),n()},children:"OK"})]})]})}),_e=fo,Oe=jo,Ir=So,ze=({className:s,sideOffset:a=4,children:t,...n})=>e.jsx(vo,{children:e.jsx(yo,{sideOffset:a,asChild:!0,onWheel:o=>o.stopPropagation(),...n,children:e.jsx(T.div,{initial:{opacity:0,scale:.95,y:-2},animate:{opacity:1,scale:1,y:0},transition:{duration:.15,ease:"easeOut"},className:C("bg-[var(--bs-body-bg,#ffffff)] border border-[var(--bs-border-color,#dee2e6)] shadow-[var(--bs-box-shadow,0_0.5rem_1rem_rgba(0,0,0,0.15))] rounded-[20px] min-w-[12rem] py-2 flex flex-col z-[2000] w-[var(--radix-dropdown-menu-trigger-width)] max-w-[var(--radix-dropdown-menu-trigger-width)] will-change-[transform,opacity]","data-[side=bottom]:animate-slideUpAndFade data-[side=top]:animate-slideDownAndFade data-[state=closed]:animate-fadeOut",s),children:e.jsx("div",{className:"max-h-[300px] overflow-y-auto w-full",children:t})})})});ze.displayName="DropdownContent";const Ze=({className:s,...a})=>e.jsx(wo,{className:C("relative flex items-center w-full py-1.5 px-4 pl-10 text-base text-[var(--bs-body-color,#212529)] select-none cursor-pointer outline-none bg-transparent border-0 text-left no-underline rounded-[20px]","hover:!bg-[var(--bs-tertiary-bg,#e9ecef)] hover:!text-[var(--bs-emphasis-color,#000000)]","focus:!bg-[var(--bs-tertiary-bg,#e9ecef)] focus:!text-[var(--bs-emphasis-color,#000000)]","data-[highlighted]:!bg-[var(--bs-tertiary-bg,#e9ecef)] data-[highlighted]:!text-[var(--bs-emphasis-color,#000000)]",s),...a});Ze.displayName="DropdownItem";const Zn=({className:s,...a})=>e.jsx(Io,{className:C("py-2 px-4 text-xs font-bold uppercase tracking-[0.5px] text-[var(--bs-secondary-color,#6c757d)] bg-[var(--bs-tertiary-bg,#f8f9fa)] border-b border-[var(--bs-border-color,#dee2e6)]",s),...a});Zn.displayName="DropdownLabel";const Ua=({className:s,children:a,checked:t,...n})=>e.jsxs(Ao,{className:C("relative flex items-center w-full py-1.5 px-4 pl-10 text-base text-[var(--bs-body-color,#212529)] select-none cursor-pointer outline-none bg-transparent border-0 text-left no-underline rounded-[20px]","hover:!bg-[var(--bs-tertiary-bg,#e9ecef)] hover:!text-[var(--bs-emphasis-color,#000000)]","focus:!bg-[var(--bs-tertiary-bg,#e9ecef)] focus:!text-[var(--bs-emphasis-color,#000000)]","data-[highlighted]:!bg-[var(--bs-tertiary-bg,#e9ecef)] data-[highlighted]:!text-[var(--bs-emphasis-color,#000000)]",s),checked:t,...n,children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 flex items-center justify-center text-[var(--bs-primary,#0d6efd)]",children:e.jsx(No,{children:e.jsx(Co,{})})}),a]});Ua.displayName="DropdownCheckboxItem";const Wr=q("ChF0b29scy90b29scy5wcm90bxINeXVoYWlpbi50b29scyI6CgpJbnRlcmZhY2VzEiwKCmludGVyZmFjZXMYASADKAsyGC55dWhhaWluLnRvb2xzLkludGVyZmFjZSIsCglJbnRlcmZhY2USDAoEbmFtZRgBIAEoCRIRCglhZGRyZXNzZXMYAiADKAkiXAoITGljZW5zZXMSJwoHeXVoYWlpbhgBIAMoCzIWLnl1aGFpaW4udG9vbHMuTGljZW5zZRInCgdhbmRyb2lkGAIgAygLMhYueXVoYWlpbi50b29scy5MaWNlbnNlIlcKB0xpY2Vuc2USDAoEbmFtZRgBIAEoCRILCgN1cmwYAiABKAkSDwoHbGljZW5zZRgDIAEoCRIgCgtsaWNlbnNlX3VybBgEIAEoCVILbGljZW5zZV91cmwiEgoDTG9nEgsKA2xvZxgBIAEoCSIUCgVMb2d2MhILCgNsb2cYASADKAlCN1otZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL3Rvb2xzkgMF0j4CEANiCGVkaXRpb25zcOgH",[ee]),kr=q("Cg9hcGkvdG9vbHMucHJvdG8SEXl1aGFpaW4uYXBpLnRvb2xzMvYBCgV0b29scxJCCg1nZXRfaW50ZXJmYWNlEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhkueXVoYWlpbi50b29scy5JbnRlcmZhY2VzEjsKCGxpY2Vuc2VzEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhcueXVoYWlpbi50b29scy5MaWNlbnNlcxIzCgNsb2cSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaEi55dWhhaWluLnRvb2xzLkxvZzABEjcKBWxvZ3YyEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhQueXVoYWlpbi50b29scy5Mb2d2MjABQjVaK2dpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9hcGmSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[zs,ee,Wr]),ta=Se(kr,0),Qa=h.createContext([]);function Bn(){const{data:s}=z(ta.method.get_interface,{revalidateOnFocus:!1});return s?s.interfaces:[]}const Zr=typeof window>"u"?h.useEffect:W.useInsertionEffect||h.useLayoutEffect;function Br(s){const a=h.useRef(Rr);return Zr(()=>{a.current=s},[s]),h.useCallback((...t)=>{const n=a.current;return n(...t)},[])}function Rr(){throw new Error("foxact: the stablized handler cannot be invoked before the component has mounted.")}const Gr=h.useCallback,Ms=Gr;class Yr extends Error{constructor(a){super(a),this.name="UseClipboardError"}}function da({timeout:s=1e3,usePromptAsFallback:a=!1,promptFallbackText:t="Failed to copy to clipboard automatically, please manually copy the text below.",onCopyError:n}={}){const[o,l]=h.useState(null),[r,c]=h.useState(!1),i=h.useRef(null),d=Br(n),b=Ms(u=>{i.current&&clearTimeout(i.current),u&&(i.current=window.setTimeout(()=>c(!1),s)),c(u)},[s]),x=Ms(u=>{l(u),d(u)},[d]),g=Ms(async u=>{try{if("clipboard"in navigator)await navigator.clipboard.writeText(u),b(!0);else throw new Yr("[foxact/use-clipboard] navigator.clipboard is not supported")}catch(v){if(a)try{window.prompt(t,u)}catch(j){x(j)}else x(v)}},[b,t,x,a]),p=Ms(()=>{c(!1),l(null),i.current&&clearTimeout(i.current)},[]);return{copy:g,reset:p,error:o,copied:r}}const Z=q("ChNub2RlL3Byb3RvY29sLnByb3RvEhB5dWhhaWluLnByb3RvY29sIukOCghwcm90b2NvbBI4CgtzaGFkb3dzb2NrcxgBIAEoCzIdLnl1aGFpaW4ucHJvdG9jb2wuc2hhZG93c29ja3NCAigBSAASOgoMc2hhZG93c29ja3NyGAIgASgLMh4ueXVoYWlpbi5wcm90b2NvbC5zaGFkb3dzb2Nrc3JCAigBSAASLAoFdm1lc3MYAyABKAsyFy55dWhhaWluLnByb3RvY29sLnZtZXNzQgIoAUgAEjQKCXdlYnNvY2tldBgEIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wud2Vic29ja2V0QgIoAUgAEioKBHF1aWMYBSABKAsyFi55dWhhaWluLnByb3RvY29sLnF1aWNCAigBSAASPwoJb2Jmc19odHRwGAYgASgLMhsueXVoYWlpbi5wcm90b2NvbC5vYmZzX2h0dHBCAigBSABSCW9iZnNfaHR0cBIuCgZ0cm9qYW4YByABKAsyGC55dWhhaWluLnByb3RvY29sLnRyb2phbkICKAFIABIwCgZzaW1wbGUYCCABKAsyGC55dWhhaWluLnByb3RvY29sLnNpbXBsZUIEGAEoAUgAEioKBG5vbmUYCSABKAsyFi55dWhhaWluLnByb3RvY29sLm5vbmVCAigBSAASLgoGc29ja3M1GAogASgLMhgueXVoYWlpbi5wcm90b2NvbC5zb2NrczVCAigBSAASKgoEaHR0cBgLIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wuaHR0cEICKAFIABIuCgZkaXJlY3QYDCABKAsyGC55dWhhaWluLnByb3RvY29sLmRpcmVjdEICKAFIABIuCgZyZWplY3QYDSABKAsyGC55dWhhaWluLnByb3RvY29sLnJlamVjdEICKAFIABI0Cgl5dXViaW5zeWEYDiABKAsyGy55dWhhaWluLnByb3RvY29sLnl1dWJpbnN5YUICKAFIABIqCgRncnBjGA8gASgLMhYueXVoYWlpbi5wcm90b2NvbC5ncnBjQgIoAUgAEiwKBWh0dHAyGBAgASgLMhcueXVoYWlpbi5wcm90b2NvbC5odHRwMkICKAFIABIwCgdyZWFsaXR5GBEgASgLMhkueXVoYWlpbi5wcm90b2NvbC5yZWFsaXR5QgIoAUgAEi8KA3RscxgSIAEoCzIcLnl1aGFpaW4ucHJvdG9jb2wudGxzX2NvbmZpZ0ICKAFIABI0Cgl3aXJlZ3VhcmQYEyABKAsyGy55dWhhaWluLnByb3RvY29sLndpcmVndWFyZEICKAFIABIoCgNtdXgYFCABKAsyFS55dWhhaWluLnByb3RvY29sLm11eEICKAFIABIqCgRkcm9wGBUgASgLMhYueXVoYWlpbi5wcm90b2NvbC5kcm9wQgIoAUgAEiwKBXZsZXNzGBYgASgLMhcueXVoYWlpbi5wcm90b2NvbC52bGVzc0ICKAFIABJaChJib290c3RyYXBfZG5zX3dhcnAYFyABKAsyJC55dWhhaWluLnByb3RvY29sLmJvb3RzdHJhcF9kbnNfd2FycEICKAFIAFISYm9vdHN0cmFwX2Ruc193YXJwEjQKCXRhaWxzY2FsZRgYIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wudGFpbHNjYWxlQgIoAUgAEigKA3NldBgZIAEoCzIVLnl1aGFpaW4ucHJvdG9jb2wuc2V0QgIoAUgAElEKD3Rsc190ZXJtaW5hdGlvbhgaIAEoCzIhLnl1aGFpaW4ucHJvdG9jb2wudGxzX3Rlcm1pbmF0aW9uQgIoAUgAUg90bHNfdGVybWluYXRpb24SVAoQaHR0cF90ZXJtaW5hdGlvbhgbIAEoCzIiLnl1aGFpaW4ucHJvdG9jb2wuaHR0cF90ZXJtaW5hdGlvbkICKAFIAFIQaHR0cF90ZXJtaW5hdGlvbhI/CglodHRwX21vY2sYHCABKAsyGy55dWhhaWluLnByb3RvY29sLmh0dHBfbW9ja0ICKAFIAFIJaHR0cF9tb2NrEioKBGFlYWQYHSABKAsyFi55dWhhaWluLnByb3RvY29sLmFlYWRCAigBSAASLAoFZml4ZWQYHiABKAsyFy55dWhhaWluLnByb3RvY29sLmZpeGVkQgIoAUgAEksKDW5ldHdvcmtfc3BsaXQYHyABKAsyHy55dWhhaWluLnByb3RvY29sLm5ldHdvcmtfc3BsaXRCAigBSABSDW5ldHdvcmtfc3BsaXQSZgoWY2xvdWRmbGFyZV93YXJwX21hc3F1ZRggIAEoCzIoLnl1aGFpaW4ucHJvdG9jb2wuY2xvdWRmbGFyZV93YXJwX21hc3F1ZUICKAFIAFIWY2xvdWRmbGFyZV93YXJwX21hc3F1ZRIsCgVwcm94eRghIAEoCzIXLnl1aGFpaW4ucHJvdG9jb2wucHJveHlCAigBSAASMAoHZml4ZWR2MhgiIAEoCzIZLnl1aGFpaW4ucHJvdG9jb2wuZml4ZWR2MkICKAFIAEIKCghwcm90b2NvbCJgCgZzb2NrczUSEAoIaG9zdG5hbWUYAyABKAkSDAoEdXNlchgBIAEoCRIQCghwYXNzd29yZBgCIAEoCRIkCg1vdmVycmlkZV9wb3J0GAQgASgNUg1vdmVycmlkZV9wb3J0IiYKBGh0dHASDAoEdXNlchgBIAEoCRIQCghwYXNzd29yZBgCIAEoCSIvCgtzaGFkb3dzb2NrcxIOCgZtZXRob2QYASABKAkSEAoIcGFzc3dvcmQYAiABKAkilQEKDHNoYWRvd3NvY2tzchIOCgZzZXJ2ZXIYASABKAkSDAoEcG9ydBgCIAEoCRIOCgZtZXRob2QYAyABKAkSEAoIcGFzc3dvcmQYBCABKAkSDAoEb2JmcxgFIAEoCRIRCglvYmZzcGFyYW0YBiABKAkSEAoIcHJvdG9jb2wYByABKAkSEgoKcHJvdG9wYXJhbRgIIAEoCSIcCgVodHRwMhITCgtjb25jdXJyZW5jeRgBIAEoBSJCCgV2bWVzcxIQCgR1dWlkGAEgASgJUgJpZBIVCghhbHRlcl9pZBgCIAEoCVIDYWlkEhAKCHNlY3VyaXR5GAMgASgJIhUKBXZsZXNzEgwKBHV1aWQYASABKAkiKAoGdHJvamFuEhAKCHBhc3N3b3JkGAEgASgJEgwKBHBlZXIYAiABKAkiogEKCXl1dWJpbnN5YRIQCghwYXNzd29yZBgBIAEoCRIoCg91ZHBfb3Zlcl9zdHJlYW0YAyABKAhSD3VkcF9vdmVyX3N0cmVhbRIiCgx1ZHBfY29hbGVzY2UYBiABKAhSDHVkcF9jb2FsZXNjZUoECAIQA0oECAQQBUoECAUQBlIJZW5jcnlwdGVkUgt0Y3BfZW5jcnlwdFILdWRwX2VuY3J5cHQiOgoJd2Vic29ja2V0EgwKBGhvc3QYASABKAkSDAoEcGF0aBgCIAEoCUoECAQQBVILdGxzX2VuYWJsZWQiMQoEZ3JwYxIpCgN0bHMYASABKAsyHC55dWhhaWluLnByb3RvY29sLnRsc19jb25maWciPwoEcXVpYxIMCgRob3N0GAIgASgJEikKA3RscxgBIAEoCzIcLnl1aGFpaW4ucHJvdG9jb2wudGxzX2NvbmZpZyKeAQoHcmVhbGl0eRIgCgtzZXJ2ZXJfbmFtZRgBIAEoCVILc2VydmVyX25hbWUSHgoKcHVibGljX2tleRgCIAEoCVIKcHVibGljX2tleRImCg5tbGRzYTY1X3ZlcmlmeRgFIAEoCVIObWxkc2E2NV92ZXJpZnkSGgoIc2hvcnRfaWQYAyABKAlSCHNob3J0X2lkEg0KBWRlYnVnGAQgASgIIicKCW9iZnNfaHR0cBIMCgRob3N0GAEgASgJEgwKBHBvcnQYAiABKAkiBgoEbm9uZSLGAQoGc2ltcGxlEgwKBGhvc3QYASABKAkSDAoEcG9ydBgCIAEoBRI+Cg5hbHRlcm5hdGVfaG9zdBgFIAMoCzIWLnl1aGFpaW4ucHJvdG9jb2wuaG9zdFIOYWx0ZXJuYXRlX2hvc3QSLAoRbmV0d29ya19pbnRlcmZhY2UYByABKAlSEW5ldHdvcmtfaW50ZXJmYWNlSgQIBBAFSgQIBhAHSgQIAxAEUgN0bHNSB3RpbWVvdXRSEnBhY2tldF9jb25uX2RpcmVjdCKRAQoFZml4ZWQSDAoEaG9zdBgBIAEoCRIMCgRwb3J0GAIgASgFEj4KDmFsdGVybmF0ZV9ob3N0GAMgAygLMhYueXVoYWlpbi5wcm90b2NvbC5ob3N0Ug5hbHRlcm5hdGVfaG9zdBIsChFuZXR3b3JrX2ludGVyZmFjZRgEIAEoCVIRbmV0d29ya19pbnRlcmZhY2UizwEKCnRsc19jb25maWcSDgoGZW5hYmxlGAEgASgIEiEKDHNlcnZlcl9uYW1lcxgGIAMoCVILc2VydmVybmFtZXMSGAoHY2FfY2VydBgDIAMoDFIHY2FfY2VydBIyChRpbnNlY3VyZV9za2lwX3ZlcmlmeRgEIAEoCFIUaW5zZWN1cmVfc2tpcF92ZXJpZnkSIAoLbmV4dF9wcm90b3MYBSADKAlSC25leHRfcHJvdG9zEh4KCmVjaF9jb25maWcYByABKAxSCmVjaF9jb25maWcidgoLY2VydGlmaWNhdGUSDAoEY2VydBgBIAEoDBILCgNrZXkYAiABKAwSJgoOY2VydF9maWxlX3BhdGgYAyABKAlSDmNlcnRfZmlsZV9wYXRoEiQKDWtleV9maWxlX3BhdGgYBCABKAlSDWtleV9maWxlX3BhdGgiwQIKEXRsc19zZXJ2ZXJfY29uZmlnEjMKDGNlcnRpZmljYXRlcxgBIAMoCzIdLnl1aGFpaW4ucHJvdG9jb2wuY2VydGlmaWNhdGUSIAoLbmV4dF9wcm90b3MYAyADKAlSC25leHRfcHJvdG9zEngKF3NlcnZlcl9uYW1lX2NlcnRpZmljYXRlGAQgAygLMj4ueXVoYWlpbi5wcm90b2NvbC50bHNfc2VydmVyX2NvbmZpZy5TZXJ2ZXJOYW1lQ2VydGlmaWNhdGVFbnRyeVIXc2VydmVyX25hbWVfY2VydGlmaWNhdGUaWwoaU2VydmVyTmFtZUNlcnRpZmljYXRlRW50cnkSCwoDa2V5GAEgASgJEiwKBXZhbHVlGAIgASgLMh0ueXVoYWlpbi5wcm90b2NvbC5jZXJ0aWZpY2F0ZToCOAEiQwoPdGxzX3Rlcm1pbmF0aW9uEjAKA3RscxgBIAEoCzIjLnl1aGFpaW4ucHJvdG9jb2wudGxzX3NlcnZlcl9jb25maWci9QEKEGh0dHBfdGVybWluYXRpb24SQAoHaGVhZGVycxgBIAMoCzIvLnl1aGFpaW4ucHJvdG9jb2wuaHR0cF90ZXJtaW5hdGlvbi5IZWFkZXJzRW50cnkaPgoMaHR0cF9oZWFkZXJzEi4KB2hlYWRlcnMYASADKAsyHS55dWhhaWluLnByb3RvY29sLmh0dHBfaGVhZGVyGl8KDEhlYWRlcnNFbnRyeRILCgNrZXkYASABKAkSPgoFdmFsdWUYAiABKAsyLy55dWhhaWluLnByb3RvY29sLmh0dHBfdGVybWluYXRpb24uaHR0cF9oZWFkZXJzOgI4ASIpCgtodHRwX2hlYWRlchILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAkiRQoGZGlyZWN0EiwKEW5ldHdvcmtfaW50ZXJmYWNlGAIgASgJUhFuZXR3b3JrX2ludGVyZmFjZUoECAEQAlIHdGltZW91dCIICgZyZWplY3QiBgoEZHJvcCIiCgRob3N0EgwKBGhvc3QYASABKAkSDAoEcG9ydBgCIAEoBSJ+ChV3aXJlZ3VhcmRfcGVlcl9jb25maWcSEgoKcHVibGljX2tleRgBIAEoCRIWCg5wcmVfc2hhcmVkX2tleRgCIAEoCRIQCghlbmRwb2ludBgDIAEoCRISCgprZWVwX2FsaXZlGAQgASgFEhMKC2FsbG93ZWRfaXBzGAUgAygJIpwBCgl3aXJlZ3VhcmQSEgoKc2VjcmV0X2tleRgBIAEoCRIQCghlbmRwb2ludBgCIAMoCRI2CgVwZWVycxgDIAMoCzInLnl1aGFpaW4ucHJvdG9jb2wud2lyZWd1YXJkX3BlZXJfY29uZmlnEgsKA210dRgEIAEoBRIQCghyZXNlcnZlZBgGIAEoDEoECAcQCFIMaWRsZV90aW1lb3V0IhoKA211eBITCgtjb25jdXJyZW5jeRgBIAEoBSIUChJib290c3RyYXBfZG5zX3dhcnAifgoJdGFpbHNjYWxlEhoKCGF1dGhfa2V5GAEgASgJUghhdXRoX2tleRIQCghob3N0bmFtZRgCIAEoCRIgCgtjb250cm9sX3VybBgDIAEoCVILY29udHJvbF91cmwSDQoFZGVidWcYBSABKAhKBAgEEAVSDGlkbGVfdGltZW91dCJ5CgNzZXQSDQoFbm9kZXMYASADKAkSNQoIc3RyYXRlZ3kYAiABKA4yIy55dWhhaWluLnByb3RvY29sLnNldC5zdHJhdGVneV90eXBlIiwKDXN0cmF0ZWd5X3R5cGUSCgoGcmFuZG9tEAASDwoLcm91bmRfcm9iaW4QASIZCglodHRwX21vY2sSDAoEZGF0YRgBIAEoDCJiCgRhZWFkEhAKCHBhc3N3b3JkGAEgASgJEkgKDWNyeXB0b19tZXRob2QYAiABKA4yIi55dWhhaWluLnByb3RvY29sLkFlYWRDcnlwdG9NZXRob2RSDWNyeXB0b19tZXRob2QiYQoNbmV0d29ya19zcGxpdBInCgN0Y3AYASABKAsyGi55dWhhaWluLnByb3RvY29sLnByb3RvY29sEicKA3VkcBgCIAEoCzIaLnl1aGFpaW4ucHJvdG9jb2wucHJvdG9jb2witQEKFmNsb3VkZmxhcmVfd2FycF9tYXNxdWUSIAoLcHJpdmF0ZV9rZXkYASABKAlSC3ByaXZhdGVfa2V5EhAKCGVuZHBvaW50GAIgASgJEjAKE2VuZHBvaW50X3B1YmxpY19rZXkYAyABKAlSE2VuZHBvaW50X3B1YmxpY19rZXkSKAoPbG9jYWxfYWRkcmVzc2VzGAQgAygJUg9sb2NhbF9hZGRyZXNzZXMSCwoDbXR1GAUgASgFIgcKBXByb3h5IrYBCgdmaXhlZHYyEjQKCWFkZHJlc3NlcxgBIAMoCzIhLnl1aGFpaW4ucHJvdG9jb2wuZml4ZWR2Mi5hZGRyZXNzEi4KEnVkcF9oYXBweV9leWViYWxscxgCIAEoCFISdWRwX2hhcHB5X2V5ZWJhbGxzGkUKB2FkZHJlc3MSDAoEaG9zdBgBIAEoCRIsChFuZXR3b3JrX2ludGVyZmFjZRgCIAEoCVIRbmV0d29ya19pbnRlcmZhY2UqPwoQQWVhZENyeXB0b01ldGhvZBIUChBDaGFjaGEyMFBvbHkxMzA1EAASFQoRWENoYWNoYTIwUG9seTEzMDUQAUI2WixnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvbm9kZZIDBdI+AhADYghlZGl0aW9uc3DoBw",[ee]),E=A(Z,0),Er=A(Z,1),Vr=A(Z,2),Xr=A(Z,3),Fr=A(Z,4),Lr=A(Z,5),zr=A(Z,6),Jr=A(Z,7),Kr=A(Z,8),Hr=A(Z,9),Dr=A(Z,10),Mr=A(Z,11),Ur=A(Z,12),Qr=A(Z,13),Pr=A(Z,14),fa=A(Z,15),Rn=A(Z,17),ma=A(Z,18),Us=A(Z,19),Js=A(Z,20),Tr=A(Z,21),_r=A(Z,22),Or=A(Z,24),$r=A(Z,26),qr=A(Z,27),ec=A(Z,28),sc=A(Z,29),ac=A(Z,30),tc=A(Z,32),qs=A(Z,33),nc=fe(Z,33,0),oc=A(Z,34),lc=A(Z,35),rc=A(Z,36),cc=A(Z,37),ic=A(Z,38),dc=A(Z,39),mc=A(Z,39,0),Gn=fe(Z,0),ha=q("ChBub2RlL3BvaW50LnByb3RvEg15dWhhaWluLnBvaW50IowBCgVwb2ludBIMCgRoYXNoGAEgASgJEgwKBG5hbWUYAiABKAkSDQoFZ3JvdXAYAyABKAkSJQoGb3JpZ2luGAQgASgOMhUueXVoYWlpbi5wb2ludC5vcmlnaW4SMQoJcHJvdG9jb2xzGAUgAygLMhoueXVoYWlpbi5wcm90b2NvbC5wcm90b2NvbEICKAEqLQoGb3JpZ2luEgsKB3Jlc2VydmUQABIKCgZyZW1vdGUQZRIKCgZtYW51YWwQZkI2WixnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvbm9kZZIDBdI+AhADYghlZGl0aW9uc3DoBw",[Z,ee]),Ks=A(ha,0);var Yn=(s=>(s[s.reserve=0]="reserve",s[s.remote=101]="remote",s[s.manual=102]="manual",s))(Yn||{});const ks=q("ChRub2RlL3N1YnNjcmliZS5wcm90bxIReXVoYWlpbi5zdWJzY3JpYmUiSAoEbGluaxIMCgRuYW1lGAEgASgJEiUKBHR5cGUYAiABKA4yFy55dWhhaWluLnN1YnNjcmliZS50eXBlEgsKA3VybBgDIAEoCSJqCgdQdWJsaXNoEg4KBnBvaW50cxgBIAMoCRIMCgRwYXRoGAIgASgJEgwKBG5hbWUYAyABKAkSEAoIcGFzc3dvcmQYBCABKAkSDwoHYWRkcmVzcxgFIAEoCRIQCghpbnNlY3VyZRgGIAEoCCL4AQoKWXVoYWlpblVybBI2CgZyZW1vdGUYASABKAsyJC55dWhhaWluLnN1YnNjcmliZS5ZdWhhaWluVXJsLlJlbW90ZUgAEjYKBnBvaW50cxgCIAEoCzIkLnl1aGFpaW4uc3Vic2NyaWJlLll1aGFpaW5VcmwuUG9pbnRzSAASDAoEbmFtZRgDIAEoCRo1CgZSZW1vdGUSKwoHcHVibGlzaBgBIAEoCzIaLnl1aGFpaW4uc3Vic2NyaWJlLlB1Ymxpc2gaLgoGUG9pbnRzEiQKBnBvaW50cxgBIAMoCzIULnl1aGFpaW4ucG9pbnQucG9pbnRCBQoDdXJsKk0KBHR5cGUSCwoHcmVzZXJ2ZRAAEgoKBnRyb2phbhABEgkKBXZtZXNzEAISDwoLc2hhZG93c29ja3MQAxIQCgxzaGFkb3dzb2Nrc3IQBEI2WixnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvbm9kZZIDBdI+AhADYghlZGl0aW9uc3DoBw",[ee,ha]),gt=A(ks,0),Aa=A(ks,1),pt=A(ks,2),hc=A(ks,2,0);var Na=(s=>(s[s.reserve=0]="reserve",s[s.trojan=1]="trojan",s[s.vmess=2]="vmess",s[s.shadowsocks=3]="shadowsocks",s[s.shadowsocksr=4]="shadowsocksr",s))(Na||{});const ds=q("ChJub2RlL2xhdGVuY3kucHJvdG8SD3l1aGFpaW4ubGF0ZW5jeSIYCglodHRwX3Rlc3QSCwoDdXJsGAEgASgJIjwKCGRuc190ZXN0EgwKBGhvc3QYASABKAkSIgoNdGFyZ2V0X2RvbWFpbhgCIAEoCVILdGFyZ2V0X25hbWUiQQoNZG5zX292ZXJfcXVpYxIMCgRob3N0GAEgASgJEiIKDXRhcmdldF9kb21haW4YAiABKAlSC3RhcmdldF9uYW1lIjEKAmlwEgsKA3VybBgBIAEoCRIeCgp1c2VyX2FnZW50GAIgASgJUgp1c2VyX2FnZW50IikKC2lwX3Jlc3BvbnNlEgwKBGlwdjQYASABKAkSDAoEaXB2NhgCIAEoCSIUCgVlcnJvchILCgNtc2cYASABKAkiIQoEc3R1bhIMCgRob3N0GAEgASgJEgsKA3RjcBgCIAEoCCLHAgoNc3R1bl9yZXNwb25zZRIuChJ4b3JfbWFwcGVkX2FkZHJlc3MYASABKAlSEnhvcl9tYXBwZWRfYWRkcmVzcxImCg5tYXBwZWRfYWRkcmVzcxgCIAEoCVIObWFwcGVkX2FkZHJlc3MSJAoNb3RoZXJfYWRkcmVzcxgDIAEoCVINb3RoZXJfYWRkcmVzcxI4ChdyZXNwb25zZV9vcmlnaW5fYWRkcmVzcxgEIAEoCVIXcmVzcG9uc2Vfb3JpZ2luX2FkZHJlc3MSEAoIU29mdHdhcmUYBSABKAkSMwoHTWFwcGluZxgGIAEoDjIZLnl1aGFpaW4ubGF0ZW5jeS5uYXRfdHlwZVIHbWFwcGluZxI3CglGaWx0ZXJpbmcYByABKA4yGS55dWhhaWluLmxhdGVuY3kubmF0X3R5cGVSCWZpbHRlcmluZyLlAgoHcmVxdWVzdBIKCgJpZBgDIAEoCRIMCgRoYXNoGAEgASgJEgwKBGlwdjYYBCABKAgSMQoGbWV0aG9kGAIgASgLMiEueXVoYWlpbi5sYXRlbmN5LnJlcXVlc3QucHJvdG9jb2wa/gEKCHByb3RvY29sEioKBGh0dHAYASABKAsyGi55dWhhaWluLmxhdGVuY3kuaHR0cF90ZXN0SAASKAoDZG5zGAIgASgLMhkueXVoYWlpbi5sYXRlbmN5LmRuc190ZXN0SAASRgoNZG5zX292ZXJfcXVpYxgDIAEoCzIeLnl1aGFpaW4ubGF0ZW5jeS5kbnNfb3Zlcl9xdWljSABSDWRuc19vdmVyX3F1aWMSIQoCaXAYBCABKAsyEy55dWhhaWluLmxhdGVuY3kuaXBIABIlCgRzdHVuGAUgASgLMhUueXVoYWlpbi5sYXRlbmN5LnN0dW5IAEIKCghwcm90b2NvbCI2CghyZXF1ZXN0cxIqCghyZXF1ZXN0cxgBIAMoCzIYLnl1aGFpaW4ubGF0ZW5jeS5yZXF1ZXN0IqwBCghyZXNwb25zZRJTCg5pZF9sYXRlbmN5X21hcBgBIAMoCzIrLnl1aGFpaW4ubGF0ZW5jeS5yZXNwb25zZS5JZExhdGVuY3lNYXBFbnRyeVIOaWRfbGF0ZW5jeV9tYXAaSwoRSWRMYXRlbmN5TWFwRW50cnkSCwoDa2V5GAEgASgJEiUKBXZhbHVlGAIgASgLMhYueXVoYWlpbi5sYXRlbmN5LnJlcGx5OgI4ASLDAQoFcmVwbHkSLAoHbGF0ZW5jeRgBIAEoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbkgAEioKAmlwGAIgASgLMhwueXVoYWlpbi5sYXRlbmN5LmlwX3Jlc3BvbnNlSAASLgoEc3R1bhgDIAEoCzIeLnl1aGFpaW4ubGF0ZW5jeS5zdHVuX3Jlc3BvbnNlSAASJwoFZXJyb3IYBCABKAsyFi55dWhhaWluLmxhdGVuY3kuZXJyb3JIAEIHCgVyZXBseSrMAQoIbmF0X3R5cGUSDwoLTkFUX1VOS05PV04QABIRCg1OQVRfTk9fUkVTVUxUEAESIAocTkFUX0VuZHBvaW50SW5kZXBlbmRlbnROb05BVBACEhsKF05BVF9FbmRwb2ludEluZGVwZW5kZW50EAMSGAoUTkFUX0FkZHJlc3NEZXBlbmRlbnQQBBIfChtOQVRfQWRkcmVzc0FuZFBvcnREZXBlbmRlbnQQBRIiCh5OQVRfU2VydmVyTm90U3VwcG9ydENoYW5nZVBvcnQQBkI2WixnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvbm9kZZIDBdI+AhADYghlZGl0aW9uc3DoBw",[Kl,ee]),uc=A(ds,0),xc=A(ds,2),bc=A(ds,3),gc=A(ds,6),Qs=A(ds,8,0),pc=A(ds,9);var Ke=(s=>(s[s.NAT_UNKNOWN=0]="NAT_UNKNOWN",s[s.NAT_NO_RESULT=1]="NAT_NO_RESULT",s[s.NAT_EndpointIndependentNoNAT=2]="NAT_EndpointIndependentNoNAT",s[s.NAT_EndpointIndependent=3]="NAT_EndpointIndependent",s[s.NAT_AddressDependent=4]="NAT_AddressDependent",s[s.NAT_AddressAndPortDependent=5]="NAT_AddressAndPortDependent",s[s.NAT_ServerNotSupportChangePort=6]="NAT_ServerNotSupportChangePort",s))(Ke||{});const En=q("Cg5ub2RlL3RhZy5wcm90bxILeXVoYWlpbi50YWciRgoEdGFncxILCgN0YWcYASABKAkSIwoEdHlwZRgDIAEoDjIVLnl1aGFpaW4udGFnLnRhZ190eXBlEgwKBGhhc2gYAiADKAkqIAoIdGFnX3R5cGUSCAoEbm9kZRAAEgoKBm1pcnJvchABQjZaLGdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9ub2RlkgMF0j4CEANiCGVkaXRpb25zcOgH",[ee]);var Ve=(s=>(s[s.node=0]="node",s[s.mirror=1]="mirror",s))(Ve||{});const $e=q("Cg5hcGkvbm9kZS5wcm90bxIQeXVoYWlpbi5hcGkubm9kZSJQCghub3dfcmVzcBIhCgN0Y3AYASABKAsyFC55dWhhaWluLnBvaW50LnBvaW50EiEKA3VkcBgCIAEoCzIULnl1aGFpaW4ucG9pbnQucG9pbnQiLQoHdXNlX3JlcRIMCgRoYXNoGAMgASgJSgQIARACSgQIAhADUgN0Y3BSA3VkcCK2AQoNTm9kZXNSZXNwb25zZRI1CgZncm91cHMYASADKAsyJS55dWhhaWluLmFwaS5ub2RlLk5vZGVzUmVzcG9uc2UuR3JvdXAaIgoETm9kZRIMCgRoYXNoGAEgASgJEgwKBG5hbWUYAiABKAkaSgoFR3JvdXASDAoEbmFtZRgBIAEoCRIzCgVub2RlcxgDIAMoCzIkLnl1aGFpaW4uYXBpLm5vZGUuTm9kZXNSZXNwb25zZS5Ob2RlIjkKEmFjdGl2YXRlc19yZXNwb25zZRIjCgVub2RlcxgBIAMoCzIULnl1aGFpaW4ucG9pbnQucG9pbnQiTwoSU2F2ZVB1Ymxpc2hSZXF1ZXN0EgwKBG5hbWUYASABKAkSKwoHcHVibGlzaBgCIAEoCzIaLnl1aGFpaW4uc3Vic2NyaWJlLlB1Ymxpc2girAEKE0xpc3RQdWJsaXNoUmVzcG9uc2USRwoJcHVibGlzaGVzGAEgAygLMjQueXVoYWlpbi5hcGkubm9kZS5MaXN0UHVibGlzaFJlc3BvbnNlLlB1Ymxpc2hlc0VudHJ5GkwKDlB1Ymxpc2hlc0VudHJ5EgsKA2tleRgBIAEoCRIpCgV2YWx1ZRgCIAEoCzIaLnl1aGFpaW4uc3Vic2NyaWJlLlB1Ymxpc2g6AjgBIj4KDlB1Ymxpc2hSZXF1ZXN0EgwKBG5hbWUYASABKAkSEAoIcGFzc3dvcmQYAiABKAkSDAoEcGF0aBgDIAEoCSI3Cg9QdWJsaXNoUmVzcG9uc2USJAoGcG9pbnRzGAEgAygLMhQueXVoYWlpbi5wb2ludC5wb2ludCI3Cg1zYXZlX2xpbmtfcmVxEiYKBWxpbmtzGAEgAygLMhcueXVoYWlpbi5zdWJzY3JpYmUubGluayIZCghsaW5rX3JlcRINCgVuYW1lcxgBIAMoCSKTAQoOZ2V0X2xpbmtzX3Jlc3ASOgoFbGlua3MYASADKAsyKy55dWhhaWluLmFwaS5ub2RlLmdldF9saW5rc19yZXNwLkxpbmtzRW50cnkaRQoKTGlua3NFbnRyeRILCgNrZXkYASABKAkSJgoFdmFsdWUYAiABKAsyFy55dWhhaWluLnN1YnNjcmliZS5saW5rOgI4ASJOCgxzYXZlX3RhZ19yZXESCwoDdGFnGAEgASgJEiMKBHR5cGUYAyABKA4yFS55dWhhaWluLnRhZy50YWdfdHlwZRIMCgRoYXNoGAIgASgJIogBCg10YWdzX3Jlc3BvbnNlEjcKBHRhZ3MYASADKAsyKS55dWhhaWluLmFwaS5ub2RlLnRhZ3NfcmVzcG9uc2UuVGFnc0VudHJ5Gj4KCVRhZ3NFbnRyeRILCgNrZXkYASABKAkSIAoFdmFsdWUYAiABKAsyES55dWhhaWluLnRhZy50YWdzOgI4ATK0BAoEbm9kZRI5CgNub3cSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaGi55dWhhaWluLmFwaS5ub2RlLm5vd19yZXNwEjYKA3VzZRIZLnl1aGFpaW4uYXBpLm5vZGUudXNlX3JlcRoULnl1aGFpaW4ucG9pbnQucG9pbnQSOQoDZ2V0EhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlGhQueXVoYWlpbi5wb2ludC5wb2ludBIyCgRzYXZlEhQueXVoYWlpbi5wb2ludC5wb2ludBoULnl1aGFpaW4ucG9pbnQucG9pbnQSPgoGcmVtb3ZlEhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlGhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ej8KBGxpc3QSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHy55dWhhaWluLmFwaS5ub2RlLk5vZGVzUmVzcG9uc2USSQoJYWN0aXZhdGVzEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GiQueXVoYWlpbi5hcGkubm9kZS5hY3RpdmF0ZXNfcmVzcG9uc2USPQoFY2xvc2USHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSPwoHbGF0ZW5jeRIZLnl1aGFpaW4ubGF0ZW5jeS5yZXF1ZXN0cxoZLnl1aGFpaW4ubGF0ZW5jeS5yZXNwb25zZTK+BAoJc3Vic2NyaWJlEj8KBHNhdmUSHy55dWhhaWluLmFwaS5ub2RlLnNhdmVfbGlua19yZXEaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSPAoGcmVtb3ZlEhoueXVoYWlpbi5hcGkubm9kZS5saW5rX3JlcRoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI8CgZ1cGRhdGUSGi55dWhhaWluLmFwaS5ub2RlLmxpbmtfcmVxGhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ej8KA2dldBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRogLnl1aGFpaW4uYXBpLm5vZGUuZ2V0X2xpbmtzX3Jlc3ASRgoOcmVtb3ZlX3B1Ymxpc2gSHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSTQoMbGlzdF9wdWJsaXNoEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GiUueXVoYWlpbi5hcGkubm9kZS5MaXN0UHVibGlzaFJlc3BvbnNlEkwKDHNhdmVfcHVibGlzaBIkLnl1aGFpaW4uYXBpLm5vZGUuU2F2ZVB1Ymxpc2hSZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ek4KB3B1Ymxpc2gSIC55dWhhaWluLmFwaS5ub2RlLlB1Ymxpc2hSZXF1ZXN0GiEueXVoYWlpbi5hcGkubm9kZS5QdWJsaXNoUmVzcG9uc2UyxgEKA3RhZxI+CgRzYXZlEh4ueXVoYWlpbi5hcGkubm9kZS5zYXZlX3RhZ19yZXEaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSPgoGcmVtb3ZlEhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlGhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ej8KBGxpc3QSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHy55dWhhaWluLmFwaS5ub2RlLnRhZ3NfcmVzcG9uc2VCNVorZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL2FwaZIDBdI+AhADYghlZGl0aW9uc3DoBw",[zs,$t,ha,ks,ds,En,ee]),fc=A($e,1),jc=A($e,4),vc=A($e,8),ft=A($e,9),Ps=A($e,11),he=Se($e,0),ss=Se($e,1),ja=Se($e,2),ms=W.forwardRef(({className:s,...a},t)=>e.jsx(Wo,{ref:t,className:C("flex flex-col w-full rounded-[20px] mb-8 transition-all duration-300 relative shadow-[0_20px_25px_-5px_rgba(0,0,0,0.1),0_10px_10px_-5px_rgba(0,0,0,0.04)]","hover:-translate-y-[5px] hover:border-[rgba(99,102,241,0.3)] hover:shadow-[0_0_30px_rgba(99,102,241,0.1)]",s),...a}));ms.displayName="Accordion";const hs=W.forwardRef(({className:s,...a},t)=>e.jsx(ko,{ref:t,className:C("border border-sidebar-border bg-[var(--bs-card-bg)] overflow-hidden -mt-px","first:mt-0 first:rounded-t-[20px] last:rounded-b-[20px]","focus-within:relative focus-within:z-10 focus-within:border-sidebar-active","hover:relative hover:z-10 hover:border-sidebar-active",s),...a}));hs.displayName="AccordionItem";const us=W.forwardRef(({className:s,children:a,...t},n)=>e.jsx(Zo,{className:"flex m-0",children:e.jsxs(Bo,{ref:n,className:C("group flex-1 flex items-center justify-between p-4 text-base font-medium leading-none text-sidebar-color bg-transparent border-0 cursor-pointer transition-all duration-200 w-full text-left","hover:!bg-sidebar-hover hover:!text-sidebar-active","data-[state=open]:bg-sidebar-hover data-[state=open]:text-sidebar-active data-[state=open]:border-b data-[state=open]:border-sidebar-border",s),...t,children:[a,e.jsx(cs,{className:C("transition-transform duration-300 group-data-[state=open]:rotate-180"),size:16,"aria-hidden":!0})]})}));us.displayName="AccordionTrigger";const xs=W.forwardRef(({className:s,children:a,...t},n)=>e.jsx(Ro,{ref:n,className:C("overflow-hidden text-sidebar-color bg-[var(--bs-body-bg)] will-change-[height]","data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",s),...t,children:e.jsx("div",{className:"p-4 w-full",children:a})}));xs.displayName="AccordionContent";const ge=h.forwardRef(({className:s,size:a="default",htmlSize:t,groupPosition:n,...o},l)=>{const r=n==="first"?"!rounded-r-none !border-r-0":n==="last"?"!rounded-l-none":n==="middle"?"!rounded-none !border-r-0":"";return e.jsx("input",{ref:l,size:t,className:C("block w-full px-[0.875rem] h-[38px] text-[0.9375rem] font-normal leading-normal text-[var(--bs-body-color)] bg-[var(--bs-body-bg)] border-[0.2px] border-[var(--bs-border-color-translucent,rgba(0,0,0,0.15))] rounded-[6px] shadow-[inset_0_0.5px_0px_rgba(0,0,0,0.05)] appearance-none outline-none transition-colors duration-150 ease-in-out","focus:border-[#86b7fe] focus:shadow-[0_0_0_0.25rem_rgba(13,110,253,0.25)] focus:z-[2] focus:outline-none","read-only:bg-[var(--bs-tertiary-bg,#f8f9fa)] read-only:border-[var(--bs-border-color-translucent,rgba(0,0,0,0.1))] read-only:cursor-default","read-only:focus:border-[var(--bs-border-color)] read-only:focus:shadow-[0_0_0_3px_rgba(0,0,0,0.04)]","disabled:bg-[var(--bs-secondary-bg,#e9ecef)] disabled:text-[var(--bs-secondary-color)] disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none","placeholder:not-italic",{"py-1 px-2.5 text-[0.8125rem] rounded-[6px]":a==="sm"},r,s),...o})});ge.displayName="Input";const Xe=h.forwardRef(({className:s,...a},t)=>e.jsx("textarea",{ref:t,className:C("block w-full px-[0.875rem] text-[0.9375rem] font-normal leading-normal text-[var(--bs-body-color)] bg-[var(--bs-body-bg)] border-[0.2px] border-[var(--bs-border-color-translucent,rgba(0,0,0,0.15))] rounded-[6px] shadow-[inset_0_0.5px_0px_rgba(0,0,0,0.05)] appearance-none outline-none transition-colors duration-150 ease-in-out","focus:border-[#86b7fe] focus:shadow-[0_0_0_0.25rem_rgba(13,110,253,0.25)] focus:z-[2] focus:outline-none","read-only:bg-[var(--bs-tertiary-bg,#f8f9fa)] read-only:border-[var(--bs-border-color-translucent,rgba(0,0,0,0.1))] read-only:cursor-default","read-only:focus:border-[var(--bs-border-color)] read-only:focus:shadow-[0_0_0_3px_rgba(0,0,0,0.04)]","disabled:bg-[var(--bs-secondary-bg,#e9ecef)] disabled:text-[var(--bs-secondary-color)] disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none","min-h-[38px] h-auto py-2",s),...a}));Xe.displayName="Textarea";const yc=({value:s="",onChange:a,options:t,className:n,placeholder:o,onFocus:l,onBlur:r,onKeyDown:c,...i})=>{const[d,b]=h.useState(!1),[x,g]=h.useState(0),p=W.useRef(!1),u=W.useMemo(()=>{if(!s)return t;const j=String(s).toLowerCase();return t.filter(f=>f.label.toLowerCase().includes(j)||f.value.toLowerCase().includes(j)||f.details?.some(w=>w.toLowerCase().includes(j)))},[t,s]);h.useEffect(()=>{g(0),p.current=!0},[u]);const v=j=>{if(!d){(j.key==="ArrowDown"||j.key==="ArrowUp")&&(b(!0),j.preventDefault()),c?.(j);return}switch(j.key){case"ArrowDown":j.preventDefault(),p.current=!0,g(f=>f<u.length-1?f+1:f);break;case"ArrowUp":j.preventDefault(),p.current=!0,g(f=>f>0?f-1:f);break;case"Enter":j.preventDefault(),u[x]&&(a(u[x].value),b(!1));break;case"Escape":j.preventDefault(),b(!1);break;case"Tab":b(!1);break}c?.(j)};return e.jsxs(Go,{open:d,onOpenChange:b,children:[e.jsx(Yo,{asChild:!0,children:e.jsx("div",{style:{width:"100%"},children:e.jsx(ge,{value:String(s),onChange:j=>{a(j.target.value),b(!0)},onFocus:j=>{b(!0),l?.(j)},onClick:()=>b(!0),onBlur:r,onKeyDown:v,placeholder:o,className:n,...i})})}),u.length>0&&e.jsx(Eo,{children:e.jsx(Vo,{className:C("w-[var(--radix-popover-trigger-width)] max-h-[50vh] bg-[var(--bs-body-bg)] rounded-[20px] border border-[var(--bs-border-color)] shadow-lg z-[2000] p-1 will-change-[transform,opacity]","data-[state=open]:data-[side=top]:animate-slideDownAndFade data-[state=open]:data-[side=right]:animate-slideLeftAndFade data-[state=open]:data-[side=bottom]:animate-slideUpAndFade data-[state=open]:data-[side=left]:animate-slideRightAndFade"),onWheel:j=>j.stopPropagation(),onOpenAutoFocus:j=>j.preventDefault(),onCloseAutoFocus:j=>j.preventDefault(),align:"start",sideOffset:5,collisionPadding:10,children:e.jsx("div",{style:{borderRadius:"20px",overflow:"hidden"},children:e.jsx("div",{style:{width:"100%",height:"100%",overflowY:"auto",maxHeight:"49vh"},children:u.map((j,f)=>e.jsxs("div",{ref:w=>{p.current&&f===x&&w&&(w.scrollIntoView({block:"nearest"}),p.current=!1)},className:C("group p-2 px-3 cursor-pointer rounded-[20px] text-sm transition-colors duration-150 text-[var(--bs-body-color)]","hover:bg-[var(--bs-tertiary-bg)] hover:text-[var(--bs-body-color)]","data-[highlighted=true]:bg-[var(--bs-tertiary-bg)] data-[highlighted=true]:text-[var(--bs-body-color)]"),"data-highlighted":f===x,onClick:()=>{a(j.value),b(!1)},onMouseEnter:()=>{p.current=!1,g(f)},children:[e.jsx("span",{className:"font-medium block",children:j.label}),j.details&&j.details.length>0&&e.jsx("div",{className:"pl-0 mt-[2px] font-mono text-[0.75em] text-[var(--bs-secondary-color)] whitespace-nowrap overflow-hidden text-ellipsis group-hover:text-[var(--bs-secondary-color)] group-data-[highlighted=true]:text-[var(--bs-secondary-color)]",children:j.details.map((w,B)=>e.jsx("span",{className:"inline-block mr-[6px] last:mr-0 after:content-[','] last:after:content-['']",children:w},B))})]},`${j.value}-${f}`))})})})})]})},Pa={type:"spring",stiffness:700,damping:30},Vn=({checked:s,onCheckedChange:a,label:t,description:n,disabled:o})=>e.jsxs("div",{className:C("flex items-center justify-between",o&&"opacity-60 pointer-events-none grayscale-[0.5]"),children:[t&&e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"font-medium leading-tight",children:t}),n&&e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:n})]}),e.jsx(Za,{className:C("w-[42px] h-[25px] bg-[var(--bs-secondary-bg,#e9ecef)] rounded-full relative shadow-[inset_0_0.125rem_0.25rem_rgba(0,0,0,0.075)] flex items-center p-[2px] border border-[var(--bs-border-color)] cursor-pointer transition-colors duration-150 ease-in-out","data-[state=checked]:bg-[var(--bs-primary,#0d6efd)] data-[state=checked]:justify-end","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:shadow-[0_0_0_0.25rem_rgba(13,110,253,0.25)]"),checked:s,onCheckedChange:a,disabled:o,children:e.jsx(Ba,{asChild:!0,children:e.jsx(T.span,{className:"block w-[21px] h-[21px] bg-white rounded-full shadow-[0_1px_2px_rgba(0,0,0,0.1)] will-change-[transform]",layout:!0,transition:Pa})})})]}),ie=({label:s,description:a,checked:t,onCheckedChange:n,className:o,disabled:l})=>e.jsxs("div",{className:C("flex items-center cursor-pointer px-3 py-3 rounded-[12px] bg-[var(--bs-tertiary-bg)] border border-sidebar-border transition-all duration-200 mb-2 hover:bg-sidebar-hover hover:border-sidebar-active hover:-translate-y-[2px]","justify-between",o,l&&"opacity-60 pointer-events-none grayscale-[0.5]"),onClick:()=>!l&&n(!t),role:"button",tabIndex:l?-1:0,onKeyDown:r=>{!l&&(r.key==="Enter"||r.key===" ")&&n(!t)},children:[e.jsxs("div",{className:"mr-4",children:[e.jsx("div",{className:"font-medium leading-tight",children:s}),a&&e.jsx("div",{className:"text-gray-500 text-xs mt-0.5",children:a})]}),e.jsx(Za,{className:C("w-[42px] h-[25px] bg-[var(--bs-secondary-bg,#e9ecef)] rounded-full relative shadow-[inset_0_0.125rem_0.25rem_rgba(0,0,0,0.075)] flex items-center p-[2px] border border-[var(--bs-border-color)] cursor-pointer transition-colors duration-150 ease-in-out","data-[state=checked]:bg-[var(--bs-primary,#0d6efd)] data-[state=checked]:justify-end","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:shadow-[0_0_0_0.25rem_rgba(13,110,253,0.25)]"),checked:t,onCheckedChange:n,disabled:l,children:e.jsx(Ba,{asChild:!0,children:e.jsx(T.span,{className:"block w-[21px] h-[21px] bg-white rounded-full shadow-[0_1px_2px_rgba(0,0,0,0.1)] will-change-[transform]",layout:!0,transition:Pa})})})]}),Xn=({className:s,label:a,id:t,...n})=>{const o=h.useId(),l=t||o;return e.jsxs("div",{className:C("flex items-center gap-2 cursor-pointer",s),children:[e.jsx(Za,{id:l,className:C("w-[42px] h-[25px] bg-[var(--bs-secondary-bg,#e9ecef)] rounded-full relative shadow-[inset_0_0.125rem_0.25rem_rgba(0,0,0,0.075)] flex items-center p-[2px] border border-[var(--bs-border-color)] cursor-pointer transition-colors duration-150 ease-in-out","data-[state=checked]:bg-[var(--bs-primary,#0d6efd)] data-[state=checked]:justify-end","disabled:opacity-50 disabled:cursor-not-allowed","focus-visible:outline-none focus-visible:shadow-[0_0_0_0.25rem_rgba(13,110,253,0.25)]"),...n,children:e.jsx(Ba,{asChild:!0,children:e.jsx(T.span,{className:"block w-[21px] h-[21px] bg-white rounded-full shadow-[0_1px_2px_rgba(0,0,0,0.1)] will-change-[transform]",layout:!0,transition:Pa})})}),a&&e.jsx("label",{className:"text-base text-[var(--bs-body-color,#212529)] leading-[1.5] cursor-pointer select-none",htmlFor:l,children:a})]})};Xn.displayName="Switch";const Ac=({children:s,content:a})=>{const[t,n]=h.useState(!1),[o,l]=h.useState({left:0,top:0}),r=i=>{const d=i.currentTarget.getBoundingClientRect();l({left:d.left+d.width/2,top:d.top-8}),n(!0)},c=()=>n(!1);return e.jsxs("div",{onMouseEnter:r,onMouseLeave:c,onFocus:r,onBlur:c,className:"inline-flex",children:[s,On.createPortal(e.jsx(Pe,{children:t&&e.jsxs(T.div,{initial:{opacity:0,scale:.2,y:"-100%",x:"-50%"},animate:{opacity:1,scale:1,y:"-100%",x:"-50%"},exit:{opacity:0,scale:.2,y:"-100%",x:"-50%"},transition:{type:"spring",stiffness:300,damping:25},className:"fixed p-[6px_10px] text-xs leading-normal text-white bg-black/85 rounded whitespace-normal text-center shadow-[0_2px_10px_rgba(0,0,0,0.2)] z-[9999] max-w-[200px] pointer-events-none origin-[center_bottom]",style:{left:o.left,top:o.top},children:[a,e.jsx("div",{className:"absolute bottom-[-4px] left-1/2 -translate-x-1/2 border-t-[4px] border-x-[4px] border-b-0 border-solid border-[rgba(0,0,0,0.85)_transparent_transparent_transparent]"})]})}),document.body)]})},xe=({value:s,onValueChange:a,items:t,placeholder:n,disabled:o,triggerClassName:l,contentClassName:r,viewportClassName:c,size:i,groupPosition:d})=>{const b=s===""?"___EMPTY___":s,x=d==="first"?"!rounded-r-none !border-r-0":d==="last"?"!rounded-l-none":d==="middle"?"!rounded-none !border-r-0":"";return e.jsxs(Xo,{value:b,onValueChange:g=>a(g==="___EMPTY___"?"":g),disabled:o,children:[e.jsxs(Fo,{className:C("flex items-center justify-between rounded-[12px] px-[12px] text-[14px] leading-none h-[38px] gap-[5px] bg-[var(--bs-body-bg)] text-[var(--bs-body-color)] border border-[var(--bs-border-color)] w-full transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] cursor-pointer","hover:bg-[var(--bs-tertiary-bg)] hover:border-[var(--bs-border-color-translucent)]","focus:outline-none focus:border-[#86b7fe] data-[state=open]:outline-none data-[state=open]:border-[#86b7fe] data-[state=open]:transition-all",i==="sm"&&"h-[32px] text-[0.875rem] px-[10px]",x,l,o&&"opacity-60 pointer-events-none grayscale-[0.5]"),"aria-label":n,children:[e.jsx(Lo,{placeholder:n}),e.jsx(zo,{children:e.jsx(cs,{className:"opacity-50",size:16})})]}),e.jsx(Jo,{children:e.jsx(Ko,{className:C("overflow-hidden bg-[var(--bs-body-bg)] rounded-[20px] border border-[var(--bs-border-color)] shadow-[0px_4px_6px_-1px_rgba(0,0,0,0.1),0px_10px_15px_-3px_rgba(0,0,0,0.1)] z-[2000] max-h-[var(--radix-select-content-available-height)] origin-[var(--radix-select-content-transform-origin)] will-change-[transform,opacity]","data-[state=open]:animate-slideDownAndFade data-[state=closed]:animate-slideUpAndFade","data-[side=top]:data-[state=open]:animate-slideUpAndFadeIn data-[side=bottom]:data-[state=open]:animate-slideDownAndFadeIn",r),position:"popper",sideOffset:5,align:"start",style:{width:"var(--radix-select-trigger-width)"},asChild:!0,children:e.jsx(T.div,{initial:{opacity:0,scale:.95,y:-2},animate:{opacity:1,scale:1,y:0},transition:{duration:.15,ease:"easeOut"},children:e.jsx(Ho,{className:C("p-[5px] overflow-y-auto max-h-[50vh] max-h-[var(--radix-select-content-available-height)]",c),children:t.map((g,p)=>{const u=g.value===""?"___EMPTY___":g.value;return e.jsxs(Do,{value:u,className:C("text-[14px] leading-none text-[var(--bs-body-color)] rounded-[20px] flex items-center h-[32px] pl-[25px] pr-[35px] relative select-none cursor-pointer transition-colors duration-100 ease","data-[highlighted]:bg-[var(--bs-tertiary-bg,#e9ecef)] data-[highlighted]:text-[var(--bs-emphasis-color,#000000)]"),children:[e.jsx(Mo,{children:g.label}),e.jsx(Uo,{className:"absolute left-0 w-[25px] inline-flex items-center justify-center",children:e.jsx(rs,{size:14})})]},`${u}-${p}`)})})})})})]})},Nc=({label:s,value:a,values:t,onChange:n,emptyChoose:o,emptyChooseName:l,disabled:r})=>{const c=t.map(i=>({value:i,label:i}));return o&&c.unshift({value:"",label:l??"Choose..."}),e.jsxs("div",{className:C("flex items-center mb-4 flex-wrap",r&&"opacity-60 pointer-events-none grayscale-[0.5]"),children:[e.jsx("label",{className:"basis-[150px] shrink-0 mr-6 font-medium max-[576px]:basis-full max-[576px]:mr-0 max-[576px]:mb-2",children:s}),e.jsx("div",{className:"grow min-w-0 relative",children:e.jsx(xe,{value:a,onValueChange:n,items:c,disabled:r})})]})};W.memo(Nc);const Cc=({value:s,values:a,onChange:t,format:n,emptyChoose:o,emptyChooseName:l,disabled:r,triggerClassName:c,groupPosition:i})=>{const d=a.map(b=>{const x=typeof b=="string"?b:b[1],g=typeof b=="string"?b:b[0];return{value:x,label:n?n(g):g}});return o&&d.unshift({value:"",label:l??"Choose..."}),e.jsx(xe,{value:s,onValueChange:t,items:d,disabled:r,triggerClassName:c,groupPosition:i})},Ts=W.memo(Cc),wc=({values:s,items:a,onUpdate:t,triggerClassName:n,placeholder:o="Choose...",groupPosition:l})=>{const r=l==="first"?"!rounded-r-none !border-r-0":l==="last"?"!rounded-l-none":l==="middle"?"!rounded-none !border-r-0":"";return e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs("div",{className:C("flex items-center justify-between rounded-[12px] px-[12px] text-[14px] leading-none h-[38px] gap-[5px] bg-[var(--bs-body-bg)] text-[var(--bs-body-color)] border border-[var(--bs-border-color)] w-full transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] cursor-pointer","hover:bg-[var(--bs-tertiary-bg)] hover:border-[var(--bs-border-color-translucent)]","focus:outline-none focus:border-[#86b7fe] data-[state=open]:outline-none data-[state=open]:border-[#86b7fe] data-[state=open]:transition-all",r,n),children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 overflow-hidden",children:[s.length>0&&e.jsx("span",{className:"inline-flex items-center justify-center bg-[var(--bs-primary-bg-subtle)] text-[var(--bs-primary)] text-[0.75rem] font-semibold h-[20px] min-w-[20px] px-[6px] rounded-full leading-none",children:s.length}),e.jsx("span",{className:C("text-truncate",s.length===0&&"opacity-50"),children:s.length===0?o:s.join(", ")})]}),e.jsx(cs,{className:"opacity-50 flex-shrink-0",size:16})]})}),e.jsx(ze,{style:{minWidth:"min(300px, 90vw)"},children:a.map(c=>e.jsx(Ua,{checked:s.includes(c),onSelect:i=>i.preventDefault(),onCheckedChange:()=>t(s.includes(c)?s.filter(i=>i!==c):[...s,c]),children:c},c))})]})},Sc=W.memo(wc),Ic=({label:s,value:a,values:t,onChange:n,emptyChoose:o,emptyChooseName:l,format:r,className:c,disabled:i})=>{const d=t.map(b=>{const x=typeof b=="string"?b:b[1],g=typeof b=="string"?b:b[0];return{value:x,label:r?r(g):g}});return o&&d.unshift({value:"",label:l??"Choose..."}),e.jsxs("div",{className:C("flex flex-col mb-4 relative",c,i&&"opacity-60 pointer-events-none grayscale-[0.5]"),children:[e.jsx(D,{className:"mb-2 basis-auto mr-0 font-medium",children:s}),e.jsx(xe,{value:a,onValueChange:n,items:d,disabled:i})]})},ns=W.memo(Ic),Wc=({label:s,type:a,value:t,onChange:n,filter:o,format:l,className:r,disabled:c})=>{const i=h.useMemo(()=>{let d=a.values;return o&&(d=d.filter(o)),d.map(b=>({value:String(b.number),label:l?l(b.number):b.name}))},[a,o,l]);return e.jsxs("div",{className:C("flex flex-col mb-4 relative",r,c&&"opacity-60 pointer-events-none grayscale-[0.5]"),children:[e.jsx(D,{className:"mb-2 basis-auto mr-0 font-medium",children:s}),e.jsx(xe,{value:String(t),onValueChange:d=>n(Number(d)),items:i,disabled:c})]})},De=W.memo(Wc),kc=({label:s,type:a,value:t,onChange:n,filter:o,format:l,emptyChoose:r,disabled:c,className:i,triggerClassName:d,size:b,style:x})=>{const g=h.useMemo(()=>{let p=a.values;return o&&(p=p.filter(o)),p.map(u=>({value:String(u.number),label:l?l(u.number):u.name}))},[a,o,l]);return r&&g.unshift({value:"",label:"Choose..."}),e.jsxs("div",{className:C("flex items-center mb-4 flex-wrap",c&&"opacity-60 pointer-events-none grayscale-[0.5]",i),style:x,children:[s&&e.jsx("label",{className:"basis-[150px] shrink-0 mr-6 font-medium max-[576px]:basis-full max-[576px]:mr-0 max-[576px]:mb-2",children:s}),e.jsx("div",{className:"grow min-w-0 relative",children:e.jsx(xe,{value:String(t),onValueChange:p=>n(Number(p)),items:g,disabled:c,triggerClassName:d,size:b})})]})},ua=W.memo(kc),Zc=({label:s,checked:a,onChange:t,className:n,disabled:o})=>e.jsxs("div",{className:C("flex items-center mb-4",n,o&&"opacity-60 pointer-events-none grayscale-[0.5]"),children:[e.jsx("label",{className:"basis-[150px] shrink-0 mr-6 font-medium",children:s}),e.jsx("div",{className:"grow min-w-0 relative",children:e.jsx(Vn,{checked:a,onCheckedChange:t,disabled:o})})]}),pe=W.memo(Zc),N=W.memo(({label:s,value:a,onChange:t,placeholder:n,className:o,reminds:l,size:r,...c})=>{const i=h.useId();return e.jsxs("div",{className:C("flex flex-col mb-4 relative",o),children:[e.jsx(D,{htmlFor:i,style:{marginBottom:"0.5rem",display:"block"},children:s}),l?e.jsx(yc,{id:i,size:r,value:a,onChange:t,placeholder:n,options:l.map(d=>({label:d.label,value:d.value,details:d.label_children})),...c}):e.jsx(ge,{id:i,size:r,value:a,onChange:d=>t(d.target.value),placeholder:n,...c})]})}),jt=W.memo(({label:s,value:a,onChange:t,placeholder:n,className:o})=>{const[l,r]=h.useState(!1);return e.jsxs("div",{className:C("flex flex-col mb-4 relative",o),children:[e.jsx(D,{className:"mb-2 basis-auto mr-0 font-medium",children:s}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("input",{type:l?"text":"password",className:C("flex items-center justify-between rounded-md px-[15px] text-[14px] leading-none h-[38px] gap-[5px] bg-[var(--bs-body-bg)] text-[var(--bs-body-color)] border-[0.5px] border-[var(--bs-border-color)] w-full","focus:outline-none focus:border-[var(--bs-primary)] focus:shadow-[0_0_0_2px_var(--bs-primary-bg-subtle)]"),value:a,onChange:c=>t(c.target.value),placeholder:n,style:{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}}),e.jsx(y,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>r(!l),children:l?e.jsx(tl,{size:16}):e.jsx(nl,{size:16})})]})]})}),Vs=W.memo(({label:s,value:a,min:t,max:n,step:o,unit:l,onChange:r,className:c})=>e.jsxs("div",{className:C("flex flex-col mb-4 relative",c),children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx(D,{className:"mb-0 font-medium",children:s}),e.jsxs("div",{className:"text-blue-500 font-bold font-mono text-sm bg-blue-500/10 px-2 py-1 rounded",children:[a.toLocaleString()," ",l]})]}),e.jsxs(Qo,{className:"relative flex items-center select-none touch-none w-full h-[20px]",value:[a],onValueChange:i=>r(i[0]),min:t,max:n,step:o,children:[e.jsx(Po,{className:"bg-[var(--bs-secondary-bg)] relative grow rounded-full h-[3px]",children:e.jsx(To,{className:"absolute bg-[var(--bs-primary)] rounded-full h-full",asChild:!0,children:e.jsx(T.span,{layout:!0,transition:{type:"spring",stiffness:400,damping:30}})})}),e.jsx(_o,{className:"block w-[20px] h-[20px] bg-white shadow-[0_2px_5px_-1px_rgba(0,0,0,0.1)] rounded-[10px] border border-[var(--bs-border-color)] hover:bg-[var(--bs-body-bg)] focus:outline-none focus:shadow-[0_0_0_5px_var(--bs-primary-bg-subtle)]",asChild:!0,children:e.jsx(T.span,{layout:!0,whileHover:{scale:1.2},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:20}})})]}),e.jsxs("div",{className:"flex justify-between text-gray-500 opacity-50",style:{fontSize:"0.7rem",fontWeight:600},children:[e.jsxs("span",{children:["MIN: ",t.toLocaleString()]}),e.jsxs("span",{children:["MAX: ",n.toLocaleString()]})]})]})),Fn=W.memo(({label:s,value:a,onChange:t,placeholder:n,className:o,disabled:l})=>{const r=x=>{if(!x||x.length===0)return"";try{return btoa(String.fromCharCode(...x))}catch{return""}},[c,i]=h.useState(r(a));h.useEffect(()=>{const x=r(a);x!==c&&i(x)},[a]);const d=x=>{i(x);try{const g=atob(x),p=Uint8Array.from(g,u=>u.charCodeAt(0));t(p)}catch{}},b=e.jsxs("div",{className:"flex items-center gap-1",children:[s,e.jsx(Ac,{content:"Input must be a valid Base64 string to be saved.",children:e.jsx("div",{className:"text-red-500",style:{cursor:"help"},children:e.jsx(ol,{size:12})})})]});return e.jsx(N,{label:b,value:c,onChange:d,placeholder:n,className:o,disabled:l})}),Bc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}}),e.jsx(De,{type:Gn,value:s.cryptoMethod,disabled:!t,onChange:n=>{a({...s,cryptoMethod:n})},label:"Crypto Method"})]}),Rc=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:" BootstrapDnsWarp"});h.createContext({});const os=h.forwardRef(({className:s,children:a,...t},n)=>{const o=h.Children.count(a),l=h.Children.map(a,(r,c)=>{if(h.isValidElement(r)){let i="middle";return c===0&&(i="first"),c===o-1&&(i="last"),o===1&&(i="single"),h.cloneElement(r,{groupPosition:i})}return r});return e.jsx("div",{ref:n,className:C("relative flex flex-wrap items-stretch w-full","[&>input]:relative [&>input]:w-[1%] [&>input]:min-w-0","[&>textarea]:relative [&>textarea]:w-[1%] [&>textarea]:min-w-0","[&>div]:relative [&>div]:w-[1%] [&>div]:min-w-0","[&>button]:relative [&>button]:z-[2]","[&>:first-child]:!rounded-r-none","[&>:last-child]:!rounded-l-none","[&>:not(:first-child):not(:last-child)]:!rounded-none","[&>input:focus]:z-[3] [&>button:focus]:z-[3]",s),...t,children:l})});os.displayName="InputGroup";const Ln=h.forwardRef(({className:s,groupPosition:a,...t},n)=>{const o=a==="first"?"rounded-r-none border-r-0":a==="last"?"rounded-l-none":a==="middle"?"rounded-none border-r-0":"";return e.jsx("div",{ref:n,className:C("flex items-center py-1.5 px-3 text-base font-normal leading-normal text-[#212529] text-center whitespace-nowrap bg-[#e9ecef] border border-[#dee2e6] rounded-[12px]","dark:bg-transparent dark:border-[var(--bs-border-color)] dark:text-[var(--bs-body-color)]",o,s),...t})});Ln.displayName="InputGroupText";const de=({title:s,data:a,onChange:t,className:n,textarea:o,placeholder:l,disabled:r})=>{const[c,i]=h.useState(""),d=()=>{if(!c||r)return;const g=c.split(`
`).map(p=>p.trim()).filter(p=>p!=="");g.length>0&&(t([...a,...g]),i(""))},b=g=>{if(r)return;const p=[...a];p.splice(g,1),t(p)},x=(g,p)=>{if(r)return;const u=[...a];u[g]=p,t(u)};return e.jsxs("div",{className:n,children:[e.jsx("label",{className:"block mb-2 font-bold",children:s}),!r&&e.jsxs(os,{className:"mb-2",children:[e.jsx(Xe,{value:c,onChange:g=>i(g.target.value),placeholder:l||`Add new ${s}${o?" (one per line)":""}`,rows:o?3:void 0,className:"grow",style:{borderTopRightRadius:0,borderBottomRightRadius:0}}),e.jsx(y,{onClick:d,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:"-1px"},children:e.jsx(_,{size:18})})]}),e.jsx("div",{className:"flex flex-col gap-2",children:a.map((g,p)=>e.jsxs(os,{children:[o?e.jsx(Xe,{value:g,onChange:u=>x(p,u.target.value),rows:1,className:"grow",disabled:r,style:{borderTopRightRadius:0,borderBottomRightRadius:0}}):e.jsx(ge,{value:g,onChange:u=>x(p,u.target.value),className:"grow",disabled:r,style:{borderTopRightRadius:0,borderBottomRightRadius:0}}),!r&&e.jsx(y,{variant:"outline-danger",onClick:()=>b(p),style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:"-1px"},children:e.jsx($,{size:16})})]},p))})]})},Gc=({title:s,data:a=[],onChange:t,className:n,disabled:o})=>{const[l,r]=h.useState(""),c=()=>{!l.trim()||o||(t([...a||[],new TextEncoder().encode(l)]),r(""))},i=b=>{if(o)return;const x=[...a||[]];x.splice(b,1),t(x)},d=(b,x)=>{if(o)return;const g=[...a||[]];g[b]=new TextEncoder().encode(x),t(g)};return e.jsxs("div",{className:n,children:[e.jsx("label",{className:"block mb-2 text-sm font-bold opacity-75",children:s}),!o&&e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(Xe,{placeholder:`Paste or type ${s} bytes here...`,value:l,onChange:b=>r(b.target.value),rows:3,className:"font-mono shadow-none text-[0.85rem]"}),e.jsx(y,{onClick:c,style:{alignSelf:"flex-start"},children:e.jsx(_,{size:18})})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[(a||[]).map((b,x)=>e.jsxs("div",{className:"relative p-3 rounded-lg bg-[var(--bs-secondary-bg)] group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("small",{className:"font-bold text-[var(--bs-secondary-color)]",children:["ENTRY #",x+1]}),!o&&e.jsx(y,{variant:"outline-danger",size:"sm",onClick:()=>i(x),children:e.jsx($,{size:16})})]}),e.jsx(Xe,{value:new TextDecoder().decode(b),onChange:g=>d(x,g.target.value),readOnly:o,rows:3,className:"p-0 text-sm font-mono bg-transparent border-0 shadow-none",style:{fontSize:"0.8rem",lineHeight:"1.4"}})]},x)),(!a||a.length===0)&&e.jsxs("div",{className:"py-4 italic text-center border border-dashed rounded-lg opacity-50 text-[var(--bs-secondary-color)]",children:["No ",s," entries yet."]})]})]})},Yc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"PrivateKey",value:s.privateKey,disabled:!t,placeholder:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY=",onChange:n=>{a({...s,privateKey:n})}}),e.jsx(N,{label:"MTU",value:s.mtu.toString(),disabled:!t,onChange:n=>{isNaN(Number(n))||a({...s,mtu:Number(n)})}}),e.jsx(N,{label:"Endpoint",value:s.endpoint,disabled:!t,onChange:n=>{a({...s,endpoint:n})}}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-sm font-bold opacity-75 mb-2 block",children:"EndpointPublicKey"}),e.jsx(Xe,{rows:3,value:s.endpointPublicKey,readOnly:!t,onChange:n=>{a({...s,endpointPublicKey:n.target.value.replace(/\\n/g,`
`)})}})]}),e.jsx(de,{title:"LocalAddresses",data:s.localAddresses,disabled:!t,onChange:n=>{a({...s,localAddresses:n})}})]}),Ec=({value:s,onChange:a,editable:t=!0})=>{const o=h.useContext(Qa).map(l=>l.name?{label:l.name,value:l.name,label_children:l.addresses?.map(c=>c||"")}:void 0).filter(l=>!!l);return e.jsx(e.Fragment,{children:e.jsx(N,{label:"Network Interface",value:s.networkInterface,reminds:o,disabled:!t,onChange:l=>{a({...s,networkInterface:l})}})})},Vc=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:" Drop"}),Xc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(Fc,{data:s.addresses,editable:t,onChange:n=>a({...s,addresses:n})}),e.jsx(pe,{label:"UDP HappyEyeballs",checked:s.udpHappyEyeballs,disabled:!t,onChange:()=>{a({...s,udpHappyEyeballs:!s.udpHappyEyeballs})}})]}),Fc=({data:s,onChange:a,editable:t=!0})=>{const n=(c,i)=>{if(!t||s.length<=1||i&&c===0||!i&&c===s.length-1)return;const d=[...s],b=d[c];d[c]=d[c+(i?-1:1)],d[c+(i?-1:1)]=b,a(d)},l=h.useContext(Qa).map(c=>c.name?{label:c.name,value:c.name,label_children:c.addresses?.map(d=>d||"")}:void 0).filter(c=>!!c),r=c=>{if(!t)return;const i=[...s];i.splice(c,1),a(i)};return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:"Hosts"}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[s.length," entries"]})]}),e.jsx(ms,{type:"multiple",className:"mb-3",children:s.map((c,i)=>e.jsxs(hs,{value:`item-${i}`,children:[e.jsx(us,{children:c.host||`Host ${i+1}`}),e.jsx(xs,{children:e.jsxs("div",{className:"p-1",children:[e.jsx(N,{label:"Host",value:c.host,disabled:!t,onChange:d=>{const b=[...s];b[i]={...c,host:d},a(b)}}),e.jsx(N,{label:"Network Interface",value:c.networkInterface,reminds:l,disabled:!t,onChange:d=>{const b=[...s];b[i]={...c,networkInterface:String(d)},a(b)}}),t&&e.jsxs("div",{className:"flex justify-end gap-2 mt-3 pt-3",children:[e.jsx(y,{size:"sm",onClick:()=>n(i,!0),disabled:i===0,children:e.jsx(ys,{size:16})}),e.jsx(y,{size:"sm",onClick:()=>n(i,!1),disabled:i===s.length-1,children:e.jsx(As,{size:16})}),e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>r(i),children:[e.jsx($,{size:16,className:"mr-2"})," Delete"]})]})]})})]},i))}),t&&e.jsx("div",{className:"flex justify-end px-1",children:e.jsxs(y,{onClick:()=>{a([...s,m(mc,{host:"",networkInterface:""})])},children:[e.jsx(_,{className:"mr-1",size:16})," Add Host"]})})]})},Lc=s=>e.jsx(xa,{value:s.value,editable:s.editable,onChange:s.onChange}),xa=({value:s,onChange:a,showEnabled:t,editable:n=!0})=>e.jsxs(e.Fragment,{children:[(t===void 0||t)&&e.jsx(pe,{label:"TLS Enabled",checked:s.enable,disabled:!n,onChange:()=>{a({...s,enable:!s.enable})}}),e.jsx(pe,{label:"InsecureSkipVerify",checked:s.insecureSkipVerify,disabled:!n,onChange:()=>{a({...s,insecureSkipVerify:!s.insecureSkipVerify})}}),e.jsx(de,{className:"mb-2",title:"ServerNames",data:s.serverNames,disabled:!n,onChange:o=>{a({...s,serverNames:o})}}),e.jsx(de,{className:"mb-2",title:"NextProtos",data:s.nextProtos,disabled:!n,onChange:o=>{a({...s,nextProtos:o})}}),e.jsx(Gc,{title:"CaCert",data:s.caCert,disabled:!n,onChange:o=>{a({...s,caCert:o})}}),e.jsx(Fn,{label:"ECH Config List",value:s.echConfig,disabled:!n,onChange:o=>a({...s,echConfig:o})})]}),zc=({value:s,onChange:a,editable:t=!0})=>e.jsx(xa,{value:s.tls??m(ma,{}),editable:t,onChange:n=>{a({...s,tls:n})}}),Jc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"User",value:s.user,disabled:!t,onChange:n=>{a({...s,user:n})}}),e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}})]}),Kc=({})=>e.jsx(e.Fragment,{}),Hc=({value:s,onChange:a,editable:t=!0})=>e.jsx(e.Fragment,{children:e.jsx(N,{label:"Concurrency",value:s.concurrency.toString(),disabled:!t,onChange:n=>{isNaN(Number(n))||a({...s,concurrency:Number(n)})}})}),Dc=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:" HTTP MOCK"}),Mc=({value:s,onChange:a,editable:t=!0})=>e.jsx(e.Fragment,{children:e.jsx(N,{label:"Concurrency",value:s.concurrency.toString(),disabled:!t,onChange:n=>{isNaN(Number(n))||a({...s,concurrency:Number(n)})}})}),Uc=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"None"}),Qc=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"Proxy"}),Pc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Host",value:s.host,disabled:!t,onChange:n=>{a({...s,host:n})}}),e.jsx(xa,{showEnabled:!1,value:s.tls??m(ma,{}),editable:t,onChange:n=>{a({...s,tls:n})}})]}),Tc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{label:"Debug",checked:s.debug,disabled:!t,onChange:()=>{a({...s,debug:!s.debug})}}),e.jsx(N,{label:"PublicKey",value:s.publicKey,disabled:!t,onChange:n=>{a({...s,publicKey:n})}}),e.jsx(N,{label:"ServerName",value:s.serverName,disabled:!t,onChange:n=>{a({...s,serverName:n})}}),e.jsx(N,{label:"ShortId",value:s.shortId,disabled:!t,onChange:n=>{a({...s,shortId:n})}})]}),_c=e.jsx("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"Reject"}),as=m(Hl,{seconds:BigInt(0),nanos:0});class na{byName;byHash;constructor(a){if(this.byName={},this.byHash={},!!a)for(const t of a.groups){this.byName[t.name]={};for(const n of t.nodes)this.byName[t.name][n.name]=n.hash,this.byHash[n.hash]={group:t.name,node:n.name}}}getHashByName(a,t){const n=this.byName[a];return n?n[t]:""}getGroupByHash(a){const t=this.byHash[a];return t||{group:"",node:""}}getNodesByGroup(a){const t=this.byName[a];return t?Object.entries(t):[]}getGroups(){return Object.keys(this.byName)}}const zn=h.createContext(new na),Jn=({hash:s,data:a,onChangeNode:t})=>{const[n,o]=h.useState("");return h.useEffect(()=>{o(a.getGroupByHash(s).group)},[s,a]),e.jsxs(e.Fragment,{children:[e.jsx(ns,{label:"Group",className:"mb-2",emptyChoose:!0,value:n,onChange:l=>{o(l)},values:a.getGroups()}),e.jsx(ns,{label:"Node",emptyChoose:!0,value:s,onChange:l=>{t(l)},values:a.getNodesByGroup(n)})]})},Oc=({value:s,onChange:a,editable:t=!0})=>{const n=h.useContext(zn),[o,l]=h.useState({show:!1,hash:"",onSave:()=>{}});return e.jsxs(e.Fragment,{children:[e.jsx($c,{show:o.show,hash:o.hash,nodes:n,onHide:()=>{l(r=>({...r,show:!1}))},onChange:r=>{l(c=>({...c,hash:r}))},onSave:()=>{o.onSave(o.hash),l(r=>({...r,show:!1}))}}),e.jsx(De,{label:"Mode",type:nc,value:s.strategy,disabled:!t,onChange:r=>a({...s,strategy:r})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:"Nodes"}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[s.nodes.length," entries"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden mb-3 bg-gray-100 dark:bg-[#2b2b40]",children:[s.nodes.map((r,c)=>e.jsxs("div",{className:C("p-3 border-b flex items-center justify-between last:border-b-0",t&&"cursor-pointer hover:bg-gray-200 dark:hover:bg-white/10"),onClick:()=>{t&&l({show:!0,hash:r,onSave:i=>{const d=[...s.nodes];d[c]=i,a(m(qs,{nodes:d}))}})},children:[e.jsxs("div",{className:"truncate mr-3",children:[e.jsx("span",{className:"font-medium",children:n.getGroupByHash(r).node}),e.jsx("br",{}),e.jsx("small",{className:"text-gray-500 dark:text-gray-400 opacity-50 font-mono text-[0.7rem]",children:r})]}),t&&e.jsx(y,{variant:"outline-danger",size:"sm",onClick:i=>{i.stopPropagation();const d=[...s.nodes];d.splice(c,1),a(m(qs,{nodes:d}))},children:e.jsx($,{size:16})})]},c)),s.nodes.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 italic text-sm",children:"No nodes identified yet."})]}),t&&e.jsx("div",{className:"flex justify-end px-1",children:e.jsxs(y,{onClick:()=>{l({show:!0,hash:"",onSave:r=>{s.nodes.includes(r)||a(m(qs,{nodes:[...s.nodes,r]}))}})},children:[e.jsx(_,{className:"mr-1",size:16})," Add Node"]})})]})]})},$c=({show:s,hash:a,nodes:t,onHide:n,onChange:o,onSave:l})=>e.jsx(ne,{open:s,onOpenChange:r=>!r&&n(),children:e.jsxs(ae,{className:"max-w-[600px]",children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{className:"font-bold",children:"Select Node"})}),e.jsx(le,{children:e.jsx("div",{className:"p-1",children:e.jsx(Jn,{data:t,hash:a,onChangeNode:r=>{o(r)}})})}),e.jsxs(re,{className:"gap-2",children:[e.jsx(y,{onClick:()=>{n()},children:"Cancel"}),e.jsx(y,{onClick:()=>{l()},children:"Apply"})]})]})}),qc=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Method",value:s.method,disabled:!t,onChange:n=>{a({...s,method:n})}}),e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}})]}),ei=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Host",value:s.host,disabled:!t,onChange:n=>{a({...s,host:n})}}),e.jsx(N,{label:"Port",value:s.port,disabled:!t,onChange:n=>{a({...s,port:n})}})]}),si=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Server",value:s.server,disabled:!t,onChange:n=>{a({...s,server:n})}}),e.jsx(N,{label:"Port",value:s.port,disabled:!t,onChange:n=>{a({...s,port:n})}}),e.jsx(N,{label:"Method",value:s.method,disabled:!t,placeholder:"chacha20-ietf",onChange:n=>{a({...s,method:n})}}),e.jsx(N,{label:"Protocol",value:s.protocol,disabled:!t,placeholder:"auth_aes128_sha1",onChange:n=>{a({...s,protocol:n})}}),e.jsx(N,{label:"ProtocolParam",value:s.protoparam,disabled:!t,onChange:n=>{a({...s,protoparam:n})}}),e.jsx(N,{label:"Obfs",value:s.obfs,disabled:!t,placeholder:"http_post",onChange:n=>{a({...s,obfs:n})}}),e.jsx(N,{label:"ObfsParam",value:s.obfsparam,disabled:!t,placeholder:"#name=v",onChange:n=>{a({...s,obfsparam:n})}})]}),ai=({title:s,data:a,onChange:t,editable:n=!0})=>{const o=(r,c)=>{if(!n||a.length<=1||c&&r===0||!c&&r===a.length-1)return;const i=[...a],d=i[r];i[r]=i[r+(c?-1:1)],i[r+(c?-1:1)]=d,t(i)},l=r=>{if(!n)return;const c=[...a];c.splice(r,1),t(c)};return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:s}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[a.length," entries"]})]}),e.jsx(ms,{type:"multiple",className:"mb-3",children:a.map((r,c)=>e.jsxs(hs,{value:`item-${c}`,children:[e.jsxs(us,{children:[r.host||`Entry ${c+1}`," ",r.port?`:${r.port}`:""]}),e.jsx(xs,{children:e.jsxs("div",{className:"p-1",children:[e.jsx(N,{label:"Host",value:r.host,disabled:!n,onChange:i=>{const d=[...a];d[c]={...r,host:i},t(d)}}),e.jsx(N,{label:"Port",value:r.port,disabled:!n,onChange:i=>{const d=Number(i);if(isNaN(d)||d<0||d>65535)return;const b=[...a];b[c]={...r,port:d},t(b)}}),n&&e.jsxs("div",{className:"flex justify-end gap-2 mt-3 pt-3",children:[e.jsx(y,{size:"sm",onClick:()=>o(c,!0),disabled:c===0,children:e.jsx(ys,{size:16})}),e.jsx(y,{size:"sm",onClick:()=>o(c,!1),disabled:c===a.length-1,children:e.jsx(As,{size:16})}),e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>l(c),children:[e.jsx($,{size:16,className:"mr-2"})," Delete"]})]})]})})]},c))}),n&&e.jsx("div",{className:"flex justify-end px-1",children:e.jsxs(y,{onClick:()=>{t([...a,m(qr,{})])},children:[e.jsx(_,{className:"mr-1",size:16})," Add ",s]})})]})},ti=({value:s,onChange:a,editable:t=!0})=>{const n=o=>{a({...s,networkInterface:o})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Host",value:s.host,disabled:!t,onChange:o=>{a({...s,host:o})}}),e.jsx(N,{label:"Network Interface",value:s.networkInterface,disabled:!t,onChange:n}),e.jsx(N,{label:"Port",value:s.port.toString(),disabled:!t,onChange:o=>{const l=Number(o);isNaN(l)||l>65535||l<0||a({...s,port:l})}}),e.jsx(ai,{title:"AlternateHost",data:s.alternateHost,editable:t,onChange:o=>{a({...s,alternateHost:o})}})]})},ni=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Hostname",value:s.hostname,disabled:!t,placeholder:"127.0.0.1",onChange:n=>{a({...s,hostname:n})}}),e.jsx(N,{label:"User",value:s.user,disabled:!t,onChange:n=>{a({...s,user:n})}}),e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}}),e.jsx(N,{label:"Override Port",value:s.overridePort.toString(),disabled:!t,onChange:n=>{const o=Number(n);isNaN(o)||o>65535||o<0||a({...s,overridePort:o})}})]}),oi=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Auth Key",value:s.authKey,disabled:!t,onChange:n=>{a({...s,authKey:n})}}),e.jsx(N,{label:"Hostname",value:s.hostname,disabled:!t,onChange:n=>{a({...s,hostname:n})}}),e.jsx(N,{label:"Control URL",value:s.controlUrl,disabled:!t,onChange:n=>{a({...s,controlUrl:n})}})]}),Ta=s=>{const[a,t]=h.useState("www.example.com"),{editable:n=!0}=s;return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Next Protos",className:"mb-4",data:s.tls?.nextProtos??[],disabled:!n,onChange:o=>s.onChange({...s.tls,nextProtos:o})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:"Certificates"}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[s.tls.certificates.length," entries"]})]}),s.tls&&s.tls.certificates.map((o,l)=>e.jsx(F,{className:"mb-3",children:e.jsxs(L,{children:[n&&e.jsx(it,{className:"flex justify-end mb-3",children:e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>s.onChange({...s.tls,certificates:s.tls.certificates.filter((r,c)=>c!==l)}),children:[e.jsx($,{size:16,className:"mr-2"})," Remove"]})}),e.jsx(vt,{cert:m(Us,o),editable:n,onChange:r=>{s.onChange({...s.tls,certificates:[...s.tls.certificates.slice(0,l),r,...s.tls.certificates.slice(l+1)]})}})]})},"tls_certificates"+l)),n&&e.jsx("div",{className:"flex justify-end px-1",children:e.jsxs(y,{onClick:()=>s.onChange({...s.tls,certificates:[...s.tls.certificates,m(Us,{cert:new Uint8Array(0),key:new Uint8Array(0),certFilePath:"",keyFilePath:""})]}),children:[e.jsx(_,{className:"mr-1",size:16})," New Certificate"]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:"SNI Certificates"}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[Object.keys(s.tls.serverNameCertificate||{}).length," entries"]})]}),s.tls&&s.tls.serverNameCertificate&&Object.entries(s.tls.serverNameCertificate).map(([o,l])=>e.jsx(F,{className:"mb-3",children:e.jsxs(L,{children:[e.jsxs(it,{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"font-bold text-primary",children:o}),n&&e.jsx(y,{variant:"outline-danger",size:"sm",onClick:()=>{const r={...s.tls.serverNameCertificate};delete r[o],s.onChange({...s.tls,serverNameCertificate:r})},children:e.jsx($,{size:16})})]}),e.jsx(vt,{cert:m(Us,l),editable:n,onChange:r=>{s.onChange({...s.tls,serverNameCertificate:{...s.tls.serverNameCertificate,[o]:r}})}})]})},"server_name_certificate"+o)),n&&e.jsxs("div",{className:"bg-gray-100 dark:bg-[#2b2b40] p-3 rounded-lg flex items-end gap-3 flex-wrap sm:flex-nowrap",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"text-sm font-bold opacity-75 block mb-2",children:"New SNI Hostname"}),e.jsx(ge,{value:a,onChange:o=>t(o.target.value)})]}),e.jsxs(y,{className:"mb-1",style:{height:"35px"},onClick:()=>{a&&s.onChange({...s.tls,serverNameCertificate:{...s.tls.serverNameCertificate,[a]:m(Us,{})}})},children:[e.jsx(_,{className:"mr-1",size:16})," Add SNI"]})]})]})]})},li=({value:s,onChange:a,editable:t=!0})=>e.jsx(e.Fragment,{children:e.jsx(Ta,{tls:s.tls??m(Js,{}),editable:t,onChange:n=>a({...s,tls:n})})}),vt=s=>{const{editable:a=!0}=s;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-sm font-bold opacity-75 mb-2 block",children:"Certificate (PEM)"}),e.jsx(Xe,{rows:5,readOnly:!a,className:"font-mono text-[0.8rem]",value:new TextDecoder().decode(s.cert.cert),onChange:t=>s.onChange({...s.cert,cert:new TextEncoder().encode(t.target.value)})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-sm font-bold opacity-75 mb-2 block",children:"Private Key (PEM)"}),e.jsx(Xe,{rows:5,readOnly:!a,className:"font-mono text-[0.8rem]",value:new TextDecoder().decode(s.cert.key),onChange:t=>s.onChange({...s.cert,key:new TextEncoder().encode(t.target.value)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(N,{label:"Cert File Path",value:s.cert.certFilePath,disabled:!a,onChange:t=>s.onChange({...s.cert,certFilePath:t})})}),e.jsx("div",{children:e.jsx(N,{label:"Key File Path",value:s.cert.keyFilePath,disabled:!a,onChange:t=>s.onChange({...s.cert,keyFilePath:t})})})]})]})},ri=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}}),e.jsx(N,{label:"Peer",value:s.peer,disabled:!t,onChange:n=>{a({...s,peer:n})}})]}),ci=({value:s,onChange:a,editable:t=!0})=>e.jsx(e.Fragment,{children:e.jsx(N,{label:"UUID",value:s.uuid,disabled:!t,onChange:n=>{a({...s,uuid:n})}})}),ii=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"AlterId",value:s.alterId,disabled:!t,onChange:n=>{a({...s,alterId:n})}}),e.jsx(N,{label:"Security",value:s.security,disabled:!t,placeholder:"chacha20-poly1305",onChange:n=>{a({...s,security:n})}}),e.jsx(N,{label:"UUID",value:s.uuid,disabled:!t,placeholder:"9d5031b6-4ef5-11ee-be56-0242ac120002",onChange:n=>{a({...s,uuid:n})}})]}),di=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Host",value:s.host,disabled:!t,onChange:n=>{a({...s,host:n})}}),e.jsx(N,{label:"Path",value:s.path,disabled:!t,onChange:n=>{a({...s,path:n})}})]}),mi=({title:s,data:a,onChange:t,editable:n=!0})=>{const o=l=>{if(!n)return;const r=[...a];r.splice(l,1),t(r)};return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:s}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[a.length," peers"]})]}),e.jsx(ms,{type:"multiple",className:"mb-3",children:a.map((l,r)=>e.jsxs(hs,{value:`item-${r}`,children:[e.jsx(us,{children:l.endpoint||`Peer ${r+1}`}),e.jsx(xs,{children:e.jsxs("div",{className:"p-1",children:[e.jsx(hi,{value:l,editable:n,onChange:c=>{const i=[...a];i[r]=c,t(i)}}),n&&e.jsx("div",{className:"flex justify-end mt-3 pt-3",children:e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>o(r),children:[e.jsx($,{size:16,className:"mr-2"})," Delete Peer"]})})]})})]},r))}),n&&e.jsx("div",{className:"flex justify-end px-1",children:e.jsxs(y,{onClick:()=>{t([...a,m(ec,{allowedIps:["0.0.0.0/0"],endpoint:"127.0.0.1:51820",publicKey:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY="})])},children:[e.jsx(_,{className:"mr-1",size:16})," Add Peer"]})})]})},hi=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Endpoint",value:s.endpoint,disabled:!t,onChange:n=>{a({...s,endpoint:n})}}),e.jsx(N,{label:"PublicKey",value:s.publicKey,disabled:!t,onChange:n=>{a({...s,publicKey:n})}}),e.jsx(de,{title:"AllowedIps",data:s.allowedIps,disabled:!t,onChange:n=>{a({...s,allowedIps:n})}})]}),ui=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"SecretKey",value:s.secretKey,disabled:!t,placeholder:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY=",onChange:n=>{a({...s,secretKey:n})}}),e.jsx(N,{label:"MTU",value:s.mtu.toString(),disabled:!t,onChange:n=>{isNaN(Number(n))||a({...s,mtu:Number(n)})}}),e.jsx(Fn,{label:"Reserved",value:s.reserved,disabled:!t,onChange:n=>a({...s,reserved:n})}),e.jsx(de,{title:"Local Address",data:s.endpoint,disabled:!t,onChange:n=>{a({...s,endpoint:n})}}),e.jsx(mi,{title:"Peers",data:s.peers,editable:t,onChange:n=>{a({...s,peers:n})}})]}),xi=({value:s,onChange:a,editable:t=!0})=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{label:"UdpOverStream",checked:s.udpOverStream,disabled:!t,onChange:()=>{a({...s,udpOverStream:!s.udpOverStream})}}),e.jsx(pe,{label:"UdpCoalesce",checked:s.udpCoalesce,disabled:!t,onChange:()=>{a({...s,udpCoalesce:!s.udpCoalesce})}}),e.jsx(N,{label:"Password",value:s.password,disabled:!t,onChange:n=>{a({...s,password:n})}})]}),bi=({value:s,onChange:a,groups:t,editable:n=!0})=>{const[o,l]=h.useState(Object.keys(vs)[0]),r=(i,d)=>{if(!n)return;const b=[...s.protocols];if(d==="up"){if(i===0)return;[b[i-1],b[i]]=[b[i],b[i-1]]}else{if(i===b.length-1)return;[b[i],b[i+1]]=[b[i+1],b[i]]}a({...s,protocols:b})},c=i=>{if(!n)return;const d=[...s.protocols];d.splice(i,1),a({...s,protocols:d})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{children:e.jsx(N,{label:"Name",value:s.name,disabled:!n,onChange:i=>{a({...s,name:i})}})}),e.jsx("div",{children:e.jsx(N,{label:"Group",value:s.group,disabled:!n,onChange:i=>{a({...s,group:i})},reminds:t?t.map(i=>({label:i,value:i})):void 0})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[e.jsx("h6",{className:"font-bold mb-0 opacity-75",children:"Protocol Chain"}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[s.protocols.length," steps"]})]}),e.jsx(ms,{type:"multiple",className:"mb-3",children:s.protocols.map((i,d)=>e.jsxs(hs,{value:`item-${d}`,children:[e.jsx(us,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{variant:"primary",pill:!0,className:"text-[0.7rem] px-2",children:d+1}),i.protocol.case??"Unknown"]})}),e.jsx(xs,{children:e.jsxs("div",{className:"p-1",children:[e.jsx(Ca,{value:s.protocols[d],editable:n,onChange:b=>{const x=[...s.protocols];x[d]=b,a({...s,protocols:x})}}),n&&e.jsxs("div",{className:"flex justify-end gap-2 mt-3 pt-3",children:[e.jsx(y,{size:"sm",onClick:()=>r(d,"up"),disabled:d===0,children:e.jsx(ys,{size:16})}),e.jsx(y,{size:"sm",onClick:()=>r(d,"down"),disabled:d===s.protocols.length-1,children:e.jsx(As,{size:16})}),e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>c(d),children:[e.jsx($,{size:16,className:"me-2"})," Delete"]})]})]})})]},d))}),n&&e.jsxs("div",{className:"bg-gray-100 dark:bg-[#2b2b40] p-3 rounded-lg flex items-end gap-3 flex-wrap sm:flex-nowrap",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("label",{className:"block text-sm font-bold opacity-75 mb-2",children:"New Protocol Step"}),e.jsx(xe,{value:o,onValueChange:i=>l(i),items:Object.keys(vs).map(i=>({value:i,label:i}))})]}),e.jsxs(y,{className:"mb-1",style:{height:"35px"},onClick:()=>{a({...s,protocols:[...s.protocols,vs[o]]})},children:[e.jsx(_,{className:"mr-1",size:16})," Add Step"]})]})]})]})},Ca=({value:s,onChange:a,editable:t=!0})=>{const n=l=>a({...s,protocol:{...s.protocol,value:l}});h.useEffect(()=>{t&&s.protocol.case==="simple"&&a(m(E,{protocol:{case:"fixed",value:m(Rn,{host:s.protocol.value.host,networkInterface:s.protocol.value.networkInterface,alternateHost:s.protocol.value.alternateHost,port:s.protocol.value.port})}}))},[s.protocol.case]);const o=s.protocol;switch(o.case){case"fixed":return e.jsx(ti,{value:o.value,editable:t,onChange:l=>n(l)});case"direct":return e.jsx(Ec,{value:o.value,editable:t,onChange:l=>n(l)});case"drop":return Vc;case"tls":return e.jsx(Lc,{value:o.value,editable:t,onChange:l=>n(l)});case"websocket":return e.jsx(di,{value:o.value,editable:t,onChange:l=>n(l)});case"shadowsocks":return e.jsx(qc,{value:o.value,editable:t,onChange:l=>n(l)});case"quic":return e.jsx(Pc,{value:o.value,editable:t,onChange:l=>n(l)});case"vless":return e.jsx(ci,{value:o.value,editable:t,onChange:l=>n(l)});case"vmess":return e.jsx(ii,{value:o.value,editable:t,onChange:l=>n(l)});case"trojan":return e.jsx(ri,{value:o.value,editable:t,onChange:l=>n(l)});case"shadowsocksr":return e.jsx(si,{value:o.value,editable:t,onChange:l=>n(l)});case"obfsHttp":return e.jsx(ei,{value:o.value,editable:t,onChange:l=>n(l)});case"none":return Uc;case"socks5":return e.jsx(ni,{value:o.value,editable:t,onChange:l=>n(l)});case"http":return e.jsx(Jc,{value:o.value,editable:t,onChange:l=>n(l)});case"reject":return _c;case"yuubinsya":return e.jsx(xi,{value:o.value,editable:t,onChange:l=>n(l)});case"grpc":return e.jsx(zc,{value:o.value,editable:t,onChange:l=>n(l)});case"http2":return e.jsx(Hc,{value:o.value,editable:t,onChange:l=>n(l)});case"reality":return e.jsx(Tc,{value:o.value,editable:t,onChange:l=>n(l)});case"wireguard":return e.jsx(ui,{value:o.value,editable:t,onChange:l=>n(l)});case"mux":return e.jsx(Mc,{value:o.value,editable:t,onChange:l=>n(l)});case"bootstrapDnsWarp":return Rc;case"tailscale":return e.jsx(oi,{value:o.value,editable:t,onChange:l=>n(l)});case"set":return e.jsx(Oc,{value:o.value,editable:t,onChange:l=>n(l)});case"tlsTermination":return e.jsx(li,{value:o.value,editable:t,onChange:l=>n(l)});case"httpTermination":return e.jsx(Kc,{value:o.value,editable:t,onChange:l=>n(l)});case"httpMock":return Dc;case"aead":return e.jsx(Bc,{value:o.value,editable:t,onChange:l=>n(l)});case"networkSplit":return e.jsx(gi,{value:o.value,editable:t,onChange:l=>n(l)});case"cloudflareWarpMasque":return e.jsx(Yc,{value:o.value,editable:t,onChange:l=>n(l)});case"proxy":return Qc;case"fixedv2":return e.jsx(Xc,{value:o.value,editable:t,onChange:l=>n(l)});default:return pi}},gi=({value:s,onChange:a,editable:t=!0})=>{const n=Object.keys(vs).filter(o=>o!=="networkSplit");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-bold opacity-75 mb-2",children:"TCP Protocol"}),e.jsx(xe,{value:s.tcp?.protocol.case??"",items:n.map(o=>({value:o,label:o})),disabled:!t,onValueChange:o=>{a({...s,tcp:vs[o]})}})]}),e.jsx(F,{className:"mb-4",children:e.jsx(L,{children:s.tcp&&e.jsx(Ca,{value:s.tcp,editable:t,onChange:o=>{a({...s,tcp:o})}})})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-bold opacity-75 mb-2",children:"UDP Protocol"}),e.jsx(xe,{value:s.udp?.protocol.case??"",items:n.map(o=>({value:o,label:o})),disabled:!t,onValueChange:o=>{a({...s,udp:vs[o]})}})]}),e.jsx(F,{children:e.jsx(L,{children:s.udp&&e.jsx(Ca,{value:s.udp,editable:t,onChange:o=>{a({...s,udp:o})}})})})]})},pi=e.jsx("div",{className:"text-center my-2 opacity-40",children:"Not Implement"}),va=m(ma,{enable:!1,caCert:[new TextEncoder().encode(`-----CERTIFICATE-----
        MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQD4MVvq8SAOzdeE
        SUfehAij/kdTYKPfuc+5SBTNSykilsGsY1mEu4qS6Abc/8bfRM7e9+4bAkA9rSma
        p9Rza0YWNwdYQD3j3vuFlR6ic6tTYN7estRGGFOoI5MxA8OsYDbWNnO/3jYlErtn
        XUqDK5iABtBYNsSrLEc/Y2iISCm0zIT7Bfn3gzboggbqx5bpWjT5HmMRZmezl6EB
        y6HjCSIgZzP2v3yOfOVcu70vKABD3X1bzaKEn86rXNra0TZkqvB9vPv1PsBrELrO
        JxFRrAZylgeShzXgBXWjZKyj/toZ7FJLDv896sW/LuQarQufIcluisO++Xkz/EwQ
        VuXURFENAgMBAAECggEAIuOnaPfD+qjHiNZXVsmnQExswOUHLFpdv81I9VIBQpZA
        PAhMS3skoAGjg1omXfj5fsEKFPxkRPdMb6vzktUL6XALZYXEXX3ZTD456/rIJQSr
        V9F6Qy9ExVBY7u05SshMtSC69Ugawuvm8cEcyiMtASRUEe6DB5AGJPxHs863JC3M
        Dcb5nNYPGjFCsahkwz4rQq/eQQI0j+8TZlHtPFjTCgqMblk2qR/vwkfTI6Wv/rO6
        YZ+M3xXpYc4j1qcHz5PFxIh3kZMgP/GdqLf+l5O4JaFv2aqxEmCjTHq3rAlxJeiV
        tCT5xYCwYzZtZkZq5jPP6CruNbO+L8iyLYHgLAgmsQKBgQD+Pw5nO2FR7arAMR4I
        K+bK2fFWfBTSkMRJrVqtbjr3LIjRGbGmqaF0HjR/8ZNxmyHBPmG35rfUw32NIAFc
        q9nqXVgeL07CXRadYaMoVys3mukMiQSnuycA5se5uNXk/8bulaudLX0Q605GDWto
        29W3CnWyuz1qNGRZHYZ0Duyk3QKBgQD5550WA/5Fwco2WosDqNBCetf3GZazwtKU
        46Dk1QEXeGYrw3p/o42+nNuawqqxbKhH/OJarir8oT4amXMaf60M3tRjj/DYRLx1
        WS9LkuU9bWSRFIpdJxC4BWi9IPCOsfbF0Cui9nD5dXCE6YwoQEXZ8OhE8+y+2fHU
        OULeYZVB8QKBgQDYtnrad3zuzry68aL9qB4jTj4uT7mX+hm2C3O9XLYaNfWw9ku9
        Gd4rEgwB+rKJJYhSJZA5pwmO68s63csLaNhosoQHxp9FgP9jyvO90P9feEWpj6lO
        J3KJjC02G10GwxaYCy+q3Dk8kLW5dHrXeHrkeJ/2Zy9kNaBLbaVLi+UeaQKBgQDo
        +GsRIxfgoBCLK019U9sSnsLGsSw02OLHuo07xvcFklBtbAa/BxIVKNXxKJlIXitj
        MPUz5Dpe2VK0KWmMwono/bKyPnYgp7OpEkNtCLx8z4Z5WdTDkq+bXi+OYS7hWDbd
        onuLqIMZi8ohnjfzLjfwPQ3LejqykStI1TjpZ79lgQKBgQDJAQe8Wnn2+QbWSbda
        NFGyG+hs7SkqqZmEQl3nA5kyAeOSsGtJG9tiLxDE52eMUM1iL6wNPQMDkROp3yRg
        7muJLMjiVeLFxXUyCXKj11W1VER5i16RsuWW3m5aGxumaXw4TJviJzT/dnwHe+x9
        pWZqcBJfEUP6uTLSp3CmyEPcfA==
        -----CERTIFICATE-----`)],insecureSkipVerify:!1,nextProtos:["h2"],serverNames:["www.example.com"],echConfig:new Uint8Array(8)}),vs={fixedv2:m(E,{protocol:{case:"fixedv2",value:m(dc,{addresses:[]})}}),fixed:m(E,{protocol:{case:"fixed",value:m(Rn,{host:"",alternateHost:[],port:1080})}}),none:m(E,{protocol:{case:"none",value:m(fa,{})}}),websocket:m(E,{protocol:{case:"websocket",value:m(Dr,{host:"www.example.com",path:"/msg"})}}),quic:m(E,{protocol:{case:"quic",value:m(Ur,{tls:va})}}),shadowsocks:m(E,{protocol:{case:"shadowsocks",value:m(Xr,{method:"CHACHA20-IETF-POLY1305",password:"password"})}}),obfshttp:m(E,{protocol:{case:"obfsHttp",value:m(Pr,{host:"www.example.com",port:"443"})}}),shadowsocksr:m(E,{protocol:{case:"shadowsocksr",value:m(Fr,{method:"chacha20-ietf",obfs:"http_post",obfsparam:"#name=v",password:"password",port:"1080",protocol:"auth_aes128_sha1",protoparam:"",server:"127.0.0.1"})}}),vmess:m(E,{protocol:{case:"vmess",value:m(zr,{alterId:"0",security:"chacha20-poly1305",uuid:"9d5031b6-4ef5-11ee-be56-0242ac120002"})}}),trojan:m(E,{protocol:{case:"trojan",value:m(Kr,{password:"password",peer:"peer"})}}),socks5:m(E,{protocol:{case:"socks5",value:m(Er,{hostname:"127.0.0.1:1080",password:"password",user:"username"})}}),http:m(E,{protocol:{case:"http",value:m(Vr,{password:"password",user:"username"})}}),direct:m(E,{protocol:{case:"direct",value:m(Or,{})}}),yuubinsya:m(E,{protocol:{case:"yuubinsya",value:m(Hr,{password:"password",udpOverStream:!1})}}),tls:m(E,{protocol:{case:"tls",value:va}}),wireguard:m(E,{protocol:{case:"wireguard",value:m(sc,{endpoint:["10.0.0.2/32"],mtu:1500,reserved:new Uint8Array([0,0,0]),secretKey:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY=",peers:[{allowedIps:["0.0.0.0/0"],endpoint:"127.0.0.1:51820",publicKey:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY="}]})}}),cloudflareWarpMasque:m(E,{protocol:{case:"cloudflareWarpMasque",value:m(cc,{privateKey:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY=",endpointPublicKey:`-----BEGIN PUBLIC KEY-----
SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY
SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY
-----END PUBLIC KEY-----
`,endpoint:"198.122.111.1",mtu:1280,localAddresses:["172.16.0.2/32","3333:4444:111:8567:3333:6666:a888:95a0/128"]})}}),mux:m(E,{protocol:{case:"mux",value:m(ac,{concurrency:8})}}),drop:m(E,{protocol:{case:"drop",value:m($r,{})}}),vless:m(E,{protocol:{case:"vless",value:m(Jr,{uuid:"c48619fe-8f02-49e0-b9e9-edf763e17e21"})}}),grpc:m(E,{protocol:{case:"grpc",value:m(Mr,{tls:va})}}),http2:m(E,{protocol:{case:"http2",value:m(Lr,{concurrency:8})}}),reality:m(E,{protocol:{case:"reality",value:m(Qr,{debug:!1,publicKey:"SHVqHEGI7k2+OQ/oWMmWY2EQObbRQjRBdDPimh0h1WY=",serverName:"127.0.0.1",shortId:"9d5031b6-4ef5-11ee-be56-0242ac120002"})}}),bootstrapDnsWarp:m(E,{protocol:{case:"bootstrapDnsWarp",value:{}}}),tailscale:m(E,{protocol:{case:"tailscale",value:m(tc,{authKey:"tskey-auth-xxxxx",hostname:"yuhaiin-node"})}}),set:m(E,{protocol:{case:"set",value:m(qs,{nodes:[]})}}),tlsTermination:m(E,{protocol:{case:"tlsTermination",value:m(Tr,{tls:m(Js,{certificates:[],nextProtos:[],serverNameCertificate:{}})})}}),httpTermination:m(E,{protocol:{case:"httpTermination",value:m(_r,{headers:{}})}}),httpMock:m(E,{protocol:{case:"httpMock",value:m(oc,{data:new Uint8Array})}}),aead:m(E,{protocol:{case:"aead",value:m(lc,{password:"password"})}}),networkSplit:m(E,{protocol:{case:"networkSplit",value:m(rc,{tcp:m(E,{protocol:{case:"none",value:m(fa,{})}}),udp:m(E,{protocol:{case:"none",value:m(fa,{})}})})}}),proxy:m(E,{protocol:{case:"proxy",value:m(ic,{})}})},fi=({hash:s,point:a,editable:t,show:n,onHide:o,onSave:l,groups:r,onDelete:c,isNew:i})=>{const d=h.useContext(J),b=Bn(),{copy:x,copied:g}=da({onCopyError:I=>d.Error(`Failed to copy JSON: ${I.message}`),usePromptAsFallback:!0});h.useEffect(()=>{g&&d.Info("Copied JSON to clipboard")},[g]);const{data:p,error:u,isLoading:v,isValidating:j,mutate:f}=ls(s===""?null:ve(he.method.get),Is(he.method.get,m(je,{value:s}),a),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});h.useEffect(()=>{f()},[s,f]);const w=()=>t?e.jsx(y,{disabled:j||v||!!u||!t,onClick:()=>{p&&(i&&(p.hash=""),G(he.method.save,p).then(async({error:I})=>{I?d.Error(I.msg):(d.Info("save successful"),l&&l())}))},children:j||v?e.jsx(H,{size:"sm"}):"Save"}):e.jsx(e.Fragment,{}),B=()=>{if(p){const I=sa(Ks,p,{prettySpaces:2});x(I)}};return e.jsx(ne,{open:n,onOpenChange:I=>!I&&o(),children:e.jsxs(ae,{className:"!max-w-[1000px] !w-fit md:min-w-[600px] min-w-[90vw]",children:[e.jsx(oe,{closeButton:!0,className:"border-b-0 pb-0",children:e.jsx(te,{className:"font-bold",children:p?.name||s})}),e.jsx(le,{className:"pt-2",children:e.jsx(Qa.Provider,{value:b,children:u?e.jsx(ye,{statusCode:u.code,title:u.msg,raw:u.raw}):j||v||!p?e.jsx(Y,{}):e.jsx("div",{className:"p-1",children:e.jsx(bi,{editable:t,value:p,groups:r,onChange:I=>{t&&f(U=>({...U,...I}),!1)}})})})}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx("div",{children:c&&e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(y,{variant:"outline-danger",children:[e.jsx($,{size:16,className:"mr-2"}),"Remove"]})}),e.jsxs(ze,{children:[e.jsx(Ze,{className:"text-red-500 font-bold",onSelect:()=>{o(),c()},children:"Confirm Delete"}),e.jsx(Ze,{children:"Cancel"})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[!u&&!j&&!v&&p&&e.jsx(y,{onClick:B,children:g?e.jsx(Ra,{size:16}):e.jsx(Ga,{size:16})}),e.jsx(y,{onClick:o,children:"Close"}),e.jsx(w,{})]})]})]})})},Zs=W.memo(fi),ji=({v:s,onClose:a})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full flex-col md:flex-row items-start md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center flex-grow overflow-hidden gap-3 w-full md:w-auto",children:[e.jsx(za,{icon:rl,color:"#198754",className:"flex-shrink-0",style:{width:"40px",height:"40px",marginRight:"0px",border:"none"}}),e.jsxs("div",{className:"flex flex-col overflow-hidden min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold truncate text-base",children:s.name}),e.jsx(me,{className:"bg-opacity-10 text-blue-600 border border-blue-600 border-opacity-25 px-2 py-1",style:{fontSize:"0.65rem"},children:s.group})]}),e.jsxs("small",{className:"text-gray-500 truncate font-mono opacity-75 text-sm",children:[e.jsx(Ft,{className:"mr-1 inline",size:12}),s.hash]})]})]}),e.jsx("div",{className:"flex gap-2 items-center flex-shrink-0 ml-auto md:ml-0",children:e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:t=>{t.stopPropagation(),a()},title:"Close this node connection",className:"flex items-center gap-2",style:{minWidth:"38px"},children:[e.jsx(Lt,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-1",children:"Terminate"})]})})]})});function Kn({showFooter:s=!0}){const a=h.useContext(J),{data:t,error:n,isLoading:o,mutate:l}=z(he.method.activates),[r,c]=h.useState({hash:"",show:!1,point:m(Ks,{})}),[i,d]=h.useState({show:!1,name:""});if(n!==void 0)return e.jsx(Ls,{statusCode:n.code,title:n.msg});if(o||t==null)return e.jsx(Y,{});const b=x=>{G(he.method.close,m(je,{value:x})).then(async({error:g})=>{g!==void 0?a.Error(`Failed to close node: ${g.msg}`):(a.Info(`Node ${x.substring(0,8)}... terminated`),await l()),d({show:!1,name:""})})};return e.jsxs(O,{children:[e.jsx(Te,{show:i.show,title:e.jsxs("div",{className:"py-2",children:[e.jsxs("p",{className:"mb-1",children:["Are you sure you want to ",e.jsx("strong",{children:"terminate"})," this active node connection?"]}),e.jsx("code",{className:"text-sm text-gray-500 font-mono",children:i.name})]}),onHide:()=>d(x=>({...x,show:!1})),onOk:()=>b(i.name)}),e.jsx(Zs,{show:r.show,hash:r.hash,point:r.point,editable:!1,onHide:()=>c({...r,show:!1})}),e.jsx(Ss,{items:t.nodes.sort((x,g)=>x.hash.localeCompare(g.hash)),renderListItem:x=>e.jsx(ji,{v:x,onClose:()=>d({show:!0,name:x.hash})}),onClickItem:x=>c({hash:x.hash,show:!0,point:x}),header:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(K,{icon:ll,color:"#198754",title:"Active Nodes",description:"Live outbound connection instances"}),e.jsxs(me,{variant:"success",className:"bg-opacity-10 text-green-600 border border-green-600 border-opacity-25 px-3 py-2 rounded-full",children:[t.nodes.length," Running"]})]})}),s&&e.jsx("div",{className:"text-center mt-4 opacity-50 pb-5",children:e.jsxs("small",{className:"text-gray-500 text-sm flex items-center justify-center",children:[e.jsx(Ns,{className:"mr-1",size:16}),"Closing a node here will force a reconnection if the rule still requires it."]})})]})}function vi(){const[s,a]=h.useState({show:!1,point:m(Ks,{})}),{data:t,error:n,isLoading:o}=z(he.method.now),l=120,[r,c]=h.useState({labels:[],upload:[],download:[],rawMax:0}),i=h.useCallback(d=>{const b=d.upload_rate,x=d.download_rate,g=d.time.toLocaleTimeString(),p=Math.max(b,x);c(u=>{let v=[...u.labels,g],j=[...u.upload,b],f=[...u.download,x],w=Math.max(u.rawMax,p);return v.length>l&&(v.shift(),(j.shift()===w||f.shift()===w)&&(w=Math.max(...j,...f,0))),{labels:v,upload:j,download:f,rawMax:w}})},[]);return e.jsxs("div",{className:"h-full flex flex-col box-border",children:[e.jsx(Zs,{show:s.show,hash:s.point.hash,point:s.point,editable:!1,onHide:()=>a({...s,show:!1})}),e.jsx("div",{className:"shrink-0 mb-4",children:e.jsx(Sn,{onFlow:i,extra_fields:[{label:"TCP Endpoint",value:o?"loading...":n?n.msg:t?.tcp?e.jsxs("a",{href:"#",className:"text-blue-500 hover:underline",onClick:()=>{t?.tcp&&a({show:!0,point:t.tcp})},children:[t.tcp.group,"/",t.tcp.name]}):"N/A",error:n?n.msg:void 0},{label:"UDP Endpoint",value:o?"loading...":n?n.msg:t?.udp?e.jsxs("a",{href:"#",className:"text-blue-500 hover:underline",onClick:()=>{t?.udp&&a({show:!0,point:t.udp})},children:[t.udp.group,"/",t.udp.name]}):"N/A",error:n?n.msg:void 0}]})}),e.jsx(O,{children:e.jsx(F,{className:"min-h-[400px]",children:e.jsx(L,{className:"!p-0",children:e.jsx(yi,{data:r,minHeight:400})})})}),e.jsx(Kn,{showFooter:!1})]})}const yi=ar(()=>sr(()=>import("./TrafficChartv2-BLwHc19N.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),{loading:e.jsx(Y,{})}),Hn=h.createContext({layoutId:"default"}),be=({className:s,children:a,value:t,noSlide:n,...o})=>{const l=h.useId();return e.jsx(Rt,{className:C("inline-flex bg-transparent rounded-full",s),value:t,...o,children:e.jsx(Hn.Provider,{value:{value:t,layoutId:l,noSlide:n},children:e.jsx(Oo,{id:l,children:a})})})};be.displayName=Rt.displayName;const X=({className:s,children:a,value:t,...n})=>{const o=h.useContext(Hn),l=o.value===t||Array.isArray(o.value)&&o.value.includes(t),r=o.noSlide?void 0:`${o.layoutId}-indicator`;return e.jsxs(Gt,{className:C("bg-transparent text-sidebar-color border border-sidebar-border py-[6px] px-[12px] text-[0.875rem] font-medium cursor-pointer transition-all duration-200 flex items-center justify-center -mr-px whitespace-nowrap","first:rounded-l-[12px] last:rounded-r-[12px] last:mr-0","hover:!bg-sidebar-hover hover:z-10","data-[state=on]:bg-transparent data-[state=on]:text-sidebar-active data-[state=on]:border-sidebar-active data-[state=on]:z-20 data-[state=on]:shadow-none data-[state=on]:font-semibold","focus-visible:outline-2 focus-visible:outline-[var(--bs-secondary)] focus-visible:outline-offset-2 focus-visible:z-30",s),value:t,...n,style:{position:"relative",zIndex:1,...n.style},children:[l&&e.jsx(T.div,{layoutId:r,style:{position:"absolute",inset:0,backgroundColor:"var(--sidebar-active-bg)",borderRadius:"inherit",zIndex:-1,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},initial:o.noSlide?{opacity:0,scale:.95}:void 0,animate:o.noSlide?{opacity:1,scale:1}:void 0,exit:o.noSlide?{opacity:0,scale:.95}:void 0,transition:{type:"spring",stiffness:500,damping:30}}),e.jsx("span",{style:{position:"relative",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"},children:a})]})};X.displayName=Gt.displayName;function _a(s){return function(a,t){s(n=>{if(n!==void 0)return a(n)},t)}}function ke(s,a){if(s!==void 0)return a(s)}const Oa=q("ChBjb25maWcvbG9nLnByb3RvEgt5dWhhaWluLmxvZyKdAQoGbG9nY2F0EiUKBWxldmVsGAEgASgOMhYueXVoYWlpbi5sb2cubG9nX2xldmVsEgwKBHNhdmUYAiABKAgSMgoUaWdub3JlX3RpbWVvdXRfZXJyb3IYAyABKAhSFGlnbm9yZV90aW1lb3V0X2Vycm9yEioKEGlnbm9yZV9kbnNfZXJyb3IYBCABKAhSEGlnbm9yZV9kbnNfZXJyb3IqUAoJbG9nX2xldmVsEgsKB3ZlcmJvc2UQABIJCgVkZWJ1ZxABEggKBGluZm8QAhILCgd3YXJuaW5nEAMSCQoFZXJyb3IQBBIJCgVmYXRhbBAFQjhaLmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9jb25maWeSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[ee]),Gs=A(Oa,0);var Xs=(s=>(s[s.verbose=0]="verbose",s[s.debug=1]="debug",s[s.info=2]="info",s[s.warning=3]="warning",s[s.error=4]="error",s[s.fatal=5]="fatal",s))(Xs||{});const Ai=fe(Oa,0),Hs=q("ChBjb25maWcvZG5zLnByb3RvEgt5dWhhaWluLmRucyJsCgNkbnMSDAoEaG9zdBgBIAEoCRIfCgR0eXBlGAUgASgOMhEueXVoYWlpbi5kbnMudHlwZRIOCgZzdWJuZXQYBCABKAkSJgoOdGxzX3NlcnZlcm5hbWUYAiABKAlSDnRsc19zZXJ2ZXJuYW1lIpYECgpkbnNfY29uZmlnEg4KBnNlcnZlchgEIAEoCRIPCgdmYWtlZG5zGAUgASgIEioKEGZha2VkbnNfaXBfcmFuZ2UYBiABKAlSEGZha2VkbnNfaXBfcmFuZ2USLgoSZmFrZWRuc19pcHY2X3JhbmdlGA0gASgJUhJmYWtlZG5zX2lwdjZfcmFuZ2USLAoRZmFrZWRuc193aGl0ZWxpc3QYCSADKAlSEWZha2VkbnNfd2hpdGVsaXN0EjgKF2Zha2VkbnNfc2tpcF9jaGVja19saXN0GA4gAygJUhdmYWtlZG5zX3NraXBfY2hlY2tfbGlzdBIxCgVob3N0cxgIIAMoCzIiLnl1aGFpaW4uZG5zLmRuc19jb25maWcuSG9zdHNFbnRyeRI3CghyZXNvbHZlchgKIAMoCzIlLnl1aGFpaW4uZG5zLmRuc19jb25maWcuUmVzb2x2ZXJFbnRyeRosCgpIb3N0c0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaQQoNUmVzb2x2ZXJFbnRyeRILCgNrZXkYASABKAkSHwoFdmFsdWUYAiABKAsyEC55dWhhaWluLmRucy5kbnM6AjgBSgQIBxAISgQIARACSgQIAhADSgQIAxAEUhRyZXNvbHZlX3JlbW90ZV9kb21haVIFbG9jYWxSBnJlbW90ZVIJYm9vdHN0cmFwIp4BCg5mYWtlZG5zX2NvbmZpZxIPCgdlbmFibGVkGAEgASgIEh4KCmlwdjRfcmFuZ2UYAiABKAlSCmlwdjRfcmFuZ2USHgoKaXB2Nl9yYW5nZRgDIAEoCVIKaXB2Nl9yYW5nZRIRCgl3aGl0ZWxpc3QYBCADKAkSKAoPc2tpcF9jaGVja19saXN0GAUgAygJUg9za2lwX2NoZWNrX2xpc3QiFgoGc2VydmVyEgwKBGhvc3QYASABKAkixQIKDWRuc19jb25maWdfdjISIwoGc2VydmVyGAEgASgLMhMueXVoYWlpbi5kbnMuc2VydmVyEiwKB2Zha2VkbnMYAiABKAsyGy55dWhhaWluLmRucy5mYWtlZG5zX2NvbmZpZxI0CgVob3N0cxgDIAMoCzIlLnl1aGFpaW4uZG5zLmRuc19jb25maWdfdjIuSG9zdHNFbnRyeRI6CghyZXNvbHZlchgEIAMoCzIoLnl1aGFpaW4uZG5zLmRuc19jb25maWdfdjIuUmVzb2x2ZXJFbnRyeRosCgpIb3N0c0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaQQoNUmVzb2x2ZXJFbnRyeRILCgNrZXkYASABKAkSHwoFdmFsdWUYAiABKAsyEC55dWhhaWluLmRucy5kbnM6AjgBKkoKBHR5cGUSCwoHcmVzZXJ2ZRAAEgcKA3VkcBABEgcKA3RjcBACEgcKA2RvaBADEgcKA2RvdBAEEgcKA2RvcRAFEggKBGRvaDMQBkI4Wi5naXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvY29uZmlnkgMF0j4CEANiCGVkaXRpb25zcOgH",[ee]),Ni=A(Hs,0);var Dn=(s=>(s[s.reserve=0]="reserve",s[s.udp=1]="udp",s[s.tcp=2]="tcp",s[s.doh=3]="doh",s[s.dot=4]="dot",s[s.doq=5]="doq",s[s.doh3=6]="doh3",s))(Dn||{});const Ci=fe(Hs,0),V=q("ChRjb25maWcvaW5ib3VuZC5wcm90bxIPeXVoYWlpbi5pbmJvdW5kIqQCCg5pbmJvdW5kX2NvbmZpZxIeCgpoaWphY2tfZG5zGAIgASgIUgpoaWphY2tfZG5zEiwKEWhpamFja19kbnNfZmFrZWlwGAMgASgIUhFoaWphY2tfZG5zX2Zha2VpcBJDCghpbmJvdW5kcxgBIAMoCzItLnl1aGFpaW4uaW5ib3VuZC5pbmJvdW5kX2NvbmZpZy5JbmJvdW5kc0VudHJ5QgIoARIlCgVzbmlmZhgEIAEoCzIWLnl1aGFpaW4uaW5ib3VuZC5zbmlmZhpJCg1JbmJvdW5kc0VudHJ5EgsKA2tleRgBIAEoCRInCgV2YWx1ZRgCIAEoCzIYLnl1aGFpaW4uaW5ib3VuZC5pbmJvdW5kOgI4AUoECAUQBlIHc2VydmVycyK3BgoHaW5ib3VuZBIMCgRuYW1lGA0gASgJEg8KB2VuYWJsZWQYDiABKAgSKwoFZW1wdHkYFSABKAsyFi55dWhhaWluLmluYm91bmQuZW1wdHlCAigBSAASLQoGdGNwdWRwGA8gASgLMhcueXVoYWlpbi5pbmJvdW5kLnRjcHVkcEICKAFIABIpCgRxdWljGBAgASgLMhUueXVoYWlpbi5pbmJvdW5kLnF1aWNCAigBSAASMQoJdHJhbnNwb3J0GAIgAygLMhoueXVoYWlpbi5pbmJvdW5kLnRyYW5zcG9ydEICKAESKQoEaHR0cBgDIAEoCzIVLnl1aGFpaW4uaW5ib3VuZC5odHRwQgIoAUgBEi0KBnNvY2tzNRgEIAEoCzIXLnl1aGFpaW4uaW5ib3VuZC5zb2NrczVCAigBSAESMwoJeXV1Ymluc3lhGAcgASgLMhoueXVoYWlpbi5pbmJvdW5kLnl1dWJpbnN5YUICKAFIARIwCgNtaXgYCCABKAsyFi55dWhhaWluLmluYm91bmQubWl4ZWRCAigBSAFSBW1peGVkEi8KB3NvY2tzNGEYCSABKAsyGC55dWhhaWluLmluYm91bmQuc29ja3M0YUICKAFIARItCgZ0cHJveHkYFCABKAsyFy55dWhhaWluLmluYm91bmQudHByb3h5QgIoAUgBEisKBXJlZGlyGBIgASgLMhYueXVoYWlpbi5pbmJvdW5kLnJlZGlyQgIoAUgBEicKA3R1bhgTIAEoCzIULnl1aGFpaW4uaW5ib3VuZC50dW5CAigBSAESRwoMcmV2ZXJzZV9odHRwGBYgASgLMh0ueXVoYWlpbi5pbmJvdW5kLnJldmVyc2VfaHR0cEICKAFIAVIMcmV2ZXJzZV9odHRwEkQKC3JldmVyc2VfdGNwGBcgASgLMhwueXVoYWlpbi5pbmJvdW5kLnJldmVyc2VfdGNwQgIoAUgBUgtyZXZlcnNlX3RjcBIqCgRub25lGBggASgLMhYueXVoYWlpbi5pbmJvdW5kLmVtcHR5QgIoAUgBQgkKB25ldHdvcmtCCgoIcHJvdG9jb2xKBAgREBJSBElQdjYirAQKCXRyYW5zcG9ydBItCgZub3JtYWwYDCABKAsyFy55dWhhaWluLmluYm91bmQubm9ybWFsQgIoAUgAEicKA3RscxgBIAEoCzIULnl1aGFpaW4uaW5ib3VuZC50bHNCAigBSAASJwoDbXV4GAIgASgLMhQueXVoYWlpbi5pbmJvdW5kLm11eEICKAFIABIrCgVodHRwMhgFIAEoCzIWLnl1aGFpaW4uaW5ib3VuZC5odHRwMkICKAFIABIzCgl3ZWJzb2NrZXQYBiABKAsyGi55dWhhaWluLmluYm91bmQud2Vic29ja2V0QgIoAUgAEikKBGdycGMYCyABKAsyFS55dWhhaWluLmluYm91bmQuZ3JwY0ICKAFIABIvCgdyZWFsaXR5GAogASgLMhgueXVoYWlpbi5pbmJvdW5kLnJlYWxpdHlCAigBSAASOwoIdGxzX2F1dG8YDSABKAsyGS55dWhhaWluLmluYm91bmQudGxzX2F1dG9CAigBSABSCHRsc19hdXRvEj4KCWh0dHBfbW9jaxgOIAEoCzIaLnl1aGFpaW4uaW5ib3VuZC5odHRwX21vY2tCAigBSABSCWh0dHBfbW9jaxIpCgRhZWFkGA8gASgLMhUueXVoYWlpbi5pbmJvdW5kLmFlYWRCAigBSAASKwoFcHJveHkYECABKAsyFi55dWhhaWluLmluYm91bmQucHJveHlCAigBSABCCwoJdHJhbnNwb3J0IgcKBWVtcHR5IgUKA211eCJ5CgZ0Y3B1ZHASDAoEaG9zdBgBIAEoCRIxCgdjb250cm9sGAIgASgOMiAueXVoYWlpbi5pbmJvdW5kLnRjcF91ZHBfY29udHJvbBIuChJ1ZHBfaGFwcHlfZXllYmFsbHMYAyABKAhSEnVkcF9oYXBweV9leWViYWxscyJGCgRxdWljEgwKBGhvc3QYASABKAkSMAoDdGxzGAMgASgLMiMueXVoYWlpbi5wcm90b2NvbC50bHNfc2VydmVyX2NvbmZpZyI2CgRodHRwEhAKCHVzZXJuYW1lGAMgASgJEhAKCHBhc3N3b3JkGAQgASgJSgQIARACUgRob3N0IkUKBnNvY2tzNRIQCgh1c2VybmFtZRgDIAEoCRIQCghwYXNzd29yZBgEIAEoCRILCgN1ZHAYBSABKAhKBAgBEAJSBGhvc3QiJwoHc29ja3M0YRIQCgh1c2VybmFtZRgCIAEoCUoECAEQAlIEaG9zdCI3CgVtaXhlZBIQCgh1c2VybmFtZRgDIAEoCRIQCghwYXNzd29yZBgEIAEoCUoECAEQAlIEaG9zdCIVCgVyZWRpchIMCgRob3N0GAEgASgJImAKBnRwcm94eRIMCgRob3N0GAEgASgJEiQKDWRuc19oaWphY2tpbmcYAiABKAhSDWRuc19oaWphY2tpbmcSIgoMZm9yY2VfZmFrZWlwGAMgASgIUgxmb3JjZV9mYWtlaXAiigEKDHR1bl9wbGF0ZnJvbRI9CgZkYXJ3aW4YASABKAsyLS55dWhhaWluLmluYm91bmQudHVuX3BsYXRmcm9tLnBsYXRmb3JtX2Rhcndpbho7Cg9wbGF0Zm9ybV9kYXJ3aW4SKAoPbmV0d29ya19zZXJ2aWNlGAEgASgJUg9uZXR3b3JrX3NlcnZpY2UixAMKA3R1bhIMCgRuYW1lGAEgASgJEgsKA210dRgCIAEoBRIiCgxmb3JjZV9mYWtlaXAYCSABKAhSDGZvcmNlX2Zha2VpcBImCg5za2lwX211bHRpY2FzdBgGIAEoCFIOc2tpcF9tdWx0aWNhc3QSNAoGZHJpdmVyGAcgASgOMiQueXVoYWlpbi5pbmJvdW5kLnR1bi5lbmRwb2ludF9kcml2ZXISDgoGcG9ydGFsGAggASgJEhwKCXBvcnRhbF92NhgLIAEoCVIJcG9ydGFsX3Y2EiUKBXJvdXRlGAogASgLMhYueXVoYWlpbi5pbmJvdW5kLnJvdXRlEhgKB3Bvc3RfdXAYDCADKAlSB3Bvc3RfdXASHAoJcG9zdF9kb3duGA0gAygJUglwb3N0X2Rvd24SLwoIcGxhdGZvcm0YDiABKAsyHS55dWhhaWluLmluYm91bmQudHVuX3BsYXRmcm9tIj4KD2VuZHBvaW50X2RyaXZlchILCgdmZGJhc2VkEAASCwoHY2hhbm5lbBABEhEKDXN5c3RlbV9ndmlzb3IQAkoECAMQBEoECAQQBVIHZ2F0ZXdheVINZG5zX2hpamFja2luZyIpCgVyb3V0ZRIOCgZyb3V0ZXMYASADKAkSEAoIZXhjbHVkZXMYAiADKAki+QEKCXl1dWJpbnN5YRIQCghwYXNzd29yZBgCIAEoCRIiCgx1ZHBfY29hbGVzY2UYDiABKAhSDHVkcF9jb2FsZXNjZUoECAEQAkoECAMQBEoECAQQBUoECAUQBkoECAYQB0oECAcQCEoECAgQCUoECAkQCkoECAoQC0oECAsQDEoECAwQDUoECA0QDlIEaG9zdFIVZm9yY2VfZGlzYWJsZV9lbmNyeXB0UgZub3JtYWxSA3Rsc1IEcXVpY1IJd2Vic29ja2V0UgRncnBjUgVodHRwMlIHcmVhbGl0eVIDbXV4Ugt0Y3BfZW5jcnlwdFILdWRwX2VuY3J5cHQiCAoGbm9ybWFsIhYKCXdlYnNvY2tldEoECAEQAlIDdGxzIjcKA3RscxIwCgN0bHMYASABKAsyIy55dWhhaWluLnByb3RvY29sLnRsc19zZXJ2ZXJfY29uZmlnIhEKBGdycGNKBAgBEAJSA3RscyISCgVodHRwMkoECAEQAlIDdGxzIsoBCgdyZWFsaXR5EhoKCHNob3J0X2lkGAEgAygJUghzaG9ydF9pZBIgCgtzZXJ2ZXJfbmFtZRgCIAMoCVILc2VydmVyX25hbWUSDAoEZGVzdBgDIAEoCRIgCgtwcml2YXRlX2tleRgEIAEoCVILcHJpdmF0ZV9rZXkSHgoKcHVibGljX2tleRgGIAEoCVIKcHVibGljX2tleRIiCgxtbGRzYTY1X3NlZWQYByABKAlSDG1sZHNhNjVfc2VlZBINCgVkZWJ1ZxgFIAEoCCKdAQoIdGxzX2F1dG8SEwoLc2VydmVybmFtZXMYASADKAkSIAoLbmV4dF9wcm90b3MYAiADKAlSC25leHRfcHJvdG9zEhgKB2NhX2NlcnQYAyABKAxSB2NhX2NlcnQSFgoGY2Ffa2V5GAQgASgMUgZjYV9rZXkSKAoDZWNoGAUgASgLMhsueXVoYWlpbi5pbmJvdW5kLmVjaF9jb25maWciYAoKZWNoX2NvbmZpZxIOCgZlbmFibGUYASABKAgSDgoGY29uZmlnGAIgASgMEiAKC3ByaXZhdGVfa2V5GAMgASgMUgtwcml2YXRlX2tleRIQCghPdXRlclNOSRgEIAEoCSIYCgVzbmlmZhIPCgdlbmFibGVkGAEgASgIIkYKDHJldmVyc2VfaHR0cBILCgN1cmwYASABKAkSKQoDdGxzGAIgASgLMhwueXVoYWlpbi5wcm90b2NvbC50bHNfY29uZmlnIhsKC3JldmVyc2VfdGNwEgwKBGhvc3QYASABKAkiGQoJaHR0cF9tb2NrEgwKBGRhdGEYASABKAwiYgoEYWVhZBIQCghwYXNzd29yZBgBIAEoCRJICg1jcnlwdG9fbWV0aG9kGAIgASgOMiIueXVoYWlpbi5wcm90b2NvbC5BZWFkQ3J5cHRvTWV0aG9kUg1jcnlwdG9fbWV0aG9kIgcKBXByb3h5KkwKD3RjcF91ZHBfY29udHJvbBIXChN0Y3BfdWRwX2NvbnRyb2xfYWxsEAASDwoLZGlzYWJsZV90Y3AQARIPCgtkaXNhYmxlX3VkcBACQjhaLmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9jb25maWeSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[ee,Z]),yt=A(V,1),Ne=A(V,2),wi=A(V,3),Si=A(V,4),Ii=A(V,5),Wi=A(V,6),ki=A(V,7),Zi=A(V,8),Bi=A(V,10),Ri=A(V,11),Gi=A(V,12),Yi=A(V,13),Ei=A(V,13,0),Vi=A(V,14),Xi=fe(V,14,0),Fi=A(V,15),Li=A(V,16),zi=A(V,17),Ji=A(V,18),Ki=A(V,19),Hi=A(V,20),Di=A(V,21),Mi=A(V,22),Ui=A(V,23),Qi=A(V,24),Pi=A(V,26),Ti=A(V,27),_i=A(V,28),Oi=A(V,29),$i=A(V,30),qi=fe(V,0),bs=q("ChNjb25maWcvY29uZmlnLnByb3RvEg55dWhhaWluLmNvbmZpZyLnAQoCczMSDwoHZW5hYmxlZBgBIAEoCBIeCgphY2Nlc3Nfa2V5GAIgASgJUgphY2Nlc3Nfa2V5Eh4KCnNlY3JldF9rZXkYAyABKAlSCnNlY3JldF9rZXkSDgoGYnVja2V0GAQgASgJEg4KBnJlZ2lvbhgFIAEoCRIiCgxlbmRwb2ludF91cmwYBiABKAlSDGVuZHBvaW50X3VybBImCg51c2VfcGF0aF9zdHlsZRgHIAEoCFIOdXNlX3BhdGhfc3R5bGUSJAoNc3RvcmFnZV9jbGFzcxgIIAEoCVINc3RvcmFnZV9jbGFzcyKTAQoNYmFja3VwX29wdGlvbhIkCg1pbnN0YW5jZV9uYW1lGAEgASgJUg1pbnN0YW5jZV9uYW1lEh4KAnMzGAIgASgLMhIueXVoYWlpbi5jb25maWcuczMSEAoIaW50ZXJ2YWwYAyABKAQSKgoQbGFzdF9iYWNrdXBfaGFzaBgEIAEoCVIQbGFzdF9iYWNrdXBfaGFzaCL0BAoHc2V0dGluZxIMCgRpcHY2GAcgASgIEjQKFXVzZV9kZWZhdWx0X2ludGVyZmFjZRgNIAEoCFIVdXNlX2RlZmF1bHRfaW50ZXJmYWNlEiQKDW5ldF9pbnRlcmZhY2UYBiABKAlSDW5ldF9pbnRlcmZhY2USQAoMc3lzdGVtX3Byb3h5GAEgASgLMhwueXVoYWlpbi5jb25maWcuc3lzdGVtX3Byb3h5UgxzeXN0ZW1fcHJveHkSLQoGYnlwYXNzGAIgASgLMh0ueXVoYWlpbi5ieXBhc3MuYnlwYXNzX2NvbmZpZxIkCgNkbnMYBCABKAsyFy55dWhhaWluLmRucy5kbnNfY29uZmlnEi8KBnNlcnZlchgFIAEoCzIfLnl1aGFpaW4uaW5ib3VuZC5pbmJvdW5kX2NvbmZpZxIjCgZsb2djYXQYCCABKAsyEy55dWhhaWluLmxvZy5sb2djYXQSRgoOY29uZmlnX3ZlcnNpb24YCSABKAsyHi55dWhhaWluLmNvbmZpZy5jb25maWdfdmVyc2lvblIOY29uZmlnX3ZlcnNpb24SKgoIcGxhdGZvcm0YCyABKAsyGC55dWhhaWluLmNvbmZpZy5wbGF0Zm9ybRJJCg9hZHZhbmNlZF9jb25maWcYDCABKAsyHy55dWhhaWluLmNvbmZpZy5hZHZhbmNlZF9jb25maWdSD2FkdmFuY2VkX2NvbmZpZxItCgZiYWNrdXAYDiABKAsyHS55dWhhaWluLmNvbmZpZy5iYWNrdXBfb3B0aW9uSgQIChALUh5pcHY2X2xvY2FsX2FkZHJfcHJlZmVyX3VuaWNhc3Qi1QEKD2FkdmFuY2VkX2NvbmZpZxIoCg91ZHBfYnVmZmVyX3NpemUYASABKAVSD3VkcF9idWZmZXJfc2l6ZRIsChFyZWxheV9idWZmZXJfc2l6ZRgCIAEoBVIRcmVsYXlfYnVmZmVyX3NpemUSMAoTdWRwX3JpbmdidWZmZXJfc2l6ZRgDIAEoBVITdWRwX3JpbmdidWZmZXJfc2l6ZRI4ChdoYXBweWV5ZWJhbGxzX3NlbWFwaG9yZRgEIAEoBVIXaGFwcHlleWViYWxsc19zZW1hcGhvcmUiLAoMc3lzdGVtX3Byb3h5EgwKBGh0dHAYAiABKAgSDgoGc29ja3M1GAMgASgIIrQBCgRpbmZvEg8KB3ZlcnNpb24YASABKAkSDgoGY29tbWl0GAIgASgJEh4KCmJ1aWxkX3RpbWUYAyABKAlSCmJ1aWxkX3RpbWUSHgoKZ29fdmVyc2lvbhgEIAEoCVIKZ29fdmVyc2lvbhIMCgRhcmNoGAUgASgJEhAKCHBsYXRmb3JtGAYgASgJEgoKAm9zGAcgASgJEhAKCGNvbXBpbGVyGAggASgJEg0KBWJ1aWxkGAkgAygJIiEKDmNvbmZpZ192ZXJzaW9uEg8KB3ZlcnNpb24YASABKAQiLAoIcGxhdGZvcm0SIAoLYW5kcm9pZF9hcHAYASABKAhSC2FuZHJvaWRfYXBwQjhaLmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9jb25maWeSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[Oa,P,Hs,V,ee]),qe=A(bs,0),Ge=A(bs,1),ed=A(bs,2),Ys=A(bs,3),sd=A(bs,4),Ae=q("ChBhcGkvY29uZmlnLnByb3RvEhJ5dWhhaWluLmFwaS5jb25maWci0AEKDXRlc3RfcmVzcG9uc2USKQoEbW9kZRgBIAEoCzIbLnl1aGFpaW4uYnlwYXNzLm1vZGVfY29uZmlnEh4KCmFmdGVyX2FkZHIYAyABKAlSCmFmdGVyX2FkZHISSgoMbWF0Y2hfcmVzdWx0GAQgAygLMiYueXVoYWlpbi5zdGF0aXN0aWMubWF0Y2hfaGlzdG9yeV9lbnRyeVIMbWF0Y2hfcmVzdWx0Eg0KBWxpc3RzGAUgAygJEgsKA2lwcxgGIAMoCUoECAIQA1IGcmVhc29uIowBCg1ibG9ja19oaXN0b3J5EhAKCHByb3RvY29sGAEgASgJEgwKBGhvc3QYAiABKAkSKAoEdGltZRgDIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASDwoHcHJvY2VzcxgEIAEoCRIgCgtibG9ja19jb3VudBgFIAEoBFILYmxvY2tfY291bnQifAoSYmxvY2tfaGlzdG9yeV9saXN0EjIKB29iamVjdHMYASADKAsyIS55dWhhaWluLmFwaS5jb25maWcuYmxvY2tfaGlzdG9yeRIyChRkdW1wX3Byb2Nlc3NfZW5hYmxlZBgCIAEoCFIUZHVtcF9wcm9jZXNzX2VuYWJsZWQisQEKDWxpc3RfcmVzcG9uc2USDQoFbmFtZXMYASADKAkSSQoPbWF4bWluZGRiX2dlb2lwGAIgASgLMh8ueXVoYWlpbi5ieXBhc3MubWF4bWluZGRiX2dlb2lwUg9tYXhtaW5kZGJfZ2VvaXASRgoOcmVmcmVzaF9jb25maWcYAyABKAsyHi55dWhhaWluLmJ5cGFzcy5yZWZyZXNoX2NvbmZpZ1IOcmVmcmVzaF9jb25maWcikQEKGHNhdmVfbGlzdF9jb25maWdfcmVxdWVzdBJJCg9tYXhtaW5kZGJfZ2VvaXAYASABKAsyHy55dWhhaWluLmJ5cGFzcy5tYXhtaW5kZGJfZ2VvaXBSD21heG1pbmRkYl9nZW9pcBIqChByZWZyZXNoX2ludGVydmFsGAIgASgEUhByZWZyZXNoX2ludGVydmFsIh4KDXJ1bGVfcmVzcG9uc2USDQoFbmFtZXMYASADKAkiKQoKcnVsZV9pbmRleBINCgVpbmRleBgBIAEoDRIMCgRuYW1lGAIgASgJImgKEXJ1bGVfc2F2ZV9yZXF1ZXN0Ei0KBWluZGV4GAEgASgLMh4ueXVoYWlpbi5hcGkuY29uZmlnLnJ1bGVfaW5kZXgSJAoEcnVsZRgCIAEoCzIWLnl1aGFpaW4uYnlwYXNzLnJ1bGV2MiKbAgoXY2hhbmdlX3ByaW9yaXR5X3JlcXVlc3QSLgoGc291cmNlGAEgASgLMh4ueXVoYWlpbi5hcGkuY29uZmlnLnJ1bGVfaW5kZXgSLgoGdGFyZ2V0GAIgASgLMh4ueXVoYWlpbi5hcGkuY29uZmlnLnJ1bGVfaW5kZXgSVAoHb3BlcmF0ZRgDIAEoDjJDLnl1aGFpaW4uYXBpLmNvbmZpZy5jaGFuZ2VfcHJpb3JpdHlfcmVxdWVzdC5jaGFuZ2VfcHJpb3JpdHlfb3BlcmF0ZSJKChdjaGFuZ2VfcHJpb3JpdHlfb3BlcmF0ZRIMCghFeGNoYW5nZRAAEhAKDEluc2VydEJlZm9yZRABEg8KC0luc2VydEFmdGVyEAIilwEKEWluYm91bmRzX3Jlc3BvbnNlEg0KBW5hbWVzGAEgAygJEh4KCmhpamFja19kbnMYAiABKAhSCmhpamFja19kbnMSLAoRaGlqYWNrX2Ruc19mYWtlaXAYAyABKAhSEWhpamFja19kbnNfZmFrZWlwEiUKBXNuaWZmGAQgASgLMhYueXVoYWlpbi5pbmJvdW5kLnNuaWZmIqMBChZwbGF0Zm9ybV9pbmZvX3Jlc3BvbnNlEkoKBmRhcndpbhgBIAEoCzI6Lnl1aGFpaW4uYXBpLmNvbmZpZy5wbGF0Zm9ybV9pbmZvX3Jlc3BvbnNlLnBsYXRmb3JtX2Rhcndpbho9Cg9wbGF0Zm9ybV9kYXJ3aW4SKgoQbmV0d29ya19zZXJ2aWNlcxgBIAMoCVIQbmV0d29ya19zZXJ2aWNlcyIdCgxyZXNvbHZlX2xpc3QSDQoFbmFtZXMYASADKAkiQQoNc2F2ZV9yZXNvbHZlchIMCgRuYW1lGAEgASgJEiIKCHJlc29sdmVyGAIgASgLMhAueXVoYWlpbi5kbnMuZG5zImoKBUhvc3RzEjMKBWhvc3RzGAEgAygLMiQueXVoYWlpbi5hcGkuY29uZmlnLkhvc3RzLkhvc3RzRW50cnkaLAoKSG9zdHNFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBMrgBCg5jb25maWdfc2VydmljZRI3CgRsb2FkEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhcueXVoYWlpbi5jb25maWcuc2V0dGluZxI3CgRzYXZlEhcueXVoYWlpbi5jb25maWcuc2V0dGluZxoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI0CgRpbmZvEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhQueXVoYWlpbi5jb25maWcuaW5mbzKLAwoFbGlzdHMSQQoEbGlzdBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRohLnl1aGFpaW4uYXBpLmNvbmZpZy5saXN0X3Jlc3BvbnNlEjkKA2dldBIcLmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZRoULnl1aGFpaW4uYnlwYXNzLmxpc3QSNAoEc2F2ZRIULnl1aGFpaW4uYnlwYXNzLmxpc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSPgoGcmVtb3ZlEhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlGhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5EjkKB3JlZnJlc2gSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSUwoLc2F2ZV9jb25maWcSLC55dWhhaWluLmFwaS5jb25maWcuc2F2ZV9saXN0X2NvbmZpZ19yZXF1ZXN0GhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5MoEFCgVydWxlcxJBCgRsaXN0EhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GiEueXVoYWlpbi5hcGkuY29uZmlnLnJ1bGVfcmVzcG9uc2USPQoDZ2V0Eh4ueXVoYWlpbi5hcGkuY29uZmlnLnJ1bGVfaW5kZXgaFi55dWhhaWluLmJ5cGFzcy5ydWxldjISRQoEc2F2ZRIlLnl1aGFpaW4uYXBpLmNvbmZpZy5ydWxlX3NhdmVfcmVxdWVzdBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJACgZyZW1vdmUSHi55dWhhaWluLmFwaS5jb25maWcucnVsZV9pbmRleBoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJWCg9jaGFuZ2VfcHJpb3JpdHkSKy55dWhhaWluLmFwaS5jb25maWcuY2hhbmdlX3ByaW9yaXR5X3JlcXVlc3QaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSOgoGY29uZmlnEhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GhgueXVoYWlpbi5ieXBhc3MuY29uZmlndjISPwoLc2F2ZV9jb25maWcSGC55dWhhaWluLmJ5cGFzcy5jb25maWd2MhoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJHCgR0ZXN0EhwuZ29vZ2xlLnByb3RvYnVmLlN0cmluZ1ZhbHVlGiEueXVoYWlpbi5hcGkuY29uZmlnLnRlc3RfcmVzcG9uc2USTwoNYmxvY2tfaGlzdG9yeRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRomLnl1aGFpaW4uYXBpLmNvbmZpZy5ibG9ja19oaXN0b3J5X2xpc3QyqAMKB2luYm91bmQSRQoEbGlzdBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRolLnl1aGFpaW4uYXBpLmNvbmZpZy5pbmJvdW5kc19yZXNwb25zZRI9CgNnZXQSHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaGC55dWhhaWluLmluYm91bmQuaW5ib3VuZBI6CgRzYXZlEhgueXVoYWlpbi5pbmJvdW5kLmluYm91bmQaGC55dWhhaWluLmluYm91bmQuaW5ib3VuZBI+CgZyZW1vdmUSHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSRgoFYXBwbHkSJS55dWhhaWluLmFwaS5jb25maWcuaW5ib3VuZHNfcmVzcG9uc2UaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSUwoNcGxhdGZvcm1faW5mbxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoqLnl1aGFpaW4uYXBpLmNvbmZpZy5wbGF0Zm9ybV9pbmZvX3Jlc3BvbnNlMocFCghyZXNvbHZlchJACgRsaXN0EhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5GiAueXVoYWlpbi5hcGkuY29uZmlnLnJlc29sdmVfbGlzdBI1CgNnZXQSHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaEC55dWhhaWluLmRucy5kbnMSOwoEc2F2ZRIhLnl1aGFpaW4uYXBpLmNvbmZpZy5zYXZlX3Jlc29sdmVyGhAueXVoYWlpbi5kbnMuZG5zEj4KBnJlbW92ZRIcLmdvb2dsZS5wcm90b2J1Zi5TdHJpbmdWYWx1ZRoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI6CgVob3N0cxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoZLnl1aGFpaW4uYXBpLmNvbmZpZy5Ib3N0cxI/CgpzYXZlX2hvc3RzEhkueXVoYWlpbi5hcGkuY29uZmlnLkhvc3RzGhYuZ29vZ2xlLnByb3RvYnVmLkVtcHR5Ej4KB2Zha2VkbnMSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaGy55dWhhaWluLmRucy5mYWtlZG5zX2NvbmZpZxJDCgxzYXZlX2Zha2VkbnMSGy55dWhhaWluLmRucy5mYWtlZG5zX2NvbmZpZxoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI+CgZzZXJ2ZXISFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUSQwoLc2F2ZV9zZXJ2ZXISHC5nb29nbGUucHJvdG9idWYuU3RyaW5nVmFsdWUaFi5nb29nbGUucHJvdG9idWYuRW1wdHlCNVorZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL2FwaZIDBdI+AhADYghlZGl0aW9uc3DoBw",[bs,P,Hs,V,zs,$t,Ot,ee,ia]),At=A(Ae,0),ad=A(Ae,4),Fs=A(Ae,6),Mn=A(Ae,7),td=A(Ae,8);var Un=(s=>(s[s.Exchange=0]="Exchange",s[s.InsertBefore=1]="InsertBefore",s[s.InsertAfter=2]="InsertAfter",s))(Un||{});const nd=fe(Ae,8,0),od=A(Ae,12),wa=Se(Ae,0),He=Se(Ae,1),Ce=Se(Ae,2),Me=Se(Ae,3),ue=Se(Ae,4);function ld(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(wa.method.load,{revalidateOnFocus:!1,use:[]}),l=Bn(),[r,c]=h.useState(!1),i=_a(o),d=h.useCallback(u=>{if(!u?.systemProxy)return[];const v=[];return u.systemProxy.http&&v.push("1"),u.systemProxy.socks5&&v.push("2"),v},[]),b=h.useMemo(()=>d(a),[a,d]),x=u=>{i(v=>({...v,systemProxy:m(sd,{http:u.includes("1"),socks5:u.includes("2")})}),!1)},g=h.useCallback(u=>u.number!==Xs.verbose&&u.number!==Xs.fatal,[]);h.useEffect(()=>{a&&(a.advancedConfig&&a.logcat||i(u=>{const v={...u};return v.advancedConfig||(v.advancedConfig=m(Ys,{relayBufferSize:4096,udpRingbufferSize:250,udpBufferSize:2048,happyeyeballsSemaphore:250})),v.logcat||(v.logcat=m(Gs,{level:Xs.info,save:!1,ignoreDnsError:!1,ignoreTimeoutError:!1})),m(ed,v)},!1))},[a,o]);const p=()=>{c(!0),G(wa.method.save,a).then(({error:u})=>{u?s.Error(`Save failed: ${u.msg}`):(s.Info("Configuration saved successfully"),o())}).finally(()=>c(!1))};return t!==void 0?e.jsx(ye,{statusCode:t.code,title:t.msg}):n||a===void 0?e.jsx(Y,{}):e.jsxs(O,{children:[e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:Ya,color:"#3b82f6",title:"General Settings",description:"Network and system integration"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"Enable IPv6",description:"Global IPv6 traffic support",checked:a.ipv6,onCheckedChange:()=>i(u=>({...u,ipv6:!u.ipv6}),!1)})}),e.jsx("div",{children:e.jsx(ie,{label:"Default Interface",description:"Automatically detect exit",checked:a.useDefaultInterface,onCheckedChange:()=>i(u=>({...u,useDefaultInterface:!u.useDefaultInterface}),!1)})}),!a.useDefaultInterface&&e.jsx("div",{className:"md:col-span-2 mt-2",children:e.jsx(N,{label:"Manual Network Interface",reminds:l.map(u=>({value:u.name,label:u.name,label_children:u.addresses})),value:a.netInterface,onChange:u=>i(v=>({...v,netInterface:u}),!1),placeholder:"e.g. eth0, wlan0"})}),e.jsxs("div",{className:"md:col-span-2 mt-4",children:[e.jsx(D,{children:"System Proxy Integration"}),e.jsxs(be,{type:"multiple",className:"w-full",value:b,onValueChange:x,noSlide:!0,children:[e.jsx(X,{value:"1",className:"flex-grow py-1 h-10",children:"HTTP Proxy"}),e.jsx(X,{value:"2",className:"flex-grow py-1 h-10",children:"SOCKS5 Proxy"})]})]})]})})]}),e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:cl,color:"#10b981",title:"Logging (Logcat)",description:"Debug and error reporting"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(De,{label:"Log Level",type:Ai,value:a.logcat?.level??Xs.info,filter:g,onChange:u=>i(v=>({...v,logcat:ke(v.logcat,j=>m(Gs,{...j,level:u}))}),!1)})}),e.jsx("div",{children:e.jsx(ie,{label:"Persistent Logging",description:"Save logs to disk",checked:a.logcat?.save??!1,onCheckedChange:()=>i(u=>({...u,logcat:ke(u.logcat,v=>m(Gs,{...v,save:!v.save}))}),!1)})}),e.jsx("div",{children:e.jsx(ie,{label:"Ignore Timeouts",description:"Hide timeout errors in logs",checked:a.logcat?.ignoreTimeoutError??!1,onCheckedChange:()=>i(u=>({...u,logcat:ke(u.logcat,v=>m(Gs,{...v,ignoreTimeoutError:!v.ignoreTimeoutError}))}),!1)})}),e.jsx("div",{children:e.jsx(ie,{label:"Ignore DNS Errors",description:"Hide resolution failures",checked:a.logcat?.ignoreDnsError??!1,onCheckedChange:()=>i(u=>({...u,logcat:ke(u.logcat,v=>m(Gs,{...v,ignoreDnsError:!v.ignoreDnsError}))}),!1)})})]})})]}),e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:zt,color:"#f59e0b",title:"Performance & Advanced",description:"Buffer sizes and concurrency limits"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Vs,{label:"UDP Buffer Size",unit:"B",value:a.advancedConfig?.udpBufferSize||2048,min:2048,max:65536,step:1024,onChange:u=>i(v=>({...v,advancedConfig:ke(v.advancedConfig,j=>m(Ys,{...j,udpBufferSize:u}))}),!1)})}),e.jsx("div",{children:e.jsx(Vs,{label:"Relay Buffer Size",unit:"B",value:a.advancedConfig?.relayBufferSize||4096,min:2048,max:65536,step:1024,onChange:u=>i(v=>({...v,advancedConfig:ke(v.advancedConfig,j=>m(Ys,{...j,relayBufferSize:u}))}),!1)})}),e.jsx("div",{children:e.jsx(Vs,{label:"UDP Ring Buffer",unit:"Slots",value:a.advancedConfig?.udpRingbufferSize||250,min:100,max:2e3,step:10,onChange:u=>i(v=>({...v,advancedConfig:ke(v.advancedConfig,j=>m(Ys,{...j,udpRingbufferSize:u}))}),!1)})}),e.jsx("div",{children:e.jsx(Vs,{label:"Happy Eyeballs Concurrency",unit:"Sems",value:a.advancedConfig?.happyeyeballsSemaphore||250,min:0,max:1e4,step:10,onChange:u=>i(v=>({...v,advancedConfig:ke(v.advancedConfig,j=>m(Ys,{...j,happyeyeballsSemaphore:u}))}),!1)})})]})}),e.jsx(Ie,{className:"flex justify-end",children:e.jsx(y,{disabled:r,onClick:p,children:r?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Apply Advanced Changes"]})})})]})]})}const rd=({item:s,index:a})=>e.jsx("div",{className:"col-span-1",children:e.jsx(Ue,{className:"cursor-default",children:e.jsxs("div",{className:"flex items-center flex-grow overflow-hidden gap-3",children:[e.jsx("div",{className:"bg-blue-500/10 text-blue-500 rounded-full flex items-center justify-center flex-shrink-0 w-8 h-8 text-[0.85rem] font-bold",children:a+1}),e.jsxs("div",{className:"flex flex-col overflow-hidden min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-bold truncate",children:s.name}),e.jsx(me,{variant:"secondary",className:"text-[0.65rem] px-2 py-1",children:s.license})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"flex items-center text-gray-500 dark:text-gray-400 text-sm no-underline font-mono opacity-75 hover:opacity-100 min-w-0",children:[e.jsx(Kt,{className:"mr-1 shrink-0",size:14}),e.jsx("span",{className:"truncate",children:s.url})]}),e.jsxs("a",{href:s.licenseUrl,target:"_blank",rel:"noreferrer",className:"flex items-center text-gray-500 dark:text-gray-400 text-sm no-underline font-mono opacity-75 min-w-0",children:[e.jsx(Cs,{className:"mr-1 shrink-0",size:14}),e.jsx("span",{className:"truncate",children:"License Source"})]})]})]})]})})}),cd=({value:s})=>e.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.map((a,t)=>e.jsx(rd,{item:a,index:t},t))});function id(){const{data:s,isLoading:a,isValidating:t,error:n}=z(ta.method.licenses,{revalidateOnFocus:!1}),[o,l]=h.useState("yuhaiin");if(n!==void 0)return e.jsx(ye,{statusCode:n.code,title:n.msg});if(a||t||!s)return e.jsx(Y,{});const r=o==="yuhaiin"?s.yuhaiin:s.android;return e.jsxs(O,{className:"h-full flex flex-col",children:[e.jsxs(F,{className:"flex-1 mb-0 flex flex-col",children:[e.jsx(M,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center w-full gap-3",children:[e.jsx(K,{icon:Jt,color:"#10b981",title:`Open Source Licenses (${r.length})`,description:"Third-party credits and legal info"}),e.jsx("div",{className:"bg-transparent p-1 rounded-lg inline-flex min-w-[220px]",children:e.jsxs(be,{type:"single",value:o,onValueChange:c=>c&&l(c),className:"w-full",children:[e.jsx(X,{value:"yuhaiin",className:"flex-grow py-1 px-3 text-[0.85rem]",children:"Core"}),e.jsx(X,{value:"android",className:"flex-grow py-1 px-3 text-[0.85rem]",children:"Android"})]})})]})}),e.jsx(L,{className:"p-4 flex-1 overflow-auto rounded-b-[inherit]",children:e.jsx("div",{children:e.jsx(cd,{value:r})})})]}),e.jsx("div",{className:"text-center mt-1 opacity-50",children:e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx(il,{className:"text-red-500 mr-1 inline",fill:"currentColor"}),"Built with love and open-source software."]})})]})}function Ds(s){const[a,t]=h.useState(!1);return h.useEffect(()=>{const n=setTimeout(()=>t(!0),s);return()=>clearTimeout(n)},[s]),a}const dd=({line:s})=>s.includes("ERROR")?e.jsx("span",{className:"text-red-500",children:s}):s.includes("WARN")?e.jsx("span",{className:"text-amber-500",children:s}):s.includes("INFO")?e.jsx("span",{className:"text-blue-500",children:s}):s.includes("DEBUG")?e.jsx("span",{className:"text-green-500",children:s}):e.jsx("span",{className:"font-mono",children:s}),md=({index:s,style:a,data:t})=>{const{width:n,...o}=a;return e.jsx("div",{style:{...o,width:"max-content"},className:"text-[13px] leading-5 flex items-center pl-4 font-mono",children:t[s]&&e.jsx(dd,{line:t[s]})})},hd=(s,a)=>{const n=[...s.flatMap(o=>o.log).reverse(),...a??[]];return n.length>1e4?n.slice(0,1e4):n};function ud(){const[s,a]=h.useState(""),t=Ds(1e3),n=h.useMemo(()=>jn(ta.method.logv2,m(ra,{}),hd,{throttle:200}),[]),{data:o,error:l}=kt(t?ve(ta.method.log):null,n,{}),r=h.useMemo(()=>o?s?o.filter(c=>c.toLowerCase().includes(s.toLowerCase())):o:[],[o,s]);return l?e.jsx(ye,{statusCode:l.code,title:l.msg}):e.jsx(O,{className:"h-full flex flex-col",children:e.jsxs(F,{className:"flex-1 mb-0 flex flex-col overflow-hidden",children:[e.jsx(M,{className:"py-3",children:e.jsxs("div",{className:"flex justify-between items-center w-full gap-3",children:[e.jsx(K,{icon:oa,color:"#f59e0b",title:"Live Logcat",description:"Real-time system events"}),e.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[e.jsx(nn,{onEnter:a,className:"flex-grow"}),e.jsxs(me,{variant:"warning",pill:!0,className:"text-[0.7rem] px-2 py-1",children:[e.jsx(Ea,{className:"mr-1",size:12}),"LIVE"]})]})]})}),e.jsx(L,{className:"p-0 bg-gray-100 dark:bg-[#18181b] flex-1 overflow-hidden rounded-b-[inherit]",children:e.jsx("div",{className:"h-full w-full rounded-[inherit] font-mono",children:e.jsx($n,{rowCount:r.length,rowHeight:20,rowComponent:md,rowProps:{data:r}})})})]})})}const Qn=q("ChNiYWNrdXAvYmFja3VwLnByb3RvEg55dWhhaWluLmJhY2t1cCJ8CgVub2RlcxIvCgVub2RlcxgBIAMoCzIgLnl1aGFpaW4uYmFja3VwLm5vZGVzLk5vZGVzRW50cnkaQgoKTm9kZXNFbnRyeRILCgNrZXkYASABKAkSIwoFdmFsdWUYAiABKAsyFC55dWhhaWluLnBvaW50LnBvaW50OgI4ASKJAQoKc3Vic2NyaWJlcxI0CgVsaW5rcxgBIAMoCzIlLnl1aGFpaW4uYmFja3VwLnN1YnNjcmliZXMuTGlua3NFbnRyeRpFCgpMaW5rc0VudHJ5EgsKA2tleRgBIAEoCRImCgV2YWx1ZRgCIAEoCzIXLnl1aGFpaW4uc3Vic2NyaWJlLmxpbms6AjgBIs0BCgVydWxlcxIoCgZjb25maWcYASABKAsyGC55dWhhaWluLmJ5cGFzcy5jb25maWd2MhIlCgVydWxlcxgCIAMoCzIWLnl1aGFpaW4uYnlwYXNzLnJ1bGV2MhIvCgVsaXN0cxgDIAMoCzIgLnl1aGFpaW4uYmFja3VwLnJ1bGVzLkxpc3RzRW50cnkaQgoKTGlzdHNFbnRyeRILCgNrZXkYASABKAkSIwoFdmFsdWUYAiABKAsyFC55dWhhaWluLmJ5cGFzcy5saXN0OgI4ASJ0CgR0YWdzEiwKBHRhZ3MYASADKAsyHi55dWhhaWluLmJhY2t1cC50YWdzLlRhZ3NFbnRyeRo+CglUYWdzRW50cnkSCwoDa2V5GAEgASgJEiAKBXZhbHVlGAIgASgLMhEueXVoYWlpbi50YWcudGFnczoCOAEikQIKDmJhY2t1cF9jb250ZW50EiQKBW5vZGVzGAIgASgLMhUueXVoYWlpbi5iYWNrdXAubm9kZXMSLgoKc3Vic2NyaWJlcxgDIAEoCzIaLnl1aGFpaW4uYmFja3VwLnN1YnNjcmliZXMSJwoDZG5zGAQgASgLMhoueXVoYWlpbi5kbnMuZG5zX2NvbmZpZ192MhIxCghpbmJvdW5kcxgFIAEoCzIfLnl1aGFpaW4uaW5ib3VuZC5pbmJvdW5kX2NvbmZpZxIkCgVydWxlcxgGIAEoCzIVLnl1aGFpaW4uYmFja3VwLnJ1bGVzEicKBHRhZ3MYByABKAsyFC55dWhhaWluLmJhY2t1cC50YWdzUgN0YWci8QEKDnJlc3RvcmVfb3B0aW9uEgsKA2FsbBgBIAEoCBINCgVydWxlcxgCIAEoCBINCgVsaXN0cxgDIAEoCBINCgVub2RlcxgEIAEoCBIMCgR0YWdzGAUgASgIEgsKA2RucxgGIAEoCBIQCghpbmJvdW5kcxgHIAEoCBISCgpzdWJzY3JpYmVzGAggASgIEj0KBnNvdXJjZRgJIAEoDjItLnl1aGFpaW4uYmFja3VwLnJlc3RvcmVfb3B0aW9uLnJlc3RvcmVfc291cmNlIiUKDnJlc3RvcmVfc291cmNlEgsKB3Vua25vd24QABIGCgJzMxABQjhaLmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9iYWNrdXCSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[ee,ha,ks,En,Hs,V,P]),xd=A(Qn,5),bd=q("ChBhcGkvYmFja3VwLnByb3RvEhJ5dWhhaWluLmFwaS5iYWNrdXAyggIKBmJhY2t1cBI9CgRzYXZlEh0ueXVoYWlpbi5jb25maWcuYmFja3VwX29wdGlvbhoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI8CgNnZXQSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHS55dWhhaWluLmNvbmZpZy5iYWNrdXBfb3B0aW9uEjgKBmJhY2t1cBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJBCgdyZXN0b3JlEh4ueXVoYWlpbi5iYWNrdXAucmVzdG9yZV9vcHRpb24aFi5nb29nbGUucHJvdG9idWYuRW1wdHlCNVorZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL2FwaZIDBdI+AhADYghlZGl0aW9uc3DoBw",[ee,zs,bs,Qn]),_s=Se(bd,0);function gd(){const s=h.useContext(J),[a,t]=h.useState(!1),[n,o]=h.useState(!1),{data:l,error:r,isLoading:c,mutate:i}=z(_s.method.get,{revalidateOnFocus:!1}),d=_a(i),b=h.useCallback(()=>{t(!0),G(_s.method.save,l).then(({error:p})=>{p?s.Error(`Save failed: ${p.msg}`):(s.Info("Configuration saved successfully"),i())}).finally(()=>t(!1))},[l,i,s]),x=h.useCallback(()=>{t(!0),G(_s.method.backup,m(ra,{})).then(({error:p})=>{p?s.Error(`Backup failed: ${p.msg}`):(s.Info("Backup completed successfully"),i())}).finally(()=>t(!1))},[s,i]),g=h.useCallback(()=>{t(!0),G(_s.method.restore,m(xd,{all:!0})).then(({error:p})=>{p?s.Error(`Restore failed: ${p.msg}`):(s.Info("Configuration restored successfully"),i())}).finally(()=>t(!1))},[s,i]);return r!==void 0?e.jsx(ye,{statusCode:r.code,title:r.msg}):c||!l?e.jsx(Y,{}):e.jsxs(O,{children:[e.jsx(Te,{show:n,title:"Restore Backup",content:e.jsxs("p",{className:"mb-0",children:["Are you sure you want to restore? This will ",e.jsx("strong",{children:"overwrite all current configurations"}),"."]}),onOk:g,onHide:()=>o(!1)}),e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:Cs,color:"#3b82f6",title:"Backup Instance",description:"Identification and timing"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(N,{label:"Instance Name",value:l.instanceName,onChange:p=>d(u=>m(Ge,{...u,instanceName:p}),!1),placeholder:"Unique identifier for this node"})}),e.jsx("div",{children:e.jsx(N,{label:"Backup Interval (Seconds)",value:l.interval.toString(),onChange:p=>{const u=parseInt(p);!isNaN(u)&&u>=0&&d(v=>m(Ge,{...v,interval:BigInt(u)}),!1)},placeholder:"e.g. 3600"})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(D,{children:"Last Backup Hash"}),e.jsxs(Ue,{className:"cursor-default bg-black/10 dark:bg-white/10",children:[e.jsx(Ft,{className:"mr-2 text-gray-500 dark:text-gray-400",size:16}),e.jsx("span",{className:"font-mono text-sm truncate opacity-75",children:l.lastBackupHash||"No backup records found"})]})]})]})})]}),e.jsxs(F,{children:[e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(ie,{label:"S3 Backup Enabled",description:"Enable automatic S3 sync",checked:l.s3?.enabled??!1,onCheckedChange:()=>d(p=>m(Ge,{...p,s3:m(qe,{...p.s3??{},enabled:!p.s3?.enabled})}),!1)})}),e.jsx("div",{children:e.jsx(ie,{label:"Use Path Style",description:"Compatibility for MinIO/S3 clones",checked:l.s3?.usePathStyle??!1,onCheckedChange:()=>d(p=>m(Ge,{...p,s3:m(qe,{...p.s3??{},usePathStyle:!p.s3?.usePathStyle})}),!1)})}),e.jsx("div",{className:"md:col-span-2 mt-2",children:e.jsx(N,{label:"Endpoint URL",value:l.s3?.endpointUrl??"",onChange:p=>d(u=>m(Ge,{...u,s3:m(qe,{...u.s3??{},endpointUrl:p})}),!1),placeholder:"https://s3.amazonaws.com"})}),e.jsx("div",{children:e.jsx(N,{label:"Bucket Name",value:l.s3?.bucket??"",onChange:p=>d(u=>m(Ge,{...u,s3:m(qe,{...u.s3??{},bucket:p})}),!1),placeholder:"my-backup-bucket"})}),e.jsx("div",{children:e.jsx(N,{label:"Region",value:l.s3?.region??"",onChange:p=>d(u=>m(Ge,{...u,s3:m(qe,{...u.s3??{},region:p})}),!1),placeholder:"us-east-1"})}),e.jsx("div",{children:e.jsx(jt,{label:"Access Key",value:l.s3?.accessKey??"",onChange:p=>d(u=>m(Ge,{...u,s3:m(qe,{...u.s3??{},accessKey:p})}),!1),placeholder:"Enter Access Key"})}),e.jsx("div",{children:e.jsx(jt,{label:"Secret Key",value:l.s3?.secretKey??"",onChange:p=>d(u=>m(Ge,{...u,s3:m(qe,{...u.s3??{},secretKey:p})}),!1),placeholder:"Enter Secret Key"})})]})}),e.jsx(Ie,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{onClick:x,disabled:a,title:"Trigger immediate backup",children:[a?e.jsx(H,{size:"sm"}):e.jsx(dl,{size:16}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Backup Now"})]}),e.jsxs(y,{onClick:()=>o(!0),disabled:a,title:"Restore from cloud",children:[e.jsx(is,{size:16}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Restore Now"})]}),e.jsxs(y,{onClick:b,disabled:a,title:"Save configuration changes",children:[e.jsx(Fe,{size:16}),e.jsx("span",{className:"ml-2 hidden sm:inline",children:"Save Config"})]})]})})]}),e.jsx("div",{className:"text-center mt-3 opacity-50 pb-20",children:e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx(Ns,{className:"mr-1 inline",size:14}),"Backups include all lists, rules, and node configurations."]})})]})}const Ye=({label:s,value:a,icon:t,url:n,isBadge:o,isMonospace:l})=>e.jsx("div",{className:"col-span-1",children:e.jsx(Ue,{className:n?"cursor-pointer":"cursor-default",children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx(za,{icon:t||nt,color:"#3b82f6",className:"flex-shrink-0 w-8 h-8 text-[0.9rem] border-none"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase opacity-75 min-w-[90px] text-[0.7rem] tracking-[0.5px]",children:s})]}),e.jsx("div",{className:"text-right overflow-hidden",children:n?e.jsxs("a",{href:n,target:"_blank",rel:"noreferrer",className:"no-underline font-mono text-blue-500 truncate block",children:[a," ",e.jsx(Yt,{className:"ml-1",size:12})]}):o?e.jsx(Be,{icon:t||nt,text:a,color:"primary"}):e.jsx("span",{className:`${l?"font-mono":""} truncate block text-[0.9rem]`,children:a})})]})})});function pd(){const{data:s,isLoading:a,isValidating:t,error:n}=z(wa.method.info);return n!==void 0?e.jsx(ye,{statusCode:n.code,title:n.msg}):a||t||!s?e.jsx(Y,{}):e.jsxs(O,{children:[e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:Ns,color:"#6366f1",title:"System Information",description:"Software version and build environment"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(Ye,{label:"Version",value:s.version||"Unknown",icon:ml,isBadge:!0}),e.jsx(Ye,{label:"Commit",value:s.commit?.substring(0,7)||"N/A",icon:hl,url:`https://github.com/yuhaiin/yuhaiin/commit/${s.commit}`,isMonospace:!0}),e.jsx(Ye,{label:"Build Time",value:s.buildTime||"N/A",icon:ul}),e.jsx(Ye,{label:"Go Version",value:s.goVersion||"N/A",icon:xl,isMonospace:!0}),e.jsx(Ye,{label:"GitHub",value:"yuhaiin/yuhaiin",icon:bl,url:"https://github.com/yuhaiin/yuhaiin"}),e.jsx(Ye,{label:"OS",value:s.os||"N/A",icon:zt}),e.jsx(Ye,{label:"Arch",value:s.arch||"N/A",icon:Ht,isMonospace:!0}),e.jsx(Ye,{label:"Compiler",value:s.compiler||"N/A",icon:oa}),e.jsx(Ye,{label:"Platform",value:s.platform||"N/A",icon:gl})]})}),s.build&&s.build.length>0&&e.jsxs(Ie,{className:"p-4 bg-transparent border-t border-gray-500/10",children:[e.jsx(D,{className:"mb-2 block text-gray-500 dark:text-gray-400",children:"Build Parameters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.build.map((o,l)=>e.jsx("div",{className:"px-2 py-1 rounded border font-mono text-sm break-all dark:border-gray-700",children:o},l))})]})]}),e.jsx("div",{className:"text-center mt-4 opacity-50 pb-12",children:e.jsxs("small",{className:"text-gray-500 dark:text-gray-400",children:["© ",new Date().getFullYear()," yuhaiin project. Distributed under MIT License."]})})]})}const Pn=({src:s})=>e.jsx("iframe",{src:s,sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",loading:"lazy",style:{border:"none",width:"100%",height:"100vh"}}),fd=()=>e.jsx(O,{children:e.jsx(Pn,{src:"https://yuhaiin.github.io/documents/"})}),jd=()=>{const[s]=ce(Ka,Ja);return e.jsx(O,{children:e.jsx(Pn,{src:s+"/debug/pprof"})})},vd=({quic:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Host",className:"mb-3",onChange:t=>a({...s,host:t}),value:s.host}),e.jsx(Ta,{tls:m(Js,s.tls?s.tls:void 0),onChange:t=>a({...s,tls:t})})]}),yd=({reverse_tcp:s,onChange:a})=>e.jsx(N,{label:"Host",value:s.host,onChange:t=>a({...s,host:t})}),Ad=({protocol:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mb-2",label:"Host",value:s.host,onChange:t=>{a({...s,host:t})}}),e.jsx(De,{className:"mb-3",label:"Control",type:qi,value:s.control,onChange:t=>{a({...s,control:t})}}),e.jsx(pe,{label:"UDP HappyEyeballs",checked:s.udpHappyEyeballs,onChange:()=>{a({...s,udpHappyEyeballs:!s.udpHappyEyeballs})}})]}),Nd=({inbound:s,onChange:a})=>{const[t,n]=h.useState({value:s.network.case?.toString()??"tcpudp"});return h.useEffect(()=>{n({value:s.network.case?s.network.case.toString():"tcpudp"})},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(D,{className:"mb-0 whitespace-nowrap mr-4",style:{minWidth:"auto"},children:"Network Type"}),e.jsx("div",{className:"grow mr-2",children:e.jsx(xe,{value:t.value,onValueChange:o=>n({value:o}),items:["empty","tcpudp","quic"].map(o=>({value:o,label:o}))})}),e.jsx(y,{onClick:()=>{const o={...s};switch(t.value){case"tcpudp":o.network={case:"tcpudp",value:m(Ii,{})};break;case"quic":o.network={case:"quic",value:m(Wi,{})};break;case"empty":o.network={case:"empty",value:m(wi,{})};break}a({...o})},children:"Use"})]}),e.jsx(Cd,{inbound:s,onChange:a})]})},Cd=({inbound:s,onChange:a})=>{switch(s.network.case){case"tcpudp":return e.jsx(Ad,{protocol:s.network.value,onChange:t=>{a({...s,network:{case:"tcpudp",value:t}})}});case"quic":return e.jsx(vd,{quic:s.network.value,onChange:t=>{a({...s,network:{case:"quic",value:t}})}});case"empty":return e.jsx(e.Fragment,{})}},wd=({http:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Username",value:s.username,onChange:t=>a({...s,username:t})}),e.jsx(N,{label:"Password",value:s.password,onChange:t=>a({...s,password:t})})]}),Sd=({reverse_http:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Url",value:s.url,onChange:t=>a({...s,url:t})}),e.jsx(xa,{value:s.tls??m(ma,{}),onChange:t=>{a({...s,tls:t})}})]}),Id=({socks5:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Username",value:s.username,onChange:t=>a({...s,username:t})}),e.jsx(N,{label:"Password",value:s.password,onChange:t=>a({...s,password:t})})]}),Wd=({mixed:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Username",value:s.username,onChange:t=>a({...s,username:t})}),e.jsx(N,{label:"Password",value:s.password,onChange:t=>a({...s,password:t})})]}),kd=({redir:s,onChange:a})=>e.jsx(e.Fragment,{children:e.jsx(N,{label:"Host",value:s.host,onChange:t=>a({...s,host:t})})}),Zd=({tproxy:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{label:"DNS Hijacking",checked:s.dnsHijacking,onChange:()=>a({...s,dnsHijacking:!s.dnsHijacking})}),e.jsx(pe,{label:"Force Fake IP",checked:s.forceFakeip,onChange:()=>a({...s,forceFakeip:!s.forceFakeip})}),e.jsx(N,{label:"Host",value:s.host,onChange:t=>a({...s,host:t})})]}),Bd=({tun:s,onChange:a})=>{const[t,n]=h.useState(at(s.postUp)),[o,l]=h.useState(at(s.postDown)),{data:r}=z(Me.method.platform_info);return e.jsxs(e.Fragment,{children:[e.jsx(pe,{checked:s.skipMulticast,onChange:()=>a({...s,skipMulticast:!s.skipMulticast}),label:"Skip Multicast"}),e.jsx(N,{label:"Name",value:s.name,onChange:c=>a({...s,name:c})}),e.jsx(N,{label:"MTU",value:s.mtu.toString(),onChange:c=>{isNaN(Number(c))||a({...s,mtu:Number(c)})}}),e.jsx(N,{label:"IPv4",value:s.portal,onChange:c=>a({...s,portal:c})}),e.jsx(N,{label:"IPv6",value:s.portalV6,onChange:c=>a({...s,portalV6:c})}),r?.darwin&&r?.darwin?.networkServices&&e.jsx(ns,{label:"DNS Network Service",emptyChoose:!0,emptyChooseName:"Default",value:s.platform?.darwin?.networkService??"",values:r.darwin.networkServices,onChange:c=>a({...s,platform:m(Yi,{darwin:m(Ei,{networkService:c})})})}),e.jsx(N,{label:"Post Up",value:t,onChange:c=>{n(c);try{const i=tt(c);a({...s,postUp:i})}catch(i){console.log(i)}}}),e.jsx(N,{label:"Post Down",value:o,onChange:c=>{l(c);try{const i=tt(c);a({...s,postDown:i})}catch(i){console.log(i)}}}),e.jsx(ua,{label:"Stack",type:Xi,value:s.driver,onChange:c=>a({...s,driver:c})}),e.jsx(de,{title:"Routes",textarea:!0,dump:!0,data:s.route?.routes??[],onChange:c=>{a({...s,route:{...s.route?s.route:m(Fi,{}),routes:c||[]}})}})]})},Rd=({yuubinsya:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(pe,{label:"UDP Coalesce",checked:s.udpCoalesce,onChange:()=>{a({...s,udpCoalesce:!s.udpCoalesce})}}),e.jsx(N,{label:"Password",value:s.password,onChange:t=>{a({...s,password:t})}})]}),Gd=({inbound:s,onChange:a})=>{switch(s.protocol.case){case"http":return e.jsx(wd,{http:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"http",value:t}})}});case"reverseHttp":return e.jsx(Sd,{reverse_http:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"reverseHttp",value:t}})}});case"reverseTcp":return e.jsx(yd,{reverse_tcp:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"reverseTcp",value:t}})}});case"socks5":return e.jsx(Id,{socks5:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"socks5",value:t}})}});case"socks4a":return e.jsx(e.Fragment,{});case"mix":return e.jsx(Wd,{mixed:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"mix",value:t}})}});case"redir":return e.jsx(kd,{redir:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"redir",value:t}})}});case"tun":return e.jsx(Bd,{tun:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"tun",value:t}})}});case"yuubinsya":return e.jsx(Rd,{yuubinsya:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"yuubinsya",value:t}})}});case"tproxy":return e.jsx(Zd,{tproxy:s.protocol.value,onChange:t=>{a({...s,protocol:{case:"tproxy",value:t}})}})}},Yd=({inbound:s,onChange:a})=>{const[t,n]=h.useState({value:s.protocol.case?s.protocol.case.toString():"yuubinsya"});return h.useEffect(()=>{n({value:s.protocol.case?s.protocol.case.toString():"yuubinsya"})},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(D,{className:"mb-0 whitespace-nowrap mr-4",style:{minWidth:"auto"},children:"Protocol"}),e.jsx("div",{className:"grow mr-2",children:e.jsx(xe,{value:t.value,onValueChange:o=>n({value:o}),items:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"].map(o=>({value:o,label:o}))})}),e.jsx(y,{onClick:()=>{const o={...s};switch(t.value){case"http":o.protocol={case:"http",value:m(ki,{})};break;case"reverseHttp":o.protocol={case:"reverseHttp",value:m(Pi,{})};break;case"reverseTcp":o.protocol={case:"reverseTcp",value:m(Ti,{})};break;case"socks5":o.protocol={case:"socks5",value:m(Zi,{})};break;case"mix":o.protocol={case:"mix",value:m(Bi,{})};break;case"redir":o.protocol={case:"redir",value:m(Ri,{})};break;case"tun":o.protocol={case:"tun",value:m(Vi,{})};break;case"yuubinsya":o.protocol={case:"yuubinsya",value:m(Li,{})};break;case"tproxy":o.protocol={case:"tproxy",value:m(Gi,{})}}a({...o})},children:"Use"})]}),e.jsx(Gd,{inbound:s,onChange:o=>{a({...o})}})]})},Ed=({aead:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{label:"Password",value:s.password,onChange:t=>{a({...s,password:t})}}),e.jsx(De,{type:Gn,value:s.cryptoMethod,onChange:t=>{a({...s,cryptoMethod:t})},label:"Crypto Method"})]}),Vd=({reality:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{readOnly:!0,label:"Protocol",value:"Reality",onChange:()=>{}}),e.jsx(N,{label:"Dest",value:s.dest,onChange:t=>a({...s,dest:t})}),e.jsx(N,{label:"Private Key",value:s.privateKey,onChange:t=>a({...s,privateKey:t})}),e.jsx(de,{title:"Short ID",className:"mb-3",data:s.shortId,onChange:t=>a({...s,shortId:t}),placeholder:"Enter new Short ID"}),e.jsx(de,{title:"Server Name",className:"mb-3",data:s.serverName,onChange:t=>a({...s,serverName:t}),placeholder:"Enter new Server Name"})]}),Nt=({label:s,value:a,readonly:t,onChange:n})=>{const o=h.useId();return e.jsxs("div",{className:"mb-2",children:[e.jsx(D,{htmlFor:o,style:{marginBottom:"0.5rem",display:"block"},children:s}),e.jsx(Xe,{id:o,value:a,readOnly:t,onChange:l=>n?.(l.target.value),rows:4,className:"font-monospace small"})]})},Xd=({tls:s,onChange:a})=>{const t=n=>{const o={...s};s.ech?o.ech={...s.ech}:o.ech=m(Qi,{}),n(o.ech),a({...o})};return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Next Protos",className:"mb-3",data:s?.nextProtos??[],onChange:n=>a({...s,nextProtos:n})}),e.jsx(de,{title:"Servenames",className:"mb-3",data:s?.servernames??[],onChange:n=>a({...s,servernames:n})}),e.jsx(pe,{label:"ECH Enabled",checked:s.ech?s.ech.enable:!1,onChange:(n=>t(o=>(o.enable=n,o)))}),s.ech?.enable&&e.jsx(N,{label:"ECH Outer SNI",value:s.ech?s.ech.OuterSNI:"",onChange:n=>t(o=>(o.OuterSNI=n,o))}),e.jsx(Nt,{label:"CA Cert",value:new TextDecoder().decode(s.caCert),readonly:!0}),e.jsx(Nt,{label:"CA Key",value:new TextDecoder().decode(s.caKey),readonly:!0}),e.jsx(N,{label:"ECH Config",value:s.ech?btoa(String.fromCharCode(...s.ech?.config)):"",readOnly:!0,onChange:()=>{}}),e.jsx(N,{label:"ECH Key",value:s.ech?btoa(String.fromCharCode(...s.ech?.privateKey)):"",readOnly:!0,onChange:()=>{}}),e.jsx(y,{variant:"outline-danger",onClick:()=>a({...s,caCert:new TextEncoder().encode(""),caKey:new TextEncoder().encode(""),ech:{...s.ech,config:new Uint8Array(0),privateKey:new Uint8Array(0)}}),children:"regenerate"})]})},Fd=({tls:s,onChange:a})=>e.jsxs(e.Fragment,{children:[e.jsx(N,{readOnly:!0,label:"Protocol",value:"TLS",className:"mb-3",onChange:()=>{}}),s.tls&&e.jsx(Ta,{tls:m(Js,s.tls),onChange:t=>a({...s,tls:t})})]}),Ld=({transport:s,onChange:a})=>{switch(s.transport.case){case"normal":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"Normal"})});case"tls":return e.jsx(Fd,{tls:s.transport.value,onChange:t=>{a({...s,transport:{case:"tls",value:t}})}});case"tlsAuto":return e.jsx(Xd,{tls:s.transport.value,onChange:t=>{a({...s,transport:{case:"tlsAuto",value:t}})}});case"mux":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"Mux"})});case"http2":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"HTTP2"})});case"websocket":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"Websocket"})});case"grpc":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"Grpc"})});case"reality":return e.jsx(Vd,{reality:s.transport.value,onChange:t=>{a({...s,transport:{case:"reality",value:t}})}});case"httpMock":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"HTTP MOCK"})});case"aead":return e.jsx(Ed,{aead:s.transport.value,onChange:t=>{a({...s,transport:{case:"aead",value:t}})}});case"proxy":return e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center opacity-40",children:"Proxy"})})}},zd=({inbound:s,onChange:a})=>{const[t,n]=h.useState({value:"normal"}),o=(c,i)=>{const d=[...s.transport];if(i==="up"){if(c===0)return;[d[c-1],d[c]]=[d[c],d[c-1]]}else{if(c===d.length-1)return;[d[c],d[c+1]]=[d[c+1],d[c]]}a({...s,transport:d})},l=c=>{const i=[...s.transport];i.splice(c,1),a({...s,transport:i})},r=()=>{const c={...s,transport:[...s.transport]};switch(t.value){case"normal":c.transport.push(m(Ne,{transport:{case:"normal",value:m(zi,{})}}));break;case"tlsAuto":c.transport.push(m(Ne,{transport:{case:"tlsAuto",value:m(Ui,{})}}));break;case"tls":c.transport.push(m(Ne,{transport:{case:"tls",value:m(Ki,{tls:m(Js,{})})}}));break;case"mux":c.transport.push(m(Ne,{transport:{case:"mux",value:m(Si,{})}}));break;case"http2":c.transport.push(m(Ne,{transport:{case:"http2",value:m(Di,{})}}));break;case"websocket":c.transport.push(m(Ne,{transport:{case:"websocket",value:m(Ji,{})}}));break;case"grpc":c.transport.push(m(Ne,{transport:{case:"grpc",value:m(Hi,{})}}));break;case"reality":c.transport.push(m(Ne,{transport:{case:"reality",value:m(Mi,{})}}));break;case"httpMock":c.transport.push(m(Ne,{transport:{case:"httpMock",value:m(_i,{})}}));break;case"aead":c.transport.push(m(Ne,{transport:{case:"aead",value:m(Oi,{})}}));break;case"proxy":c.transport.push(m(Ne,{transport:{case:"proxy",value:m($i,{})}}));break}a(c)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(ie,{label:"Enabled",checked:s.enabled,onCheckedChange:c=>{a({...s,enabled:c})},className:"p-4 rounded-lg bg-gray-100 dark:bg-[#2b2b40]"})}),e.jsxs(F,{className:"mb-4",children:[e.jsx(M,{children:e.jsx("span",{className:"font-bold",children:"Network"})}),e.jsx(L,{children:e.jsx(Nd,{inbound:s,onChange:c=>{a({...c})}})})]}),e.jsxs(F,{className:"mb-4",children:[e.jsx(M,{children:e.jsx("span",{className:"font-bold",children:"Transport"})}),e.jsxs(L,{children:[e.jsx(ms,{type:"multiple",className:"mb-4",children:s.transport.map((c,i)=>e.jsxs(hs,{value:`item-${i}`,children:[e.jsx(us,{children:c.transport.case?.toString()??"Unknown"}),e.jsx(xs,{children:e.jsxs("div",{className:"p-1",children:[e.jsx(Ld,{transport:c,onChange:d=>{const b=[...s.transport];b[i]=d,a({...s,transport:b})}}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[e.jsx(y,{size:"sm",onClick:()=>o(i,"up"),disabled:i===0,children:e.jsx(ys,{size:16})}),e.jsx(y,{size:"sm",onClick:()=>o(i,"down"),disabled:i===s.transport.length-1,children:e.jsx(As,{size:16})}),e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:()=>l(i),children:[e.jsx($,{className:"mr-1",size:16})," Delete"]})]})]})})]},i))}),e.jsxs("div",{className:"flex items-center mb-0",children:[e.jsx(D,{className:"mb-0 whitespace-nowrap mr-4",style:{minWidth:"auto"},children:"Type"}),e.jsx("div",{className:"grow mr-2",children:e.jsx(xe,{value:t.value,onValueChange:c=>n({value:c}),items:["normal","tls","mux","http2","websocket","grpc","reality","tlsAuto","httpMock","aead","proxy"].map(c=>({value:c,label:c}))})}),e.jsxs(y,{onClick:r,children:[e.jsx(_,{className:"mr-1",size:16})," Add"]})]})]})]}),e.jsxs(F,{children:[e.jsx(M,{children:e.jsx("span",{className:"font-bold",children:"Protocol"})}),e.jsx(L,{children:e.jsx(Yd,{inbound:s,onChange:c=>{a({...c})}})})]})]})},Jd=({show:s,name:a,onHide:t,onDelete:n,isNew:o})=>{const l=h.useContext(J),[r,c]=h.useState(!1),{data:i,error:d,isLoading:b,isValidating:x,mutate:g}=ls(a===""?void 0:ve(Me.method.get),Is(Me.method.get,m(je,{value:a}),o?m(yt,{name:a,enabled:!1}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});h.useEffect(()=>{g()},[a,o,g]);const p=()=>{i&&(c(!0),i.name=a,G(Me.method.save,i).then(async({error:u})=>{u===void 0?(l.Info("Save successful"),t(!0)):l.Error(u.msg)}).finally(()=>c(!1)))};return e.jsx(ne,{open:s,onOpenChange:u=>!u&&t(),children:e.jsxs(ae,{className:"max-w-[800px]",children:[e.jsx(oe,{closeButton:!0,className:"border-b-0 pb-0",children:e.jsx(te,{className:"font-bold",children:a})}),e.jsx(le,{className:"pt-2",children:d?e.jsx(on,{msg:d.msg,code:d.code,raw:d.raw}):x||b||!i?e.jsx(Y,{}):e.jsx(Qe,{children:e.jsx(zd,{inbound:i,onChange:u=>g(_t(yt,u),!1)})})}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx("div",{children:!o&&e.jsxs(y,{variant:"outline-danger",onClick:()=>{n()},children:[e.jsx($,{className:"mr-2",size:16}),"Delete"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:()=>t(),children:"Cancel"}),e.jsx(y,{disabled:r||!i,onClick:p,children:r?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"mr-1",size:16})," Save"]})})]})]})]})})},Kd=({name:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center grow overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600/10 text-blue-600 rounded-full flex items-center justify-center mr-4 shrink-0 w-9 h-9",children:e.jsx(fl,{size:20})}),e.jsx("span",{className:"truncate font-medium",children:s})]}),e.jsx(Re,{className:"text-gray-500 opacity-25",size:16})]});function Hd(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(Me.method.list),[l,r]=h.useState(!1),[c,i]=h.useState({show:!1,name:"",new:!1});if(t!==void 0)return e.jsx(ye,{statusCode:t.code,title:t.msg});if(n||a===void 0)return e.jsx(Y,{});const d=g=>{G(Me.method.remove,m(je,{value:g})).then(async({error:p})=>{p===void 0?(s.Info("Removed successful"),o(),i(u=>({...u,show:!1}))):s.Error(p.msg)})},b=()=>{r(!0),G(Me.method.apply,a).then(async({error:g})=>{g===void 0?s.Info("Settings applied successfully"):s.Error(g.msg),o()}).finally(()=>r(!1))},x=g=>{a.names.includes(g)||i({show:!0,name:g,new:!0})};return e.jsxs(O,{children:[e.jsx(Jd,{show:c.show,name:c.name,isNew:c.new,onHide:g=>{g&&o(),i(p=>({...p,show:!1}))},onDelete:()=>d(c.name)}),e.jsxs(F,{className:"mb-4",children:[e.jsx(M,{children:e.jsx(K,{icon:Vt,color:"#f59e0b",title:"Inbound Configuration",description:"Global interception & sniffing"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{label:"DNS Hijack",description:"Intersects DNS requests",checked:a.hijackDns,onCheckedChange:()=>o({...a,hijackDns:!a.hijackDns},!1),className:"p-4 rounded-lg h-full bg-gray-100 dark:bg-[#2b2b40]"})}),e.jsx("div",{children:e.jsx(ie,{label:"FakeDNS",description:"Use virtual IP logic",checked:a.hijackDnsFakeip,onCheckedChange:()=>o({...a,hijackDnsFakeip:!a.hijackDnsFakeip},!1),className:"p-4 rounded-lg h-full bg-gray-100 dark:bg-[#2b2b40]"})}),e.jsx("div",{children:e.jsx(ie,{label:"Traffic Sniffing",description:"Inspects protocol types",checked:!!a.sniff?.enabled,onCheckedChange:()=>o({...a,sniff:{...a.sniff,enabled:!a.sniff?.enabled}},!1),className:"p-4 rounded-lg h-full bg-gray-100 dark:bg-[#2b2b40]"})})]})}),e.jsx(Ie,{className:"flex justify-end",children:e.jsx(y,{disabled:l,onClick:b,children:l?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-1",size:16})," Apply Settings"]})})})]}),e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(K,{icon:pl,color:"#0d6efd",title:"Entry Points",description:`${a.names.length} active inbounds`})}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.names.sort((g,p)=>g.localeCompare(p)).map(g=>e.jsx("div",{className:"h-full",children:e.jsx(Ue,{className:"h-full justify-between p-4",onClick:()=>i({show:!0,name:g,new:!1}),children:e.jsx(Kd,{name:g})})},g)),e.jsx("div",{className:"h-full",children:e.jsx(Ue,{className:"h-full p-4 border-dashed border-sidebar-border bg-[var(--bs-secondary-bg)]",children:e.jsxs("form",{className:"flex w-full gap-2",onSubmit:g=>{g.preventDefault();const u=g.target.elements.namedItem("newInbound");u.value&&(x(u.value),u.value="")},children:[e.jsx("input",{name:"newInbound",className:"w-full bg-transparent border-none shadow-none px-0 outline-none text-sm text-[var(--input-text-color)] placeholder:text-[var(--input-placeholder)]",placeholder:"Create new...",autoComplete:"off"}),e.jsx(y,{size:"sm",type:"submit",disabled:l,className:"border-none bg-transparent text-blue-600 p-0 hover:bg-transparent hover:text-blue-500",children:e.jsx(_,{size:20})})]})})})]}),a.names.length===0&&e.jsx("div",{className:"text-center text-gray-500 p-4",children:"No records found."})]})]})]})}const Dd=T(hs),Sa=1,Ia=1e3*Sa,Wa=1e3*Ia,ea=1e3*Wa,ka=60*ea,Ct=60*ka;function wt(s){if(s.nanos===0&&Number(s.seconds)===0)return"timeout";const a=Number(s.seconds)*ea+s.nanos*Sa;return a>=Ct?`${a/Ct} h`:a>=ka?`${a/ka} m`:a>=ea?`${a/ea} s`:a>=Wa?`${a/Wa} ms`:a>=Ia?`${a/Ia} us`:`${a/Sa} ns`}function Md(s){return s.tcp||s.udp||s.ip||s.stun||s.stun_tcp}const St=s=>{switch(s){case Ke.NAT_UNKNOWN:return"unknown";case Ke.NAT_NO_RESULT:return"noresult";case Ke.NAT_AddressAndPortDependent:return"address-and-port-dependent";case Ke.NAT_AddressDependent:return"address-dependent";case Ke.NAT_EndpointIndependent:return"endpoint-independent";case Ke.NAT_EndpointIndependentNoNAT:return"endpoint-independent-no-nat";case Ke.NAT_ServerNotSupportChangePort:return"server-not-support";default:return"unknown"}};class Ud{point;hash;show;onDelete;isNew;constructor(a){this.point=a?.point,this.hash=a?.hash??"",this.show=a?.show??!1,this.onDelete=a?.onDelete}}function Qd(){const s=h.useContext(J),[a,t]=h.useState(-1),[n,o]=h.useState(new Ud),[l,r]=h.useState({data:!1}),[c]=ce(dn,ln),[i]=ce(rn,cn),[d]=ce(hn,mn),[b]=ce(xn,un),[x]=ce(gn,bn),[g]=ce(fn,pn),{data:p,error:u,isLoading:v,mutate:j}=z(he.method.list),[f]=h.useState(()=>new na),w=h.useMemo(()=>p?new na(p):f,[p,f]);if(u!==void 0)return e.jsx(Ls,{statusCode:u.code,title:u.msg});if(v||p===void 0)return e.jsx(Y,{});const B=I=>{o({hash:I,show:!0,onDelete:()=>{G(he.method.remove,m(je,{value:I})).then(async({error:U})=>{U!==void 0?s.Error(`Delete Node ${I} Failed ${U.code}| ${U.msg}`):(s.Info(`Delete Node ${I} Successful.`),j())})}})};return e.jsxs(e.Fragment,{children:[e.jsxs(zn.Provider,{value:w,children:[e.jsx(Zs,{show:n.show,hash:n.hash,point:n.point,isNew:n.isNew,onDelete:n.onDelete,editable:!0,onHide:()=>o({...n,show:!1}),onSave:()=>j(),groups:p.groups.map(I=>I.name)}),e.jsx(Od,{show:l.data,onSave:()=>j(),onHide:()=>r({data:!1}),isNew:!0})]}),e.jsx("div",{className:"flex justify-end items-center mb-4 flex-wrap gap-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(y,{className:"flex items-center justify-between min-w-[150px]",children:[e.jsx("span",{className:"flex-1 text-left truncate",children:a>=0&&p.groups.length>a?p.groups[a].name:"GROUP"}),e.jsx(cs,{className:"ml-2 shrink-0"})]})}),e.jsxs(ze,{children:[e.jsx(Ze,{onSelect:()=>t(-1),children:"Select..."}),p.groups?.map((I,U)=>e.jsx(Ze,{onSelect:()=>t(U),children:I.name},U))]})]}),e.jsxs(y,{onClick:()=>{o({point:m(Ks,{group:"template_group",name:"template_name",origin:Yn.manual}),hash:"new node",show:!0,onDelete:void 0,isNew:!0})},children:[e.jsx(_,{size:16})," New"]}),e.jsxs(y,{onClick:()=>r({data:!0}),children:[e.jsx(jl,{size:16})," Import"]})]})}),a>=0&&p.groups.length>a&&p.groups[a].nodes.length>0?e.jsx(ms,{type:"multiple",children:e.jsx(Pe,{initial:!1,mode:"popLayout",children:p.groups[a].nodes.map(I=>e.jsx(Td,{hash:I.hash,name:I.name,onClickEdit:()=>{B(I.hash)},ipv6:d,urls:{ip:b,tcp:c,udp:i,stun:x,stunTCP:g}},I.hash))})}):e.jsx(F,{children:e.jsx(L,{children:e.jsx("div",{className:"text-center text-gray-500 py-3",children:a===-1?"Please select a group to display nodes":"Current group has no nodes"})})})]})}const Es=s=>{switch(s.case){case"http":return m(Qs,{protocol:{case:"http",value:m(uc,{url:s.url})}});case"dnsOverQuic":return m(Qs,{protocol:{case:"dnsOverQuic",value:m(xc,{host:s.host,targetDomain:s.targetDomain})}});case"ip":return m(Qs,{protocol:{case:"ip",value:m(bc,{url:s.url,userAgent:s.userAgent})}});case"stun":return m(Qs,{protocol:{case:"stun",value:m(gc,{host:s.host,tcp:s.tcp})}})}},Pd=(s,a,t,n)=>{switch(s){case"tcp":return{request:Es({case:"http",url:n.tcp}),setLoading:(o,l)=>{a(r=>({...r,tcp:o})),l&&t(r=>({...r,tcp:l}))},setResult:o=>{if(o.reply.case==="latency"){const l=wt(o.reply.value);t(r=>({...r,tcp:l})),a(r=>({...r,tcp:!1}))}}};case"udp":return{request:Es({case:"dnsOverQuic",host:n.udp,targetDomain:"www.google.com"}),setLoading:(o,l)=>{a(r=>({...r,udp:o})),l&&t(r=>({...r,udp:l}))},setResult:o=>{if(o.reply.case==="latency"){const l=wt(o.reply.value);t(r=>({...r,udp:l})),a(r=>({...r,udp:!1}))}}};case"ip":return{request:Es({case:"ip",url:n.ip}),setLoading:(o,l)=>{a(r=>({...r,ip:o})),l&&t(r=>({...r,ip:{ipv4:l,ipv6:l}}))},setResult:o=>{if(o.reply.case==="ip"){const l=o.reply.value.ipv4,r=o.reply.value.ipv6;t(c=>({...c,ip:{ipv4:l,ipv6:r}})),a(c=>({...c,ip:!1}))}}};case"stun-tcp":return{request:Es({case:"stun",host:n.stunTCP,tcp:!0}),setLoading:(o,l)=>{a(r=>({...r,stun_tcp:o})),l&&t(r=>({...r,stun_tcp:{ip:l}}))},setResult:o=>{if(o.reply.case==="stun"){const l=o.reply.value.mappedAddress;t(r=>({...r,stun_tcp:{ip:l}})),a(r=>({...r,stun_tcp:!1}))}}};case"stun":return{request:Es({case:"stun",host:n.stun,tcp:!1}),setLoading:(o,l)=>{a(r=>({...r,stun:o})),l&&t(r=>({...r,stun:{mapping:l,filtering:l,mappedAddress:l}}))},setResult:o=>{if(o.reply.case==="stun"){const l=St(o.reply.value.Mapping),r=St(o.reply.value.Filtering),c=o.reply.value.mappedAddress;t(i=>({...i,stun:{mapping:l,filtering:r,mappedAddress:c}})),a(i=>({...i,stun:!1}))}}}}},Tn=s=>{if(!s||s==="N/A"||s.includes("error")||s.includes("timeout"))return-1;const a=s.trim(),t=parseFloat(a);return isNaN(t)?-1:a.endsWith("ns")?t/1e6:a.endsWith("µs")||a.endsWith("us")?t/1e3:a.endsWith("ms")?t:a.endsWith("s")&&!a.endsWith("ms")?t*1e3:a.endsWith("m")?t*60*1e3:t},Os=s=>{const a=Tn(s);return a<0?"text-[#9ca3af]":a<200?"text-[#10b981]":a<999?"text-[#f59e0b]":"text-[#ef4444]"},Je=({label:s,value:a,loading:t,colorClass:n})=>e.jsxs("div",{className:"bg-[var(--card-footer-bg)] border-[0.5px] border-[var(--card-inner-border)] rounded-[20px] p-4 flex flex-col transition-transform duration-200 ease-out hover:-translate-y-0.5 hover:shadow-[0_4px_12px_rgba(0,0,0,0.05)] hover:bg-[var(--card-inner-border)]",children:[e.jsx("span",{className:"text-xs uppercase mb-1 font-bold",children:s}),e.jsx("div",{className:`${n||""} text-[0.9rem] break-all`,children:t?e.jsx(H,{size:"sm"}):a||"N/A"})]}),Td=({hash:s,name:a,onClickEdit:t,ipv6:n,urls:o})=>{const l=h.useContext(J),[r,c]=ce(`latency-v2-${s}`,{tcp:"N/A",udp:"N/A"}),[i,d]=h.useState({tcp:!1,udp:!1,ip:!1,stun:!1,stun_tcp:!1}),b=g=>{const{request:p,setLoading:u,setResult:v}=Pd(g,d,c,o);u(!0),G(he.method.latency,m(pc,{requests:[{hash:s,id:"latency",ipv6:n,method:p}]})).then(async({data:j,error:f})=>{if(f){console.log(`test failed ${f.code}| ${f.msg}`),u(!1,`${f.code}| ${f.msg}`);return}if(j&&j.idLatencyMap.latency){const w=j.idLatencyMap.latency;if(w.reply.case==="error"){console.log(`test failed ${w.reply.value.msg}`),u(!1,w.reply.value.msg);return}u(!1),v(w)}else u(!1,"timeout")})},x=Md(i);return e.jsxs(Dd,{value:s,layout:!0,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-10,transition:{duration:.2}},transition:{duration:.2},children:[e.jsx(us,{children:e.jsxs("div",{className:"flex w-full flex-col sm:flex-row items-start sm:items-center pr-2",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full mb-2 sm:mb-0",children:[e.jsx(Le,{className:`text-xl flex-shrink-0 ${(()=>{const g=Tn(r.tcp);return g<0?"text-gray-500":g<200?"text-green-500":"text-blue-500"})()}`}),e.jsxs("div",{className:"flex flex-col gap-2 truncate",children:[e.jsx("span",{className:"truncate",children:a}),e.jsxs("div",{className:"flex gap-2 items-center text-xs",children:[e.jsx("span",{className:"text-gray-500 opacity-75",children:s.substring(0,8)}),n&&e.jsx(me,{variant:"info",className:"text-gray-900 py-0 px-1 text-[0.65rem]",children:"IPv6"})]})]})]}),e.jsx("div",{className:"flex w-full sm:w-auto items-center justify-between sm:justify-end pl-0 sm:pl-2",children:e.jsxs("div",{className:"flex gap-4 text-gray-500 text-sm items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"uppercase text-gray-500 text-[0.65rem] font-bold",children:"TCP"}),e.jsx("span",{className:Os(r.tcp),children:r.tcp})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"uppercase text-gray-500 text-[0.65rem] font-bold",children:"UDP"}),e.jsx("span",{className:Os(r.udp),children:r.udp})]})]})})]})}),e.jsxs(xs,{children:[e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(140px,1fr))] gap-4 mb-4",children:[e.jsx(Je,{label:"TCP Latency",value:r.tcp,loading:i.tcp,colorClass:Os(r.tcp)}),e.jsx(Je,{label:"UDP Latency",value:r.udp,loading:i.udp,colorClass:Os(r.udp)}),(r.ip||i.ip)&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{label:"IPv4",value:r.ip?.ipv4,loading:i.ip}),e.jsx(Je,{label:"IPv6",value:r.ip?.ipv6,loading:i.ip})]})]}),(r.stun||i.stun||r.stun_tcp||i.stun_tcp)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-gray-500 text-sm font-bold mb-2 pl-1",children:"NAT & STUN Details"}),e.jsxs("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(140px,1fr))] gap-4 mb-4",children:[(r.stun||i.stun)&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{label:"NAT Type",value:r.stun?.mapping,loading:i.stun}),e.jsx(Je,{label:"Filtering",value:r.stun?.filtering,loading:i.stun}),e.jsx(Je,{label:"Mapped Address",value:r.stun?.mappedAddress,loading:i.stun})]}),(r.stun_tcp||i.stun_tcp)&&e.jsx(Je,{label:"STUN TCP IP",value:r.stun_tcp?.ip,loading:i.stun_tcp})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-[var(--card-inner-border)] justify-end",children:[e.jsx("div",{className:"inline-flex",children:e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(y,{size:"sm",disabled:x,className:"flex items-center gap-2",whileTap:{scale:1},whileHover:{scale:1},children:[x?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-1",children:"Test"})]}),e.jsx(cs,{className:"ml-1",size:12})]})}),e.jsxs(ze,{children:[e.jsx(Ze,{onSelect:()=>b("tcp"),children:"TCP Ping"}),e.jsx(Ze,{onSelect:()=>b("udp"),children:"UDP Ping"}),e.jsx("div",{className:"h-px bg-[var(--divider-color)] my-1"}),e.jsx(Ze,{onSelect:()=>b("stun"),children:"STUN Test"}),e.jsx(Ze,{onSelect:()=>b("stun-tcp"),children:"STUN TCP Test"}),e.jsx(Ze,{onSelect:()=>b("ip"),children:"IP Check"})]})]})}),e.jsxs(y,{size:"sm",onClick:t,title:"Edit Configuration",children:[e.jsx(vl,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Edit"})]}),e.jsxs(y,{size:"sm",onClick:()=>_d(l,s),title:"Use Node",children:[e.jsx(yl,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Use"})]})]})]})]})};function _d(s,a){G(he.method.use,m(fc,{hash:a})).then(async({error:t})=>{t!==void 0?s.Error(`change node failed, ${t.code}| ${t.msg}`):s.Info(`Change Node To ${a} Successful`)})}const Od=s=>{const a=h.useContext(J),[t,n]=h.useState({data:""}),o=()=>s.onSave?e.jsx(y,{onClick:()=>{const l=Dl(Ks,t.data);s.isNew&&(l.hash=""),G(he.method.save,l).then(async({error:r})=>{r===void 0?(a.Info("save successful"),s.onSave!==void 0&&s.onSave()):a.Error(r.msg)})},children:"Save"}):e.jsx(e.Fragment,{});return e.jsx(ne,{open:s.show,onOpenChange:l=>!l&&s.onHide(),children:e.jsxs(ae,{className:"max-w-[800px]",children:[!s.plaintext&&e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:"Import JSON"})}),e.jsx(le,{children:e.jsx("textarea",{className:"w-full bg-transparent border border-[var(--sidebar-border-color)] rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none text-[var(--sidebar-color)] h-[65vh] font-mono",readOnly:s.plaintext,value:s.data?s.data:t.data,onChange:l=>{n({data:l.target.value})}})}),e.jsxs(re,{children:[e.jsx(y,{onClick:()=>{s.onHide()},children:"Close"}),e.jsx(o,{})]})]})})},$d=({linkData:s,isUpdating:a,onUpdate:t,onDelete:n})=>e.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-3 items-center overflow-hidden flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 overflow-hidden",children:[e.jsx(za,{icon:Al,color:"#0d6efd",style:{width:40,height:40,flexShrink:0}}),e.jsxs("div",{className:"min-w-0 overflow-hidden",children:[e.jsx("div",{className:"font-bold truncate",children:s.name}),e.jsx("small",{className:"text-gray-500 truncate block",children:s.url})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(y,{size:"sm",onClick:o=>{o.stopPropagation(),t()},disabled:a,children:[a?e.jsx(H,{size:"sm"}):e.jsx(Va,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Update"})]}),e.jsxs(y,{variant:"outline-danger",size:"sm",onClick:o=>{o.stopPropagation(),n()},children:[e.jsx($,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Delete"})]})]})]}),qd=({show:s,onHide:a,onSave:t})=>{const[n,o]=h.useState(m(gt,{name:"",url:"",type:Na.reserve})),l=()=>{!n.name||!n.url||(t(n),o(m(gt,{name:"",url:"",type:Na.reserve})),a())};return e.jsx(ne,{open:s,onOpenChange:r=>!r&&a(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,className:"border-b-0 pb-0",children:e.jsx(te,{className:"font-bold",children:"Add Subscription"})}),e.jsx(le,{className:"pt-2",children:e.jsx(Qe,{children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(N,{label:"Name",value:n.name,placeholder:"e.g., My Server",onChange:r=>o({...n,name:r})}),e.jsx(N,{label:"Subscription URL",value:n.url,placeholder:"https://example.com/sub/...",onChange:r=>o({...n,url:r})})]})})}),e.jsxs(re,{children:[e.jsx(y,{onClick:a,children:"Cancel"}),e.jsxs(y,{onClick:l,disabled:!n.name||!n.url,children:[e.jsx(_,{className:"me-1",size:16})," Add"]})]})]})})};function em(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(ss.method.get),[l,r]=h.useState({}),[c,i]=h.useState(!1),[d,b]=h.useState({show:!1,name:""}),{copy:x,copied:g}=da({usePromptAsFallback:!0});if(h.useEffect(()=>{g&&s.Info("Copied to clipboard")},[g,s]),t!==void 0)return e.jsx(ye,{statusCode:t.code,title:t.msg});if(n||a===void 0)return e.jsx(Y,{});const p=j=>{r(f=>({...f,[j]:!0})),G(ss.method.update,m(ft,{names:[j]})).then(async({error:f})=>{f!==void 0?s.Error(`Update failed ${f.code}| ${f.msg}`):s.Info("Update successfully"),r(w=>({...w,[j]:!1}))})},u=j=>{G(ss.method.remove,m(ft,{names:[j]})).then(async({error:f})=>{f!==void 0?s.Error(`delete ${j} failed, ${f.code}| ${f.msg}`):o()})},v=j=>{G(ss.method.save,m(vc,{links:[j]})).then(async({error:f})=>{f!==void 0?s.Error(`save link ${j.url} failed, ${f.code}| ${f.msg}`):o()})};return e.jsxs(O,{children:[e.jsx(Te,{show:d.show,title:"Delete Subscription",content:e.jsxs("p",{children:["Are you sure you want to remove subscription ",e.jsx("strong",{children:d.name}),"?"]}),onOk:()=>{u(d.name),b({show:!1,name:""})},onHide:()=>b({show:!1,name:""})}),e.jsx(qd,{show:c,onHide:()=>i(!1),onSave:v}),e.jsx(Ss,{items:Object.entries(a.links).sort((j,f)=>j[0].localeCompare(f[0])),onClickItem:([,j])=>x(j.url),renderListItem:([j,f])=>e.jsx($d,{linkData:f,isUpdating:!!l[f.name],onUpdate:()=>p(f.name),onDelete:()=>b({show:!0,name:f.name})},j),header:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{icon:Mt,color:"#0ea5e9"}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 font-bold",children:"Subscriptions"}),e.jsx("small",{className:"text-gray-500",children:"Manage remote configuration links"})]})]}),e.jsxs(y,{onClick:()=>i(!0),children:[e.jsx(_,{size:16})," Add"]})]})})]})}const sm=({show:s,isEdit:a,onHide:t,item:n,nodes:o,configName:l,mutatePub:r})=>{const c=h.useContext(J),[i,d]=h.useState(n),[b,x]=h.useState(l);h.useEffect(()=>{d(n)},[n]),h.useEffect(()=>{x(l)},[l]);const[g,p]=h.useState(!1),u=j=>{d(f=>({...f,points:f.points.includes(j)?[...f.points.filter(w=>w!==j)]:[...f.points,j]}))},v=()=>{p(!0);const j=m(jc,{name:i.name,publish:i});G(ss.method.save_publish,j).then(({error:f})=>{f?c.Error(`Failed to save: ${f.msg}`):(c.Info("Saved successfully."),r(),t())}).finally(()=>p(!1))};return e.jsx(ne,{open:s,onOpenChange:j=>{j||t()},children:e.jsxs(ae,{style:{maxWidth:"600px"},children:[e.jsx(oe,{closeButton:!0,className:"border-b pb-3",children:e.jsxs(te,{className:"font-bold text-xl",children:[a?"Edit":"Add"," Publish Config"]})}),e.jsx(le,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(N,{label:"Config Identifier",value:b,onChange:x,placeholder:"e.g., internal-sub",className:a?"opacity-75":""}),e.jsx(N,{label:"Display Name",value:i.name,onChange:j=>d({...i,name:j}),placeholder:"e.g., My Subscription"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-white/5 rounded-lg border border-opacity-50 border-gray-200 dark:border-gray-700",children:[e.jsx("h6",{className:"mb-3 uppercase text-gray-500",style:{fontSize:"0.75rem",fontWeight:700,letterSpacing:"0.5px"},children:"Connection Details"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(N,{label:"Public Address",value:i.address,onChange:j=>d({...i,address:j}),placeholder:"example.com:443"}),e.jsx(Xn,{label:"Allow Insecure (HTTP)",checked:i.insecure,onCheckedChange:j=>d({...i,insecure:j})}),e.jsx(N,{label:"Path",value:i.path,onChange:j=>d({...i,path:j}),placeholder:"custom/path"}),e.jsx(N,{label:"Password",value:i.password,onChange:j=>d({...i,password:j}),placeholder:"Optional password"})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Select Nodes to Publish"}),e.jsxs(_e,{modal:!1,children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(y,{className:"w-full flex justify-between items-center py-2",variant:"outline-secondary",children:[e.jsx("span",{className:"font-medium",children:i.points.length>0?`${i.points.length} nodes selected`:"Select nodes..."}),e.jsx(cs,{size:16})]})}),e.jsx(ze,{className:"w-full shadow-lg border-0",style:{maxHeight:"300px",overflowY:"auto"},children:o.groups.map(j=>e.jsxs(Ir,{children:[e.jsx(Zn,{className:"text-blue-500 sticky top-0 bg-sidebar-bg",children:j.name}),j.nodes.map(f=>e.jsx(Ua,{checked:i.points.includes(f.hash),onCheckedChange:()=>u(f.hash),onSelect:w=>w.preventDefault(),children:f.name},f.hash))]},j.name))})]})]})]})}),e.jsxs(re,{className:"border-t pt-3",children:[e.jsx(Cr,{asChild:!0,children:e.jsx(y,{variant:"outline-secondary",children:"Cancel"})}),e.jsx(y,{onClick:v,disabled:g,children:g?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"mr-1",size:16})," Save Config"]})})]})]})})},am=({configKey:s,pub:a,copyAction:t,onDelete:n,copied:o})=>{const l=m(hc,{publish:m(Aa,{...a,points:[]})}),r=m(pt,{name:a.name,url:{value:l,case:"remote"}}),c=`yuhaiin://${btoa(String.fromCharCode(...la(pt,r))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center grow overflow-hidden gap-3 w-full md:w-auto",children:e.jsxs("div",{className:"flex flex-col overflow-hidden",children:[e.jsx("span",{className:"font-bold",children:s}),e.jsxs("small",{className:"text-gray-500 truncate opacity-75",children:[a.address,"/",a.path]})]})}),e.jsxs(os,{className:"md:mx-2 w-full",style:{maxWidth:"400px"},onClick:i=>i.stopPropagation(),children:[e.jsx(ge,{readOnly:!0,value:c,size:"sm",className:"bg-gray-900/10 dark:bg-white/10 border-gray-500/25 font-mono flex-1 w-full min-w-0",style:{fontSize:"0.6rem"}}),e.jsx(y,{size:"icon",onClick:()=>t(c),children:o?e.jsx(Ra,{size:16}):e.jsx(Ga,{size:16})})]}),e.jsx("div",{className:"flex gap-2 items-center ml-2 shrink-0",children:e.jsxs(y,{size:"sm",variant:"outline-danger",onClick:i=>{i.stopPropagation(),n()},children:[e.jsx($,{size:16}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Delete"})]})})]})};function tm(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(ss.method.list_publish),{data:l,error:r,isLoading:c}=z(he.method.list),[i,d]=h.useState({show:!1,isEdit:!1,configName:"",item:m(Aa,{})}),[b,x]=h.useState({show:!1,name:""}),{copy:g,copied:p}=da({onCopyError:v=>s.Error(v.message),usePromptAsFallback:!0});if(h.useEffect(()=>{p&&s.Info("URL copied to clipboard!")},[p,s]),t)return e.jsx(Ls,{statusCode:t.code,title:t.msg});if(r)return e.jsx(Ls,{statusCode:r.code,title:r.msg});if(n||c||!a||!l)return e.jsx(Y,{});const u=v=>{G(ss.method.remove_publish,m(je,{value:v})).then(({error:j})=>{j?s.Error(`Failed to remove: ${j.msg}`):(s.Info("Removed successfully."),o())})};return e.jsxs(e.Fragment,{children:[e.jsx(sm,{show:i.show,isEdit:i.isEdit,onHide:()=>d({...i,show:!1}),item:i.item,configName:i.configName,nodes:l,mutatePub:o}),e.jsx(Te,{show:b.show,title:e.jsxs("p",{children:["Delete publish configuration ",e.jsx("strong",{children:b.name}),"?"]}),onHide:()=>x(v=>({...v,show:!1})),onOk:()=>{u(b.name),x({show:!1,name:""})}}),e.jsx(O,{children:e.jsx(Ss,{items:Object.entries(a.publishes),renderListItem:([v,j])=>e.jsx(am,{configKey:v,pub:j,copyAction:g,copied:p,onDelete:()=>x({show:!0,name:v})},v),onClickItem:([v,j])=>d({show:!0,isEdit:!0,configName:v,item:j}),header:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{icon:Nl,color:"#8b5cf6"}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 font-bold",children:"Publishing"}),e.jsx("small",{className:"text-gray-500",children:"Generate subscription URLs for remote clients"})]})]}),e.jsxs(y,{onClick:()=>d({show:!0,isEdit:!1,configName:"",item:m(Aa,{})}),children:[e.jsx(_,{className:"mr-1",size:16})," Add"]})]})})})]})}const fs=({icon:s,label:a,value:t,onChange:n,placeholder:o})=>e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"bg-gray-500/10 rounded-lg p-2 mt-4 hidden sm:block border border-gray-500/10",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-lg flex",children:e.jsx(s,{})})}),e.jsx("div",{className:"flex-grow",children:e.jsx(N,{label:a,value:t,onChange:n,placeholder:o})})]});function nm(){const[s,a]=ce(Ka,Ja),[t,n]=ce(dn,ln),[o,l]=ce(rn,cn),[r,c]=ce(hn,mn),[i,d]=ce(xn,un),[b,x]=ce(gn,bn),[g,p]=ce(fn,pn);return e.jsxs(O,{children:[e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:Kt,color:"#6366f1",title:"API Connection",description:"Web-controller interface"})}),e.jsx(L,{className:"pt-2",children:e.jsx(fs,{icon:Le,label:"Controller Host",value:s,onChange:a,placeholder:"http://127.0.0.1:50051"})})]}),e.jsxs(F,{children:[e.jsx(M,{className:"py-3",children:e.jsx(K,{icon:Dt,color:"#10b981",title:"Latency Targets",description:"Endpoints for connectivity checks"})}),e.jsxs(L,{children:[e.jsx("div",{className:"mb-3",children:e.jsx(ie,{label:"IPv6 Testing",description:"Use IPv6 resolution for latency checks",checked:r,onCheckedChange:()=>c(!r)})}),e.jsx(fs,{icon:Ya,label:"HTTP (TCP) Check",value:t,onChange:n,placeholder:"https://..."}),e.jsx(fs,{icon:Cl,label:"DNS (UDP/DOQ) Check",value:o,onChange:l,placeholder:"dns.example.com:853"}),e.jsx(fs,{icon:wl,label:"IP Info Service",value:i,onChange:d,placeholder:"http://ip.sb"}),e.jsx(fs,{icon:Ea,label:"STUN (UDP) Check",value:b,onChange:x,placeholder:"stun.example.com:3478"}),e.jsx(fs,{icon:oa,label:"STUN (TCP) Check",value:g,onChange:p,placeholder:"stun.example.com:3478"})]})]}),e.jsx("div",{className:"text-center mt-3 opacity-50 pb-20",children:e.jsxs("small",{className:"text-gray-500 dark:text-gray-400 flex items-center justify-center",children:[e.jsx(Ns,{className:"mr-1"}),"These settings are stored locally in your browser cache."]})})]})}function $a({currentPage:s,totalItems:a,pageSize:t,onPageChange:n,className:o}){const l=Math.ceil(a/t),r=[],c=5,i=2;if(l<=c+2)for(let d=1;d<=l;d++)r.push(d);else if(s<=i+2){for(let d=1;d<=c;d++)r.push(d);r.push("ellipsis"),r.push(l)}else if(s>=l-i-1){r.push(1),r.push("ellipsis");for(let d=l-c+1;d<=l;d++)r.push(d)}else{r.push(1),r.push("ellipsis");for(let d=s-1;d<=s+1;d++)r.push(d);r.push("ellipsis"),r.push(l)}return l<=1?e.jsx(y,{variant:"primary",size:"icon",style:{minWidth:"32px",height:"32px",padding:"0",fontSize:"12px",fontWeight:"inherit"},children:"1"}):e.jsxs("div",{className:C("flex items-center gap-2",o),children:[e.jsx(y,{onClick:()=>n(s-1),disabled:s===1,"aria-label":"Previous page",size:"icon",children:e.jsx(Sl,{size:16})}),e.jsx("div",{className:"flex items-center gap-1",children:r.map((d,b)=>d==="ellipsis"?e.jsx("div",{className:"flex items-end justify-center pb-1 text-[var(--bs-secondary-color)] w-[32px] h-[32px]",children:e.jsx(Il,{size:16})},"e"+b):e.jsx(y,{onClick:()=>n(d),size:"icon",variant:d===s?"primary":"outline-secondary",style:{minWidth:"32px",height:"32px",padding:"0",fontSize:"12px",fontWeight:"inherit"},children:d},d))}),e.jsx(y,{onClick:()=>n(s+1),disabled:s===l,"aria-label":"Next page",size:"icon",children:e.jsx(Re,{size:16})})]})}const om=W.memo(({data:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center grow overflow-hidden gap-4 w-full md:w-auto",children:[e.jsx("div",{className:"flex items-center justify-center bg-red-500/10 text-red-500 rounded-full shrink-0",style:{width:"42px",height:"42px"},children:e.jsx(Ut,{className:"text-xl"})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",style:{minWidth:0},children:[e.jsx("span",{className:"font-bold truncate text-base text-red-500/75",children:s.host}),e.jsx("small",{className:"text-gray-500 dark:text-gray-400 truncate opacity-75 font-mono",children:s.error||"Unknown Error"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center shrink-0",children:[e.jsx(Be,{icon:Le,text:we[s.protocol??we.unknown],color:"info"}),e.jsx(Be,{icon:Wl,text:`${s.failedCount} Fails`,color:"warning"}),e.jsx(Be,{icon:Xa,text:ws(s.time).toLocaleTimeString(),color:"secondary"}),e.jsx("div",{className:"text-gray-500 dark:text-gray-400 opacity-25 ml-2 hidden md:block",children:e.jsx(Re,{})})]})]})})),lm=W.memo(({data:s,show:a,onClose:t})=>e.jsx(ne,{open:a,onOpenChange:n=>!n&&t(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{className:"font-bold text-red-500",children:"Failure Details"})}),e.jsx(le,{children:e.jsx("div",{children:e.jsx(Da,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Host",value:s.host}),e.jsx(k,{label:"Network",value:we[s.protocol??we.unknown]}),e.jsx(k,{label:"Failures",value:String(s.failedCount)}),e.jsx(k,{label:"Last Error",value:s.error}),e.jsx(k,{label:"Process",value:s.process||"System"}),e.jsx(k,{label:"Timestamp",value:ws(s.time).toLocaleString()})]})})})}),e.jsx(re,{className:"border-0",children:e.jsx(y,{className:"w-full",onClick:t,children:"Close"})})]})}));function rm(){const[s,a]=h.useState("Time"),[t,n]=h.useState("desc"),[o,l]=h.useState(1),[r,c]=h.useState({show:!1}),i=Ds(400),{data:d,error:b,isLoading:x,isValidating:g,mutate:p}=z(i?ts.method.failed_history:null),u=h.useMemo(()=>d?.objects?d.objects.filter(f=>f.time).sort((f,w)=>{const B=t==="asc"?-1:1,I=t==="asc"?1:-1;if(s==="Host")return f.host<w.host?B:I;if(s==="Count")return Number(f.failedCount)<Number(w.failedCount)?B:I;const U=f.time??as,S=w.time??as;return U.seconds<S.seconds?B:U.seconds>S.seconds?I:0}):[],[d,s,t]);if(b)return e.jsx(Y,{code:b.code,children:b.msg});if(x||d===void 0)return e.jsx(Y,{});const v=30,j=u.slice((o-1)*v,o*v);return e.jsxs(O,{children:[e.jsx(lm,{data:r.data,show:r.show,onClose:()=>c({...r,show:!1})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-end mb-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-1",children:"Failed Connections"}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 flex items-center text-sm",children:[e.jsx(Ut,{className:"text-red-500 mr-2"}),e.jsxs("span",{children:["Tracking ",u.length," rejected or timed-out requests"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end items-center",children:[e.jsx(y,{size:"sm",onClick:()=>p(),disabled:g,children:g?e.jsx(H,{size:"sm"}):e.jsx(is,{size:16})}),e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsx(y,{size:"sm",children:e.jsx(Fa,{size:16})})}),e.jsxs(ze,{align:"end",className:"p-3",style:{minWidth:"320px"},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(D,{children:"Order"}),e.jsxs(be,{type:"single",value:t,onValueChange:f=>f&&n(f),className:"w-full",children:[e.jsx(X,{value:"asc",className:"grow",children:"ASC"}),e.jsx(X,{value:"desc",className:"grow",children:"DESC"})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"By"}),e.jsxs(be,{type:"single",value:s,onValueChange:f=>f&&a(f),className:"w-full whitespace-nowrap",children:[e.jsx(X,{value:"Time",className:"grow px-3",children:"Time"}),e.jsx(X,{value:"Host",className:"grow px-3",children:"Host"}),e.jsx(X,{value:"Count",className:"grow px-3",children:"Count"})]})]})]})]})]})]}),e.jsx(Ss,{items:j,getKey:f=>`${f.host}-${f.time?.seconds}`,onClickItem:f=>c({show:!0,data:f}),renderListItem:f=>e.jsx(om,{data:f}),footer:e.jsx($a,{currentPage:o,totalItems:u.length,pageSize:v,onPageChange:l})})]})}const cm=Object.fromEntries(Cn.values.map(({number:s,name:a})=>[s,a])),im=W.memo(({data:s})=>s.connection?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center grow overflow-hidden gap-4 w-full md:w-auto",children:[e.jsx("div",{className:"flex items-center justify-center bg-blue-500/10 text-blue-500 rounded-full shrink-0",style:{width:"42px",height:"42px"},children:s.connection.type?.connType===we.udp?e.jsx(Ea,{className:"text-xl"}):e.jsx(Et,{className:"text-xl"})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",style:{minWidth:0},children:[e.jsx("span",{className:"font-bold truncate text-base",children:s.connection.addr}),e.jsxs("small",{className:"text-gray-500 dark:text-gray-400 font-mono opacity-75",children:["ID: #",s.connection.id.toString()," • ",we[s.connection.type?.connType??0]]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center shrink-0 md:ml-0",children:[e.jsx(Be,{icon:Cs,text:Ws[s.connection.mode],color:"info"}),e.jsx(Be,{icon:Va,text:Number(s.count),color:"success"}),e.jsx(Be,{icon:Xa,text:ws(s.time).toLocaleTimeString(),color:"secondary"}),e.jsx("div",{className:"text-gray-500 dark:text-gray-400 opacity-25 ml-2 hidden md:block",children:e.jsx(Re,{})})]})]}):null);function dm(){const[s,a]=h.useState("Time"),[t,n]=h.useState("desc"),[o,l]=h.useState(""),[r,c]=h.useState(we.unknown),[i,d]=h.useState(1),[b,x]=h.useState({show:!1}),[g,p]=h.useState({show:!1,hash:""}),u=Ds(400),{data:v,error:j,isLoading:f,isValidating:w,mutate:B}=z(u?ts.method.all_history:null),I=h.useCallback(R=>{p({show:!0,hash:R})},[]),U=h.useMemo(()=>v?.objects?v.objects.filter(R=>!R.time||!R.connection||r&&R.connection?.type?.connType!==r?!1:o?R.connection.addr?.toLowerCase().includes(o)||R.connection.process?.toLowerCase().includes(o):!0).sort((R,We)=>{const ba=t==="asc"?-1:1,ga=t==="asc"?1:-1;if(s==="Host")return(R.connection?.addr??"")<(We.connection?.addr??"")?ba:ga;if(s==="Count")return Number(R.count)<Number(We.count)?ba:ga;const et=R.time??as,st=We.time??as;return et.seconds<st.seconds?ba:et.seconds>st.seconds?ga:0}):[],[v,o,r,s,t]);if(j)return e.jsx(Y,{code:j.code,children:j.msg});if(f||v===void 0)return e.jsx(Y,{});const S=30,se=U.slice((i-1)*S,i*S);return e.jsxs(O,{children:[e.jsx(Zs,{editable:!1,show:g.show,hash:g.hash,onHide:()=>p(R=>({...R,show:!1}))}),e.jsx(ne,{open:!g.show&&b.show,onOpenChange:R=>!R&&x(We=>({...We,show:!1})),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{className:"font-bold",children:"Session Detail"})}),e.jsx(le,{children:e.jsx(In,{showNodeModal:I,value:b.data?.connection??m(Nn,{}),startContent:e.jsxs(e.Fragment,{children:[e.jsx(k,{label:"Total Count",value:b.data?.count.toString()??"1"}),e.jsx(k,{label:"Last Activity",value:ws(b.data?.time??as).toLocaleString()})]})})}),e.jsx(re,{className:"border-0",children:e.jsx(y,{variant:"default",className:"w-full",onClick:()=>x(R=>({...R,show:!1})),children:"Close"})})]})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-end mb-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-1",children:"Connection History"}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 flex items-center text-sm",children:[e.jsx(Ns,{className:"mr-2"}),e.jsxs("span",{children:["Showing ",U.length," historical records"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end items-center",children:[e.jsx(nn,{onEnter:l,size:"sm"}),e.jsx(ua,{type:Cn,value:r,onChange:c,format:R=>R===0?"All Networks":cm[R]??"Unknown",className:"!mb-0",triggerClassName:"py-0",size:"sm",style:{minWidth:"120px"}}),e.jsx(y,{size:"sm",onClick:()=>B(),disabled:w,children:w?e.jsx(H,{size:"sm"}):e.jsx(is,{size:16})}),e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsx(y,{size:"sm",children:e.jsx(Fa,{className:"mr-1",size:16})})}),e.jsxs(ze,{align:"end",className:"p-3",style:{minWidth:"320px"},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(D,{children:"Sort Order"}),e.jsxs(be,{type:"single",value:t,onValueChange:R=>R&&n(R),className:"w-full",children:[e.jsx(X,{value:"asc",className:"grow",children:"Asc"}),e.jsx(X,{value:"desc",className:"grow",children:"Desc"})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Sort By"}),e.jsxs(be,{type:"single",value:s,onValueChange:R=>R&&a(R),className:"w-full whitespace-nowrap",children:[e.jsx(X,{value:"Time",className:"grow px-3",children:"Time"}),e.jsx(X,{value:"Host",className:"grow px-3",children:"Host"}),e.jsx(X,{value:"Count",className:"grow px-3",children:"Count"})]})]})]})]})]})]}),e.jsx(Ss,{items:se,getKey:R=>`${R.connection?.id}-${R.time?.seconds}`,onClickItem:R=>x({show:!0,data:R}),renderListItem:R=>e.jsx(im,{data:R}),footer:e.jsx($a,{currentPage:i,totalItems:U.length,pageSize:S,onPageChange:d})})]})}const mm=(s,a)=>{switch(a.type){case"NOTIFY":{let t={...s};for(const n of a.data)switch(n.data.case){case"notifyNewConnections":{n.data.value.connections.forEach(o=>{const l=o.id.toString(),r=s[l];t[l]={conn:o,download:r?.download??"0B",upload:r?.upload??"0B",rawDownload:r?.rawDownload??BigInt(0),rawUpload:r?.rawUpload??BigInt(0)}});break}case"notifyRemoveConnections":{n.data.value.ids.forEach(o=>{delete t[o.toString()]});break}}return t}case"UPDATE_COUNTERS":{const{counters:t}=a;let n=!1;const o={...s};for(const l in t){const r=s[l];if(!r)continue;const c=t[l],i=js(Number(c.download)),d=js(Number(c.upload));(r.download!==i||r.upload!==d)&&(o[l]={...r,download:i,upload:d,rawDownload:c.download,rawUpload:c.upload},n=!0)}return n?o:s}case"RESET":return{};default:return s}};function hm(){const[s,a]=h.useState({info:m(Nn,{}),show:!1}),t=h.useCallback(()=>{a(S=>({...S,show:!1}))},[]),n=Ds(400),[o,l]=W.useReducer(mm,{}),r=W.useId(),c=h.useCallback((S,se)=>(l({type:"NOTIFY",data:S}),!0),[]),i=h.useCallback(()=>{l({type:"RESET"})},[]),d=h.useCallback(S=>{l({type:"UPDATE_COUNTERS",counters:S})},[]),b=h.useMemo(()=>jn(ts.method.notify,m(ra,{}),c,{onDisconnect:i}),[c,i]),{data:x,error:g}=kt(n?`${ve(ts.method.notify)}#${r}`:null,b,{}),[p,u]=h.useState("id"),v=h.useCallback(S=>{u(S)},[u]),[j,f]=h.useState("desc"),w=h.useCallback(S=>{f(S)},[f]),[B,I]=h.useState({show:!1,hash:""}),U=h.useCallback(S=>{I({show:!0,hash:S})},[]);return e.jsxs("div",{children:[e.jsx(Zs,{editable:!1,show:B.show,hash:B.hash,onHide:()=>I(S=>({...S,show:!1}))}),e.jsx(Sn,{onUpdate:d}),e.jsx(jm,{data:s.info,show:!B.show&&s.show,onClose:t,showNodeModal:U}),e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs(be,{className:"flex-nowrap",type:"single",value:j,onValueChange:S=>S&&w(S),children:[e.jsx(X,{value:"asc",children:e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(ys,{size:16})," Asc"]})}),e.jsx(X,{value:"desc",children:e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(As,{size:16})," Desc"]})})]}),e.jsxs(be,{className:"flex-nowrap",type:"single",value:p,onValueChange:S=>S&&v(S),children:[e.jsx(X,{value:"id",children:"Id"}),e.jsx(X,{value:"name",children:"Name"}),e.jsx(X,{value:"download",children:"Download"}),e.jsx(X,{value:"upload",children:"Upload"})]})]})}),e.jsx(xm,{conns:o,setInfo:a,conn_error:g,sortFields:p||"id",sortOrder:j,isLoading:x===void 0&&!g})]})}const um=({conns:s,conn_error:a,setInfo:t,sortFields:n,sortOrder:o,isLoading:l})=>{const r=h.useMemo(()=>Object.values(s??{}),[s]),c=h.useMemo(()=>n!=="download"&&n!=="upload"?[]:[...r].sort((x,g)=>{let p=1,u=-1;switch(o==="asc"&&(p=-1,u=1),n){case"download":return x.rawDownload<g.rawDownload?p:u;case"upload":return x.rawUpload<g.rawUpload?p:u}return 0}),[r,n,o]),i=h.useMemo(()=>n==="download"||n==="upload"?[]:[...r].sort((x,g)=>{let p=1,u=-1;return o==="asc"&&(p=-1,u=1),n==="name"?x.conn.addr<g.conn.addr?p:u:x.conn.id<g.conn.id?p:u}),[r,n,o]),d=n==="download"||n==="upload"?c:i,b=h.useCallback(x=>{t({info:x,show:!0})},[t]);return a!==void 0?e.jsx(Y,{code:a.code,children:a.msg}):l?e.jsx(Y,{}):e.jsx("ul",{className:"flex flex-col p-0 m-0 mb-8 overflow-hidden rounded-sidebar-radius border border-sidebar-border bg-sidebar-bg shadow-xl transition-all duration-300 hover:-translate-y-1 hover:border-indigo-500/30 hover:shadow-[0_0_30px_rgba(99,102,241,0.1)]",children:e.jsx(Pe,{initial:!1,mode:"popLayout",children:d.map(x=>e.jsx(T.li,{className:"flex flex-col items-start md:flex-row md:justify-between px-4 py-3 border-b border-sidebar-border transition-colors duration-200 cursor-pointer hover:bg-sidebar-hover last:border-b-0",onClick:()=>b(x.conn),layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20,transition:{duration:.2}},transition:{type:"spring",stiffness:500,damping:30},children:e.jsx(bm,{data:x})},x.conn.id))})})},xm=W.memo(um),bm=W.memo(({data:s})=>{const{conn:a,download:t,upload:n}=s;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("code",{className:"font-mono text-xs text-sidebar-color",children:a.id.toString()}),e.jsx("span",{className:"font-medium text-md",children:a.addr})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end md:mt-0",children:[e.jsx(pm,{download:t,upload:n}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap text-xs md:mt-0",children:[e.jsx(Be,{icon:Cs,text:Ws[a.mode]}),e.jsx(Be,{icon:Le,text:we[a.type?.connType??0]}),a.tag&&e.jsx(Be,{icon:kl,text:a.tag})]})]})]})}),gm=({download:s,upload:a})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:C("rounded-full flex items-center gap-1 px-2.5 py-0.5 text-xs font-medium","bg-slate-100 text-slate-500 dark:bg-[#2b2b40] dark:text-[#a6a6c0]"),children:[e.jsx(As,{size:12,className:"mr-1"}),s]}),e.jsxs("span",{className:C("rounded-full flex items-center gap-1 px-2.5 py-0.5 text-xs font-medium","bg-slate-100 text-slate-500 dark:bg-[#2b2b40] dark:text-[#a6a6c0]"),children:[e.jsx(ys,{size:12,className:"mr-1"}),a]})]}),pm=W.memo(gm),fm=({data:s,show:a,onClose:t,showNodeModal:n})=>{const o=h.useContext(J),[l,r]=h.useState(!1),c=h.useCallback(()=>{r(!0),G(ts.method.close_conn,m(xr,{ids:[s.id]})).then(({error:i})=>{i?o.Error(`code ${s.id} failed, ${i.code}| ${i.msg}`):t()}).finally(()=>{r(!1)})},[r,s.id,o]);return e.jsx(ne,{open:a,onOpenChange:i=>!i&&t(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{className:"text-lg font-bold",children:"Connection Details"})}),e.jsx(le,{className:"pt-2",children:e.jsx(In,{value:s,showNodeModal:n})}),e.jsx(re,{className:"border-t-0 pt-0 pb-3 px-3",children:e.jsx(y,{variant:"danger",className:"w-full py-2 flex items-center justify-center notranslate",disabled:l,onClick:c,children:l?e.jsxs(e.Fragment,{children:[e.jsx(H,{size:"sm",className:"mr-2"}),"Disconnecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"text-xl mr-2"}),e.jsx("span",{className:"font-bold",children:"Disconnect"})]})})})]})})},jm=W.memo(fm),vm=W.memo(({data:s})=>e.jsxs("div",{className:"flex w-full flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center grow overflow-hidden gap-4 w-full md:w-auto",children:[e.jsx("div",{className:"flex items-center justify-center bg-red-500/10 text-red-500 rounded-full shrink-0",style:{width:"42px",height:"42px"},children:e.jsx(Qt,{className:"text-xl"})}),e.jsxs("div",{className:"flex flex-col overflow-hidden",style:{minWidth:0},children:[e.jsx("span",{className:"font-bold truncate text-base opacity-75",children:s.host}),e.jsx("small",{className:"text-gray-500 dark:text-gray-400 truncate opacity-75 font-mono",children:s.process||"System Filter"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center shrink-0",children:[e.jsxs(me,{variant:"info",pill:!0,className:"flex items-center gap-1",children:[e.jsx(Le,{size:12})," ",s.protocol]}),e.jsxs(me,{variant:"danger",pill:!0,className:"flex items-center gap-1",children:[e.jsx(Zl,{size:12})," ",s.blockCount," Blocks"]}),e.jsxs(me,{variant:"secondary",pill:!0,className:"flex items-center gap-1",children:[e.jsx(Xa,{size:12})," ",ws(s.time).toLocaleTimeString()]}),e.jsx(Re,{className:"text-gray-500 dark:text-gray-400 opacity-25 ml-2 hidden md:block",size:16})]})]})),ym=W.memo(({data:s,show:a,onClose:t})=>s?e.jsx(ne,{open:a,onOpenChange:n=>!n&&t(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:"Blocked Session Details"})}),e.jsx(le,{children:e.jsxs(Da,{children:[e.jsx(k,{label:"Time",value:ws(s.time).toLocaleString()}),e.jsx(k,{label:"Network",value:s.protocol}),e.jsx(k,{label:"Host",value:s.host}),e.jsx(k,{label:"Total Blocks",value:String(s.blockCount)}),e.jsx(k,{label:"Process",value:s.process||"Unknown"})]})}),e.jsx(re,{className:"border-0",children:e.jsx(y,{className:"w-full",onClick:t,children:"Close"})})]})}):null);function Am(){const[s,a]=h.useState("Time"),[t,n]=h.useState("desc"),[o,l]=h.useState(1),[r,c]=h.useState({show:!1}),i=Ds(400),{data:d,error:b,isLoading:x,isValidating:g,mutate:p}=z(i?Ce.method.block_history:null),u=h.useMemo(()=>d?.objects?d.objects.filter(f=>f.time).sort((f,w)=>{const B=t==="asc"?-1:1,I=t==="asc"?1:-1;if(s==="Host")return f.host<w.host?B:I;if(s==="Count")return Number(f.blockCount)<Number(w.blockCount)?B:I;if(s==="Proc")return(f.process??"")<(w.process??"")?B:I;const U=f.time??as,S=w.time??as;return U.seconds<S.seconds?B:U.seconds>S.seconds?I:0}):[],[d,s,t]);if(b)return e.jsx(Y,{code:b.code,children:b.msg});if(x||d===void 0)return e.jsx(Y,{});const v=30,j=u.slice((o-1)*v,o*v);return e.jsxs(O,{children:[e.jsx(ym,{data:r.data,show:r.show,onClose:()=>c({...r,show:!1})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-end mb-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-1",children:"Blocked Traffic"}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 flex items-center text-sm",children:[e.jsx(Qt,{className:"mr-2 text-red-500 opacity-75"}),e.jsxs("span",{children:["Displaying ",u.length," connections denied by rules"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end items-center",children:[e.jsx(y,{size:"sm",onClick:()=>p(),disabled:g,children:g?e.jsx(H,{size:"sm"}):e.jsx(is,{size:16})}),e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsx(y,{size:"sm",children:e.jsx(Fa,{size:16})})}),e.jsxs(ze,{style:{minWidth:"320px"},className:"p-3",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(D,{className:"mb-2",children:"Order"}),e.jsxs(be,{type:"single",value:t,onValueChange:f=>f&&n(f),className:"w-full",children:[e.jsx(X,{value:"asc",className:"grow",children:"ASC"}),e.jsx(X,{value:"desc",className:"grow",children:"DESC"})]})]}),e.jsxs("div",{children:[e.jsx(D,{className:"mb-2",children:"By"}),e.jsxs(be,{type:"single",value:s,onValueChange:f=>f&&a(f),className:"flex flex-wrap w-full",children:[e.jsx(X,{value:"Time",className:"grow",children:"Time"}),e.jsx(X,{value:"Host",className:"grow",children:"Host"}),e.jsx(X,{value:"Count",className:"grow",children:"Count"}),d.dumpProcessEnabled&&e.jsx(X,{value:"Proc",className:"grow",children:"Proc"})]})]})]})]})]})]}),e.jsx(Ss,{items:j,getKey:f=>`${f.host}-${f.time?.seconds}`,onClickItem:f=>c({show:!0,data:f}),renderListItem:f=>e.jsx(vm,{data:f}),footer:e.jsx($a,{currentPage:o,totalItems:u.length,pageSize:v,onPageChange:l})})]})}const Nm={Inbounds:[],Lists:[],Resolvers:[]},qa=h.createContext(Nm),Cm=({rule:s,onUpdate:a,onRemove:t})=>{const n=(l,r)=>{if(typeof r=="string")switch(l){case"host":a(m(Ee,{object:{case:"host",value:m(Ma,{list:r})}}));break;case"process":a(m(Ee,{object:{case:"process",value:m(or,{list:r})}}));break;case"inbound":a(m(Ee,{object:{case:"inbound",value:m(mt,{name:r})}}));break;case"network":a(m(Ee,{object:{case:"network",value:m(cr,{network:r==="tcp"?$s.tcp:$s.udp})}}));break;case"port":a(m(Ee,{object:{case:"port",value:m(lr,{ports:r})}}));break;case"geoip":a(m(Ee,{object:{case:"geoip",value:m(rr,{countries:r})}}));break}else l==="inbound"&&a(m(Ee,{object:{case:"inbound",value:m(mt,{names:r})}}))},o=h.useContext(qa);return e.jsxs(os,{className:"mb-4",children:[e.jsx("div",{className:"flex-[0_0_130px]",children:e.jsx(Ts,{value:s.object.case??"",onChange:l=>n(l,""),triggerClassName:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"first",values:[["Host","host"],["Process","process"],["Inbound","inbound"],["Network","network"],["Port","port"],["Geoip","geoip"]]})}),s.object.case=="host"&&e.jsx("div",{className:"flex-1",children:e.jsx(Ts,{value:s.object.value.list,onChange:l=>n("host",l),emptyChoose:!0,triggerClassName:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle",values:o.Lists})}),s.object.case=="inbound"&&e.jsx("div",{className:"flex-1",children:e.jsx(Sc,{values:s.object.value.names,items:o.Inbounds,onUpdate:l=>n("inbound",l),triggerClassName:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle"})}),s.object.case=="process"&&e.jsx("div",{className:"flex-1",children:e.jsx(Ts,{value:s.object.value.list,onChange:l=>n("process",l),emptyChoose:!0,triggerClassName:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle",values:o.Lists})}),s.object.case=="network"&&e.jsx("div",{className:"flex-1",children:e.jsx(Ts,{value:s.object.value.network===$s.tcp?"tcp":"udp",onChange:l=>n("network",l),triggerClassName:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle",values:[["tcp","tcp"],["udp","udp"]]})}),s.object.case=="port"&&e.jsx("div",{className:"flex-1",children:e.jsx(ge,{type:"text",value:s.object.value.ports,onChange:l=>n("port",l.target.value),className:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle"})}),s.object.case=="geoip"&&e.jsx("div",{className:"flex-1",children:e.jsx(ge,{type:"text",value:s.object.value.countries,onChange:l=>n("geoip",l.target.value),className:"focus:z-10 focus:relative hover:z-10 hover:relative",groupPosition:"middle"})}),e.jsx("div",{className:"flex-[0_0_42px]",children:e.jsx(y,{variant:"outline-danger",onClick:t,size:"icon",className:"w-full !rounded-l-none h-full focus:z-10 focus:relative hover:z-10 hover:relative",children:e.jsx(Bl,{size:16})})})]})},wm=({group:s,onUpdateGroup:a,onRemoveGroup:t})=>{const n=(r,c)=>{a({...s,rules:[...s.rules.map((i,d)=>r===d?c:i)]})},o=()=>{a({...s,rules:[...s.rules,m(Ee,{object:{case:"host",value:m(Ma,{list:""})}})]})},l=r=>{if(s.rules.length===1)t();else{const c=s.rules.filter((i,d)=>d!==r);a({...s,rules:c})}};return e.jsxs("div",{className:"border border-gray-500/10 p-4 rounded-md bg-secondary/10",children:[s.rules.map((r,c)=>e.jsxs(W.Fragment,{children:[e.jsx(Cm,{rule:r,onUpdate:i=>n(c,i),onRemove:()=>l(c)}),c<s.rules.length-1&&e.jsx("div",{className:"ml-4 mb-4 font-bold text-blue-500 text-xs uppercase",children:"And"})]},c)),e.jsxs(y,{size:"sm",onClick:o,className:"px-3",children:[e.jsx(_,{className:"mr-1",size:16}),"And"]})]})},Sm=()=>e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("hr",{className:"flex-grow opacity-25"}),e.jsx("span",{className:"mx-4 font-bold text-gray-500 dark:text-gray-400 text-xs uppercase tracking-[1px]",children:"Or"}),e.jsx("hr",{className:"flex-grow opacity-25"})]}),Im=()=>e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("hr",{className:"flex-grow opacity-25"}),e.jsx("span",{className:"mx-4 font-bold text-gray-500 dark:text-gray-400 text-xs uppercase tracking-[1px]",children:"Rules"}),e.jsx("hr",{className:"flex-grow opacity-25"})]}),Wm=({groups:s,onUpdateGroups:a})=>{const t=(l,r)=>{a([...s.map((c,i)=>l===i?r:c)])},n=()=>{a([...s,m(ir,{rules:[m(Ee,{object:{case:"host",value:m(Ma,{list:""})}})]})])},o=l=>{a([...s.filter((r,c)=>c!==l)])};return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(Im,{}),s.map((l,r)=>e.jsxs(W.Fragment,{children:[r>0&&e.jsx(Sm,{}),e.jsx(wm,{group:l,onUpdateGroup:c=>t(r,c),onRemoveGroup:()=>o(r)})]},r)),e.jsx("div",{className:"mt-2",children:e.jsxs(y,{onClick:n,className:"px-3",children:[e.jsx(_,{className:"mr-1",size:16}),"Or"]})})]})},km=({index:s,name:a,show:t,onHide:n,onDelete:o})=>{const l=h.useContext(J),r=h.useContext(qa),[c,i]=h.useState(!1),[d,b]=h.useState(!1),{data:x,error:g,isLoading:p,isValidating:u,mutate:v}=ls(a===""||!t?void 0:[ve(Ce.method.get),s,a],Is(Ce.method.get,m(Fs,{index:s,name:a})),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1}),j=()=>{i(!0),G(Ce.method.save,m(Mn,{index:m(Fs,{index:s,name:a}),rule:x})).then(async({error:f})=>{f===void 0?(l.Info(`save ${a} successful`),v(),n()):l.Error(f.msg),i(!1)})};return e.jsx(ne,{open:t,onOpenChange:f=>!f&&n(),children:e.jsxs(ae,{style:{maxWidth:"800px"},children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:x?x.name:"Loading..."})}),e.jsx(le,{children:g?e.jsx(on,{msg:g.msg,code:g.code,raw:g.raw}):u||p||!x?e.jsx(Y,{}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(Qe,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(De,{label:"Mode",type:hr,value:x.mode,onChange:f=>v({...x,mode:f},!1),filter:f=>f.number!==Ws.bypass})}),e.jsx("div",{children:e.jsx(N,{label:"Tag",value:x.tag,onChange:f=>v({...x,tag:f},!1),placeholder:"Optional tag"})}),e.jsx("div",{children:e.jsx(De,{label:"Resolve Strategy",type:ur,value:x.resolveStrategy,onChange:f=>v({...x,resolveStrategy:f},!1)})}),e.jsx("div",{children:e.jsx(De,{label:"UDP proxy Fqdn",type:ut,value:x.udpProxyFqdnStrategy,onChange:f=>v({...x,udpProxyFqdnStrategy:f},!1),format:f=>f===es.udp_proxy_fqdn_strategy_default?"global":ut.values.find(w=>w.number===f)?.name||""})}),e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx(ns,{label:"Resolver",value:x.resolver,values:r.Resolvers,onChange:f=>v({...x,resolver:f},!1),emptyChoose:!0,emptyChooseName:"Global Default"})})]})}),e.jsxs(Qe,{children:[e.jsx(D,{className:"mb-0",children:"Rule Entries"}),e.jsx(Wm,{groups:x.rules,onUpdateGroups:f=>{v({...x,rules:f},!1)}})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs(y,{className:"flex items-center opacity-75 text-[0.8rem]",onClick:()=>b(!d),size:"sm",children:[d?e.jsx(cs,{className:"mr-1"}):e.jsx(Re,{className:"mr-1"}),d?"Hide Debug Info":"Show Debug Info"]}),d&&e.jsx("div",{className:"mt-3",children:e.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-zinc-800 p-3 rounded-md overflow-auto font-mono border border-gray-500/10",style:{maxHeight:"300px",fontSize:"0.75rem"},children:sa(vn,x,{prettySpaces:2})})})]})]})}),e.jsxs(re,{className:"flex justify-between gap-2 border-t-0",children:[e.jsxs(y,{variant:"outline-danger",onClick:()=>{n(),o()},children:[e.jsx($,{className:"mr-2",size:16}),"Delete Rule"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:n,children:"Cancel"}),e.jsx(y,{disabled:c,onClick:j,children:c?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"mr-2",size:16}),"Save"]})})]})]})]})})},Zm=({bypass:s,onChange:a,refresh:t})=>{const{data:n}=z(ue.method.list),o=n?n.names.sort((d,b)=>d.localeCompare(b)):[],l=h.useContext(J),[r,c]=h.useState(!1),i=h.useCallback(()=>{c(!0),G(Ce.method.save_config,s).then(async({error:d})=>{d!==void 0?l.Error(`save config failed, ${d.code}| ${d.msg}`):(l.Info("Save Successfully"),t()),c(!1)})},[s,l,t,c]);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(K,{icon:Cs,color:"#ec4899",title:"Global Bypass Settings",description:"DNS Resolution & Strategies"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-bold mb-4 uppercase text-xs text-gray-500 dark:text-gray-400 opacity-75 tracking-[0.5px]",children:"Resolution Strategy"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ie,{label:"Resolve Locally",description:"Resolve DNS on local device",checked:s.resolveLocally,onCheckedChange:()=>a({...s,resolveLocally:!s.resolveLocally})}),e.jsx(ie,{label:"UDP Proxy FQDN",description:"Skip local resolution for UDP",checked:s.udpProxyFqdn===es.skip_resolve,onCheckedChange:()=>a({...s,udpProxyFqdn:s.udpProxyFqdn===es.skip_resolve?es.resolve:es.skip_resolve})})]})]}),e.jsxs("div",{className:"lg:border-l lg:pl-6 border-[var(--card-inner-border)]",children:[e.jsx("h6",{className:"font-bold mb-4 uppercase text-xs text-gray-500 dark:text-gray-400 opacity-75 tracking-[0.5px]",children:"Default Resolvers"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(ns,{label:"Direct Resolver",value:s.directResolver?s.directResolver:"",values:o,onChange:d=>a({...s,directResolver:d}),emptyChoose:!0,emptyChooseName:"Global Default"}),e.jsx(ns,{label:"Proxy Resolver",value:s.proxyResolver?s.proxyResolver:"",values:o,onChange:d=>a({...s,proxyResolver:d}),emptyChoose:!0,emptyChooseName:"Global Default"})]})]})]})}),e.jsx(Ie,{className:"flex justify-end",children:e.jsx(y,{disabled:r,onClick:i,children:r?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save Configuration"]})})})]}),e.jsx(_n,{})]})},Bm=W.memo(Zm),Rm=({name:s,index:a,onPriority:t,isChangePriority:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[e.jsxs(me,{variant:"secondary",className:"mr-2 min-w-[40px]",children:["#",a+1]}),e.jsx(Pt,{className:"mr-2 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"truncate font-medium",children:s})]}),e.jsx("div",{className:"flex gap-1",onClick:o=>o.stopPropagation(),children:e.jsx(y,{size:"icon",disabled:n,title:"Change Priority",onClick:o=>{o.stopPropagation(),t(a)},children:e.jsx(Gl,{size:16})})})]}),_n=()=>{const s=h.useContext(J),[a,t]=h.useState(!1),[n,o]=h.useState({show:!1,index:0}),[l,r]=h.useState({show:!1,index:-1}),[c,i]=h.useState({show:!1,index:-1}),[d,b]=h.useState(!1),{data:x,error:g,isLoading:p,mutate:u}=z(Ce.method.list),v=S=>{t(!0),G(Ce.method.save,m(Mn,{rule:m(vn,{name:S,mode:Ws.proxy,resolver:"",resolveStrategy:An.default,tag:"",udpProxyFqdnStrategy:es.udp_proxy_fqdn_strategy_default,rules:[]})})).then(async({error:se})=>{se===void 0?(s.Info("Add rule successful"),u()):(s.Error(se.msg),console.error(se.code,se.msg)),t(!1)})},j=h.useCallback(()=>{o(S=>({...S,show:!1}))},[]),f=h.useCallback(()=>{r(S=>({...S,show:!1}))},[]),w=h.useCallback(()=>{i(S=>({...S,show:!1}))},[]),B=h.useCallback((S,se,R)=>{b(!0),G(Ce.method.change_priority,m(td,{operate:R,source:m(Fs,{index:S,name:x?.names[S]}),target:m(Fs,{index:se,name:x?.names[se]})})).then(async({error:We})=>{We===void 0?(s.Info("change priority successful"),u()):(s.Error(We.msg),console.error(We.code,We.msg))}).finally(()=>b(!1))},[s,u,x?.names]),I=h.useCallback((S,se)=>{B(c.index,S,se)},[c,B]),U=h.useCallback(()=>{G(Ce.method.remove,m(Fs,{name:x?.names[l.index],index:l.index})).then(async({error:S})=>{S===void 0?(s.Info("remove successful"),u()):(s.Error(S.msg),console.error(S.code,S.msg))})},[x,l,s,u]);return g!==void 0?e.jsx(ye,{statusCode:g.code,title:g.msg}):p||x===void 0?e.jsx(Y,{}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{show:l.show,title:"Delete Rule",content:e.jsxs("p",{className:"mb-0",children:["Delete rule ",e.jsx("strong",{children:l.index>=0&&x.names.length>l.index?x.names[l.index]:""}),"?"]}),onHide:f,onOk:U}),e.jsx(km,{show:n.show,onHide:j,name:n.index>=0&&x.names.length>n.index?x.names[n.index]:"",index:n.index,onDelete:()=>r({show:!0,index:n.index})}),e.jsx(Ym,{show:c.show,onHide:w,index:c.index,rules:x.names,onChange:I}),e.jsx(ca,{items:x.names,onClickItem:(S,se)=>{o({show:!0,index:se})},renderListItem:(S,se)=>e.jsx(Rm,{name:S,index:se,onPriority:R=>{i({show:!0,index:R})},isChangePriority:d},se),adding:a,onAddNew:S=>{x.names.includes(S)||v(S)},header:e.jsx(K,{icon:Rl,color:"#3b82f6",title:"Bypass Rules",description:"Traffic Routing Rules"})})]})};W.memo(_n);const Gm=({index:s,rules:a,show:t,onHide:n,onChange:o})=>{const[l,r]=h.useState(s),[c,i]=h.useState(Un.Exchange);return h.useEffect(()=>{r(s)},[s,a]),e.jsx(ne,{open:t,onOpenChange:d=>!d&&n(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:"Change Rule Priority"})}),e.jsx(le,{children:e.jsxs(Qe,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs(me,{variant:"primary",className:"mr-4",children:["#",s+1]}),e.jsx("span",{className:"font-bold flex-grow text-center",children:s>=0&&s<a.length?a[s]:""})]}),e.jsxs("div",{className:"flex items-center my-4 text-gray-500 dark:text-gray-400",children:[e.jsx("hr",{className:"flex-grow opacity-25"}),e.jsx("small",{className:"mx-4 uppercase font-bold opacity-50 tracking-[0.5px] text-[0.65rem]",children:"Operation"}),e.jsx("hr",{className:"flex-grow opacity-25"})]}),e.jsx(xe,{value:String(c),onValueChange:d=>i(parseInt(d)),items:nd.values.map(d=>({value:String(d.number),label:d.name})),triggerClassName:"w-full text-center justify-center mb-4 bg-secondary/10 border-gray-500/10"}),e.jsxs("div",{className:"flex items-center my-4 text-gray-500 dark:text-gray-400",children:[e.jsx("hr",{className:"flex-grow opacity-25"}),e.jsx("small",{className:"mx-4 uppercase font-bold opacity-50 tracking-[0.5px] text-[0.65rem]",children:"Target Rule"}),e.jsx("hr",{className:"flex-grow opacity-25"})]}),e.jsx(xe,{value:String(l),onValueChange:d=>r(parseInt(d)),items:a.map((d,b)=>({value:String(b),label:`#${b+1} - ${d}`})),triggerClassName:"w-full text-center justify-center bg-secondary/10 border-gray-500/10"})]})}),e.jsxs(re,{className:"gap-2",children:[e.jsx(y,{onClick:n,children:"Cancel"}),e.jsx(y,{variant:"primary",onClick:()=>{o(l,c),n()},children:"Apply Change"})]})]})})},Ym=W.memo(Gm);function Em(){const{data:s}=z(He.method.list,{revalidateOnFocus:!1}),{data:a}=z(Me.method.list,{revalidateOnFocus:!1}),{data:t}=z(ue.method.list,{revalidateOnFocus:!1}),{data:n,error:o,isLoading:l,mutate:r}=z(Ce.method.config,{revalidateOnFocus:!1}),c=h.useCallback(i=>{r(i,!1)},[r]);return o?e.jsx(Y,{code:o.code,children:o.msg}):l||!n?e.jsx(Y,{}):e.jsx(e.Fragment,{children:e.jsx(qa,{value:{Inbounds:a?a.names:[],Lists:s?s.names:[],Resolvers:t?t.names.sort((i,d)=>i.localeCompare(d)):[]},children:e.jsx(Bm,{bypass:n,onChange:c,refresh:r})})})}function Vm(){const s=h.useContext(J),[a,t]=h.useState(""),[n,o]=h.useState(void 0),[l,r]=h.useState(!1),{copy:c,copied:i}=da({usePromptAsFallback:!0});h.useEffect(()=>{i&&s.Info("Result copied to clipboard!")},[i,s]);const d=h.useCallback(()=>{a.trim()&&(r(!0),o(void 0),G(Ce.method.test,m(je,{value:a})).then(async({data:b,error:x})=>{x?s.Error(`Test failed: ${x.code} | ${x.msg}`):o(b)}).finally(()=>r(!1)))},[a,s]);return e.jsxs(O,{children:[e.jsxs(F,{className:"mb-4",children:[e.jsx(M,{children:e.jsx(K,{icon:oa,color:"#f59e0b",title:"Rule Testing",description:"Simulate traffic to verify routing"})}),e.jsxs(L,{className:"p-6",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-6 px-1",children:"Enter a domain or IP address below to see which rule and outbound node would be selected."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{placeholder:"e.g. www.google.com or 8.8.8.8",value:a,className:"flex-grow",onChange:b=>t(b.target.value),onKeyDown:b=>{b.key==="Enter"&&d()}}),e.jsx(y,{onClick:d,disabled:l||!a.trim(),className:"min-w-[100px]",children:l?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Yl,{className:"mr-1",size:16})," Run"]})})]})]})]}),l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(H,{size:"md",className:"mb-3"}),e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Analyzing routing table..."})]}),n&&!l&&e.jsxs(F,{className:"animate-dataUpdate",children:[e.jsxs(M,{children:[e.jsx(K,{icon:El,color:"#10b981",title:"Analysis Result",description:"Raw decision path metadata"}),e.jsx(y,{size:"sm",onClick:()=>c(sa(At,n,{prettySpaces:2})),children:i?e.jsx(Ra,{size:16}):e.jsx(Ga,{size:16})})]}),e.jsx(L,{children:e.jsx(Qe,{children:e.jsx("pre",{className:"mb-0 font-mono",style:{whiteSpace:"pre-wrap",wordBreak:"break-all",fontSize:"0.85rem",maxHeight:"500px",overflowY:"auto"},children:sa(At,n,{prettySpaces:2})})})})]}),e.jsx("div",{className:"flex justify-center mt-6 opacity-50 pb-12",children:e.jsxs("small",{className:"text-gray-500 dark:text-gray-400 italic flex items-center",children:[e.jsx(Ns,{className:"mr-1",size:14}),"This tool tests the core logic using the current active configuration."]})})]})}const Xm=()=>{const s=h.useContext(J),[a,t]=h.useState(!1),[n,o]=h.useState(!1),{data:l,error:r,isLoading:c,mutate:i}=z(ue.method.fakedns,{onSuccess:()=>o(!1)});if(r!==void 0)return e.jsx(Y,{code:r.code,children:r.msg});if(c||l===void 0)return e.jsx(Y,{});const d=()=>{t(!0),G(ue.method.save_fakedns,l).then(async({error:x})=>{x===void 0?s.Info("save fakedns successful"):(s.Error(x.msg),console.error(x.code,x.msg)),i(),t(!1)})},b=x=>{i(x,!1),o(!0)};return e.jsxs(F,{className:"h-full flex flex-col",children:[e.jsxs(M,{className:"flex justify-between items-center",children:[e.jsx(K,{icon:Vl,color:"#10b981",title:"FakeDNS",description:"Virtual IP Strategy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:l.enabled?"ACTIVE":"DISABLED"}),e.jsx(Vn,{checked:l.enabled,onCheckedChange:()=>b(x=>({...x,enabled:!x.enabled}))})]})]}),e.jsx(L,{className:"flex-grow",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(N,{label:"IPv4 Range",value:l.ipv4Range,onChange:x=>b(g=>({...g,ipv4Range:x}))})}),e.jsx("div",{children:e.jsx(N,{label:"IPv6 Range",value:l.ipv6Range,onChange:x=>b(g=>({...g,ipv6Range:x}))})})]}),e.jsx("hr",{className:"my-0 border-gray-500/10 opacity-10"}),e.jsx(de,{title:"Domain Whitelist",dump:!0,data:l.whitelist,onChange:x=>b(g=>({...g,whitelist:x}))}),e.jsx("hr",{className:"my-0 border-gray-500/10 opacity-10"}),e.jsx(de,{title:"Skip Check List",dump:!0,data:l.skipCheckList?l.skipCheckList:[],onChange:x=>b(g=>({...g,skipCheckList:x}))})]})}),e.jsxs(Ie,{className:"flex justify-end gap-2",children:[e.jsxs(y,{size:"sm",disabled:!n,onClick:()=>i(),children:[e.jsx(is,{className:"mr-2",size:16}),"Reset"]}),e.jsx(y,{size:"sm",disabled:a||!n,onClick:d,children:a?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save"]})})]})]})},Fm=()=>{const s=h.useContext(J),[a,t]=h.useState({key:"",value:""}),[n,o]=h.useState(!1),[l,r]=h.useState(!1),{data:c,error:i,isLoading:d,mutate:b}=z(ue.method.hosts,{onSuccess:()=>r(!1)});if(i!==void 0)return e.jsx(Y,{code:i.code,children:i.msg});if(d||c===void 0)return e.jsx(Y,{});const x=()=>{o(!0),G(ue.method.save_hosts,c).then(async({error:p})=>{p===void 0?s.Info("save hosts successful"):(s.Error(p.msg),console.error(p.code,p.msg)),b(),o(!1)})},g=p=>{b(p,!1),r(!0)};return e.jsxs(F,{className:"h-full flex flex-col",children:[e.jsx(M,{children:e.jsx(K,{icon:Pt,color:"#3b82f6",title:"Static Hosts",description:"Local Domain Mappings"})}),e.jsx(L,{className:"flex-grow",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[Object.entries(c.hosts).sort(([p],[u])=>p.localeCompare(u)).map(([p,u])=>e.jsxs(os,{children:[e.jsx(Ln,{className:"font-mono text-xs px-2 flex-1 min-w-0 justify-start dark:bg-[#2b2b40] dark:text-[#a6a6c0] dark:border-gray-700",children:e.jsx("span",{className:"truncate",children:p})}),e.jsx(ge,{value:u,className:"font-mono text-blue-600 dark:text-blue-400 flex-[1.2] min-w-0",onChange:v=>g(j=>({...j,hosts:{...j.hosts,[p]:v.target.value}}))}),e.jsx(y,{variant:"outline-danger",onClick:()=>g(v=>{const j={...v.hosts};return delete j[p],{...v,hosts:j}}),children:e.jsx($,{size:16})})]},"hosts"+p)),e.jsx("div",{className:"pt-4 mt-2 border-t border-gray-500/10",children:e.jsxs(os,{children:[e.jsx(ge,{value:a.key,onChange:p=>t({...a,key:p.target.value}),placeholder:"Domain...",className:"flex-grow"}),e.jsx(ge,{value:a.value,onChange:p=>t({...a,value:p.target.value}),placeholder:"IP Address...",className:"flex-grow"}),e.jsx(y,{onClick:()=>{a.key===""||c.hosts[a.key]!==void 0||(g(p=>({...p,hosts:{...p.hosts,[a.key]:a.value}})),t({key:"",value:""}))},children:e.jsx(_,{size:16})})]})})]})}),e.jsxs(Ie,{className:"flex justify-end gap-2",children:[e.jsxs(y,{size:"sm",disabled:!l,onClick:()=>b(),children:[e.jsx(is,{className:"mr-2",size:16}),"Reset"]}),e.jsx(y,{size:"sm",disabled:n||!l,onClick:x,children:n?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save"]})})]})]})},Lm=()=>{const s=h.useContext(J),[a,t]=h.useState(!1),[n,o]=h.useState(!1),{data:l,error:r,isLoading:c,mutate:i}=z(ue.method.server,{onSuccess:()=>o(!1)});if(r!==void 0)return e.jsx(Y,{code:r.code,children:r.msg});if(c||l===void 0)return e.jsx(Y,{});const d=()=>{t(!0),G(ue.method.save_server,l).then(async({error:x})=>{x===void 0?s.Info("save server successful"):(s.Error(x.msg),console.error(x.code,x.msg)),i(),t(!1)})},b=x=>{i(x,!1),o(!0)};return e.jsxs(F,{className:"flex flex-col",children:[e.jsx(M,{children:e.jsx(K,{icon:Xl,color:"#8b5cf6",title:"DNS Server",description:"Listen and Serve"})}),e.jsx(L,{className:"p-6",children:e.jsx(N,{label:"Listen Address",placeholder:"e.g. 127.0.0.1:53",value:l.value,onChange:x=>b(g=>({...g,value:x}))})}),e.jsxs(Ie,{className:"flex justify-end gap-2",children:[e.jsxs(y,{size:"sm",disabled:!n,onClick:()=>i(),children:[e.jsx(is,{className:"mr-2",size:16}),"Reset"]}),e.jsx(y,{size:"sm",disabled:a||!n,onClick:d,children:a?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save"]})})]})]})};function zm(){return e.jsx(O,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(Jm,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Fm,{})}),e.jsx("div",{children:e.jsx(Xm,{})})]}),e.jsx("div",{children:e.jsx(Lm,{})})]})})}function Jm(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(ue.method.list),[l,r]=h.useState({show:!1,name:"",new:!1}),[c,i]=h.useState({show:!1,name:""});if(t!==void 0)return e.jsx(Y,{code:t.code,children:t.msg});if(n||a===void 0)return e.jsx(Y,{});const d=x=>{G(ue.method.remove,m(je,{value:x})).then(async({error:g})=>{g===void 0?(s.Info("remove successful"),o()):(s.Error(g.msg),console.error(g.code,g.msg))})},b=x=>{a.names.includes(x)||(l.name===x&&l.new?r(g=>({...g,show:!0})):r({show:!0,name:x,new:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(Te,{show:c.show,title:"Delete Resolver",content:e.jsxs(e.Fragment,{children:["Are you sure to delete ",e.jsx("span",{className:"font-bold text-red-500",children:c.name}),"?"]}),onOk:()=>{d(c.name),i(x=>({...x,show:!1}))},onHide:()=>{i(x=>({...x,show:!1}))}}),e.jsx(Km,{name:l.name,show:l.show,isNew:l.new,onHide:x=>{x&&o(),r(g=>({...g,show:!1}))},onDelete:x=>i({show:!0,name:x})}),e.jsx(ca,{items:a.names.sort((x,g)=>x.localeCompare(g)),renderListItem:x=>e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"mr-4 text-gray-500 dark:text-gray-400",size:20}),e.jsx("span",{className:"flex-grow truncate font-medium",children:x}),x==="bootstrap"&&e.jsx(Cs,{className:"text-blue-500 ml-2",size:16,title:"System Default"}),e.jsx(Re,{className:"text-gray-500 dark:text-gray-400 opacity-25 ml-2",size:16})]}),onClickItem:x=>r({show:!0,name:x,new:!1}),onAddNew:b,header:e.jsx(K,{icon:Ht,color:"#3b82f6",title:"Resolvers",description:"Upstream DNS Resolvers"})})]})}const Km=({name:s,show:a,isNew:t,onHide:n,onDelete:o})=>{const l=h.useContext(J),[r,c]=h.useState(!1),{data:i,error:d,isLoading:b,isValidating:x,mutate:g}=ls(s===""?void 0:ve(ue.method.get),Is(ue.method.get,m(je,{value:s}),t?m(Ni,{host:"8.8.8.8",type:Dn.udp}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});h.useEffect(()=>{g()},[s,t,g]);const p=()=>{c(!0),G(ue.method.save,m(od,{name:s,resolver:i})).then(async({error:u})=>{u===void 0?(l.Info("save successful"),n(!0)):(l.Error(u.msg),console.error(u.code,u.msg)),g()}).finally(()=>c(!1))};return e.jsx(ne,{open:a,onOpenChange:u=>!u&&n(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:s})}),e.jsx(le,{children:d?e.jsx(ye,{statusCode:d.code,title:d.msg}):x||b||!i?e.jsx(Y,{}):e.jsx(Hm,{value:i,onChange:u=>{g(u,!1)}})}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx("div",{children:s!=="bootstrap"&&!t&&e.jsxs(y,{variant:"outline-danger",onClick:()=>{n(!1),o(s)},children:[e.jsx($,{className:"mr-2",size:16}),"Delete"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:()=>n(),children:"Cancel"}),e.jsx(y,{disabled:r,onClick:p,children:r?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"mr-2",size:16}),t?"Create":"Save"]})})]})]})]})})},Hm=({value:s,onChange:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx(N,{placeholder:"e.g. tls://8.8.8.8:853",label:"Upstream DNS",value:s.host,onChange:t=>a({...s,host:t})}),e.jsx(ua,{label:"Type",type:Ci,value:s.type,onChange:t=>a({...s,type:t})}),e.jsx(N,{label:"Subnet (Optional)",placeholder:"e.g. 114.114.114.0/24",value:s.subnet,onChange:t=>a({...s,subnet:t})}),e.jsx(N,{label:"SNI (Optional)",value:s.tlsServername,onChange:t=>a({...s,tlsServername:t})})]}),Dm=({tagName:s,tagData:a,onDelete:t,onHashClick:n})=>{const o=a.hash.length===0||a.hash[0]==="",l=a.type===Ve.mirror;return e.jsxs(e.Fragment,{children:[o?e.jsx(Ya,{className:"mr-4 text-gray-500 dark:text-gray-400",size:20}):l?e.jsx(Tt,{className:"mr-4 text-gray-500 dark:text-gray-400",size:20}):e.jsx(Le,{className:"mr-4 text-gray-500 dark:text-gray-400",size:20}),e.jsxs("div",{className:"flex flex-col overflow-hidden flex-grow min-w-0",children:[e.jsx("span",{className:"font-medium truncate",children:s}),!o&&e.jsx("small",{className:"text-gray-500 dark:text-gray-400 truncate font-mono opacity-75 underline",style:{cursor:"pointer",fontSize:"0.75rem"},onClick:r=>{l||(r.stopPropagation(),n(a.hash[0]))},children:l?`Mirror: ${a.hash[0]}`:a.hash[0]})]}),e.jsxs("div",{className:"flex gap-2 ml-4 items-center flex-shrink-0",onClick:r=>r.stopPropagation(),children:[e.jsx(y,{variant:"outline-danger",size:"sm",onClick:()=>t(),children:e.jsx($,{size:16})}),e.jsx(Re,{className:"text-gray-500 dark:text-gray-400 opacity-25 hidden md:block",size:16})]})]})},Mm=s=>e.jsx(ne,{open:s.show,onOpenChange:a=>!a&&s.onHide(),children:e.jsxs(ae,{children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:s.tagItem.tag})}),e.jsx(le,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Qe,{children:[e.jsx(D,{className:"mb-2",children:"Tag Type"}),e.jsxs(be,{type:"single",value:String(s.tagItem.type),onValueChange:a=>a&&s.onChangeTag({...s.tagItem,type:Number(a)}),className:"w-full flex-nowrap",children:[e.jsxs(X,{value:String(Ve.node),className:"flex-grow whitespace-nowrap",children:[e.jsx(Le,{className:"mr-2"}),"Node"]}),e.jsxs(X,{value:String(Ve.mirror),className:"flex-grow whitespace-nowrap",children:[e.jsx(Tt,{className:"mr-2"}),"Mirror"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[s.isNew&&e.jsx(N,{label:"Tag Name",value:s.tagItem.tag,placeholder:"e.g., fast-proxy",onChange:a=>s.onChangeTag({...s.tagItem,tag:a})}),s.tagItem.type===Ve.mirror?e.jsx(ns,{label:"Target Mirror Tag",value:s.tagItem.hash,values:Object.keys(s.data.tags).sort(),emptyChoose:!0,onChange:a=>s.onChangeTag({...s.tagItem,hash:a})}):e.jsxs("div",{children:[e.jsx(D,{className:"mb-2",children:"Target Node"}),e.jsx("div",{className:"p-4 bg-secondary/10 rounded-md border border-gray-500/10",children:e.jsx(Jn,{data:s.nodes,hash:s.tagItem.hash,onChangeNode:a=>s.onChangeTag({...s.tagItem,hash:a})})})]})]})]})}),e.jsxs(re,{className:"border-0",children:[e.jsx(y,{onClick:s.onHide,children:"Cancel"}),e.jsxs(y,{onClick:s.onSave,disabled:!s.tagItem.tag||!s.tagItem.hash,children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save"]})]})]})});function Um(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(ja.method.list),{data:l}=z(he.method.list),[r,c]=h.useState({hash:"",show:!1}),[i,d]=h.useState({show:!1,tag:m(Ps,{tag:"",hash:"",type:Ve.node}),isNew:!0}),[b,x]=h.useState({show:!1,name:""});if(t!==void 0)return e.jsx(Ls,{statusCode:t.code,title:t.msg});if(n||a===void 0)return e.jsx(Y,{});const g=()=>{i.tag.tag===""||i.tag.hash===""||G(ja.method.save,i.tag).then(async({error:u})=>{u!==void 0?s.Error(`Save failed: ${u.msg}`):(s.Info("Tag saved successfully"),o(),d(v=>({...v,show:!1})))})},p=u=>{G(ja.method.remove,m(je,{value:u})).then(async({error:v})=>{v!==void 0?s.Error(`Delete failed: ${v.msg}`):(s.Info("Tag removed"),o()),x({show:!1,name:""})})};return e.jsxs(O,{children:[e.jsx(Te,{show:b.show,title:"Delete Tag",content:e.jsxs("p",{className:"mb-0",children:["Are you sure you want to delete tag ",e.jsx("strong",{children:b.name}),"?"]}),onHide:()=>x({show:!1,name:""}),onOk:()=>p(b.name)}),e.jsx(Zs,{show:r.show,hash:r.hash,onHide:()=>c({...r,show:!1})}),e.jsx(Mm,{show:i.show,nodes:new na(l),data:a,tagItem:i.tag,isNew:i.isNew,onHide:()=>d(u=>({...u,show:!1})),onChangeTag:u=>d(v=>({...v,tag:u})),onSave:g}),e.jsx(ca,{header:e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(K,{icon:Fl,color:"#10b981",title:"Tags Management",description:`${Object.keys(a.tags).length} alias and mirror nodes defined`}),e.jsxs(y,{onClick:()=>d({show:!0,tag:m(Ps,{tag:"",hash:"",type:Ve.node}),isNew:!0}),children:[e.jsx(_,{className:"mr-2"}),"Add New Tag"]})]}),items:Object.keys(a.tags).sort((u,v)=>u.localeCompare(v)),onClickItem:u=>{const v=a.tags[u];d({show:!0,tag:m(Ps,{tag:u,hash:v.hash[0],type:v.type}),isNew:!1})},renderListItem:u=>{const v=a.tags[u];return v.hash.length===0||v.hash[0],v.type,Ve.mirror,e.jsx(Dm,{tagName:u,tagData:v,onDelete:()=>x({show:!0,name:u}),onHashClick:j=>c({hash:j,show:!0})},u)},onAddNew:u=>{a.tags[u]||d({show:!0,tag:m(Ps,{tag:u,hash:"",type:Ve.node}),isNew:!0})},adding:n})]})}function Qm(){const s=h.useContext(J),{data:a,error:t,isLoading:n,mutate:o}=z(He.method.list,{revalidateOnFocus:!1}),[l,r]=h.useState({show:!1,name:"",new:!1}),[c,i]=h.useState({show:!1,name:""}),[d,b]=h.useState(!1),[x,g]=h.useState(!1),p=_a(o);if(h.useEffect(()=>{a&&(a.refreshConfig||p(w=>({...w,refreshConfig:m(dt,{refreshInterval:BigInt(0)})}),!1))},[a,p]),t!==void 0)return e.jsx(Y,{code:t.code,children:t.msg});if(n||a===void 0)return e.jsx(Y,{});const u=w=>{G(He.method.remove,m(je,{value:w})).then(async({error:B})=>{B===void 0?(s.Info("remove successful"),o()):(s.Error(B.msg),console.error(B.code,B.msg))})},v=()=>{g(!0),G(He.method.save_config,m(ad,{refreshInterval:a.refreshConfig?.refreshInterval,maxminddbGeoip:a.maxminddbGeoip})).then(async({error:w})=>{w===void 0?(s.Info("save successful"),o()):(s.Error(w.msg),console.error(w.code,w.msg)),g(!1)})},j=w=>{a.names.includes(w)||(l.name===w&&l.new?r(B=>({...B,show:!0})):r({show:!0,name:w,new:!0}))},f=a?.refreshConfig?.lastRefreshTime?new Date(Number(a.refreshConfig.lastRefreshTime)*1e3).toLocaleString():"Never";return e.jsxs(O,{children:[e.jsx(Te,{show:c.show,title:"Delete List",content:e.jsxs(e.Fragment,{children:["Are you sure to delete ",e.jsx("span",{className:"font-bold text-red-500",children:c.name}),"?"]}),onOk:()=>{u(c.name),i(w=>({...w,show:!1}))},onHide:()=>{i(w=>({...w,show:!1}))}}),e.jsx(Pm,{name:l.name,show:l.show,isNew:l.new,onHide:w=>{w&&o(),r(B=>({...B,show:!1}))},onDelete:w=>i({show:!0,name:w})}),e.jsxs("div",{className:"flex flex-wrap justify-between items-end mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-1",children:"List Management"}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 flex items-center text-xs",children:[e.jsx(Xt,{className:"mr-2 opacity-75"}),e.jsxs("span",{children:["Last Synced: ",e.jsx("span",{className:"font-medium text-foreground",children:f})]})]})]}),e.jsxs(y,{disabled:d,onClick:()=>{b(!0),G(He.method.refresh,m(ra)).then(async({error:w})=>{w===void 0?(s.Info("refresh successful"),o()):(s.Error(w.msg),console.error(w.code,w.msg)),b(!1)})},children:[d?e.jsx(H,{size:"sm"}):e.jsx(Va,{className:"mr-2",size:16}),e.jsx("span",{children:"Sync All Resources"})]})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(F,{children:[e.jsx(M,{children:e.jsx(K,{icon:Ll,color:"#a855f7",title:"Global Settings",description:"Auto-fetch Interval & GeoIP"})}),e.jsx(L,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(Vs,{label:"Auto-fetch Interval",value:Number(a.refreshConfig?.refreshInterval)/60,min:0,max:720,step:1,unit:"Hours",onChange:w=>p(B=>({...B,refreshConfig:ke(B.refreshConfig,I=>m(dt,{...I,refreshInterval:BigInt(w*60)}))}),!1)})}),e.jsxs("div",{className:"lg:border-l lg:pl-6 border-[var(--card-inner-border)]",children:[e.jsx(N,{label:"Maxmind GeoIP Database URL",placeholder:"e.g. https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-Country.mmdb",value:a.maxminddbGeoip?.downloadUrl,onChange:w=>{p(B=>({...B,maxminddbGeoip:ke(B.maxminddbGeoip,I=>m(nr,{...I,downloadUrl:w}))}),!1)}}),a.maxminddbGeoip?.error&&e.jsxs("div",{className:"mt-2 p-2 bg-red-500/10 text-red-500 rounded text-xs",children:[e.jsx(zl,{className:"mr-2",size:14}),a.maxminddbGeoip.error]})]})]})}),e.jsx(Ie,{className:"flex justify-end",children:e.jsx(y,{disabled:x,onClick:v,children:x?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2",size:16}),"Save Configuration"]})})})]}),e.jsx(ca,{items:a.names.sort((w,B)=>w.localeCompare(B)),renderListItem:w=>e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"mr-4 text-gray-500 dark:text-gray-400",size:20}),e.jsx("span",{className:"truncate font-medium flex-grow",children:w}),e.jsx(Re,{className:"text-gray-500 dark:text-gray-400 opacity-25",size:16})]}),onClickItem:w=>r({show:!0,name:w,new:!1}),onAddNew:j,adding:x,header:e.jsx(K,{icon:Jl,color:"#3b82f6",title:"Defined Lists",description:`${a.names.length} Lists Available`})})]})]})}const Pm=({name:s,show:a,isNew:t,onHide:n,onDelete:o})=>{const l=h.useContext(J),[r,c]=h.useState(!1),{data:i,error:d,isLoading:b,isValidating:x,mutate:g}=ls(s===""?void 0:ve(He.method.get),Is(He.method.get,m(je,{value:s}),t?m(dr,{name:s,listType:yn.host,list:{case:"local",value:m(ya,{lists:[]})}}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});h.useEffect(()=>{g()},[s,t,g]);const p=()=>{c(!0),G(He.method.save,i).then(async({error:u})=>{u===void 0?(l.Info("save successful"),n(!0)):(l.Error(u.msg),console.error(u.code,u.msg)),g(),c(!1)})};return e.jsx(ne,{open:a,onOpenChange:u=>!u&&n(),children:e.jsxs(ae,{style:{maxWidth:"800px"},children:[e.jsx(oe,{closeButton:!0,children:e.jsx(te,{children:s})}),e.jsx(le,{children:d?e.jsx(ye,{statusCode:d.code,title:d.msg}):x||b||!i?e.jsx(Y,{}):e.jsx(Tm,{value:i,onChange:u=>{g(u,!1)}})}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx("div",{children:!t&&s!=="bootstrap"&&o&&e.jsxs(y,{variant:"outline-danger",onClick:()=>{n(!1),o(s)},children:[e.jsx($,{className:"mr-2",size:16}),"Delete List"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{onClick:()=>n(),children:"Cancel"}),e.jsx(y,{disabled:r,onClick:p,children:r?e.jsx(H,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"mr-2",size:16}),"Save"]})})]})]})]})})},Tm=({value:s,onChange:a})=>{const t=s.list.case==="remote",n=o=>{if(o===t)return;const l=s.list.case==="remote"?s.list.value.urls:s?.list?.value?.lists??[];a({...s,list:o?{case:"remote",value:m(ht,{urls:l})}:{case:"local",value:m(ya,{lists:l})}})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(Qe,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{children:e.jsx(ua,{label:"Content Type",type:mr,value:s.listType,onChange:o=>a({...s,listType:o})})}),e.jsxs("div",{children:[e.jsx(D,{className:"mb-2",children:"Source Mode"}),e.jsxs(be,{type:"single",value:t?"remote":"local",onValueChange:o=>o&&n(o==="remote"),className:"w-full flex-nowrap",children:[e.jsxs(X,{value:"local",className:"flex-grow whitespace-nowrap",children:[e.jsx(Le,{className:"mr-2"}),"Local"]}),e.jsxs(X,{value:"remote",className:"flex-grow whitespace-nowrap",children:[e.jsx(Mt,{className:"mr-2"}),"Remote"]})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-end px-1",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-bold mb-1",children:t?"Remote Resource URLs":"Local Rules"}),e.jsx("small",{className:"text-gray-500 dark:text-gray-400 opacity-75",children:t?"Files will be downloaded and updated automatically.":"Define rules manually (Domain, IP CIDR, etc)."})]}),e.jsxs(me,{variant:"secondary",pill:!0,children:[(s.list.case==="remote"?s.list.value.urls:s?.list?.value?.lists??[]).length," Entries"]})]}),e.jsx("div",{className:"bg-secondary/10 p-4 rounded-md border border-gray-500/10",children:e.jsx(de,{title:t?"URL":"Rule",dump:!0,data:s.list.case==="remote"?s.list.value.urls:s?.list?.value?.lists??[],onChange:o=>{a({...s,list:t?{case:"remote",value:m(ht,{urls:o})}:{case:"local",value:m(ya,{lists:o})}})}})})]}),s.errorMsgs&&s.errorMsgs.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(D,{className:"text-red-500 mb-2",children:"Error Messages"}),e.jsx("div",{className:"p-4 bg-red-500/10 text-red-500 rounded-md text-xs font-mono",children:s.errorMsgs.map((o,l)=>e.jsxs("div",{className:"mb-1",children:["• ",o]},l))})]})]})},_m=[{path:"/",component:vi},{path:"/docs/group",component:Qd},{path:"/docs/group/subscribe",component:em},{path:"/docs/group/publish",component:tm},{path:"/docs/group/activates",component:Kn},{path:"/docs/inbound",component:Hd},{path:"/docs/bypass",component:Em},{path:"/docs/bypass/list",component:Qm},{path:"/docs/bypass/tag",component:Um},{path:"/docs/bypass/resolver",component:zm},{path:"/docs/bypass/test",component:Vm},{path:"/docs/bypass/block",component:Am},{path:"/docs/connections/v2",component:hm},{path:"/docs/connections/history",component:dm},{path:"/docs/connections/failed",component:rm},{path:"/docs/config",component:ld},{path:"/docs/webui",component:nm},{path:"/docs/config/backup",component:gd},{path:"/docs/config/log",component:ud},{path:"/docs/config/pprof",component:jd},{path:"/docs/config/documents",component:fd},{path:"/docs/config/licenses",component:id},{path:"/docs/config/about",component:pd}],Om={enter:s=>({y:s>0?"100%":"-100%",opacity:0}),center:{zIndex:1,y:0,opacity:1},exit:s=>({zIndex:0,y:s<0?"100%":"-100%",opacity:0})};function $m(){const{direction:s,location:a}=Ql(),[t,n]=h.useState(void 0);return h.useEffect(()=>{window.Android?.setRefreshEnabled?.(!a.includes("/docs/config/log"))},[a]),h.useEffect(()=>{if(!window.matchMedia){n("light");return}const o=window.matchMedia("(prefers-color-scheme: dark)");n(o.matches?"dark":"light");const l=r=>n(r.matches?"dark":"light");return o.addEventListener("change",l),()=>o.removeEventListener("change",l)},[]),h.useEffect(()=>{t&&document.documentElement.setAttribute("data-bs-theme",t)},[t]),e.jsx(Tl,{children:t&&e.jsx($l,{children:e.jsx("div",{className:C("relative w-auto min-h-screen h-screen overflow-hidden box-border","transition-[margin-left,max-width,padding] duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]","pt-[80px] px-[20px] pb-[20px]","lg:pt-[20px] lg:pl-[292px] lg:pr-[20px] lg:pb-[20px]","lg:h-screen","h-[100dvh] min-h-[100dvh]"),children:e.jsx(Pe,{mode:"popLayout",initial:!1,custom:s,children:e.jsx(T.div,{custom:s,variants:Om,initial:"enter",animate:"center",exit:"exit",className:C("absolute inset-0 box-border h-full w-full","overflow-y-auto overflow-x-hidden","will-change-[transform,opacity]","pt-[80px] px-[20px] pb-[20px]","lg:pt-[20px] lg:pl-[292px]"),transition:{duration:.5,ease:"easeInOut"},children:e.jsx(Zt,{hook:()=>[a,()=>{}],children:e.jsx(qn,{children:_m.map(({path:o,component:l})=>e.jsx(eo,{path:o,component:l},o))})})},a)})})})})}function qm(){return e.jsx(Zt,{hook:Ml,children:e.jsx($m,{})})}const It=document.getElementById("root");It.innerHTML||so.createRoot(It).render(e.jsx(h.StrictMode,{children:e.jsx(qm,{})}));export{js as f};
