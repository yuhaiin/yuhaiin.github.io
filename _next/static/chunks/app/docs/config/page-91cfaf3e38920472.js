(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{132:function(e,t,a){Promise.resolve().then(a.bind(a,7956))},9621:function(e,t,a){"use strict";var s=a(7437),n=a(7877),l=a(1375),r=a.n(l);t.Z=function(e){return(0,s.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,s.jsx)("div",{className:"p2",children:(0,s.jsx)(n.Z,{})})]})}},2159:function(e,t,a){"use strict";a.d(t,{P:function(){return o},t:function(){return GlobalToastProvider}});var s=a(7437),n=a(2265),l=a(5632),r=a(5140);let o=(0,n.createContext)({Info:e=>{},Error:e=>{}}),GlobalToastProvider=e=>{let{children:t}=e,[a,i]=(0,n.useState)({value:{},index:0}),msg=(e,t)=>{i(a=>(a.value[a.index]={text:e,type:t},a.index++,{...a}))};return(0,s.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),msg(e,"success")},Error:e=>{console.error(e),msg(e,"danger")}},children:[(0,s.jsx)(r.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:1},children:Object.entries(a.value).map(e=>{let[t,n]=e;return(0,s.jsxs)(l.Z,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{let e=a.value;delete e[t],i({...a,value:e}),console.log("close: "+t)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(l.Z.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(l.Z.Body,{className:"text-center",children:n.text})]},"toast"+t)})}),t]})}},7308:function(e,t,a){"use strict";a.d(t,{Jg:function(){return SettingCheck},NZ:function(){return SettingInputTextarea},Vf:function(){return SettingInputText}});var s=a(7437),n=a(7017),l=a(7028),r=a(2762);let SettingInputText=e=>(0,s.jsxs)(n.Z.Group,{as:l.Z,className:"mb-3",children:[(0,s.jsx)(n.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsx)(n.Z.Control,{value:null!==e.value?e.value:"",plaintext:e.plaintext,onChange:t=>void 0!==e.onChange&&e.onChange(t.target.value)})})]}),SettingInputTextarea=e=>(0,s.jsxs)(n.Z.Group,{as:l.Z,className:"mb-3",children:[(0,s.jsx)(n.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsx)(n.Z.Control,{as:"textarea",rows:5,value:e.value,onChange:t=>e.onChange(t.target.value)})})]}),SettingCheck=e=>(0,s.jsxs)(n.Z.Group,{as:l.Z,className:"mb-3",children:[(0,s.jsx)(n.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(r.Z,{sm:10,className:"d-flex align-items-center",children:(0,s.jsx)(n.Z.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},7956:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return page}});var s=a(7437),n=a(2265),l=a(7017),r=a(2154),o=a(7028),i=a(2762),c=a(2806),u=a(7166),d=a(6831),p=a(1567),h=a(7308),x=a(116);let v=n.memo(e=>{var t,a,o,i,u,d,x,v,m,g,j,b;let[y,S]=(0,n.useState)({key:"",value:""}),updateDNS=t=>{t(e.data),e.onChange(e.data)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{label:"Server",value:e.data.server,onChange:e=>updateDNS(t=>t.server=e)}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{children:"FakeDNS"}),(0,s.jsx)(h.Jg,{label:"Enabled",checked:e.data.fakedns,onChange:()=>updateDNS(e=>e.fakedns=!e.fakedns)}),(0,s.jsx)(h.Vf,{label:"Fake IP Range",value:e.data.fakedns_ip_range,onChange:e=>updateDNS(t=>t.fakedns_ip_range=e)}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{children:"Local DNS"}),(0,s.jsx)(h.Vf,{label:"Host",value:null===(t=e.data.local)||void 0===t?void 0:t.host,onChange:e=>updateDNS(t=>{void 0!==t.local&&(t.local.host=e)})}),(0,s.jsx)(SettingDNSTypeSelect,{label:"Type",value:null===(a=e.data.local)||void 0===a?void 0:a.type,onChange:e=>updateDNS(t=>{void 0!==t.local&&(t.local.type=e)})}),(0,s.jsx)(h.Vf,{label:"Subnet",value:null===(o=e.data.local)||void 0===o?void 0:o.subnet,onChange:e=>updateDNS(t=>{void 0!==t.local&&(t.local.subnet=e)})}),(0,s.jsx)(h.Vf,{label:"SNI",value:null===(i=e.data.local)||void 0===i?void 0:i.tls_servername,onChange:e=>updateDNS(t=>{void 0!==t.local&&(t.local.tls_servername=e)})}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{children:"Remote DNS"}),(0,s.jsx)(h.Jg,{label:"Use IP",checked:e.data.resolve_remote_domain,onChange:()=>updateDNS(e=>e.resolve_remote_domain=!e.resolve_remote_domain)}),(0,s.jsx)(h.Vf,{label:"Host",value:null===(u=e.data.remote)||void 0===u?void 0:u.host,onChange:e=>updateDNS(t=>{void 0!==t.remote&&(t.remote.host=e)})}),(0,s.jsx)(SettingDNSTypeSelect,{label:"Type",value:null===(d=e.data.remote)||void 0===d?void 0:d.type,onChange:e=>updateDNS(t=>{void 0!==t.remote&&(t.remote.type=e)})}),(0,s.jsx)(h.Vf,{label:"Subnet",value:null===(x=e.data.remote)||void 0===x?void 0:x.subnet,onChange:e=>updateDNS(t=>{void 0!==t.remote&&(t.remote.subnet=e)})}),(0,s.jsx)(h.Vf,{label:"SNI",value:null===(v=e.data.remote)||void 0===v?void 0:v.tls_servername,onChange:e=>updateDNS(t=>{void 0!==t.remote&&(t.remote.tls_servername=e)})}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{children:"Bootstrap DNS"}),(0,s.jsx)(h.Vf,{label:"Host",value:null===(m=e.data.bootstrap)||void 0===m?void 0:m.host,onChange:e=>updateDNS(t=>{void 0!==t.bootstrap&&(t.bootstrap.host=e)})}),(0,s.jsx)(SettingDNSTypeSelect,{label:"Type",value:null===(g=e.data.bootstrap)||void 0===g?void 0:g.type,onChange:e=>updateDNS(t=>{void 0!==t.bootstrap&&(t.bootstrap.type=e)})}),(0,s.jsx)(h.Vf,{label:"Subnet",value:null===(j=e.data.bootstrap)||void 0===j?void 0:j.subnet,onChange:e=>updateDNS(t=>{void 0!==t.bootstrap&&(t.bootstrap.subnet=e)})}),(0,s.jsx)(h.Vf,{label:"SNI",value:null===(b=e.data.bootstrap)||void 0===b?void 0:b.tls_servername,onChange:e=>updateDNS(t=>{void 0!==t.bootstrap&&(t.bootstrap.tls_servername=e)})}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{children:"Hosts"}),Object.entries(e.data.hosts).map(e=>{let[t,a]=e;return(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{readOnly:!0,value:t}),(0,s.jsx)(p.Z.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(l.Z.Control,{value:a,onChange:e=>updateDNS(a=>a.hosts[t]=e.target.value)}),(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateDNS(e=>delete e.hosts[t]),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+t)}),(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:y.key,onChange:e=>S({...y,key:e.target.value})}),(0,s.jsx)(p.Z.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(l.Z.Control,{value:y.value,onChange:e=>S({...y,value:e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-success",onClick:()=>{""!==y.key&&void 0===e.data.hosts[y.key]&&updateDNS(e=>e.hosts[y.key]=y.value)},children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})]})}),m=x.yE.dns.type;function SettingDNSTypeSelect(e){return(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(i.Z,{sm:10,children:(0,s.jsxs)(l.Z.Select,{value:m[void 0===e.value||null===e.value?m.udp:e.value],onChange:t=>e.onChange(m[t.target.value]),children:[(0,s.jsx)("option",{value:m[m.udp],children:"UDP"}),(0,s.jsx)("option",{value:m[m.tcp],children:"TCP"}),(0,s.jsx)("option",{value:m[m.doh],children:"DOH"}),(0,s.jsx)("option",{value:m[m.dot],children:"DOT"}),(0,s.jsx)("option",{value:m[m.doq],children:"DOQ"}),(0,s.jsx)("option",{value:m[m.doh3],children:"DOH3"})]})})]})}let g=x.yE.bypass.mode,j=x.yE.bypass.resolve_strategy;g.bypass,g.bypass;let b=n.memo(e=>{let t={hostname:["www.example.com"],mode:g.proxy,tag:"",resolve_strategy:j.default},updateState=t=>{t(e.bypass),e.onChange(e.bypass)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(SettingModeSelect,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>updateState(t=>t.tcp=e)}),(0,s.jsx)(SettingModeSelect,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>updateState(t=>t.udp=e)}),(0,s.jsx)(h.Vf,{label:"Bypass File",value:e.bypass.bypass_file,onChange:e=>updateState(t=>t.bypass_file=e)}),(0,s.jsx)("hr",{}),"Custom Rules",e.bypass.custom_rule_v3.map((e,t)=>(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("hr",{}),(0,s.jsx)(BypassSingleComponents,{config:new x.yE.bypass.mode_config(e),onChange:e=>updateState(a=>a.custom_rule_v3[t]=e)}),(0,s.jsxs)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>e.custom_rule_v3.splice(t,1)),children:[(0,s.jsx)("i",{className:"bi bi-x-lg"}),"Remove Current Rule"]})]},"custom_rule_v3"+t)),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{className:"d-flex mb-2",children:(0,s.jsxs)(c.Z,{className:"flex-grow-1",variant:"outline-success",onClick:()=>updateState(e=>e.custom_rule_v3.push(t)),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})}),BypassSingleComponents=e=>{let updateState=t=>{t(e.config),e.onChange(e.config)},[t,a]=(0,n.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(SettingModeSelect,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>updateState(t=>t.mode=e)}),(0,s.jsx)(h.Vf,{label:"Tag",value:e.config.tag,onChange:e=>updateState(t=>t.tag=e)}),(0,s.jsx)(SettingResolveStrategySelect,{label:"Resolve Strategy",value:e.config.resolve_strategy,onChange:e=>updateState(t=>t.resolve_strategy=e)}),(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:"IP/DOMAIN"}),e.config.hostname.map((e,t)=>(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==t?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:e,onChange:e=>updateState(a=>a.hostname[t]=e.target.value)}),(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>e.hostname.splice(t,1)),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},t)),(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==e.config.hostname.length?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:t.value,onChange:e=>a({value:e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>e.hostname.push(t.value)),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})};function SettingModeSelect(e){return(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(i.Z,{sm:10,children:(0,s.jsxs)(l.Z.Select,{value:g[e.value],onChange:t=>e.onChange(g[t.target.value]),children:[e.network&&(0,s.jsx)("option",{value:g[g.bypass],children:"BYPASS"}),(0,s.jsx)("option",{value:g[g.direct],children:"DIRECT"}),(0,s.jsx)("option",{value:g[g.proxy],children:"PROXY"}),(0,s.jsx)("option",{value:g[g.block],children:"BLOCK"})]})})]})}function SettingResolveStrategySelect(e){return(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(i.Z,{sm:10,children:(0,s.jsxs)(l.Z.Select,{value:j[e.value],onChange:t=>e.onChange(j[t.target.value]),children:[(0,s.jsx)("option",{value:j[j.default],children:"default"}),(0,s.jsx)("option",{value:j[j.prefer_ipv4],children:"prefer_ipv4"}),(0,s.jsx)("option",{value:j[j.only_ipv4],children:"only_ipv4"}),(0,s.jsx)("option",{value:j[j.prefer_ipv6],children:"prefer_ipv6"}),(0,s.jsx)("option",{value:j[j.only_ipv6],children:"only_ipv6"})]})})]})}var y=a(9781);let S=n.memo(e=>{let updateState=t=>{t(e.http),e.onChange(e.http)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{label:"Host",value:e.http.host,onChange:e=>updateState(t=>t.host=e)}),(0,s.jsx)(h.Vf,{label:"Username",value:e.http.username,onChange:e=>updateState(t=>t.username=e)}),(0,s.jsx)(h.Vf,{label:"Password",value:e.http.password,onChange:e=>updateState(t=>t.password=e)})]})}),C=n.memo(e=>{let updateState=t=>{t(e.redir),e.onChange(e.redir)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.Vf,{label:"Host",value:e.redir.host,onChange:e=>updateState(t=>t.host=e)})})}),f=n.memo(e=>{let updateState=t=>{t(e.tproxy),e.onChange(e.tproxy)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Jg,{label:"DNS Hijacking",checked:e.tproxy.dns_hijacking,onChange:()=>updateState(e=>e.dns_hijacking=!e.dns_hijacking)}),(0,s.jsx)(h.Vf,{label:"Host",value:e.tproxy.host,onChange:e=>updateState(t=>t.host=e)})]})}),_=n.memo(e=>{let updateState=t=>{t(e.socks5),e.onChange(e.socks5)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{label:"Host",value:e.socks5.host,onChange:e=>updateState(t=>t.host=e)}),(0,s.jsx)(h.Vf,{label:"Username",value:e.socks5.username,onChange:e=>updateState(t=>t.username=e)}),(0,s.jsx)(h.Vf,{label:"Password",value:e.socks5.password,onChange:e=>updateState(t=>t.password=e)})]})}),Z=n.memo(e=>{let updateState=t=>{t(e.mixed),e.onChange(e.mixed)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{label:"Host",value:e.mixed.host,onChange:e=>updateState(t=>t.host=e)}),(0,s.jsx)(h.Vf,{label:"Username",value:e.mixed.username,onChange:e=>updateState(t=>t.username=e)}),(0,s.jsx)(h.Vf,{label:"Password",value:e.mixed.password,onChange:e=>updateState(t=>t.password=e)})]})}),N=n.memo(e=>{let updateState=t=>{t(e.tun),e.onChange(e.tun)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Jg,{label:"DNS Hijacking",checked:e.tun.dns_hijacking,onChange:()=>updateState(e=>e.dns_hijacking=!e.dns_hijacking)}),(0,s.jsx)(h.Jg,{checked:e.tun.skip_multicast,onChange:()=>updateState(e=>e.skip_multicast=!e.skip_multicast),label:"Skip Multicast"}),(0,s.jsx)(h.Vf,{label:"Name",value:e.tun.name,onChange:e=>updateState(t=>t.name=e)}),(0,s.jsx)(h.Vf,{label:"Mtu",value:e.tun.mtu,onChange:e=>updateState(t=>t.mtu=isNaN(Number(e))?t.mtu:Number(e))}),(0,s.jsx)(h.Vf,{label:"Gateway",value:e.tun.gateway,onChange:e=>updateState(t=>t.gateway=e)}),(0,s.jsx)(h.Vf,{label:"Portal",value:e.tun.portal,onChange:e=>updateState(t=>t.portal=e)}),(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,children:"Driver"}),(0,s.jsx)(i.Z,{sm:10,children:(0,s.jsxs)(l.Z.Select,{value:e.tun.driver,onChange:e=>updateState(t=>t.driver=x.yE.listener.tun.endpoint_driver[e.target.value]),children:[(0,s.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.fdbased],children:"Fdbased"}),(0,s.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.channel],children:"Channel"}),(0,s.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.system_gvisor],children:"System"})]})})]})]})}),IsTLSEmpty=e=>null==e||void 0===e.certificates&&void 0===e.next_protos&&void 0===e.server_name_certificate,k=n.memo(e=>{let updateState=t=>{t(e.cert),e.onChange(e.cert)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.NZ,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:e=>updateState(t=>{t.cert=new TextEncoder().encode(e)})}),(0,s.jsx)(h.NZ,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:e=>updateState(t=>{t.key=new TextEncoder().encode(e)})}),(0,s.jsx)(h.Vf,{label:"Cert File",value:e.cert.cert_file_path,onChange:e=>updateState(t=>{t.cert_file_path=e})}),(0,s.jsx)(h.Vf,{label:"Key File",value:e.cert.key_file_path,onChange:e=>updateState(t=>{t.key_file_path=e})})]})}),w=n.memo(e=>{var t;let[a,u]=(0,n.useState)("www.example.com"),[d,h]=(0,n.useState)({value:""}),updateState=t=>{t(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Next Protos"}),e.tls&&e.tls.next_protos.map((e,t)=>(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==t?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:e,onChange:e=>updateState(a=>{null!==a&&void 0!==a.next_protos&&(a.next_protos[t]=e.target.value)})}),(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{null!==e&&void 0!==e.next_protos&&(null==e||e.next_protos.splice(t,1))}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},t)),(0,s.jsx)(i.Z,{sm:{span:10,offset:e.tls&&(null===(t=e.tls.next_protos)||void 0===t?void 0:t.length)!==0?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:d.value,onChange:e=>h({value:e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{e.next_protos.push(d.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),e.tls&&e.tls.certificates.map((e,t)=>(0,s.jsx)(r.Z,{className:"mb-2",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsx)(r.Z.Title,{className:"d-flex justify-content-end align-items-center",children:(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{(null==e?void 0:e.certificates)!==void 0&&e.certificates.splice(t,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})}),(0,s.jsx)(k,{cert:new x.yE.listener.certificate(e),onChange:e=>updateState(a=>{(null==a?void 0:a.certificates)!==void 0&&(a.certificates[t]=e)})})]})},"tls_certificates"+t)),(0,s.jsx)(p.Z,{className:"d-flex justify-content-end mb-2",children:(0,s.jsxs)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{e.certificates.push({cert:new Uint8Array(0),key:new Uint8Array(0),cert_file_path:"",key_file_path:""})}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.server_name_certificate&&Object.entries(e.tls.server_name_certificate).map(e=>{let[t,a]=e;return(0,s.jsx)(r.Z,{className:"mb-2",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsxs)(r.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[t,(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{(null==e?void 0:e.server_name_certificate)!==void 0&&(null==e||delete e.server_name_certificate[t])}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,s.jsx)(k,{cert:new x.yE.listener.certificate(a),onChange:e=>updateState(a=>{(null==a?void 0:a.server_name_certificate)!==void 0&&(a.server_name_certificate[t]=e)})})]})},"server_name_certificate"+t)}),(0,s.jsxs)(p.Z,{className:"d-flex justify-content-end",children:[(0,s.jsx)(l.Z.Control,{value:a,onChange:e=>u(e.target.value)}),(0,s.jsxs)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{""!==a&&(e.server_name_certificate[a]={})}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),E=n.memo(e=>{var t;let updateState=t=>{IsTLSEmpty(e.websocket.tls)&&(e.websocket.tls=void 0),t(e.websocket),e.onChange(e.websocket)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"Websocket"}),e.websocket.tls&&(0,s.jsx)(w,{tls:new x.yE.listener.tls_config(null!==(t=e.websocket.tls)&&void 0!==t?t:void 0),onChange:e=>updateState(t=>t.tls=e)})]})}),T=n.memo(e=>{let updateState=t=>{IsTLSEmpty(e.quic.tls)&&(e.quic.tls=void 0),t(e.quic),e.onChange(e.quic)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"QUIC"}),e.quic.tls&&(0,s.jsx)(w,{tls:new x.yE.listener.tls_config(null!==e.quic.tls?e.quic.tls:void 0),onChange:e=>updateState(t=>t.tls=e)})]})}),D=n.memo(e=>{let updateState=t=>{IsTLSEmpty(e.grpc.tls)&&(e.grpc.tls=void 0),t(e.grpc),e.onChange(e.grpc)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"GRPC"}),e.grpc.tls&&(0,s.jsx)(w,{tls:new x.yE.listener.tls_config(e.grpc.tls),onChange:e=>updateState(t=>t.tls=e)})]})}),P=n.memo(e=>{let updateState=t=>{IsTLSEmpty(e.tls.tls)&&(e.tls.tls=void 0),t(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,s.jsx)(w,{tls:new x.yE.listener.tls_config(e.tls.tls),onChange:e=>updateState(t=>t.tls=e)})]})}),V=n.memo(e=>{let updateState=t=>{IsTLSEmpty(e.http2.tls)&&(e.http2.tls=void 0),t(e.http2),e.onChange(e.http2)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"HTTP2"}),e.http2.tls&&(0,s.jsx)(w,{tls:new x.yE.listener.tls_config(e.http2.tls),onChange:e=>updateState(t=>t.tls=e)})]})}),F=n.memo(e=>{let updateState=t=>{t(e.reality),e.onChange(e.reality)},[t,a]=(0,n.useState)({value:""}),[r,u]=(0,n.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Vf,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,s.jsx)(h.Vf,{label:"Dest",value:e.reality.dest,onChange:e=>updateState(t=>t.dest=e)}),(0,s.jsx)(h.Vf,{label:"Private Key",value:e.reality.private_key,onChange:e=>updateState(t=>t.private_key=e)}),(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.short_id.map((e,t)=>(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==t?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:e,onChange:e=>updateState(a=>{a.short_id[t]=e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{e.short_id.splice(t,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},t)),(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==e.reality.short_id.length?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:t.value,onChange:e=>a({value:e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{e.short_id.push(t.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.server_name.map((e,t)=>(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==t?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:e,onChange:e=>updateState(a=>{a.server_name[t]=e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{e.server_name.splice(t,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},t)),(0,s.jsx)(i.Z,{sm:{span:10,offset:0!==e.reality.server_name.length?2:0},children:(0,s.jsxs)(p.Z,{className:"mb-2",children:[(0,s.jsx)(l.Z.Control,{value:r.value,onChange:e=>u({value:e.target.value})}),(0,s.jsx)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{e.server_name.push(r.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})}),I=n.memo(e=>{let updateState=t=>{t(e.yuubinsya),e.onChange(e.yuubinsya)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Jg,{label:"Force Disable Encrypt",checked:e.yuubinsya.force_disable_encrypt,onChange:()=>updateState(e=>e.force_disable_encrypt=!e.force_disable_encrypt)}),(0,s.jsx)(h.Vf,{label:"Host",value:e.yuubinsya.host,onChange:e=>updateState(t=>t.host=e)}),(0,s.jsx)(h.Vf,{label:"Password",value:e.yuubinsya.password,onChange:e=>updateState(t=>t.password=e)}),(()=>{switch(e.yuubinsya.protocol){case"websocket":return(0,s.jsx)(E,{websocket:new x.yE.listener.websocket(e.yuubinsya.websocket),onChange:e=>updateState(t=>t.websocket=e)});case"quic":return(0,s.jsx)(T,{quic:new x.yE.listener.quic(e.yuubinsya.quic),onChange:e=>updateState(t=>t.quic=e)});case"grpc":return(0,s.jsx)(D,{grpc:new x.yE.listener.grpc(e.yuubinsya.grpc),onChange:e=>updateState(t=>t.grpc=e)});case"http2":return(0,s.jsx)(V,{http2:new x.yE.listener.http2(e.yuubinsya.http2),onChange:e=>updateState(t=>t.http2=e)});case"reality":return(0,s.jsx)(F,{reality:new x.yE.listener.reality(e.yuubinsya.reality),onChange:e=>updateState(t=>t.reality=e)});case"tls":return(0,s.jsx)(P,{tls:new x.yE.listener.tls(e.yuubinsya.tls),onChange:e=>updateState(t=>t.tls=e)})}})()]})}),L=n.memo(e=>{let updateState=t=>{t(e.protocol),e.onChange(e.protocol)};switch(e.protocol.protocol){case"http":return(0,s.jsx)(S,{http:new x.yE.listener.http(e.protocol.http),onChange:e=>updateState(t=>t.http=e)});case"socks5":return(0,s.jsx)(_,{socks5:new x.yE.listener.socks5(e.protocol.socks5),onChange:e=>updateState(t=>t.socks5=e)});case"mix":return(0,s.jsx)(Z,{mixed:new x.yE.listener.mixed(e.protocol.mix),onChange:e=>updateState(t=>t.mix=e)});case"redir":return(0,s.jsx)(C,{redir:new x.yE.listener.redir(e.protocol.redir),onChange:e=>updateState(t=>t.redir=e)});case"tun":return(0,s.jsx)(N,{tun:new x.yE.listener.tun(e.protocol.tun),onChange:e=>updateState(t=>t.tun=e)});case"yuubinsya":return(0,s.jsx)(I,{yuubinsya:new x.yE.listener.yuubinsya(e.protocol.yuubinsya),onChange:e=>updateState(t=>t.yuubinsya=e)});case"tproxy":return(0,s.jsx)(f,{tproxy:new x.yE.listener.tproxy(e.protocol.tproxy),onChange:e=>updateState(t=>t.tproxy=e)})}return(0,s.jsx)(s.Fragment,{})}),H=n.memo(e=>{let[t,a]=(0,n.useState)({value:"http",name:""}),updateState=t=>{t(e.server),e.onChange(e.server)};return(0,s.jsxs)(s.Fragment,{children:[Object.entries(e.server).sort((e,t)=>e[0]<=t[0]?-1:1).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)(r.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[t,(0,s.jsx)(c.Z,{variant:"outline-danger",onClick:()=>updateState(e=>{delete e[t]}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,s.jsx)(h.Jg,{label:"Enabled",checked:a.enabled,onChange:()=>updateState(e=>e[t].enabled=!e[t].enabled)}),(0,s.jsx)(L,{protocol:new x.yE.listener.protocol(a),onChange:e=>updateState(a=>a[t]=e)}),(0,s.jsx)("hr",{})]},t)}),(0,s.jsx)(r.Z,{className:"mb-2",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsx)(r.Z.Title,{children:"New Inbound"}),(0,s.jsx)(y.Z,{label:"Protocol",className:"mb-2",children:(0,s.jsxs)(l.Z.Select,{value:t.value,onChange:e=>a({...t,value:e.target.value}),children:[(0,s.jsx)("option",{value:"mix",children:"Mixed"}),(0,s.jsx)("option",{value:"http",children:"HTTP"}),(0,s.jsx)("option",{value:"socks5",children:"SOCKS5"}),(0,s.jsx)("option",{value:"tun",children:"TUN"}),(0,s.jsx)("option",{value:"redir",children:"Redir"}),(0,s.jsx)("option",{value:"tproxy",children:"TProxy"}),(0,s.jsx)("option",{value:"yuubinsya",children:"Yuubinsya"}),(0,s.jsx)("option",{value:"yuubinsya-websocket",children:"Yuubinsya Websocket"}),(0,s.jsx)("option",{value:"yuubinsya-tls",children:"Yuubinsya TLS"}),(0,s.jsx)("option",{value:"yuubinsya-grpc",children:"Yuubinsya GRPC"}),(0,s.jsx)("option",{value:"yuubinsya-quic",children:"Yuubinsya QUIC"}),(0,s.jsx)("option",{value:"yuubinsya-http2",children:"Yuubinsya HTTP2"}),(0,s.jsx)("option",{value:"yuubinsya-reality",children:"Yuubinsya Reality"})]})}),(0,s.jsxs)(p.Z,{className:"d-flex justify-content-end",children:[(0,s.jsx)(l.Z.Control,{value:t.name,onChange:e=>a({...t,name:e.target.value})}),(0,s.jsxs)(c.Z,{variant:"outline-success",onClick:()=>updateState(e=>{console.log(t),defaultProtocol(e,t.name,t.value)}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New Inbound"]})]})]})})]})}),defaultProtocol=(e,t,a)=>{if(""===t||void 0!==e[t])return;let s={name:t,enabled:!1};switch(a){case"http":s.http={host:":8188",username:"",password:""};break;case"socks5":s.socks5={host:":1080",password:"",username:""};break;case"mix":s.mix={host:":1080",password:"",username:""};break;case"tun":s.tun={name:"tun://tun0",mtu:1500,gateway:"172.16.0.1",dns_hijacking:!0,skip_multicast:!1,driver:x.yE.listener.tun.endpoint_driver.system_gvisor,portal:"172.16.0.2"};break;case"redir":s.redir={host:":8088"};break;case"yuubinsya":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",normal:{}};break;case"yuubinsya-websocket":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",websocket:{tls:void 0}};break;case"yuubinsya-tls":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",tls:{tls:void 0}};break;case"yuubinsya-grpc":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",grpc:{tls:void 0}};break;case"yuubinsya-quic":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",quic:{tls:void 0}};break;case"yuubinsya-http2":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",http2:{tls:void 0}};break;case"yuubinsya-reality":s.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",reality:{short_id:["123456"],server_name:["www.example.com"],private_key:"",dest:"dl.google.com:443",debug:!1}};break;case"tproxy":s.tproxy={host:"0.0.0.0:8083"};break;default:return}e[t]=new x.yE.listener.protocol(s)};var R=a(9621),O=a(2159),G=a(713),q=a(9226),B=a(1375),J=a.n(B);let U=x.yE.log.log_level;var page=function(){let e=(0,n.useContext)(O.P),{data:t,error:a,isLoading:l,mutate:o}=(0,G.ZP)("/config",(0,q.PJ)(x.yE.config.setting),{revalidateOnFocus:!1});if(void 0!==a)return(0,s.jsx)(J(),{statusCode:a.code,title:a.msg});if(l||void 0===t)return(0,s.jsx)(R.Z,{});let updateState=e=>{o(t=>{let a=x.yE.config.setting.create(t);return e(a),a},!1)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.Z,{className:"mb-3",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsxs)(u.Z,{defaultActiveKey:"home",className:"mb-3",children:[(0,s.jsxs)(d.Z,{eventKey:"home",title:"Home",children:[(0,s.jsx)(h.Jg,{label:"IPv6",checked:t.ipv6,onChange:()=>o({...t,ipv6:!t.ipv6},!1)}),(0,s.jsx)(h.Vf,{label:"Network Interface",value:t.net_interface,onChange:e=>updateState(t=>t.net_interface=e)}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{className:"mb-2",children:"System Proxy"}),(0,s.jsx)(h.Jg,{label:"SOCKS5",checked:t.system_proxy.socks5,onChange:()=>updateState(e=>{var t;return e.system_proxy.socks5=!(null===(t=e.system_proxy)||void 0===t?void 0:t.socks5)})}),(0,s.jsx)(h.Jg,{label:"HTTP",checked:t.system_proxy.http,onChange:()=>updateState(e=>e.system_proxy.http=!e.system_proxy.http)}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{className:"mb-2",children:"Logcat"}),(0,s.jsx)(h.Jg,{label:"Save",checked:t.logcat.save,onChange:()=>updateState(e=>e.logcat.save=!e.logcat.save)}),(0,s.jsx)(SettingLogcatLevelSelect,{label:"Level",value:t.logcat.level,onChange:e=>updateState(t=>{t.logcat.level=e})})]}),(0,s.jsx)(d.Z,{eventKey:"bypass",title:"Bypass",children:(0,s.jsx)(b,{bypass:new x.yE.bypass.bypass_config(t.bypass),onChange:e=>updateState(t=>t.bypass=e)})}),(0,s.jsx)(d.Z,{eventKey:"dns",title:"DNS",children:(0,s.jsx)(v,{data:new x.yE.dns.dns_config(t.dns),onChange:e=>updateState(t=>t.dns=e)})}),(0,s.jsx)(d.Z,{eventKey:"inbound",title:"Inbound",children:(0,s.jsx)(H,{server:t.server.servers,onChange:e=>updateState(t=>t.server.servers=e)})})]}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("hr",{}),(0,s.jsx)(c.Z,{onClick:()=>{(0,q.Uo)("/config",{body:x.yE.config.setting.encode(t).finish()}).then(async t=>{let{error:a}=t;void 0!==a?e.Error("save config failed, ".concat(a.code,"| ").concat(await a.msg)):(e.Info("Save Config Successfully"),o())})},children:"Save"})]})]})})})};function SettingLogcatLevelSelect(e){return(0,s.jsxs)(l.Z.Group,{as:o.Z,className:"mb-3",children:[(0,s.jsx)(l.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(i.Z,{sm:10,children:(0,s.jsxs)(l.Z.Select,{value:U[e.value],onChange:t=>e.onChange(U[t.target.value]),children:[(0,s.jsx)("option",{value:U[U.debug],children:"DEBUG"}),(0,s.jsx)("option",{value:U[U.info],children:"INFO"}),(0,s.jsx)("option",{value:U[U.warning],children:"WARN"}),(0,s.jsx)("option",{value:U[U.error],children:"ERROR"})]})})]})}}},function(e){e.O(0,[708,507,331,790,711,944,371,258,971,864,744],function(){return e(e.s=132)}),_N_E=e.O()}]);