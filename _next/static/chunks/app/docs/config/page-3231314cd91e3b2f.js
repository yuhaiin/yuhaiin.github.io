(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1347],{2280:(e,n,a)=>{Promise.resolve().then(a.bind(a,7151))},716:(e,n,a)=>{"use strict";a.d(n,{Z:()=>o});var s=a(7437),l=a(2514),t=a(6264),r=a.n(t);let o=function(e){return(0,s.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,s.jsx)("div",{className:"p2",children:(0,s.jsx)(l.Z,{})})]})}},1159:(e,n,a)=>{"use strict";a.d(n,{P:()=>o,t:()=>i});var s=a(7437),l=a(2265),t=a(8620),r=a(1529);let o=(0,l.createContext)({Info:e=>{},Error:e=>{}}),i=e=>{let{children:n}=e,[a,i]=(0,l.useState)({value:{},index:0}),c=(e,n)=>i(a=>({value:{...a.value,[a.index]:{text:e,type:n}},index:a.index+1}));return(0,s.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,s.jsx)(t.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(a.value).map(e=>{let[n,l]=e;return(0,s.jsxs)(r.Z,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{let e=a.value;delete e[n],i({...a,value:e}),console.log("close: "+n)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(r.Z.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(r.Z.Body,{className:"text-center",children:l.text})]},"toast"+n)})}),n]})}},7151:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>ei});var s=a(7437),l=a(2265),t=a(550),r=a(7185),o=a(909),i=a(7420),c=a(358),d=a(6712),u=a(8977),h=a(844),v=a(2808),x=a(2312),p=a(8727),j=a(6601),m=a(5442);let b=l.memo(e=>{var n,a,t,r,o,c,d,u,h,m,b,C,y,f,k,Z,N,w,S,F,U;let[P,V]=(0,l.useState)({key:"",value:""}),I=n=>{n(e.data),e.onChange(e.data)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Server",value:e.data.server,onChange:e=>I(n=>n.server=e)}),(0,s.jsx)(p.W2,{title:"FakeDNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Jg,{label:"Enabled",checked:e.data.fakedns,onChange:()=>I(e=>e.fakedns=!e.fakedns)}),(0,s.jsx)(p.Vf,{label:"IPv4 Range",value:e.data.fakednsIpRange,onChange:e=>I(n=>n.fakednsIpRange=e)}),(0,s.jsx)(p.Vf,{label:"IPv6 Range",value:e.data.fakednsIpv6Range,onChange:e=>I(n=>n.fakednsIpv6Range=e)}),(0,s.jsx)(p.yh,{title:"Whitelist",data:e.data.fakednsWhitelist,onChange:e=>I(n=>{e&&(n.fakednsWhitelist=e)})})]})}),(0,s.jsx)(p.W2,{title:"Local DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Host",value:null!==(y=null===(n=e.data.local)||void 0===n?void 0:n.host)&&void 0!==y?y:"",onChange:e=>I(n=>{void 0!==n.local&&(n.local.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(a=e.data.local)||void 0===a?void 0:a.type,onChange:e=>I(n=>{void 0!==n.local&&(n.local.type=e)})}),(0,s.jsx)(p.Vf,{label:"Subnet",value:null!==(f=null===(t=e.data.local)||void 0===t?void 0:t.subnet)&&void 0!==f?f:"",onChange:e=>I(n=>{void 0!==n.local&&(n.local.subnet=e)})}),(0,s.jsx)(p.Vf,{label:"SNI",value:null!==(k=null===(r=e.data.local)||void 0===r?void 0:r.tlsServername)&&void 0!==k?k:"",onChange:e=>I(n=>{void 0!==n.local&&(n.local.tlsServername=e)})})]})}),(0,s.jsx)(p.W2,{title:"Remote DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Host",value:null!==(Z=null===(o=e.data.remote)||void 0===o?void 0:o.host)&&void 0!==Z?Z:"",onChange:e=>I(n=>{void 0!==n.remote&&(n.remote.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(c=e.data.remote)||void 0===c?void 0:c.type,onChange:e=>I(n=>{void 0!==n.remote&&(n.remote.type=e)})}),(0,s.jsx)(p.Vf,{label:"Subnet",value:null!==(N=null===(d=e.data.remote)||void 0===d?void 0:d.subnet)&&void 0!==N?N:"",onChange:e=>I(n=>{void 0!==n.remote&&(n.remote.subnet=e)})}),(0,s.jsx)(p.Vf,{label:"SNI",value:null!==(w=null===(u=e.data.remote)||void 0===u?void 0:u.tlsServername)&&void 0!==w?w:"",onChange:e=>I(n=>{void 0!==n.remote&&(n.remote.tlsServername=e)})})]})}),(0,s.jsx)(p.W2,{title:"Bootstrap DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Host",value:null!==(S=null===(h=e.data.bootstrap)||void 0===h?void 0:h.host)&&void 0!==S?S:"",onChange:e=>I(n=>{void 0!==n.bootstrap&&(n.bootstrap.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(m=e.data.bootstrap)||void 0===m?void 0:m.type,onChange:e=>I(n=>{void 0!==n.bootstrap&&(n.bootstrap.type=e)})}),(0,s.jsx)(p.Vf,{label:"Subnet",value:null!==(F=null===(b=e.data.bootstrap)||void 0===b?void 0:b.subnet)&&void 0!==F?F:"",onChange:e=>I(n=>{void 0!==n.bootstrap&&(n.bootstrap.subnet=e)})}),(0,s.jsx)(p.Vf,{label:"SNI",value:null!==(U=null===(C=e.data.bootstrap)||void 0===C?void 0:C.tlsServername)&&void 0!==U?U:"",onChange:e=>I(n=>{void 0!==n.bootstrap&&(n.bootstrap.tlsServername=e)})})]})}),(0,s.jsx)(p.W2,{title:"Hosts",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[Object.entries(e.data.hosts).sort((e,n)=>{let[a]=e,[s]=n;return a>s?-1:1}).map(e=>{let[n,a]=e;return(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{readOnly:!0,value:n}),(0,s.jsx)(x.Z.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(i.Z.Control,{value:a,onChange:e=>I(a=>a.hosts[n]=e.target.value)}),(0,s.jsx)(v.Z,{variant:"outline-danger",onClick:()=>I(e=>delete e.hosts[n]),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+n)}),(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{value:P.key,onChange:e=>V({...P,key:e.target.value})}),(0,s.jsx)(x.Z.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(i.Z.Control,{value:P.value,onChange:e=>V({...P,value:e.target.value})}),(0,s.jsx)(v.Z,{variant:"outline-success",onClick:()=>{""!==P.key&&void 0===e.data.hosts[P.key]&&I(e=>e.hosts[P.key]=P.value)},children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})]})})]})});function g(e){var n;return(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.Z,{sm:10,children:(0,s.jsx)(i.Z.Select,{value:m.dt[null!==(n=e.value)&&void 0!==n?n:m.dt.udp],onChange:n=>e.onChange(m.dt[n.target.value]),children:m.PW.values.filter(e=>0!==e.number).map(e=>(0,s.jsx)("option",{value:m.dt[e.number],children:e.name},e.number))})})]})}var C=a(716),y=a(1159),f=a(1617),k=a(879),Z=a(6264),N=a.n(Z),w=a(2374),S=a(725),F=a(1009),U=a(4050),P=a(8537),V=a(7462),I=a(8136),T=a(4694),H=a(9912);let L=l.memo(e=>{let n=n=>{n(e.http),e.onChange(e.http)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Username",value:e.http.username,onChange:e=>n(n=>n.username=e)}),(0,s.jsx)(p.Vf,{label:"Password",value:e.http.password,onChange:e=>n(n=>n.password=e)})]})}),D=l.memo(e=>{let n=n=>{n(e.reverse_http),e.onChange(e.reverse_http)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Vf,{label:"Url",value:e.reverse_http.url,onChange:e=>n(n=>n.url=e)})})}),E=l.memo(e=>{let n=n=>{n(e.reverse_tcp),e.onChange(e.reverse_tcp)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Vf,{label:"Host",value:e.reverse_tcp.host,onChange:e=>n(n=>n.host=e)})})}),_=l.memo(e=>{let n=n=>{n(e.redir),e.onChange(e.redir)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(p.Vf,{label:"Host",value:e.redir.host,onChange:e=>n(n=>n.host=e)})})}),O=l.memo(e=>{let n=n=>{n(e.tproxy),e.onChange(e.tproxy)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Jg,{label:"DNS Hijacking",checked:e.tproxy.dnsHijacking,onChange:()=>n(e=>e.dnsHijacking=!e.dnsHijacking)}),(0,s.jsx)(j.Jg,{label:"Force Fake IP",checked:e.tproxy.forceFakeip,onChange:()=>n(e=>e.forceFakeip=!e.forceFakeip)}),(0,s.jsx)(p.Vf,{label:"Host",value:e.tproxy.host,onChange:e=>n(n=>n.host=e)})]})}),M=l.memo(e=>{let n=n=>{n(e.socks5),e.onChange(e.socks5)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Username",value:e.socks5.username,onChange:e=>n(n=>n.username=e)}),(0,s.jsx)(p.Vf,{label:"Password",value:e.socks5.password,onChange:e=>n(n=>n.password=e)})]})}),W=l.memo(e=>{let n=n=>{n(e.mixed),e.onChange(e.mixed)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Username",value:e.mixed.username,onChange:e=>n(n=>n.username=e)}),(0,s.jsx)(p.Vf,{label:"Password",value:e.mixed.password,onChange:e=>n(n=>n.password=e)})]})}),q=l.memo(e=>{var n,a;let t=n=>{n(e.tun),e.onChange(e.tun)},[r,o]=(0,l.useState)((0,H.v_)(e.tun.postUp)),[u,h]=(0,l.useState)((0,H.v_)(e.tun.postDown));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Jg,{checked:e.tun.skipMulticast,onChange:()=>t(e=>e.skipMulticast=!e.skipMulticast),label:"Skip Multicast"}),(0,s.jsx)(p.Vf,{label:"Name",value:e.tun.name,onChange:e=>t(n=>n.name=e)}),(0,s.jsx)(p.Vf,{label:"MTU",value:e.tun.mtu,onChange:e=>t(n=>n.mtu=isNaN(Number(e))?n.mtu:Number(e))}),(0,s.jsx)(p.Vf,{label:"IPv4",value:e.tun.portal,onChange:e=>t(n=>n.portal=e)}),(0,s.jsx)(p.Vf,{label:"IPv6",value:e.tun.portalV6,onChange:e=>t(n=>n.portalV6=e)}),(0,s.jsx)(p.Vf,{label:"Post Up",value:r,onChange:e=>{o(e);try{let n=(0,H.Vl)(e);t(e=>e.postUp=n)}catch(e){console.log(e)}}}),(0,s.jsx)(p.Vf,{label:"Post Down",value:u,onChange:e=>{h(e);try{let n=(0,H.Vl)(e);t(e=>e.postDown=n)}catch(e){console.log(e)}}}),(0,s.jsx)(function(e){return(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.Z,{sm:10,children:(0,s.jsxs)(i.Z.Select,{value:V.cn[void 0===e.value||null===e.value?V.cn.fdbased:e.value],onChange:n=>e.onChange(V.cn[n.target.value]),children:[(0,s.jsx)("option",{value:V.cn[V.cn.fdbased],children:"Fdbased"}),(0,s.jsx)("option",{value:V.cn[V.cn.channel],children:"Channel"}),(0,s.jsx)("option",{value:V.cn[V.cn.system_gvisor],children:"System"})]})})]})},{label:"Stack",value:e.tun.driver,onChange:e=>t(n=>n.driver=e)}),(0,s.jsx)(p.yh,{title:"Routes",data:null!==(a=null===(n=e.tun.route)||void 0===n?void 0:n.routes)&&void 0!==a?a:[],onChange:e=>t(n=>{n.route||(n.route=(0,P.U)(V.L8,{})),e||(e=[]),n.route&&(n.route.routes=e)})})]})}),J=e=>null==e||void 0===e.certificates&&void 0===e.nextProtos&&void 0===e.serverNameCertificate,K=l.memo(e=>{let n=n=>{n(e.cert),e.onChange(e.cert)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.NZ,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:e=>n(n=>{n.cert=new TextEncoder().encode(e)})}),(0,s.jsx)(p.NZ,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:e=>n(n=>{n.key=new TextEncoder().encode(e)})}),(0,s.jsx)(p.Vf,{label:"Cert File",value:e.cert.certFilePath,onChange:e=>n(n=>{n.certFilePath=e})}),(0,s.jsx)(p.Vf,{label:"Key File",value:e.cert.keyFilePath,onChange:e=>n(n=>{n.keyFilePath=e})})]})}),R=l.memo(e=>{var n,a;let[t,o]=(0,l.useState)("www.example.com"),c=n=>{n(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.yh,{title:"Next Protos",data:null!==(a=null===(n=e.tls)||void 0===n?void 0:n.nextProtos)&&void 0!==a?a:[],onChange:e=>c(n=>{e&&(n.nextProtos=e)})}),e.tls&&e.tls.certificates.map((e,n)=>(0,s.jsx)(r.Z,{className:"mb-2",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsx)(r.Z.Title,{className:"d-flex justify-content-end align-items-center",children:(0,s.jsx)(v.Z,{variant:"outline-danger",onClick:()=>c(e=>{(null==e?void 0:e.certificates)!==void 0&&e.certificates.splice(n,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})}),(0,s.jsx)(K,{cert:(0,P.U)(V.OC,e),onChange:e=>c(a=>{(null==a?void 0:a.certificates)!==void 0&&(a.certificates[n]=e)})})]})},"tls_certificates"+n)),(0,s.jsx)(x.Z,{className:"d-flex justify-content-end mb-2",children:(0,s.jsxs)(v.Z,{variant:"outline-success",onClick:()=>c(e=>{e.certificates.push((0,P.U)(V.OC,{cert:new Uint8Array(0),key:new Uint8Array(0),certFilePath:"",keyFilePath:""}))}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.serverNameCertificate&&Object.entries(e.tls.serverNameCertificate).map(e=>{let[n,a]=e;return(0,s.jsx)(r.Z,{className:"mb-2",children:(0,s.jsxs)(r.Z.Body,{children:[(0,s.jsxs)(r.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[n,(0,s.jsx)(v.Z,{variant:"outline-danger",onClick:()=>c(e=>{null==e||delete e.serverNameCertificate[n]}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,s.jsx)(K,{cert:(0,P.U)(V.OC,a),onChange:e=>c(a=>{a.serverNameCertificate[n]=e})})]})},"server_name_certificate"+n)}),(0,s.jsxs)(x.Z,{className:"d-flex justify-content-end",children:[(0,s.jsx)(i.Z.Control,{value:t,onChange:e=>o(e.target.value)}),(0,s.jsxs)(v.Z,{variant:"outline-success",onClick:()=>c(e=>{""!==t&&(e.serverNameCertificate[t]=(0,P.U)(V.OC,{}))}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),B=l.memo(e=>{let n=n=>{J(e.quic.tls)&&(e.quic.tls=void 0),n(e.quic),e.onChange(e.quic)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Host",onChange:e=>n(n=>n.host=e),value:e.quic.host}),e.quic.tls&&(0,s.jsx)(R,{tls:(0,P.U)(V.pj,null!==e.quic.tls?e.quic.tls:void 0),onChange:e=>n(n=>n.tls=e)})]})}),A=l.memo(e=>{let n=n=>{J(e.tls.tls)&&(e.tls.tls=void 0),n(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,s.jsx)(R,{tls:(0,P.U)(V.pj,e.tls.tls),onChange:e=>n(n=>n.tls=e)})]})}),z=l.memo(e=>{let n=n=>{n(e.reality),e.onChange(e.reality)},[a,t]=(0,l.useState)({value:""}),[r,o]=(0,l.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,s.jsx)(p.Vf,{label:"Dest",value:e.reality.dest,onChange:e=>n(n=>n.dest=e)}),(0,s.jsx)(p.Vf,{label:"Private Key",value:e.reality.privateKey,onChange:e=>n(n=>n.privateKey=e)}),(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.shortId.map((e,a)=>(0,s.jsx)(d.Z,{sm:{span:10,offset:0!==a?2:0},children:(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{value:e,onChange:e=>n(n=>{n.shortId[a]=e.target.value})}),(0,s.jsx)(v.Z,{variant:"outline-danger",onClick:()=>n(e=>{e.shortId.splice(a,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,s.jsx)(d.Z,{sm:{span:10,offset:0!==e.reality.shortId.length?2:0},children:(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{value:a.value,onChange:e=>t({value:e.target.value})}),(0,s.jsx)(v.Z,{variant:"outline-success",onClick:()=>n(e=>{e.shortId.push(a.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.serverName.map((e,a)=>(0,s.jsx)(d.Z,{sm:{span:10,offset:0!==a?2:0},children:(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{value:e,onChange:e=>n(n=>{n.serverName[a]=e.target.value})}),(0,s.jsx)(v.Z,{variant:"outline-danger",onClick:()=>n(e=>{e.serverName.splice(a,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,s.jsx)(d.Z,{sm:{span:10,offset:0!==e.reality.serverName.length?2:0},children:(0,s.jsxs)(x.Z,{className:"mb-2",children:[(0,s.jsx)(i.Z.Control,{value:r.value,onChange:e=>o({value:e.target.value})}),(0,s.jsx)(v.Z,{variant:"outline-success",onClick:()=>n(e=>{e.serverName.push(r.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})});function G(e,n,a){return a?function(e){e(n),a(n)}:function(e){}}let X=e=>{let[n,a]=(0,l.useState)((0,U.d)(V.T5,e.value));return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(I.Z,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},onShow:()=>{a((0,U.d)(V.T5,e.value))},centered:!0,children:[(0,s.jsx)(I.Z.Header,{children:(0,s.jsx)(I.Z.Title,{id:"contained-modal-title-vcenter",children:e.value.name})}),(0,s.jsx)(I.Z.Body,{children:(0,s.jsx)(Y,{inbound:n,onChange:e=>{a((0,U.d)(V.T5,e))}})}),(0,s.jsxs)(I.Z.Footer,{children:[(0,s.jsx)(v.Z,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,s.jsx)(v.Z,{variant:"outline-primary",onClick:()=>{e.onChange(n),e.onHide()},children:"Save"})]})]})})},Q=l.memo(e=>{var n;let a=G(V.yz,e.inbounds,e.onChange),[t,o]=(0,l.useState)({show:!1,inbound:(0,P.U)(V.T5,{}),onChange:e=>{}}),[c,d]=(0,l.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{show:t.show,value:t.inbound,onHide:()=>{o({...t,show:!1})},onChange:t.onChange}),(0,s.jsx)(j.Jg,{label:"DNS Hijack",checked:!!e.inbounds.hijackDns,onChange:()=>a(e=>e.hijackDns=!e.hijackDns)}),(0,s.jsx)(j.Jg,{label:"Fakedns",checked:!!e.inbounds.hijackDnsFakeip,onChange:()=>a(e=>e.hijackDnsFakeip=!e.hijackDnsFakeip)}),(0,s.jsx)(j.Jg,{label:"Sniff",checked:null!==(n=e.inbounds.sniff)&&void 0!==n&&!!n.enabled,onChange:()=>a(e=>{var n;return e.sniff=(0,P.U)(V._Z,{enabled:!(null===(n=e.sniff)||void 0===n?void 0:n.enabled)})})}),(0,s.jsx)("hr",{}),(0,s.jsxs)(r.Z,{children:[(0,s.jsx)(r.Z.Header,{children:"Inbounds"}),0===Object.keys(e.inbounds.inbounds).length?(0,s.jsx)(r.Z.Body,{children:(0,s.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"})}):(0,s.jsx)(T.Z,{variant:"flush",children:Object.entries(e.inbounds.inbounds).sort((e,n)=>e[0]<=n[0]?-1:1).map(e=>{let[n,t]=e;return(0,s.jsx)(l.Fragment,{children:(0,s.jsxs)(T.Z.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:e=>{e.stopPropagation(),o({show:!0,inbound:t,onChange:e=>{a(a=>{a.inbounds[n]=e})}})},children:[n,(0,s.jsx)(v.Z,{variant:"outline-danger",size:"sm",as:"span",onClick:e=>{e.stopPropagation(),a(e=>{delete e.inbounds[n]})},children:(0,s.jsx)("i",{className:"bi bi-x-lg"})},n+"span-button")]})},"inbounds-"+n)})}),(0,s.jsx)(r.Z.Footer,{children:(0,s.jsxs)(x.Z,{className:"d-flex justify-content-end",children:[(0,s.jsx)(i.Z.Control,{value:c.value,onChange:e=>d({value:e.target.value})}),(0,s.jsxs)(v.Z,{variant:"outline-success",onClick:()=>{""!==c.value&&void 0===e.inbounds.inbounds[c.value]&&a(e=>e.inbounds[c.value]=(0,P.U)(V.T5,{name:c.value}))},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}),Y=e=>{let n=G(V.T5,e.inbound,e.onChange),a=(a,s)=>{e.inbound.transport.length<=1||a&&0===s||!a&&s===e.inbound.transport.length-1||n(e=>{let n=e.transport[s];e.transport[s]=e.transport[s+(a?-1:1)],e.transport[s+(a?-1:1)]=n})},[t,r]=(0,l.useState)({value:"normal"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Jg,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{n(e=>e.enabled=!e.enabled)}}),(0,s.jsx)(p.Vf,{label:"Name",value:e.inbound.name,onChange:e=>{n(n=>n.name=e)}}),(0,s.jsx)(p.W2,{title:"Network",hideClose:!0,children:(0,s.jsx)($,{inbound:e.inbound,onChange:e=>{n(n=>e)}})}),(0,s.jsx)(p.W2,{title:"Transport",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[e.inbound.transport.map((l,t)=>{var r,o;return(0,s.jsx)(p.W2,{title:null!==(o=null===(r=l.transport.case)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",onClose:()=>{n(e=>e.transport.splice(t,1))},moveUpDown:new p.kx(e.inbound.transport.length,t,e=>a(e,t)),children:(0,s.jsx)(en,{transport:l,onChange:e=>{n(n=>n.transport[t]=e)}},t)},t)}),(0,s.jsx)(T.Z,{variant:"flush",children:(0,s.jsx)(T.Z.Item,{children:(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(i.Z.Select,{value:t.value,onChange:e=>r({value:e.target.value}),children:["normal","tls","mux","http2","websocket","grpc","reality"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsxs)(v.Z,{variant:"outline-success",onClick:()=>n(e=>{switch(t.value){case"normal":e.transport.push((0,P.U)(V.mM,{transport:{case:"normal",value:(0,P.U)(V.oe,{})}}));break;case"tls":e.transport.push((0,P.U)(V.mM,{transport:{case:"tls",value:(0,P.U)(V.CE,{tls:(0,P.U)(V.pj,{})})}}));break;case"mux":e.transport.push((0,P.U)(V.mM,{transport:{case:"mux",value:(0,P.U)(V.dN,{})}}));break;case"http2":e.transport.push((0,P.U)(V.mM,{transport:{case:"http2",value:(0,P.U)(V.rg,{})}}));break;case"websocket":e.transport.push((0,P.U)(V.mM,{transport:{case:"websocket",value:(0,P.U)(V.Mw,{})}}));break;case"grpc":e.transport.push((0,P.U)(V.mM,{transport:{case:"grpc",value:(0,P.U)(V.zW,{})}}));break;case"reality":e.transport.push((0,P.U)(V.mM,{transport:{case:"reality",value:(0,P.U)(V.Q4,{})}}))}}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,s.jsx)(p.W2,{title:"Protocol",hideClose:!0,children:(0,s.jsx)(es,{inbound:e.inbound,onChange:e=>{n(n=>e)}})})]})},$=e=>{var n,a;let t=G(V.T5,e.inbound,e.onChange),[r,o]=(0,l.useState)({value:null!==(a=null===(n=e.inbound.network.case)||void 0===n?void 0:n.toString())&&void 0!==a?a:"tcpudp"});return(0,l.useEffect)(()=>{o({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{variant:"flush",children:(0,s.jsx)(T.Z.Item,{children:(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(i.Z.Select,{value:r.value,onChange:e=>o({value:e.target.value}),children:["empty","tcpudp","quic"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(v.Z,{variant:"outline-success",onClick:()=>t(e=>{switch(r.value){case"tcpudp":e.network={case:"tcpudp",value:(0,P.U)(V.pr,{})};break;case"quic":e.network={case:"quic",value:(0,P.U)(V.jS,{})};break;case"empty":e.network={case:"empty",value:(0,P.U)(V.b3,{})}}}),children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(ee,{inbound:e.inbound,onChange:e.onChange})]})},ee=e=>{let n=G(V.T5,e.inbound,e.onChange);switch(e.inbound.network.case){case"tcpudp":return(0,s.jsx)(et,{protocol:e.inbound.network.value,onChange:e=>{n(n=>n.network.value=e)}});case"quic":return(0,s.jsx)(B,{quic:e.inbound.network.value,onChange:e=>{n(n=>n.network.value=e)}});case"empty":return(0,s.jsx)(s.Fragment,{})}},en=e=>{let n=G(V.mM,e.transport,e.onChange);switch(e.transport.transport.case){case"normal":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,s.jsx)(A,{tls:e.transport.transport.value,onChange:e=>{n(n=>n.transport.value=e)}});case"mux":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,s.jsx)(z,{reality:e.transport.transport.value,onChange:e=>{n(n=>n.transport.value=e)}})}},ea=e=>{let n=G(V.T5,e.inbound,e.onChange);switch(e.inbound.protocol.case){case"http":return(0,s.jsx)(L,{http:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"reverseHttp":return(0,s.jsx)(D,{reverse_http:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"reverseTcp":return(0,s.jsx)(E,{reverse_tcp:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"socks5":return(0,s.jsx)(M,{socks5:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"socks4a":return(0,s.jsx)(s.Fragment,{});case"mix":return(0,s.jsx)(W,{mixed:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"redir":return(0,s.jsx)(_,{redir:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"tun":return(0,s.jsx)(q,{tun:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"yuubinsya":return(0,s.jsx)(el,{yuubinsya:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}});case"tproxy":return(0,s.jsx)(O,{tproxy:e.inbound.protocol.value,onChange:e=>{n(n=>n.protocol.value=e)}})}},es=e=>{let n=G(V.T5,e.inbound,e.onChange),[a,t]=(0,l.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,l.useEffect)(()=>{t({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{variant:"flush",children:(0,s.jsx)(T.Z.Item,{children:(0,s.jsxs)(x.Z,{children:[(0,s.jsx)(i.Z.Select,{value:a.value,onChange:e=>t({value:e.target.value}),children:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(v.Z,{variant:"outline-success",onClick:()=>n(e=>{switch(a.value){case"http":e.protocol={case:"http",value:(0,P.U)(V.Ii,{})};break;case"reverseHttp":e.protocol={case:"reverseHttp",value:(0,P.U)(V.Sx,{})};break;case"reverseTcp":e.protocol={case:"reverseTcp",value:(0,P.U)(V.Nr,{})};break;case"socks5":e.protocol={case:"socks5",value:(0,P.U)(V.pJ,{})};break;case"mix":e.protocol={case:"mix",value:(0,P.U)(V.BB,{})};break;case"redir":e.protocol={case:"redir",value:(0,P.U)(V._9,{})};break;case"tun":e.protocol={case:"tun",value:(0,P.U)(V.S7,{})};break;case"yuubinsya":e.protocol={case:"yuubinsya",value:(0,P.U)(V.UM,{})};break;case"tproxy":e.protocol={case:"tproxy",value:(0,P.U)(V.zt,{})}}}),children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(ea,{inbound:e.inbound,onChange:e=>{n(n=>e)}})]})},el=e=>{let n=G(V.UM,e.yuubinsya,e.onChange);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Jg,{label:"TCP Encrypt",checked:e.yuubinsya.tcpEncrypt,onChange:()=>{n(e=>e.tcpEncrypt=!e.tcpEncrypt)}}),(0,s.jsx)(j.Jg,{label:"UDP Encrypt",checked:e.yuubinsya.udpEncrypt,onChange:()=>{n(e=>e.udpEncrypt=!e.udpEncrypt)}}),(0,s.jsx)(p.Vf,{label:"Password",value:e.yuubinsya.password,onChange:e=>{n(n=>n.password=e)}})]})},et=e=>{let n=G(V.pr,e.protocol,e.onChange);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Vf,{label:"Host",value:e.protocol.host,onChange:e=>{n(n=>n.host=e)}}),(0,s.jsx)(er,{label:"Control",type:V.Dk,value:e.protocol.control,onChange:e=>{n(n=>{n.control=e})}})]})};function er(e){var n;return(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.Z,{sm:10,children:(0,s.jsx)(i.Z.Select,{value:e.value,onChange:n=>e.onChange(Number(n.target.value)),children:e.type.values.filter(null!==(n=e.filter)&&void 0!==n?n:()=>!0).map(e=>(0,s.jsx)("option",{value:e.number,children:e.name},e.number))})})]})}var eo=a(6878);let ei=function(){var e,n,a,x,g;let Z=(0,l.useContext)(y.P),{data:F,error:I,isLoading:T,mutate:H}=(0,f.ZP)("/config",(0,k.D4)(w.FL),{revalidateOnFocus:!1}),{data:L}=(0,f.ZP)((null==F?void 0:null===(e=F.platform)||void 0===e?void 0:e.androidApp)?null:"/interfaces",(0,k.D4)(S.rS),{revalidateOnFocus:!0});if(void 0!==I)return(0,s.jsx)(N(),{statusCode:I.code,title:I.msg});if(T||void 0===F)return(0,s.jsx)(C.Z,{});let D=e=>{H(n=>{let a=(0,U.d)(w.FL,n);return e(a),a},!1)},E=e=>{var n,a,s=[];return(null===(n=e.systemProxy)||void 0===n?void 0:n.http)&&s.push(1),(null===(a=e.systemProxy)||void 0===a?void 0:a.socks5)&&s.push(2),s};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.Z.Container,{defaultActiveKey:"home",children:(0,s.jsxs)(r.Z,{className:"mb-3",children:[(0,s.jsx)(r.Z.Header,{children:(0,s.jsxs)(o.Z,{variant:"tabs",style:{flexWrap:"nowrap",overflow:"auto hidden"},children:[(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(o.Z.Link,{eventKey:"home",children:"Setting"})}),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(o.Z.Link,{eventKey:"dns",children:"DNS"})}),(0,s.jsx)(o.Z.Item,{children:(0,s.jsx)(o.Z.Link,{eventKey:"inbound",children:"Inbound"})})]})}),(0,s.jsx)(r.Z.Body,{children:(0,s.jsxs)(t.Z.Content,{children:[(0,s.jsx)(t.Z.Pane,{eventKey:"home",children:(0,s.jsxs)("fieldset",{disabled:null===(n=F.platform)||void 0===n?void 0:n.androidApp,children:[(0,s.jsx)(j.Jg,{label:"IPv6",checked:F.ipv6,onChange:()=>H((0,P.U)(w.FL,{...F,ipv6:!F.ipv6}),!1)}),(0,s.jsx)(p.Vf,{label:"Network Interface",value:F.netInterface,onChange:e=>D(n=>n.netInterface=e),reminds:null==L?void 0:L.interfaces.map(e=>{if(e.name){var n;return{label:e.name,value:e.name,label_children:null===(n=e.addresses)||void 0===n?void 0:n.map(e=>e||"")}}}).filter(e=>!!e)}),(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-2",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,className:"nowrap",children:"System Proxy"}),(0,s.jsx)(d.Z,{sm:10,children:(0,s.jsxs)(u.Z,{type:"checkbox",className:"d-flex",defaultValue:E(F),value:E(F),onChange:e=>{let n=!1,a=!1;for(var s of e)1===s&&(n=!0),2===s&&(a=!0);D(e=>{e.systemProxy=(0,P.U)(w.uh,{http:n,socks5:a})})},children:[(0,s.jsx)(h.Z,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-1",value:1,children:"HTTP"}),(0,s.jsx)(h.Z,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-2",value:2,children:"SOCKS5"})]})})]}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.Z.Title,{className:"mb-2",children:"Logcat"}),(0,s.jsx)(j.Jg,{label:"Save",checked:F.logcat.save,onChange:()=>D(e=>e.logcat.save=!e.logcat.save)}),(0,s.jsx)(ec,{label:"Level",value:F.logcat.level,onChange:e=>D(n=>{n.logcat.level=e})})]})}),(0,s.jsx)(t.Z.Pane,{eventKey:"dns",title:"DNS",children:(0,s.jsx)("fieldset",{disabled:null===(a=F.platform)||void 0===a?void 0:a.androidApp,children:(0,s.jsx)(b,{data:(0,P.U)(m.X0,F.dns),onChange:e=>D(n=>n.dns=(0,U.d)(m.X0,e))})})}),(0,s.jsx)(t.Z.Pane,{eventKey:"inbound",title:"Inbound",children:(0,s.jsx)("fieldset",{disabled:null===(x=F.platform)||void 0===x?void 0:x.androidApp,children:(0,s.jsx)(Q,{inbounds:(0,P.U)(V.yz,F.server),onChange:e=>D(n=>n.server=(0,U.d)(V.yz,e))})})})]})}),!(null===(g=F.platform)||void 0===g?void 0:g.androidApp)&&(0,s.jsx)(r.Z.Footer,{className:"d-flex justify-content-md-end",children:(0,s.jsx)(v.Z,{variant:"outline-primary",onClick:()=>{(0,k.Uo)("/config",{body:(0,eo.O)(w.FL,F)}).then(async e=>{let{error:n}=e;void 0!==n?Z.Error("save config failed, ".concat(n.code,"| ").concat(await n.msg)):(Z.Info("Save Config Successfully"),H())})},children:"Save"})})]})})})};function ec(e){return(0,s.jsxs)(i.Z.Group,{as:c.Z,className:"mb-3",children:[(0,s.jsx)(i.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.Z,{sm:10,children:(0,s.jsxs)(i.Z.Select,{value:F.LC[e.value],onChange:n=>e.onChange(F.LC[n.target.value]),children:[(0,s.jsx)("option",{value:F.LC[F.LC.debug],children:"DEBUG"}),(0,s.jsx)("option",{value:F.LC[F.LC.info],children:"INFO"}),(0,s.jsx)("option",{value:F.LC[F.LC.warning],children:"WARN"}),(0,s.jsx)("option",{value:F.LC[F.LC.error],children:"ERROR"})]})})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[8817,1617,548,5554,9768,6389,6166,246,8973,8152,4956,7130,6215,1744],()=>n(2280)),_N_E=e.O()}]);