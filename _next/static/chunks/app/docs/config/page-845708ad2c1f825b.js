(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{6381:(e,l,a)=>{Promise.resolve().then(a.bind(a,493))},9169:(e,l,a)=>{"use strict";a.d(l,{A:()=>i});var n=a(5155),s=a(4216),t=a(5554),o=a.n(t);let i=function(e){return(0,n.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,n.jsx)("div",{className:"p2",children:(0,n.jsx)(s.A,{})})]})}},2859:(e,l,a)=>{"use strict";a.d(l,{$d:()=>i});var n=a(5155);a(2115);var s=a(6180),t=a(6121),o=a(3667);let i=e=>(0,n.jsxs)(s.A.Group,{as:t.A,className:"mb-2",children:[(0,n.jsx)(s.A.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(o.A,{sm:10,className:"d-flex align-items-center",children:(0,n.jsx)(s.A.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},148:(e,l,a)=>{"use strict";a.d(l,{u:()=>i,y:()=>r});var n=a(5155),s=a(2115),t=a(1757),o=a(491);let i=(0,s.createContext)({Info:e=>{},Error:e=>{}}),r=e=>{let{children:l}=e,[a,r]=(0,s.useState)({value:{},index:0}),d=(e,l)=>r(a=>({value:{...a.value,[a.index]:{text:e,type:l}},index:a.index+1}));return(0,n.jsxs)(i.Provider,{value:{Info:e=>{console.log(e),d(e,"success")},Error:e=>{console.error(e),d(e,"danger")}},children:[(0,n.jsx)(t.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(a.value).map(e=>{let[l,s]=e;return(0,n.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:s.type,onClose:()=>{let e=a.value;delete e[l],r({...a,value:e})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,n.jsxs)(o.A.Header,{children:[(0,n.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,n.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,n.jsx)(o.A.Body,{className:"text-center",children:s.text})]},"toast"+l)})}),l]})}},493:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>D});var n=a(5155),s=a(2115),t=a(7471),o=a(2981),i=a(3360),r=a(6180),d=a(6121),c=a(3667),v=a(5166),u=a(8627),h=a(2963),m=a(8003),x=a(7204),j=a(2859),b=a(1463);let g=s.memo(e=>{var l,a,t,o,i,d,c,v,u,b,g,A,y,C,f,N,k,S,I,F,R;let[P,w]=(0,s.useState)({key:"",value:""}),W=l=>{l(e.data),e.onChange(e.data)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a9,{label:"Server",value:e.data.server,onChange:e=>W(l=>l.server=e)}),(0,n.jsx)(x.mc,{title:"FakeDNS",hideClose:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.$d,{label:"Enabled",checked:e.data.fakedns,onChange:()=>W(e=>e.fakedns=!e.fakedns)}),(0,n.jsx)(x.a9,{label:"IPv4 Range",value:e.data.fakednsIpRange,onChange:e=>W(l=>l.fakednsIpRange=e)}),(0,n.jsx)(x.a9,{label:"IPv6 Range",value:e.data.fakednsIpv6Range,onChange:e=>W(l=>l.fakednsIpv6Range=e)}),(0,n.jsx)(x.e9,{title:"Whitelist",data:e.data.fakednsWhitelist,onChange:e=>W(l=>{e&&(l.fakednsWhitelist=e)})})]})}),(0,n.jsx)(x.mc,{title:"Local DNS",hideClose:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a9,{label:"Host",value:null!==(y=null===(l=e.data.local)||void 0===l?void 0:l.host)&&void 0!==y?y:"",onChange:e=>W(l=>{void 0!==l.local&&(l.local.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(a=e.data.local)||void 0===a?void 0:a.type,onChange:e=>W(l=>{void 0!==l.local&&(l.local.type=e)})}),(0,n.jsx)(x.a9,{label:"Subnet",value:null!==(C=null===(t=e.data.local)||void 0===t?void 0:t.subnet)&&void 0!==C?C:"",onChange:e=>W(l=>{void 0!==l.local&&(l.local.subnet=e)})}),(0,n.jsx)(x.a9,{label:"SNI",value:null!==(f=null===(o=e.data.local)||void 0===o?void 0:o.tlsServername)&&void 0!==f?f:"",onChange:e=>W(l=>{void 0!==l.local&&(l.local.tlsServername=e)})})]})}),(0,n.jsx)(x.mc,{title:"Remote DNS",hideClose:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a9,{label:"Host",value:null!==(N=null===(i=e.data.remote)||void 0===i?void 0:i.host)&&void 0!==N?N:"",onChange:e=>W(l=>{void 0!==l.remote&&(l.remote.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(d=e.data.remote)||void 0===d?void 0:d.type,onChange:e=>W(l=>{void 0!==l.remote&&(l.remote.type=e)})}),(0,n.jsx)(x.a9,{label:"Subnet",value:null!==(k=null===(c=e.data.remote)||void 0===c?void 0:c.subnet)&&void 0!==k?k:"",onChange:e=>W(l=>{void 0!==l.remote&&(l.remote.subnet=e)})}),(0,n.jsx)(x.a9,{label:"SNI",value:null!==(S=null===(v=e.data.remote)||void 0===v?void 0:v.tlsServername)&&void 0!==S?S:"",onChange:e=>W(l=>{void 0!==l.remote&&(l.remote.tlsServername=e)})})]})}),(0,n.jsx)(x.mc,{title:"Bootstrap DNS",hideClose:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a9,{label:"Host",value:null!==(I=null===(u=e.data.bootstrap)||void 0===u?void 0:u.host)&&void 0!==I?I:"",onChange:e=>W(l=>{void 0!==l.bootstrap&&(l.bootstrap.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(b=e.data.bootstrap)||void 0===b?void 0:b.type,onChange:e=>W(l=>{void 0!==l.bootstrap&&(l.bootstrap.type=e)})}),(0,n.jsx)(x.a9,{label:"Subnet",value:null!==(F=null===(g=e.data.bootstrap)||void 0===g?void 0:g.subnet)&&void 0!==F?F:"",onChange:e=>W(l=>{void 0!==l.bootstrap&&(l.bootstrap.subnet=e)})}),(0,n.jsx)(x.a9,{label:"SNI",value:null!==(R=null===(A=e.data.bootstrap)||void 0===A?void 0:A.tlsServername)&&void 0!==R?R:"",onChange:e=>W(l=>{void 0!==l.bootstrap&&(l.bootstrap.tlsServername=e)})})]})}),(0,n.jsx)(x.mc,{title:"Hosts",hideClose:!0,children:(0,n.jsxs)(n.Fragment,{children:[Object.entries(e.data.hosts).sort((e,l)=>{let[a]=e,[n]=l;return a>n?-1:1}).map(e=>{let[l,a]=e;return(0,n.jsxs)(m.A,{className:"mb-2",children:[(0,n.jsx)(r.A.Control,{readOnly:!0,value:l}),(0,n.jsx)(m.A.Text,{children:(0,n.jsx)("i",{className:"bi bi-arrow-right"})}),(0,n.jsx)(r.A.Control,{value:a,onChange:e=>W(a=>a.hosts[l]=e.target.value)}),(0,n.jsx)(h.A,{variant:"outline-danger",onClick:()=>W(e=>delete e.hosts[l]),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+l)}),(0,n.jsxs)(m.A,{className:"mb-2",children:[(0,n.jsx)(r.A.Control,{value:P.key,onChange:e=>w({...P,key:e.target.value})}),(0,n.jsx)(m.A.Text,{children:(0,n.jsx)("i",{className:"bi bi-arrow-right"})}),(0,n.jsx)(r.A.Control,{value:P.value,onChange:e=>w({...P,value:e.target.value})}),(0,n.jsx)(h.A,{variant:"outline-success",onClick:()=>{""!==P.key&&void 0===e.data.hosts[P.key]&&W(e=>e.hosts[P.key]=P.value)},children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})]})})]})});function p(e){var l;return(0,n.jsxs)(r.A.Group,{as:d.A,className:"mb-3",children:[(0,n.jsx)(r.A.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(c.A,{sm:10,children:(0,n.jsx)(r.A.Select,{value:b.NW[null!==(l=e.value)&&void 0!==l?l:b.NW.udp],onChange:l=>e.onChange(b.NW[l.target.value]),children:b.m9.values.filter(e=>0!==e.number).map(e=>(0,n.jsx)("option",{value:b.NW[e.number],children:e.name},e.number))})})]})}var A=a(9169),y=a(148),C=a(4995),f=a(8927),N=a(5554),k=a.n(N),S=a(878),I=a(6496),F=a(4431),R=a(950),P=a(3577),w=a(7558),W=a(7641);let D=function(){var e,l,a,m,p,N,F,D;let L=(0,s.useContext)(y.u),{data:G,error:E,isLoading:H,mutate:O}=(0,C.Ay)("/config",(0,f.AD)(S.QN),{revalidateOnFocus:!1}),{data:B}=(0,C.Ay)((null==G?void 0:null===(e=G.platform)||void 0===e?void 0:e.androidApp)?null:"/interfaces",(0,f.AD)(I.yz),{revalidateOnFocus:!0});if(void 0!==E)return(0,n.jsx)(k(),{statusCode:E.code,title:E.msg});if(H||void 0===G)return(0,n.jsx)(A.A,{});let K=e=>{O(l=>{let a=(0,R.o)(S.QN,l);return e(a),a},!1)},T=e=>{var l,a,n=[];return(null===(l=e.systemProxy)||void 0===l?void 0:l.http)&&n.push(1),(null===(a=e.systemProxy)||void 0===a?void 0:a.socks5)&&n.push(2),n};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(t.A.Container,{defaultActiveKey:"home",children:(0,n.jsxs)(o.A,{className:"mb-3",children:[(0,n.jsx)(o.A.Header,{children:(0,n.jsxs)(i.A,{variant:"tabs",style:{flexWrap:"nowrap",overflow:"auto hidden"},children:[(0,n.jsx)(i.A.Item,{children:(0,n.jsx)(i.A.Link,{eventKey:"home",children:"Setting"})}),(0,n.jsx)(i.A.Item,{children:(0,n.jsx)(i.A.Link,{eventKey:"dns",children:"DNS"})})]})}),(0,n.jsx)(o.A.Body,{children:(0,n.jsxs)(t.A.Content,{children:[(0,n.jsx)(t.A.Pane,{eventKey:"home",children:(0,n.jsxs)("fieldset",{disabled:null===(l=G.platform)||void 0===l?void 0:l.androidApp,children:[(0,n.jsx)(j.$d,{label:"IPv6",checked:G.ipv6,onChange:()=>O((0,P.v)(S.QN,{...G,ipv6:!G.ipv6}),!1)}),(0,n.jsx)(x.a9,{label:"Network Interface",value:G.netInterface,onChange:e=>K(l=>l.netInterface=e),reminds:null==B?void 0:B.interfaces.map(e=>{if(e.name){var l;return{label:e.name,value:e.name,label_children:null===(l=e.addresses)||void 0===l?void 0:l.map(e=>e||"")}}}).filter(e=>!!e)}),(0,n.jsxs)(r.A.Group,{as:d.A,className:"mb-2",children:[(0,n.jsx)(r.A.Label,{column:!0,sm:2,className:"nowrap",children:"System Proxy"}),(0,n.jsx)(c.A,{sm:10,children:(0,n.jsxs)(v.A,{type:"checkbox",className:"d-flex",defaultValue:T(G),value:T(G),onChange:e=>{let l=!1,a=!1;for(var n of e)1===n&&(l=!0),2===n&&(a=!0);K(e=>{e.systemProxy=(0,P.v)(S.Oe,{http:l,socks5:a})})},children:[(0,n.jsx)(u.A,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-1",value:1,children:"HTTP"}),(0,n.jsx)(u.A,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-2",value:2,children:"SOCKS5"})]})})]}),(0,n.jsx)("hr",{}),(0,n.jsx)(o.A.Title,{className:"mb-2",children:"Inbound"}),(0,n.jsx)(j.$d,{label:"DNS Hijack",checked:null!==(a=G.server)&&void 0!==a&&!!a.hijackDns,onChange:()=>K(e=>e.server.hijackDns=!e.server.hijackDns)}),(0,n.jsx)(j.$d,{label:"Fakedns",checked:null!==(m=G.server)&&void 0!==m&&!!m.hijackDnsFakeip,onChange:()=>K(e=>e.server.hijackDnsFakeip=!e.server.hijackDnsFakeip)}),(0,n.jsx)(j.$d,{label:"Sniff",checked:null!==(N=G.server)&&void 0!==N&&null!==(p=N.sniff)&&void 0!==p&&!!p.enabled,onChange:()=>K(e=>{var l;return e.server.sniff=(0,P.v)(W.c1,{enabled:!(null===(l=e.server.sniff)||void 0===l?void 0:l.enabled)})})}),(0,n.jsx)("hr",{}),(0,n.jsx)(o.A.Title,{className:"mb-2",children:"Logcat"}),(0,n.jsx)(j.$d,{label:"Save",checked:G.logcat.save,onChange:()=>K(e=>e.logcat.save=!e.logcat.save)}),(0,n.jsx)(Z,{label:"Level",value:G.logcat.level,onChange:e=>K(l=>{l.logcat.level=e})})]})}),(0,n.jsx)(t.A.Pane,{eventKey:"dns",title:"DNS",children:(0,n.jsx)("fieldset",{disabled:null===(F=G.platform)||void 0===F?void 0:F.androidApp,children:(0,n.jsx)(g,{data:(0,P.v)(b.ct,G.dns),onChange:e=>K(l=>l.dns=(0,R.o)(b.ct,e))})})})]})}),!(null===(D=G.platform)||void 0===D?void 0:D.androidApp)&&(0,n.jsx)(o.A.Footer,{className:"d-flex justify-content-md-end",children:(0,n.jsx)(h.A,{variant:"outline-primary",onClick:()=>{(0,f.Fp)("/config",{body:(0,w.R)(S.QN,G)}).then(async e=>{let{error:l}=e;void 0!==l?L.Error("save config failed, ".concat(l.code,"| ").concat(await l.msg)):(L.Info("Save Config Successfully"),O())})},children:"Save"})})]})})})};function Z(e){return(0,n.jsxs)(r.A.Group,{as:d.A,className:"mb-3",children:[(0,n.jsx)(r.A.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(c.A,{sm:10,children:(0,n.jsxs)(r.A.Select,{value:F.cP[e.value],onChange:l=>e.onChange(F.cP[l.target.value]),children:[(0,n.jsx)("option",{value:F.cP[F.cP.debug],children:"DEBUG"}),(0,n.jsx)("option",{value:F.cP[F.cP.info],children:"INFO"}),(0,n.jsx)("option",{value:F.cP[F.cP.warning],children:"WARN"}),(0,n.jsx)("option",{value:F.cP[F.cP.error],children:"ERROR"})]})})]})}},6496:(e,l,a)=>{"use strict";a.d(l,{yz:()=>i});var n=a(6788),s=a(8123),t=a(9297);let o=(0,n.w)("ChF0b29scy90b29scy5wcm90bxINeXVoYWlpbi50b29scyI6CgpJbnRlcmZhY2VzEiwKCmludGVyZmFjZXMYASADKAsyGC55dWhhaWluLnRvb2xzLkludGVyZmFjZSIsCglJbnRlcmZhY2USDAoEbmFtZRgBIAEoCRIRCglhZGRyZXNzZXMYAiADKAkySwoFdG9vbHMSQgoNZ2V0X2ludGVyZmFjZRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoZLnl1aGFpaW4udG9vbHMuSW50ZXJmYWNlc0IvWi1naXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvdG9vbHNiBnByb3RvMw",[t.t]),i=(0,s.Z)(o,0)}},e=>{var l=l=>e(e.s=l);e.O(0,[488,995,515,920,637,617,306,878,441,517,358],()=>l(6381)),_N_E=e.O()}]);