(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5930],{1637:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>Q});var s=a(5155),t=a(960),o=a(4965),r=a(6487),l=a(2115),c=a(8468),i=a(902),u=a(6355),d=a(1867),h=a(9056),v=a(8347),p=a(8054),x=a(9169),g=a(4086),m=a(8508),b=a(2358),j=a(6835),C=a(6878),y=a(2144),k=a(2410),A=a(3697),w=a(1846),N=a(8136),f=a(7906),F=a(7622),S=a(9020);let E=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Username",value:e.http.username,onChange:n=>e.onChange({...e.http,username:n})}),(0,s.jsx)(A.a9,{label:"Password",value:e.http.password,onChange:n=>e.onChange({...e.http,password:n})})]}),H=e=>{var n;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Url",value:e.reverse_http.url,onChange:n=>e.onChange({...e.reverse_http,url:n})}),(0,s.jsx)(F.A,{value:null!==(n=e.reverse_http.tls)&&void 0!==n?n:(0,t.v)(k.Qi,{}),onChange:n=>{e.onChange({...e.reverse_http,tls:n})}})]})},P=e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(A.a9,{label:"Host",value:e.reverse_tcp.host,onChange:n=>e.onChange({...e.reverse_tcp,host:n})})}),I=e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(A.a9,{label:"Host",value:e.redir.host,onChange:n=>e.onChange({...e.redir,host:n})})}),D=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.$d,{label:"DNS Hijacking",checked:e.tproxy.dnsHijacking,onChange:()=>e.onChange({...e.tproxy,dnsHijacking:!e.tproxy.dnsHijacking})}),(0,s.jsx)(b.$d,{label:"Force Fake IP",checked:e.tproxy.forceFakeip,onChange:()=>e.onChange({...e.tproxy,forceFakeip:!e.tproxy.forceFakeip})}),(0,s.jsx)(A.a9,{label:"Host",value:e.tproxy.host,onChange:n=>e.onChange({...e.tproxy,host:n})})]}),U=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Username",value:e.socks5.username,onChange:n=>e.onChange({...e.socks5,username:n})}),(0,s.jsx)(A.a9,{label:"Password",value:e.socks5.password,onChange:n=>e.onChange({...e.socks5,password:n})})]}),T=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Username",value:e.mixed.username,onChange:n=>e.onChange({...e.mixed,username:n})}),(0,s.jsx)(A.a9,{label:"Password",value:e.mixed.password,onChange:n=>e.onChange({...e.mixed,password:n})})]}),_=e=>{var n,a;let[o,r]=(0,l.useState)((0,f.fj)(e.tun.postUp)),[c,i]=(0,l.useState)((0,f.fj)(e.tun.postDown));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.$d,{checked:e.tun.skipMulticast,onChange:()=>e.onChange({...e.tun,skipMulticast:!e.tun.skipMulticast}),label:"Skip Multicast"}),(0,s.jsx)(A.a9,{label:"Name",value:e.tun.name,onChange:n=>e.onChange({...e.tun,name:n})}),(0,s.jsx)(A.a9,{label:"MTU",value:e.tun.mtu,onChange:n=>{isNaN(Number(n))||e.onChange({...e.tun,mtu:Number(n)})}}),(0,s.jsx)(A.a9,{label:"IPv4",value:e.tun.portal,onChange:n=>e.onChange({...e.tun,portal:n})}),(0,s.jsx)(A.a9,{label:"IPv6",value:e.tun.portalV6,onChange:n=>e.onChange({...e.tun,portalV6:n})}),(0,s.jsx)(A.a9,{label:"Post Up",value:o,onChange:n=>{r(n);try{let a=(0,f.lD)(n);e.onChange({...e.tun,postUp:a})}catch(e){console.log(e)}}}),(0,s.jsx)(A.a9,{label:"Post Down",value:c,onChange:n=>{i(n);try{let a=(0,f.lD)(n);e.onChange({...e.tun,postDown:a})}catch(e){console.log(e)}}}),(0,s.jsx)(b.Vx,{label:"Stack",type:y.mM,value:e.tun.driver,onChange:n=>e.onChange({...e.tun,driver:n})}),(0,s.jsx)(A.e9,{title:"Routes",data:null!==(a=null===(n=e.tun.route)||void 0===n?void 0:n.routes)&&void 0!==a?a:[],onChange:n=>{e.onChange({...e.tun,route:{...e.tun.route?e.tun.route:(0,t.v)(y.l,{}),routes:n||[]}})}})]})},q=e=>{var n,a,o,r,l;let{tls:c,onChange:u}=e,d=e=>{let n={...c};c.ech?n.ech={...c.ech}:n.ech=(0,t.v)(y.Jo,{}),e(n.ech),u({...n})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.e9,{title:"Next Protos",className:"mb-2",data:null!==(r=null==c?void 0:c.nextProtos)&&void 0!==r?r:[],onChange:e=>u({...c,nextProtos:e})}),(0,s.jsx)(A.e9,{title:"Servenames",className:"mb-2",data:null!==(l=null==c?void 0:c.servernames)&&void 0!==l?l:[],onChange:e=>u({...c,servernames:e})}),(0,s.jsx)(b.$d,{label:"ECH Enabled",checked:!!c.ech&&c.ech.enable,onChange:e=>d(n=>(n.enable=e,n))}),(null===(n=c.ech)||void 0===n?void 0:n.enable)&&(0,s.jsx)(A.a9,{label:"ECH Outer SNI",value:c.ech?c.ech.OuterSNI:"",onChange:e=>d(n=>(n.OuterSNI=e,n))}),(0,s.jsx)(A.jU,{label:"CA Cert",value:new TextDecoder().decode(c.caCert),readonly:!0}),(0,s.jsx)(A.jU,{label:"CA Key",value:new TextDecoder().decode(c.caKey),readonly:!0,password:!0}),(0,s.jsx)(A.a9,{label:"ECH Config",value:c.ech?btoa(String.fromCharCode(...null===(a=c.ech)||void 0===a?void 0:a.config)):"",readonly:!0}),(0,s.jsx)(A.a9,{label:"ECH Key",value:c.ech?btoa(String.fromCharCode(...null===(o=c.ech)||void 0===o?void 0:o.privateKey)):"",readonly:!0,password:!0}),(0,s.jsx)(i.A,{variant:"outline-danger",onClick:()=>u({...c,caCert:new TextEncoder().encode(""),caKey:new TextEncoder().encode(""),ech:{...c.ech,config:new Uint8Array(0),privateKey:new Uint8Array(0)}}),children:"regenerate"})]})},K=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Host",onChange:n=>e.onChange({...e.quic,host:n}),value:e.quic.host}),(0,s.jsx)(S.b,{tls:(0,t.v)(k.Gc,e.quic.tls?e.quic.tls:void 0),onChange:n=>e.onChange({...e.quic,tls:n})})]}),$=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,s.jsx)(S.b,{tls:(0,t.v)(k.Gc,e.tls.tls),onChange:n=>e.onChange({...e.tls,tls:n})})]}),z=e=>{let[n,a]=(0,l.useState)({value:""}),[t,o]=(0,l.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,s.jsx)(A.a9,{label:"Dest",value:e.reality.dest,onChange:n=>e.onChange({...e.reality,dest:n})}),(0,s.jsx)(A.a9,{label:"Private Key",value:e.reality.privateKey,onChange:n=>e.onChange({...e.reality,privateKey:n})}),(0,s.jsxs)(p.A.Group,{as:w.A,className:"mb-3",children:[(0,s.jsx)(p.A.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.shortId.map((n,a)=>(0,s.jsx)(N.A,{sm:{span:10,offset:2*(0!==a)},children:(0,s.jsxs)(v.A,{className:"mb-2",children:[(0,s.jsx)(p.A.Control,{value:n,onChange:n=>e.onChange({...e.reality,shortId:[...e.reality.shortId.slice(0,a),n.target.value,...e.reality.shortId.slice(a+1)]})}),(0,s.jsx)(i.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.reality,shortId:[...e.reality.shortId.slice(0,a),...e.reality.shortId.slice(a+1)]}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,s.jsx)(N.A,{sm:{span:10,offset:2*(0!==e.reality.shortId.length)},children:(0,s.jsxs)(v.A,{className:"mb-2",children:[(0,s.jsx)(p.A.Control,{value:n.value,onChange:e=>a({value:e.target.value})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>e.onChange({...e.reality,shortId:[...e.reality.shortId,n.value]}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,s.jsxs)(p.A.Group,{as:w.A,className:"mb-3",children:[(0,s.jsx)(p.A.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.serverName.map((n,a)=>(0,s.jsx)(N.A,{sm:{span:10,offset:2*(0!==a)},children:(0,s.jsxs)(v.A,{className:"mb-2",children:[(0,s.jsx)(p.A.Control,{value:n,onChange:n=>e.onChange({...e.reality,serverName:[...e.reality.serverName.slice(0,a),n.target.value,...e.reality.serverName.slice(a+1)]})}),(0,s.jsx)(i.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.reality,serverName:[...e.reality.serverName.slice(0,a),...e.reality.serverName.slice(a+1)]}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,s.jsx)(N.A,{sm:{span:10,offset:2*(0!==e.reality.serverName.length)},children:(0,s.jsxs)(v.A,{className:"mb-2",children:[(0,s.jsx)(p.A.Control,{value:t.value,onChange:e=>o({value:e.target.value})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>e.onChange({...e.reality,serverName:[...e.reality.serverName,t.value]}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})},M=e=>{let[n,a]=(0,l.useState)({value:"normal"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.$d,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{e.onChange({...e.inbound,enabled:!e.inbound.enabled})}}),(0,s.jsx)(A.mc,{title:"Network",className:"mb-2",hideClose:!0,children:(0,s.jsx)(O,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})}),(0,s.jsx)(A.mc,{title:"Transport",className:"mb-2",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[e.inbound.transport.map((n,a)=>{var t,o;return(0,s.jsx)(A.mc,{className:0!==a?"mt-2":"",title:null!==(o=null===(t=n.transport.case)||void 0===t?void 0:t.toString())&&void 0!==o?o:"",onClose:()=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,a),...e.inbound.transport.slice(a+1)]})},moveUpDown:new A.fH(e.inbound.transport,a,n=>e.onChange({...e.inbound,transport:n})),children:(0,s.jsx)(G,{transport:n,onChange:n=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,a),n,...e.inbound.transport.slice(a+1)]})}},a)},a)}),(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(v.A,{children:[(0,s.jsx)(b.FX,{value:n.value,values:["normal","tls","mux","http2","websocket","grpc","reality","tlsAuto"],onChange:e=>a({value:e})}),(0,s.jsxs)(i.A,{variant:"outline-success",onClick:()=>{let a={...e.inbound,transport:[...e.inbound.transport]};switch(n.value){case"normal":a.transport.push((0,t.v)(y.ls,{transport:{case:"normal",value:(0,t.v)(y.Rc,{})}}));break;case"tlsAuto":a.transport.push((0,t.v)(y.ls,{transport:{case:"tlsAuto",value:(0,t.v)(y.RN,{})}}));break;case"tls":a.transport.push((0,t.v)(y.ls,{transport:{case:"tls",value:(0,t.v)(y.fx,{tls:(0,t.v)(k.Gc,{})})}}));break;case"mux":a.transport.push((0,t.v)(y.ls,{transport:{case:"mux",value:(0,t.v)(y.gE,{})}}));break;case"http2":a.transport.push((0,t.v)(y.ls,{transport:{case:"http2",value:(0,t.v)(y.ql,{})}}));break;case"websocket":a.transport.push((0,t.v)(y.ls,{transport:{case:"websocket",value:(0,t.v)(y.BP,{})}}));break;case"grpc":a.transport.push((0,t.v)(y.ls,{transport:{case:"grpc",value:(0,t.v)(y.E_,{})}}));break;case"reality":a.transport.push((0,t.v)(y.ls,{transport:{case:"reality",value:(0,t.v)(y.K0,{})}}))}e.onChange(a)},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,s.jsx)(A.mc,{title:"Protocol",hideClose:!0,children:(0,s.jsx)(L,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})})]})},O=e=>{var n,a;let[o,r]=(0,l.useState)({value:null!==(a=null===(n=e.inbound.network.case)||void 0===n?void 0:n.toString())&&void 0!==a?a:"tcpudp"});return(0,l.useEffect)(()=>{r({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(v.A,{children:[(0,s.jsx)(b.FX,{value:o.value,values:["empty","tcpudp","quic"],onChange:e=>r({value:e})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>{let n={...e.inbound};switch(o.value){case"tcpudp":n.network={case:"tcpudp",value:(0,t.v)(y.as,{})};break;case"quic":n.network={case:"quic",value:(0,t.v)(y.sn,{})};break;case"empty":n.network={case:"empty",value:(0,t.v)(y.bN,{})}}e.onChange({...n})},children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(B,{inbound:e.inbound,onChange:e.onChange})]})},B=e=>{switch(e.inbound.network.case){case"tcpudp":return(0,s.jsx)(X,{protocol:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"tcpudp",value:n}})}});case"quic":return(0,s.jsx)(K,{quic:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"quic",value:n}})}});case"empty":return(0,s.jsx)(s.Fragment,{})}},G=e=>{switch(e.transport.transport.case){case"normal":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,s.jsx)($,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tls",value:n}})}});case"tlsAuto":return(0,s.jsx)(q,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tlsAuto",value:n}})}});case"mux":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,s.jsx)(z,{reality:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"reality",value:n}})}})}},R=e=>{switch(e.inbound.protocol.case){case"http":return(0,s.jsx)(E,{http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"http",value:n}})}});case"reverseHttp":return(0,s.jsx)(H,{reverse_http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseHttp",value:n}})}});case"reverseTcp":return(0,s.jsx)(P,{reverse_tcp:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseTcp",value:n}})}});case"socks5":return(0,s.jsx)(U,{socks5:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"socks5",value:n}})}});case"socks4a":return(0,s.jsx)(s.Fragment,{});case"mix":return(0,s.jsx)(T,{mixed:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"mix",value:n}})}});case"redir":return(0,s.jsx)(I,{redir:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"redir",value:n}})}});case"tun":return(0,s.jsx)(_,{tun:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tun",value:n}})}});case"yuubinsya":return(0,s.jsx)(V,{yuubinsya:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"yuubinsya",value:n}})}});case"tproxy":return(0,s.jsx)(D,{tproxy:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tproxy",value:n}})}})}},L=e=>{let[n,a]=(0,l.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,l.useEffect)(()=>{a({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(v.A,{children:[(0,s.jsx)(b.FX,{value:n.value,values:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"],onChange:e=>a({value:e})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>{let a={...e.inbound};switch(n.value){case"http":a.protocol={case:"http",value:(0,t.v)(y.UM,{})};break;case"reverseHttp":a.protocol={case:"reverseHttp",value:(0,t.v)(y.l0,{})};break;case"reverseTcp":a.protocol={case:"reverseTcp",value:(0,t.v)(y.A0,{})};break;case"socks5":a.protocol={case:"socks5",value:(0,t.v)(y.AK,{})};break;case"mix":a.protocol={case:"mix",value:(0,t.v)(y.JX,{})};break;case"redir":a.protocol={case:"redir",value:(0,t.v)(y.Q9,{})};break;case"tun":a.protocol={case:"tun",value:(0,t.v)(y.vC,{})};break;case"yuubinsya":a.protocol={case:"yuubinsya",value:(0,t.v)(y.lA,{})};break;case"tproxy":a.protocol={case:"tproxy",value:(0,t.v)(y.SL,{})}}e.onChange({...a})},children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(R,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})]})},V=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.$d,{label:"TCP Encrypt",checked:e.yuubinsya.tcpEncrypt,onChange:()=>{e.onChange({...e.yuubinsya,tcpEncrypt:!e.yuubinsya.tcpEncrypt})}}),(0,s.jsx)(b.$d,{label:"UDP Encrypt",checked:e.yuubinsya.udpEncrypt,onChange:()=>{e.onChange({...e.yuubinsya,udpEncrypt:!e.yuubinsya.udpEncrypt})}}),(0,s.jsx)(A.a9,{label:"Password",value:e.yuubinsya.password,onChange:n=>{e.onChange({...e.yuubinsya,password:n})}})]}),X=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.a9,{label:"Host",value:e.protocol.host,onChange:n=>{e.onChange({...e.protocol,host:n})}}),(0,s.jsx)(b.Vx,{label:"Control",type:y.JM,value:e.protocol.control,onChange:n=>{e.onChange({...e.protocol,control:n})}})]}),J=e=>{let n=(0,l.useContext)(j.u),{data:a,error:u,isLoading:d,isValidating:h,mutate:v}=(0,x.Ay)(""===e.name?void 0:(0,m.cY)(C.mz.method.get),(0,m.AD)(C.mz.method.get,(0,t.v)(r.g8,{value:e.name}),e.isNew?(0,t.v)(y.Zq,{name:e.name,enabled:!1}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});return(0,l.useEffect)(()=>{v()},[e.name,e.isNew,v]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.A,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},centered:!0,children:[(0,s.jsx)(c.A.Header,{children:(0,s.jsx)(c.A.Title,{id:"contained-modal-title-vcenter",children:e.name})}),(0,s.jsx)(c.A.Body,{children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h4",{className:"text-center my-2",children:[u.code," - ",u.msg]}),(0,s.jsx)("pre",{className:"text-center my-2 text-danger lead",children:u.raw})]}):h||d||!a?(0,s.jsx)(g.A,{}):(0,s.jsx)(M,{inbound:a,onChange:e=>{v((0,o.o)(y.Zq,e),!1)}})}),(0,s.jsxs)(c.A.Footer,{children:[(0,s.jsx)(i.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,s.jsx)(i.A,{variant:"outline-primary",onClick:()=>{a.name=e.name,(0,m.kP)(C.mz.method.save,a).then(async a=>{let{error:s}=a;if(void 0===s)n.Info("save successful"),v(),e.onHide(!0);else{let e=s.msg;n.Error(e),console.error(s.code,e)}})},children:"Save"})]})]})})},Q=function(){var e;let n=(0,l.useContext)(j.u),{data:a,error:o,isLoading:c,mutate:x}=(0,m.mp)(C.mz.method.list),[y,k]=(0,l.useState)(!1),[A,w]=(0,l.useState)({show:!1,name:"",new:!1}),[N,f]=(0,l.useState)({value:""});if(void 0!==o)return(0,s.jsx)(g.$,{statusCode:o.code,title:o.msg});if(c||void 0===a)return(0,s.jsx)(g.A,{});let F=e=>{(0,m.kP)(C.mz.method.remove,(0,t.v)(r.g8,{value:e})).then(async e=>{let{error:a}=e;if(void 0===a)n.Info("remove successful"),x();else{let e=a.msg;n.Error(e),console.error(a.code,e)}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J,{show:A.show,name:A.name,onHide:e=>{e&&x(),w({...A,show:!1})},isNew:A.new}),(0,s.jsxs)(u.A,{children:[(0,s.jsxs)(u.A.Body,{children:[(0,s.jsx)(b.$d,{label:"DNS Hijack",checked:a.hijackDns,onChange:()=>{x({...a,hijackDns:!a.hijackDns},!1)}}),(0,s.jsx)(b.$d,{label:"Fakedns",checked:a.hijackDnsFakeip,onChange:()=>{x({...a,hijackDnsFakeip:!a.hijackDnsFakeip},!1)}}),(0,s.jsx)(b.$d,{label:"Sniff",checked:null!==(e=a.sniff)&&void 0!==e&&!!e.enabled,onChange:()=>x({...a,sniff:{...a.sniff,enabled:!a.sniff.enabled}},!1)})]}),(0,s.jsx)(u.A.Footer,{className:"d-flex justify-content-end",children:(0,s.jsxs)(i.A,{variant:"outline-primary",disabled:y,onClick:()=>{k(!0),(0,m.kP)(C.mz.method.apply,a).then(async e=>{let{error:a}=e;if(void 0===a)n.Info("save hosts successful");else{let e=a.msg;n.Error(e),console.error(a.code,e)}x(),k(!1)})},children:["Save",y&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(d.A,{size:"sm",animation:"border"})]})]})})]}),(0,s.jsxs)(u.A,{className:"mt-3",children:[0===a.names.length&&(0,s.jsxs)(u.A.Body,{children:[(0,s.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"}),"  "]}),0!==a.names.length&&(0,s.jsx)(h.A,{variant:"flush",style:{borderBottom:"none"},children:a.names.sort((e,n)=>e<=n?-1:1).map((e,n)=>(0,s.jsx)(l.Fragment,{children:(0,s.jsxs)(h.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:n=>{n.stopPropagation(),w({show:!0,name:e,new:!1})},children:[e,(0,s.jsx)(i.A,{variant:"outline-danger",size:"sm",as:"span",onClick:n=>{n.stopPropagation(),F(e)},children:(0,s.jsx)("i",{className:"bi bi-x-lg"})},n+"span-button")]})},"inbounds-"+n))}),(0,s.jsx)(u.A.Footer,{children:(0,s.jsxs)(v.A,{className:"d-flex justify-content-end",children:[(0,s.jsx)(p.A.Control,{value:N.value,onChange:e=>f({value:e.target.value})}),(0,s.jsxs)(i.A,{variant:"outline-success",onClick:()=>{!N.value||a.names.includes(N.value)||(A.name===N.value&&A.new?w(e=>({...e,show:!0})):w({show:!0,name:N.value,new:!0}))},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}},4784:(e,n,a)=>{Promise.resolve().then(a.bind(a,1637))}},e=>{var n=n=>e(e.s=n);e.O(0,[9279,9322,180,3779,5453,2362,2765,5402,1034,9631,626,6878,7605,8441,1684,7358],()=>n(4784)),_N_E=e.O()}]);