(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{4784:(e,n,s)=>{Promise.resolve().then(s.bind(s,1404))},2859:(e,n,s)=>{"use strict";s.d(n,{$:()=>o});var a=s(5155),t=s(6180),r=s(6121),l=s(3667);let o=e=>{let{label:n,checked:s,onChange:o}=e;return(0,a.jsxs)(t.A.Group,{as:r.A,className:"mb-2",children:[(0,a.jsx)(t.A.Label,{column:!0,sm:2,children:n}),(0,a.jsx)(l.A,{sm:10,className:"d-flex align-items-center",children:(0,a.jsx)(t.A.Check,{className:"d-flex align-items-center",type:"switch",checked:s,onChange:e=>o(e.target.checked)})})]})}},148:(e,n,s)=>{"use strict";s.d(n,{u:()=>o,y:()=>i});var a=s(5155),t=s(2115),r=s(1757),l=s(491);let o=(0,t.createContext)({Info:e=>{},Error:e=>{}}),i=e=>{let{children:n}=e,[s,i]=(0,t.useState)([]),c=(e,n)=>i(s=>[...s,{text:e,type:n}]);return(0,a.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,a.jsx)(r.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:s.map((e,n)=>(0,a.jsxs)(l.A,{role:"alert","aria-live":"assertive",show:!0,bg:e.type,onClose:()=>{i(e=>[...e.slice(0,n),...e.slice(n+1)])},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,a.jsxs)(l.A.Header,{children:[(0,a.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,a.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,a.jsx)(l.A.Body,{className:"text-center",children:e.text})]},"toast"+n))}),n]})}},1404:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>J});var a=s(5155),t=s(3577),r=s(950),l=s(1936),o=s(5554),i=s.n(o),c=s(2115),u=s(0),d=s(2963),h=s(2981),v=s(57),x=s(8003),m=s(6180),g=s(4995),p=s(9169),b=s(8927),j=s(148),C=s(6863),y=s(7641),A=s(6121),f=s(3667),w=s(2859),k=s(7204),N=s(2273);let F=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{label:"Username",value:e.http.username,onChange:n=>e.onChange({...e.http,username:n})}),(0,a.jsx)(k.a9,{label:"Password",value:e.http.password,onChange:n=>e.onChange({...e.http,password:n})})]})),S=c.memo(e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(k.a9,{label:"Url",value:e.reverse_http.url,onChange:n=>e.onChange({...e.reverse_http,url:n})})})),E=c.memo(e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(k.a9,{label:"Host",value:e.reverse_tcp.host,onChange:n=>e.onChange({...e.reverse_tcp,host:n})})})),I=c.memo(e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(k.a9,{label:"Host",value:e.redir.host,onChange:n=>e.onChange({...e.redir,host:n})})})),H=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{label:"DNS Hijacking",checked:e.tproxy.dnsHijacking,onChange:()=>e.onChange({...e.tproxy,dnsHijacking:!e.tproxy.dnsHijacking})}),(0,a.jsx)(w.$,{label:"Force Fake IP",checked:e.tproxy.forceFakeip,onChange:()=>e.onChange({...e.tproxy,forceFakeip:!e.tproxy.forceFakeip})}),(0,a.jsx)(k.a9,{label:"Host",value:e.tproxy.host,onChange:n=>e.onChange({...e.tproxy,host:n})})]})),P=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{label:"Username",value:e.socks5.username,onChange:n=>e.onChange({...e.socks5,username:n})}),(0,a.jsx)(k.a9,{label:"Password",value:e.socks5.password,onChange:n=>e.onChange({...e.socks5,password:n})})]})),B=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{label:"Username",value:e.mixed.username,onChange:n=>e.onChange({...e.mixed,username:n})}),(0,a.jsx)(k.a9,{label:"Password",value:e.mixed.password,onChange:n=>e.onChange({...e.mixed,password:n})})]})),D=c.memo(e=>{var n,s;let[r,l]=(0,c.useState)((0,N.fj)(e.tun.postUp)),[o,i]=(0,c.useState)((0,N.fj)(e.tun.postDown));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{checked:e.tun.skipMulticast,onChange:()=>e.onChange({...e.tun,skipMulticast:!e.tun.skipMulticast}),label:"Skip Multicast"}),(0,a.jsx)(k.a9,{label:"Name",value:e.tun.name,onChange:n=>e.onChange({...e.tun,name:n})}),(0,a.jsx)(k.a9,{label:"MTU",value:e.tun.mtu,onChange:n=>{isNaN(Number(n))||e.onChange({...e.tun,mtu:Number(n)})}}),(0,a.jsx)(k.a9,{label:"IPv4",value:e.tun.portal,onChange:n=>e.onChange({...e.tun,portal:n})}),(0,a.jsx)(k.a9,{label:"IPv6",value:e.tun.portalV6,onChange:n=>e.onChange({...e.tun,portalV6:n})}),(0,a.jsx)(k.a9,{label:"Post Up",value:r,onChange:n=>{l(n);try{let s=(0,N.lD)(n);e.onChange({...e.tun,postUp:s})}catch(e){console.log(e)}}}),(0,a.jsx)(k.a9,{label:"Post Down",value:o,onChange:n=>{i(n);try{let s=(0,N.lD)(n);e.onChange({...e.tun,postDown:s})}catch(e){console.log(e)}}}),(0,a.jsx)(function(e){return(0,a.jsxs)(m.A.Group,{as:A.A,className:"mb-3",children:[(0,a.jsx)(m.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(f.A,{sm:10,children:(0,a.jsxs)(m.A.Select,{value:y.xz[void 0===e.value||null===e.value?y.xz.fdbased:e.value],onChange:n=>e.onChange(y.xz[n.target.value]),children:[(0,a.jsx)("option",{value:y.xz[y.xz.fdbased],children:"Fdbased"}),(0,a.jsx)("option",{value:y.xz[y.xz.channel],children:"Channel"}),(0,a.jsx)("option",{value:y.xz[y.xz.system_gvisor],children:"System"})]})})]})},{label:"Stack",value:e.tun.driver,onChange:n=>e.onChange({...e.tun,driver:n})}),(0,a.jsx)(k.e9,{title:"Routes",data:null!==(s=null===(n=e.tun.route)||void 0===n?void 0:n.routes)&&void 0!==s?s:[],onChange:n=>{let s={...e.tun};s.route||(s.route=(0,t.v)(y.l,{})),n||(n=[]),s.route&&(s.route.routes=n),e.onChange({...s})}})]})}),G=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.jU,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:n=>e.onChange({...e.cert,cert:new TextEncoder().encode(n)})}),(0,a.jsx)(k.jU,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:n=>e.onChange({...e.cert,key:new TextEncoder().encode(n)})}),(0,a.jsx)(k.a9,{label:"Cert File",value:e.cert.certFilePath,onChange:n=>e.onChange({...e.cert,certFilePath:n})}),(0,a.jsx)(k.a9,{label:"Key File",value:e.cert.keyFilePath,onChange:n=>e.onChange({...e.cert,keyFilePath:n})})]})),U=c.memo(e=>{var n,s;let[r,l]=(0,c.useState)("www.example.com");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.e9,{title:"Next Protos",data:null!==(s=null===(n=e.tls)||void 0===n?void 0:n.nextProtos)&&void 0!==s?s:[],onChange:n=>e.onChange({...e.tls,nextProtos:n})}),e.tls&&e.tls.certificates.map((n,s)=>(0,a.jsx)(h.A,{className:"mb-2",children:(0,a.jsxs)(h.A.Body,{children:[(0,a.jsx)(h.A.Title,{className:"d-flex justify-content-end align-items-center",children:(0,a.jsx)(d.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.tls,certificates:e.tls.certificates.filter((e,n)=>n!==s)}),children:(0,a.jsx)("i",{className:"bi bi-x-lg"})})}),(0,a.jsx)(G,{cert:(0,t.v)(y.f6,n),onChange:n=>{e.onChange({...e.tls,certificates:[...e.tls.certificates.slice(0,s),n,...e.tls.certificates.slice(s+1)]})}})]})},"tls_certificates"+s)),(0,a.jsx)(x.A,{className:"d-flex justify-content-end mb-2",children:(0,a.jsxs)(d.A,{variant:"outline-success",onClick:()=>e.onChange({...e.tls,certificates:[...e.tls.certificates,(0,t.v)(y.f6,{cert:new Uint8Array(0),key:new Uint8Array(0),certFilePath:"",keyFilePath:""})]}),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.serverNameCertificate&&Object.entries(e.tls.serverNameCertificate).map(n=>{let[s,r]=n;return(0,a.jsx)(h.A,{className:"mb-2",children:(0,a.jsxs)(h.A.Body,{children:[(0,a.jsxs)(h.A.Title,{className:"d-flex justify-content-between align-items-center",children:[s,(0,a.jsx)(d.A,{variant:"outline-danger",onClick:()=>{let n={...e.tls.serverNameCertificate};delete n[s],e.onChange({...e.tls,serverNameCertificate:n})},children:(0,a.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,a.jsx)(G,{cert:(0,t.v)(y.f6,r),onChange:n=>{e.onChange({...e.tls,serverNameCertificate:{...e.tls.serverNameCertificate,[s]:n}})}})]})},"server_name_certificate"+s)}),(0,a.jsxs)(x.A,{className:"d-flex justify-content-end",children:[(0,a.jsx)(m.A.Control,{value:r,onChange:e=>l(e.target.value)}),(0,a.jsxs)(d.A,{variant:"outline-success",onClick:()=>{r&&e.onChange({...e.tls,serverNameCertificate:{...e.tls.serverNameCertificate,[r]:(0,t.v)(y.f6,{})}})},children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),W=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{label:"Host",onChange:n=>e.onChange({...e.quic,host:n}),value:e.quic.host}),e.quic.tls&&(0,a.jsx)(U,{tls:(0,t.v)(y.Qi,null!==e.quic.tls?e.quic.tls:void 0),onChange:n=>e.onChange({...e.quic,tls:n})})]})),R=c.memo(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,a.jsx)(U,{tls:(0,t.v)(y.Qi,e.tls.tls),onChange:n=>e.onChange({...e.tls,tls:n})})]})),Z=c.memo(e=>{let[n,s]=(0,c.useState)({value:""}),[t,r]=(0,c.useState)({value:""});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,a.jsx)(k.a9,{label:"Dest",value:e.reality.dest,onChange:n=>e.onChange({...e.reality,dest:n})}),(0,a.jsx)(k.a9,{label:"Private Key",value:e.reality.privateKey,onChange:n=>e.onChange({...e.reality,privateKey:n})}),(0,a.jsxs)(m.A.Group,{as:A.A,className:"mb-3",children:[(0,a.jsx)(m.A.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.shortId.map((n,s)=>(0,a.jsx)(f.A,{sm:{span:10,offset:0!==s?2:0},children:(0,a.jsxs)(x.A,{className:"mb-2",children:[(0,a.jsx)(m.A.Control,{value:n,onChange:n=>e.onChange({...e.reality,shortId:[...e.reality.shortId.slice(0,s),n.target.value,...e.reality.shortId.slice(s+1)]})}),(0,a.jsx)(d.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.reality,shortId:[...e.reality.shortId.slice(0,s),...e.reality.shortId.slice(s+1)]}),children:(0,a.jsx)("i",{className:"bi bi-x-lg"})})]})},s)),(0,a.jsx)(f.A,{sm:{span:10,offset:0!==e.reality.shortId.length?2:0},children:(0,a.jsxs)(x.A,{className:"mb-2",children:[(0,a.jsx)(m.A.Control,{value:n.value,onChange:e=>s({value:e.target.value})}),(0,a.jsx)(d.A,{variant:"outline-success",onClick:()=>e.onChange({...e.reality,shortId:[...e.reality.shortId,n.value]}),children:(0,a.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,a.jsxs)(m.A.Group,{as:A.A,className:"mb-3",children:[(0,a.jsx)(m.A.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.serverName.map((n,s)=>(0,a.jsx)(f.A,{sm:{span:10,offset:0!==s?2:0},children:(0,a.jsxs)(x.A,{className:"mb-2",children:[(0,a.jsx)(m.A.Control,{value:n,onChange:n=>e.onChange({...e.reality,serverName:[...e.reality.serverName.slice(0,s),n.target.value,...e.reality.serverName.slice(s+1)]})}),(0,a.jsx)(d.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.reality,serverName:[...e.reality.serverName.slice(0,s),...e.reality.serverName.slice(s+1)]}),children:(0,a.jsx)("i",{className:"bi bi-x-lg"})})]})},s)),(0,a.jsx)(f.A,{sm:{span:10,offset:0!==e.reality.serverName.length?2:0},children:(0,a.jsxs)(x.A,{className:"mb-2",children:[(0,a.jsx)(m.A.Control,{value:t.value,onChange:e=>r({value:e.target.value})}),(0,a.jsx)(d.A,{variant:"outline-success",onClick:()=>e.onChange({...e.reality,serverName:[...e.reality.serverName,t.value]}),children:(0,a.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})}),Y=e=>{let[n,s]=(0,c.useState)({value:"normal"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{e.onChange({...e.inbound,enabled:!e.inbound.enabled})}}),(0,a.jsx)(k.a9,{label:"Name",value:e.inbound.name,onChange:n=>{e.onChange({...e.inbound,name:n})}}),(0,a.jsx)(k.mc,{title:"Network",hideClose:!0,children:(0,a.jsx)(V,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})}),(0,a.jsx)(k.mc,{title:"Transport",hideClose:!0,children:(0,a.jsxs)(a.Fragment,{children:[e.inbound.transport.map((n,s)=>{var t,r;return(0,a.jsx)(k.mc,{title:null!==(r=null===(t=n.transport.case)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",onClose:()=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,s),...e.inbound.transport.slice(s+1)]})},moveUpDown:new k.fH(e.inbound.transport,s,n=>e.onChange({...e.inbound,transport:n})),children:(0,a.jsx)(Q,{transport:n,onChange:n=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,s),n,...e.inbound.transport.slice(s+1)]})}},s)},s)}),(0,a.jsx)(v.A,{variant:"flush",children:(0,a.jsx)(v.A.Item,{children:(0,a.jsxs)(x.A,{children:[(0,a.jsx)(m.A.Select,{value:n.value,onChange:e=>s({value:e.target.value}),children:["normal","tls","mux","http2","websocket","grpc","reality"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsxs)(d.A,{variant:"outline-success",onClick:()=>{let s={...e.inbound};switch(n.value){case"normal":s.transport.push((0,t.v)(y.ls,{transport:{case:"normal",value:(0,t.v)(y.Rc,{})}}));break;case"tls":s.transport.push((0,t.v)(y.ls,{transport:{case:"tls",value:(0,t.v)(y.fx,{tls:(0,t.v)(y.Qi,{})})}}));break;case"mux":s.transport.push((0,t.v)(y.ls,{transport:{case:"mux",value:(0,t.v)(y.gE,{})}}));break;case"http2":s.transport.push((0,t.v)(y.ls,{transport:{case:"http2",value:(0,t.v)(y.ql,{})}}));break;case"websocket":s.transport.push((0,t.v)(y.ls,{transport:{case:"websocket",value:(0,t.v)(y.BP,{})}}));break;case"grpc":s.transport.push((0,t.v)(y.ls,{transport:{case:"grpc",value:(0,t.v)(y.E_,{})}}));break;case"reality":s.transport.push((0,t.v)(y.ls,{transport:{case:"reality",value:(0,t.v)(y.K0,{})}}))}e.onChange(s)},children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,a.jsx)(k.mc,{title:"Protocol",hideClose:!0,children:(0,a.jsx)(T,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})})]})},V=e=>{var n,s;let[r,l]=(0,c.useState)({value:null!==(s=null===(n=e.inbound.network.case)||void 0===n?void 0:n.toString())&&void 0!==s?s:"tcpudp"});return(0,c.useEffect)(()=>{l({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{variant:"flush",children:(0,a.jsx)(v.A.Item,{children:(0,a.jsxs)(x.A,{children:[(0,a.jsx)(m.A.Select,{value:r.value,onChange:e=>l({value:e.target.value}),children:["empty","tcpudp","quic"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)(d.A,{variant:"outline-success",onClick:()=>{let n={...e.inbound};switch(r.value){case"tcpudp":n.network={case:"tcpudp",value:(0,t.v)(y.as,{})};break;case"quic":n.network={case:"quic",value:(0,t.v)(y.sn,{})};break;case"empty":n.network={case:"empty",value:(0,t.v)(y.bN,{})}}e.onChange({...n})},children:"Use"})]})})}),(0,a.jsx)("br",{}),(0,a.jsx)(z,{inbound:e.inbound,onChange:e.onChange})]})},z=e=>{switch(e.inbound.network.case){case"tcpudp":return(0,a.jsx)(K,{protocol:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"tcpudp",value:n}})}});case"quic":return(0,a.jsx)(W,{quic:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"quic",value:n}})}});case"empty":return(0,a.jsx)(a.Fragment,{})}},Q=e=>{switch(e.transport.transport.case){case"normal":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,a.jsx)(R,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tls",value:n}})}});case"mux":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,a.jsx)(Z,{reality:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"reality",value:n}})}})}},L=e=>{switch(e.inbound.protocol.case){case"http":return(0,a.jsx)(F,{http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"http",value:n}})}});case"reverseHttp":return(0,a.jsx)(S,{reverse_http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseHttp",value:n}})}});case"reverseTcp":return(0,a.jsx)(E,{reverse_tcp:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseTcp",value:n}})}});case"socks5":return(0,a.jsx)(P,{socks5:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"socks5",value:n}})}});case"socks4a":return(0,a.jsx)(a.Fragment,{});case"mix":return(0,a.jsx)(B,{mixed:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"mix",value:n}})}});case"redir":return(0,a.jsx)(I,{redir:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"redir",value:n}})}});case"tun":return(0,a.jsx)(D,{tun:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tun",value:n}})}});case"yuubinsya":return(0,a.jsx)(q,{yuubinsya:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"yuubinsya",value:n}})}});case"tproxy":return(0,a.jsx)(H,{tproxy:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tproxy",value:n}})}})}},T=e=>{let[n,s]=(0,c.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,c.useEffect)(()=>{s({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{variant:"flush",children:(0,a.jsx)(v.A.Item,{children:(0,a.jsxs)(x.A,{children:[(0,a.jsx)(m.A.Select,{value:n.value,onChange:e=>s({value:e.target.value}),children:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)(d.A,{variant:"outline-success",onClick:()=>{let s={...e.inbound};switch(n.value){case"http":s.protocol={case:"http",value:(0,t.v)(y.UM,{})};break;case"reverseHttp":s.protocol={case:"reverseHttp",value:(0,t.v)(y.l0,{})};break;case"reverseTcp":s.protocol={case:"reverseTcp",value:(0,t.v)(y.A0,{})};break;case"socks5":s.protocol={case:"socks5",value:(0,t.v)(y.AK,{})};break;case"mix":s.protocol={case:"mix",value:(0,t.v)(y.JX,{})};break;case"redir":s.protocol={case:"redir",value:(0,t.v)(y.Q9,{})};break;case"tun":s.protocol={case:"tun",value:(0,t.v)(y.vC,{})};break;case"yuubinsya":s.protocol={case:"yuubinsya",value:(0,t.v)(y.lA,{})};break;case"tproxy":s.protocol={case:"tproxy",value:(0,t.v)(y.SL,{})}}e.onChange({...s})},children:"Use"})]})})}),(0,a.jsx)("br",{}),(0,a.jsx)(L,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})]})},q=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{label:"TCP Encrypt",checked:e.yuubinsya.tcpEncrypt,onChange:()=>{e.onChange({...e.yuubinsya,tcpEncrypt:!e.yuubinsya.tcpEncrypt})}}),(0,a.jsx)(w.$,{label:"UDP Encrypt",checked:e.yuubinsya.udpEncrypt,onChange:()=>{e.onChange({...e.yuubinsya,udpEncrypt:!e.yuubinsya.udpEncrypt})}}),(0,a.jsx)(k.a9,{label:"Password",value:e.yuubinsya.password,onChange:n=>{e.onChange({...e.yuubinsya,password:n})}})]}),K=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.a9,{label:"Host",value:e.protocol.host,onChange:n=>{e.onChange({...e.protocol,host:n})}}),(0,a.jsx)(M,{label:"Control",type:y.JM,value:e.protocol.control,onChange:n=>{e.onChange({...e.protocol,control:n})}})]});function M(e){var n;return(0,a.jsxs)(m.A.Group,{as:A.A,className:"mb-3",children:[(0,a.jsx)(m.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(f.A,{sm:10,children:(0,a.jsx)(m.A.Select,{value:e.value,onChange:n=>e.onChange(Number(n.target.value)),children:e.type.values.filter(null!==(n=e.filter)&&void 0!==n?n:()=>!0).map(e=>(0,a.jsx)("option",{value:e.number,children:e.name},e.number))})})]})}let _=e=>{let n=(0,c.useContext)(j.u),{data:s,error:o,isLoading:i,isValidating:h,mutate:v}=(0,g.Ay)(""===e.name?void 0:"/inbound",(0,b.AD)(C.mz.method.get,"POST",(0,t.v)(l.g8,{value:e.name}),e.isNew?(0,t.v)(y.Zq,{name:e.name,enabled:!1}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});return(0,c.useEffect)(()=>{v()},[e.name,e.isNew]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u.A,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},centered:!0,children:[(0,a.jsx)(u.A.Header,{children:(0,a.jsx)(u.A.Title,{id:"contained-modal-title-vcenter",children:e.name})}),(0,a.jsx)(u.A.Body,{children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h4",{className:"text-center my-2",children:[o.code," - ",o.msg]}),(0,a.jsx)("pre",{className:"text-center my-2 text-danger lead",children:o.raw})]}):h||i||!s?(0,a.jsx)(p.A,{}):(0,a.jsx)(Y,{inbound:s,onChange:e=>{v((0,r.o)(y.Zq,e),!1)}})}),(0,a.jsxs)(u.A.Footer,{children:[(0,a.jsx)(d.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,a.jsx)(d.A,{variant:"outline-primary",onClick:()=>{(0,b.kP)(C.mz.method.save,"/inbound","PATCH",s).then(async s=>{let{error:a}=s;if(void 0===a)n.Info("save successful"),e.onHide(!0);else{let e=a.msg;n.Error(e),console.error(a.code,e)}})},children:"Save"})]})]})})},J=function(){let e=(0,c.useContext)(j.u),{data:n,error:s,isLoading:r,mutate:o}=(0,g.Ay)("/inbounds",(0,b.AD)(C.mz.method.list)),[u,y]=(0,c.useState)({show:!1,name:"",new:!1}),[A,f]=(0,c.useState)({value:""});if(void 0!==s)return(0,a.jsx)(i(),{statusCode:s.code,title:s.msg});if(r||void 0===n)return(0,a.jsx)(p.A,{});let w=n=>{(0,b.kP)(C.mz.method.remove,"/inbound","DELETE",(0,t.v)(l.g8,{value:n})).then(async n=>{let{error:s}=n;if(void 0===s)e.Info("remove successful"),o();else{let n=s.msg;e.Error(n),console.error(s.code,n)}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{show:u.show,name:u.name,onHide:e=>{e&&o(),y({...u,show:!1})},isNew:u.new}),(0,a.jsxs)(h.A,{children:[0===n.names.length&&(0,a.jsxs)(h.A.Body,{children:[(0,a.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"}),"  "]}),0!==n.names.length&&(0,a.jsx)(v.A,{variant:"flush",children:n.names.sort((e,n)=>e<=n?-1:1).map((e,n)=>(0,a.jsx)(c.Fragment,{children:(0,a.jsxs)(v.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:n=>{n.stopPropagation(),y({show:!0,name:e,new:!1})},children:[e,(0,a.jsx)(d.A,{variant:"outline-danger",size:"sm",as:"span",onClick:n=>{n.stopPropagation(),w(e)},children:(0,a.jsx)("i",{className:"bi bi-x-lg"})},n+"span-button")]})},"inbounds-"+n))}),(0,a.jsx)(h.A.Footer,{children:(0,a.jsxs)(x.A,{className:"d-flex justify-content-end",children:[(0,a.jsx)(m.A.Control,{value:A.value,onChange:e=>f({value:e.target.value})}),(0,a.jsxs)(d.A,{variant:"outline-success",onClick:()=>{!A.value||n.names.includes(A.value)||(u.name===A.value&&u.new?y(e=>({...e,show:!0})):y({show:!0,name:A.value,new:!0}))},children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}},2273:(e,n)=>{"use strict";class s{constructor(e){this.i=0,this.string=e,this.whitespace=" 	\r\n",this.quotes="'\"",this.escapes="\\",this.escapedQuotes='"',this.ansiCQuotes=!0,this.localeQuotes=!0,this.debug=!1}readChar(){return this.string.charAt(this.i++)}processEscapes(e,n,s){if(!s&&!this.escapedQuotes.includes(n))return e;let a="["+this.escapes.replace(/(.)/g,"\\$1")+"]";if(!s&&this.escapedQuotes.includes(n)){let s=RegExp(a+"("+a+"|\\"+n+")","g");return e.replace(s,"$1")}if(s){let n={"([\\\\'\"?])":e=>e,a:()=>"\x07",b:()=>"\b","e|E":()=>"\x1b",f:()=>"\f",n:()=>"\n",r:()=>"\r",t:()=>"	",v:()=>"\v","([0-7]{1,3})":e=>String.fromCharCode(parseInt(e,8)),"x([0-9a-fA-F]{1,2})":e=>String.fromCharCode(parseInt(e,16)),"u([0-9a-fA-F]{1,4})":e=>String.fromCharCode(parseInt(e,16)),"U([0-9a-fA-F]{1,8})":e=>String.fromCharCode(parseInt(e,16)),"c(.)":e=>"?"===e?"\x7f":"@"===e?"\0":String.fromCharCode(31&e.charCodeAt(0))},s=RegExp(a+"("+Object.keys(n).join("|")+")","g");return e.replace(s,function(e,s){for(let e in n){let a=RegExp("^"+e+"$").exec(s);if(null!==a)return n[e].apply(null,a.slice(1))}})}}*[Symbol.iterator](){let e,n=!1,s=!1,a=!1,t=-2;for(this.debug&&console.log("full input:",">"+this.string+"<");;){let r=this.i,l=this.readChar();if(this.debug&&console.log("position:",r,"input:",">"+l+"<","accumulated:",e,"inQuote:",n,"inDollarQuote:",s,"lastDollar:",t,"escaped:",a),""===l){if(n)throw Error("Got EOF while in a quoted string");if(a)throw Error("Got EOF while in an escape sequence");void 0!==e&&(yield e);return}if(a){"\n"===l||(e=n?(e||"")+a+l:(e||"")+l),a=!1;continue}if(this.escapes.includes(l)&&(!n||!1!==s||this.escapedQuotes.includes(n))){a=l;continue}if(!1!==n){if(l===n){e=this.processEscapes(e,n,"'"===s),n=!1,s=!1;continue}e=(e||"")+l;continue}if(this.quotes.includes(l)){n=l,t===r-1&&("'"!==l||this.ansiCQuotes)&&('"'!==l||this.localeQuotes)&&(s=l),e=e||"",!1!==s&&(e=e.slice(0,-1));continue}if(!1===n&&"$"===l&&(t=r),this.whitespace.includes(l)){void 0!==e&&(yield e),e=void 0;continue}e=(e||"")+l}}}n.lD=function(e){return Array.from(new s(e))},n.hD=function(e){return""===e?"''":/[^\w@%\-+=:,./]/.test(e)?("'"+e.replace(/('+)/g,"'\"$1\"'")+"'").replace(/^''|''$/g,""):e},n.fj=function(e){if(!Array.isArray(e))throw TypeError("args should be an array");return e.map(n.hD).join(" ")}},9537:(e,n,s)=>{"use strict";function a(e,n,...s){if(0==s.length)return e.enums[n];let t=s.pop();return s.reduce((e,n)=>e.nestedMessages[n],e.messages[n]).nestedEnums[t]}s.d(n,{R:()=>a})},9678:(e,n,s)=>{"use strict";s.d(n,{i:()=>r,w:()=>l});var a=s(6788),t=s(8123);let r=(0,a.w)("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),l=(0,t.Z)(r,0)},1936:(e,n,s)=>{"use strict";s.d(n,{Ax:()=>r,g8:()=>l});var a=s(6788),t=s(8123);let r=(0,a.w)("Ch5nb29nbGUvcHJvdG9idWYvd3JhcHBlcnMucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIcCgtEb3VibGVWYWx1ZRINCgV2YWx1ZRgBIAEoASIbCgpGbG9hdFZhbHVlEg0KBXZhbHVlGAEgASgCIhsKCkludDY0VmFsdWUSDQoFdmFsdWUYASABKAMiHAoLVUludDY0VmFsdWUSDQoFdmFsdWUYASABKAQiGwoKSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoBSIcCgtVSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoDSIaCglCb29sVmFsdWUSDQoFdmFsdWUYASABKAgiHAoLU3RyaW5nVmFsdWUSDQoFdmFsdWUYASABKAkiGwoKQnl0ZXNWYWx1ZRINCgV2YWx1ZRgBIAEoDEKDAQoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWjFnb29nbGUuZ29sYW5nLm9yZy9wcm90b2J1Zi90eXBlcy9rbm93bi93cmFwcGVyc3Bi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),l=(0,t.Z)(r,7)}},e=>{var n=n=>e(e.s=n);e.O(0,[295,375,515,920,637,354,190,922,863,441,517,358],()=>n(4784)),_N_E=e.O()}]);