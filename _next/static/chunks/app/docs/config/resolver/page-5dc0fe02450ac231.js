(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1146],{1267:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>f});var l=n(5155),t=n(960),a=n(6487),r=n(2115),o=n(6355),i=n(9056),c=n(902),d=n(8347),h=n(8054),x=n(1867),u=n(8468),m=n(9169),j=n(1754),v=n(4086),g=n(8508),A=n(2358),b=n(6835),y=n(2282),p=n(6878),C=n(3697);function f(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)(N,{})}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)(k,{})}),(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)(S,{})}),(0,l.jsx)("div",{children:(0,l.jsx)(B,{})})]})}function N(){let e=(0,r.useContext)(b.u),{data:s,error:n,isLoading:x,mutate:u}=(0,g.mp)(p.L2.method.list),[m,A]=(0,r.useState)({show:!1,name:"",new:!1}),[y,C]=(0,r.useState)({show:!1,name:""}),[f,N]=(0,r.useState)({value:""});if(void 0!==n)return(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.$,{statusCode:n.code,title:n.msg})})});if(x||void 0===s)return(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.A,{})})});let k=s=>{(0,g.kP)(p.L2.method.remove,(0,t.v)(a.g8,{value:s})).then(async s=>{let{error:n}=s;if(void 0===n)e.Info("remove successful"),u();else{let s=n.msg;e.Error(s),console.error(n.code,s)}})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.u,{show:y.show,content:(0,l.jsxs)(l.Fragment,{children:["Are you sure to delete ",y.name,"?"]}),onOk:()=>{k(y.name),C(e=>({...e,show:!1}))},onHide:()=>{C(e=>({...e,show:!1}))}}),(0,l.jsx)(w,{name:m.name,show:m.show,isNew:m.new,onHide:e=>{e&&u(),A(e=>({...e,show:!1}))}}),(0,l.jsxs)(o.A,{children:[0!==s.names.length&&(0,l.jsx)(i.A,{variant:"flush",style:{borderBottom:"none"},children:s.names.sort((e,s)=>e<=s?-1:1).map((e,s)=>(0,l.jsx)(r.Fragment,{children:(0,l.jsxs)(i.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:s=>{s.stopPropagation(),A({show:!0,name:e,new:!1})},children:[e,"bootstrap"!==e&&(0,l.jsx)(c.A,{variant:"outline-danger",disabled:"bootstrap"===e,size:"sm",as:"span",onClick:s=>{s.stopPropagation(),C({show:!0,name:e})},children:(0,l.jsx)("i",{className:"bi bi-x-lg"})},s+"span-button")]})},"resolvers-"+s))}),(0,l.jsx)(o.A.Footer,{children:(0,l.jsxs)(d.A,{className:"d-flex justify-content-end",children:[(0,l.jsx)(h.A.Control,{value:f.value,onChange:e=>N({value:e.target.value})}),(0,l.jsxs)(c.A,{variant:"outline-success",onClick:()=>{!f.value||s.names.includes(f.value)||(m.name===f.value&&m.new?A(e=>({...e,show:!0})):A({show:!0,name:f.value,new:!0}))},children:[(0,l.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}let k=()=>{let e=(0,r.useContext)(b.u),[s,n]=(0,r.useState)({key:"",value:""}),[t,a]=(0,r.useState)(!1),{data:i,error:u,isLoading:m,mutate:j}=(0,g.mp)(p.L2.method.hosts);return void 0!==u?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.$,{statusCode:u.code,title:u.msg})})}):m||void 0===i?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.A,{})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(o.A.Body,{children:[Object.entries(i.hosts).sort((e,s)=>{let[n]=e,[l]=s;return n>l?-1:1}).map((e,s)=>{let[n,t]=e;return(0,l.jsxs)(d.A,{className:0!==s?"mt-2":"",children:[(0,l.jsx)(h.A.Control,{readOnly:!0,value:n}),(0,l.jsx)(d.A.Text,{children:(0,l.jsx)("i",{className:"bi bi-arrow-right"})}),(0,l.jsx)(h.A.Control,{value:t,onChange:e=>j(s=>({...s,hosts:{...s.hosts,[n]:e.target.value}}),!1)}),(0,l.jsx)(c.A,{variant:"outline-danger",onClick:()=>{let e={...i.hosts};delete e[n],j({...i,hosts:e},!1)},children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+n)}),(0,l.jsxs)(d.A,{className:"mt-2",children:[(0,l.jsx)(h.A.Control,{value:s.key,onChange:e=>n({...s,key:e.target.value})}),(0,l.jsx)(d.A.Text,{children:(0,l.jsx)("i",{className:"bi bi-arrow-right"})}),(0,l.jsx)(h.A.Control,{value:s.value,onChange:e=>n({...s,value:e.target.value})}),(0,l.jsx)(c.A,{variant:"outline-success",onClick:()=>{""!==s.key&&void 0===i.hosts[s.key]&&j({...i,hosts:{...i.hosts,[s.key]:s.value}},!1)},children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})]}),(0,l.jsx)(o.A.Footer,{className:"d-flex justify-content-end",children:(0,l.jsxs)(c.A,{variant:"outline-primary",disabled:t,onClick:()=>{a(!0),(0,g.kP)(p.L2.method.save_hosts,i).then(async s=>{let{error:n}=s;if(void 0===n)e.Info("save hosts successful");else{let s=n.msg;e.Error(s),console.error(n.code,s)}j(),a(!1)})},children:["Save",t&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(x.A,{size:"sm",animation:"border"})]})]})})]})})},w=e=>{let{name:s,show:n,isNew:o,onHide:i}=e,d=(0,r.useContext)(b.u),{data:h,error:x,isLoading:j,isValidating:A,mutate:C}=(0,m.Ay)(""===s?void 0:(0,g.cY)(p.L2.method.get),(0,g.AD)(p.L2.method.get,(0,t.v)(a.g8,{value:s}),o?(0,t.v)(y.Rx,{host:"8.8.8.8",type:y.NW.udp}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});return(0,r.useEffect)(()=>{C()},[s,o,C]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.A,{show:n,onHide:i,centered:!0,children:[(0,l.jsx)(u.A.Header,{children:s}),(0,l.jsx)(u.A.Body,{children:x?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h4",{className:"text-center my-2",children:[x.code," - ",x.msg]}),(0,l.jsx)("pre",{className:"text-center my-2 text-danger lead",children:x.raw})]}):A||j||!h?(0,l.jsx)(v.A,{}):(0,l.jsx)(F,{value:h,onChange:e=>{C(e,!1)}})}),(0,l.jsxs)(u.A.Footer,{children:[(0,l.jsx)(c.A,{variant:"outline-secondary",onClick:()=>{i()},children:"Close"}),(0,l.jsx)(c.A,{variant:"outline-primary",onClick:()=>{(0,g.kP)(p.L2.method.save,(0,t.v)(p.kB,{name:s,resolver:h})).then(async e=>{let{error:s}=e;if(void 0===s)d.Info("save successful"),i(!0);else{let e=s.msg;d.Error(e),console.error(s.code,e)}})},children:"Save"})]})]})})},F=e=>{let{value:s,onChange:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.a9,{label:"Host",value:s.host,onChange:e=>n({...s,host:e})}),(0,l.jsx)(A.Vx,{label:"Type",type:y.m9,value:s.type,onChange:e=>n({...s,type:e})}),(0,l.jsx)(C.a9,{label:"Subnet",value:s.subnet,onChange:e=>n({...s,subnet:e})}),(0,l.jsx)(C.a9,{className:"",label:"SNI",value:s.tlsServername,onChange:e=>n({...s,tlsServername:e})})]})},S=()=>{let e=(0,r.useContext)(b.u),[s,n]=(0,r.useState)(!1),{data:t,error:a,isLoading:i,mutate:d}=(0,g.mp)(p.L2.method.fakedns);return void 0!==a?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.$,{statusCode:a.code,title:a.msg})})}):i||void 0===t?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.A,{})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(o.A.Body,{children:[(0,l.jsx)(A.$d,{label:"Enabled",checked:t.enabled,onChange:()=>d(e=>({...e,enabled:!e.enabled}),!1)}),(0,l.jsx)(C.a9,{label:"IPv4 Range",value:t.ipv4Range,onChange:e=>d(s=>({...s,ipv4Range:e}),!1)}),(0,l.jsx)(C.a9,{label:"IPv6 Range",value:t.ipv6Range,onChange:e=>d(s=>({...s,ipv6Range:e}),!1)}),(0,l.jsx)(C.e9,{title:"Whitelist",data:t.whitelist,onChange:e=>d(s=>({...s,whitelist:e}),!1)})]}),(0,l.jsx)(o.A.Footer,{className:"d-flex justify-content-end",children:(0,l.jsxs)(c.A,{variant:"outline-primary",disabled:s,onClick:()=>{n(!0),(0,g.kP)(p.L2.method.save_fakedns,t).then(async s=>{let{error:l}=s;if(void 0===l)e.Info("save fakedns successful");else{let s=l.msg;e.Error(s),console.error(l.code,s)}d(),n(!1)})},children:["Save",s&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(x.A,{size:"sm",animation:"border"})]})]})})]})})},B=()=>{let e=(0,r.useContext)(b.u),[s,n]=(0,r.useState)(!1),{data:t,error:a,isLoading:i,mutate:d}=(0,g.mp)(p.L2.method.server);return void 0!==a?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.$,{statusCode:a.code,title:a.msg})})}):i||void 0===t?(0,l.jsx)(o.A,{className:"align-items-center",children:(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(v.A,{})})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A,{children:[(0,l.jsx)(o.A.Body,{children:(0,l.jsx)(C.a9,{label:"Server",value:t.value,onChange:e=>d(s=>({...s,value:e}),!1)})}),(0,l.jsx)(o.A.Footer,{className:"d-flex justify-content-end",children:(0,l.jsxs)(c.A,{variant:"outline-primary",disabled:s,onClick:()=>{n(!0),(0,g.kP)(p.L2.method.save_server,t).then(async s=>{let{error:l}=s;if(void 0===l)e.Info("save server successful");else{let s=l.msg;e.Error(s),console.error(l.code,s)}d(),n(!1)})},children:["Save",s&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(x.A,{size:"sm",animation:"border"})]})]})})]})})}},1754:(e,s,n)=>{"use strict";n.d(s,{u:()=>r});var l=n(5155),t=n(8468),a=n(902);let r=e=>{let{onOk:s,content:n,show:r,onHide:o}=e;return(0,l.jsxs)(t.A,{show:r,onHide:o,centered:!0,children:[(0,l.jsx)(t.A.Body,{children:n}),(0,l.jsxs)(t.A.Footer,{children:[(0,l.jsx)(a.A,{variant:"outline-secondary",onClick:()=>{o()},children:"Cancel"}),(0,l.jsx)(a.A,{variant:"outline-danger",onClick:()=>{s(),o()},children:"OK"})]})]})}},2358:(e,s,n)=>{"use strict";n.d(s,{$d:()=>o,FX:()=>d,Vx:()=>i,no:()=>c});var l=n(5155),t=n(8054),a=n(1846),r=n(8136);let o=e=>{let{label:s,checked:n,onChange:o,className:i}=e;return(0,l.jsxs)(t.A.Group,{as:a.A,className:i,children:[(0,l.jsx)(t.A.Label,{column:!0,sm:2,children:s}),(0,l.jsx)(r.A,{sm:10,className:"d-flex align-items-center",children:(0,l.jsx)(t.A.Check,{className:"d-flex align-items-center",type:"switch",checked:n,onChange:e=>o(e.target.checked)})})]})},i=e=>{var s;let{...n}=e;return(0,l.jsxs)(t.A.Group,{as:a.A,className:n.lastElem?"":"mb-2",children:[(0,l.jsx)(t.A.Label,{column:!0,sm:2,children:n.label}),(0,l.jsx)(r.A,{sm:10,children:(0,l.jsx)(t.A.Select,{value:n.value,onChange:e=>n.onChange(Number(e.target.value)),children:n.type.values.filter(null!=(s=n.filter)?s:()=>!0).map(e=>(0,l.jsx)("option",{value:e.number,children:n.format?n.format(e.number):e.name},e.number))})})]})},c=e=>{let{label:s,values:n,onChange:o,value:i,emptyChoose:c,lastElem:d}=e;return(0,l.jsxs)(t.A.Group,{as:a.A,className:d?"":"mb-2",children:[(0,l.jsx)(t.A.Label,{column:!0,sm:2,children:s}),(0,l.jsx)(r.A,{sm:10,children:(0,l.jsxs)(t.A.Select,{value:i,onChange:e=>o(e.target.value),children:[c&&(0,l.jsx)("option",{value:"",children:"Choose..."}),n.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})})]})},d=e=>{let{values:s,onChange:n,value:a,emptyChoose:r,format:o}=e;return(0,l.jsxs)(t.A.Select,{value:a,onChange:e=>n(e.target.value),children:[r&&(0,l.jsx)("option",{value:"",children:"Choose..."}),s.map(e=>{let s="string"==typeof e?e:e[0],n="string"==typeof e?e:e[1];return(0,l.jsx)("option",{value:n,children:o?o(s):s},s)})]})}},6835:(e,s,n)=>{"use strict";n.d(s,{u:()=>o,y:()=>i});var l=n(5155),t=n(2115),a=n(9376),r=n(6215);let o=(0,t.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),i=e=>{let{children:s}=e,[n,i]=(0,t.useState)({value:{},index:0}),c=(e,s)=>i(n=>({value:{...n.value,[n.index]:{text:e,type:s}},index:n.index+1}));return(0,l.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,l.jsx)(a.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[s,n]=e;return(0,l.jsxs)(r.A,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{i(e=>{let n={...e.value};return delete n[s],{...e,value:n}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,l.jsxs)(r.A.Header,{children:[(0,l.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,l.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,l.jsx)(r.A.Body,{className:"text-center",children:n.text})]},"toast"+s)})}),s]})}},9027:(e,s,n)=>{Promise.resolve().then(n.bind(n,1267))}},e=>{var s=s=>e(e.s=s);e.O(0,[9279,9322,180,3779,5453,2362,2765,5402,5999,9631,626,6878,8441,1684,7358],()=>s(9027)),_N_E=e.O()}]);