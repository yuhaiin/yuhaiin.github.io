(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{6320:function(e,s,n){Promise.resolve().then(n.bind(n,2665))},1308:function(e,s,n){"use strict";var l=n(7437),a=n(4860),t=n(1375),r=n.n(t);s.Z=function(e){return(0,l.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,l.jsx)("div",{className:"p2",children:(0,l.jsx)(a.Z,{})})]})}},6347:function(e,s,n){"use strict";n.d(s,{P:function(){return o},t:function(){return i}});var l=n(7437),a=n(2265),t=n(8215),r=n(9023);let o=(0,a.createContext)({Info:e=>{},Error:e=>{}}),i=e=>{let{children:s}=e,[n,i]=(0,a.useState)({value:{},index:0}),c=(e,s)=>{i(n=>(n.value[n.index]={text:e,type:s},n.index++,{...n}))};return(0,l.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,l.jsx)(r.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:1},children:Object.entries(n.value).map(e=>{let[s,a]=e;return(0,l.jsxs)(t.Z,{role:"alert","aria-live":"assertive",show:!0,bg:a.type,onClose:()=>{let e=n.value;delete e[s],i({...n,value:e}),console.log("close: "+s)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,l.jsxs)(t.Z.Header,{children:[(0,l.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,l.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,l.jsx)(t.Z.Body,{className:"text-center",children:a.text})]},"toast"+s)})}),s]})}},7601:function(e,s,n){"use strict";n.d(s,{Jg:function(){return c},NZ:function(){return i},Vf:function(){return o}});var l=n(7437),a=n(733),t=n(1329),r=n(4665);let o=e=>(0,l.jsxs)(a.Z.Group,{as:t.Z,className:"mb-3",children:[(0,l.jsx)(a.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,l.jsx)(r.Z,{sm:10,children:(0,l.jsx)(a.Z.Control,{value:null!==e.value?e.value:"",plaintext:e.plaintext,onChange:s=>void 0!==e.onChange&&e.onChange(s.target.value)})})]}),i=e=>(0,l.jsxs)(a.Z.Group,{as:t.Z,className:"mb-3",children:[(0,l.jsx)(a.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,l.jsx)(r.Z,{sm:10,children:(0,l.jsx)(a.Z.Control,{as:"textarea",rows:5,value:e.value,onChange:s=>e.onChange(s.target.value)})})]}),c=e=>(0,l.jsxs)(a.Z.Group,{as:t.Z,className:"mb-3",children:[(0,l.jsx)(a.Z.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(r.Z,{sm:10,className:"d-flex align-items-center",children:(0,l.jsx)(a.Z.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},2665:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return Q}});var l=n(7437),a=n(2265),t=n(733),r=n(3518),o=n(1329),i=n(4665),c=n(4297),u=n(2988),d=n(3877),h=n(3508),v=n(7601),x=n(8640);let m=a.memo(e=>{var s,n,o,i,u,d,x,m,j,b,g,y;let[f,C]=(0,a.useState)({key:"",value:""}),_=s=>{s(e.data),e.onChange(e.data)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{label:"Server",value:e.data.server,onChange:e=>_(s=>s.server=e)}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{children:"FakeDNS"}),(0,l.jsx)(v.Jg,{label:"Enabled",checked:e.data.fakedns,onChange:()=>_(e=>e.fakedns=!e.fakedns)}),(0,l.jsx)(v.Vf,{label:"Fake IP Range",value:e.data.fakedns_ip_range,onChange:e=>_(s=>s.fakedns_ip_range=e)}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{children:"Local DNS"}),(0,l.jsx)(v.Vf,{label:"Host",value:null===(s=e.data.local)||void 0===s?void 0:s.host,onChange:e=>_(s=>{void 0!==s.local&&(s.local.host=e)})}),(0,l.jsx)(p,{label:"Type",value:null===(n=e.data.local)||void 0===n?void 0:n.type,onChange:e=>_(s=>{void 0!==s.local&&(s.local.type=e)})}),(0,l.jsx)(v.Vf,{label:"Subnet",value:null===(o=e.data.local)||void 0===o?void 0:o.subnet,onChange:e=>_(s=>{void 0!==s.local&&(s.local.subnet=e)})}),(0,l.jsx)(v.Vf,{label:"SNI",value:null===(i=e.data.local)||void 0===i?void 0:i.tls_servername,onChange:e=>_(s=>{void 0!==s.local&&(s.local.tls_servername=e)})}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{children:"Remote DNS"}),(0,l.jsx)(v.Jg,{label:"Use IP",checked:e.data.resolve_remote_domain,onChange:()=>_(e=>e.resolve_remote_domain=!e.resolve_remote_domain)}),(0,l.jsx)(v.Vf,{label:"Host",value:null===(u=e.data.remote)||void 0===u?void 0:u.host,onChange:e=>_(s=>{void 0!==s.remote&&(s.remote.host=e)})}),(0,l.jsx)(p,{label:"Type",value:null===(d=e.data.remote)||void 0===d?void 0:d.type,onChange:e=>_(s=>{void 0!==s.remote&&(s.remote.type=e)})}),(0,l.jsx)(v.Vf,{label:"Subnet",value:null===(x=e.data.remote)||void 0===x?void 0:x.subnet,onChange:e=>_(s=>{void 0!==s.remote&&(s.remote.subnet=e)})}),(0,l.jsx)(v.Vf,{label:"SNI",value:null===(m=e.data.remote)||void 0===m?void 0:m.tls_servername,onChange:e=>_(s=>{void 0!==s.remote&&(s.remote.tls_servername=e)})}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{children:"Bootstrap DNS"}),(0,l.jsx)(v.Vf,{label:"Host",value:null===(j=e.data.bootstrap)||void 0===j?void 0:j.host,onChange:e=>_(s=>{void 0!==s.bootstrap&&(s.bootstrap.host=e)})}),(0,l.jsx)(p,{label:"Type",value:null===(b=e.data.bootstrap)||void 0===b?void 0:b.type,onChange:e=>_(s=>{void 0!==s.bootstrap&&(s.bootstrap.type=e)})}),(0,l.jsx)(v.Vf,{label:"Subnet",value:null===(g=e.data.bootstrap)||void 0===g?void 0:g.subnet,onChange:e=>_(s=>{void 0!==s.bootstrap&&(s.bootstrap.subnet=e)})}),(0,l.jsx)(v.Vf,{label:"SNI",value:null===(y=e.data.bootstrap)||void 0===y?void 0:y.tls_servername,onChange:e=>_(s=>{void 0!==s.bootstrap&&(s.bootstrap.tls_servername=e)})}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{children:"Hosts"}),Object.entries(e.data.hosts).map(e=>{let[s,n]=e;return(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{readOnly:!0,value:s}),(0,l.jsx)(h.Z.Text,{children:(0,l.jsx)("i",{className:"bi bi-arrow-right"})}),(0,l.jsx)(t.Z.Control,{value:n,onChange:e=>_(n=>n.hosts[s]=e.target.value)}),(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>_(e=>delete e.hosts[s]),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+s)}),(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:f.key,onChange:e=>C({...f,key:e.target.value})}),(0,l.jsx)(h.Z.Text,{children:(0,l.jsx)("i",{className:"bi bi-arrow-right"})}),(0,l.jsx)(t.Z.Control,{value:f.value,onChange:e=>C({...f,value:e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-success",onClick:()=>{""!==f.key&&void 0===e.data.hosts[f.key]&&_(e=>e.hosts[f.key]=f.value)},children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})]})}),j=x.yE.dns.type;function p(e){return(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(i.Z,{sm:10,children:(0,l.jsxs)(t.Z.Select,{value:j[void 0===e.value||null===e.value?j.udp:e.value],onChange:s=>e.onChange(j[s.target.value]),children:[(0,l.jsx)("option",{value:j[j.udp],children:"UDP"}),(0,l.jsx)("option",{value:j[j.tcp],children:"TCP"}),(0,l.jsx)("option",{value:j[j.doh],children:"DOH"}),(0,l.jsx)("option",{value:j[j.dot],children:"DOT"}),(0,l.jsx)("option",{value:j[j.doq],children:"DOQ"}),(0,l.jsx)("option",{value:j[j.doh3],children:"DOH3"})]})})]})}let b=x.yE.bypass.mode,g=x.yE.bypass.resolve_strategy;b.bypass,b.bypass;let y=a.memo(e=>{let s={hostname:["www.example.com"],mode:b.proxy,tag:"",resolve_strategy:g.default},n=s=>{s(e.bypass),e.onChange(e.bypass)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>n(s=>s.tcp=e)}),(0,l.jsx)(C,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>n(s=>s.udp=e)}),(0,l.jsx)(v.Vf,{label:"Bypass File",value:e.bypass.bypass_file,onChange:e=>n(s=>s.bypass_file=e)}),(0,l.jsx)("hr",{}),"Custom Rules",e.bypass.custom_rule_v3.map((e,s)=>(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("hr",{}),(0,l.jsx)(f,{config:new x.yE.bypass.mode_config(e),onChange:e=>n(n=>n.custom_rule_v3[s]=e)}),(0,l.jsxs)(c.Z,{variant:"outline-danger",onClick:()=>n(e=>e.custom_rule_v3.splice(s,1)),children:[(0,l.jsx)("i",{className:"bi bi-x-lg"}),"Remove Current Rule"]})]},"custom_rule_v3"+s)),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"d-flex mb-2",children:(0,l.jsxs)(c.Z,{className:"flex-grow-1",variant:"outline-success",onClick:()=>n(e=>e.custom_rule_v3.push(s)),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})}),f=e=>{let s=s=>{s(e.config),e.onChange(e.config)},[n,r]=(0,a.useState)({value:""});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>s(s=>s.mode=e)}),(0,l.jsx)(v.Vf,{label:"Tag",value:e.config.tag,onChange:e=>s(s=>s.tag=e)}),(0,l.jsx)(_,{label:"Resolve Strategy",value:e.config.resolve_strategy,onChange:e=>s(s=>s.resolve_strategy=e)}),(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,className:"nowrap",children:"IP/DOMAIN"}),e.config.hostname.map((e,n)=>(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==n?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:e,onChange:e=>s(s=>s.hostname[n]=e.target.value)}),(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>s(e=>e.hostname.splice(n,1)),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]})},n)),(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==e.config.hostname.length?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:n.value,onChange:e=>r({value:e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-success",onClick:()=>s(e=>e.hostname.push(n.value)),children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})};function C(e){return(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(i.Z,{sm:10,children:(0,l.jsxs)(t.Z.Select,{value:b[e.value],onChange:s=>e.onChange(b[s.target.value]),children:[e.network&&(0,l.jsx)("option",{value:b[b.bypass],children:"BYPASS"}),(0,l.jsx)("option",{value:b[b.direct],children:"DIRECT"}),(0,l.jsx)("option",{value:b[b.proxy],children:"PROXY"}),(0,l.jsx)("option",{value:b[b.block],children:"BLOCK"})]})})]})}function _(e){return(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(i.Z,{sm:10,children:(0,l.jsxs)(t.Z.Select,{value:g[e.value],onChange:s=>e.onChange(g[s.target.value]),children:[(0,l.jsx)("option",{value:g[g.default],children:"default"}),(0,l.jsx)("option",{value:g[g.prefer_ipv4],children:"prefer_ipv4"}),(0,l.jsx)("option",{value:g[g.only_ipv4],children:"only_ipv4"}),(0,l.jsx)("option",{value:g[g.prefer_ipv6],children:"prefer_ipv6"}),(0,l.jsx)("option",{value:g[g.only_ipv6],children:"only_ipv6"})]})})]})}var Z=n(51);let k=a.memo(e=>{let s=s=>{s(e.http),e.onChange(e.http)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{label:"Host",value:e.http.host,onChange:e=>s(s=>s.host=e)}),(0,l.jsx)(v.Vf,{label:"Username",value:e.http.username,onChange:e=>s(s=>s.username=e)}),(0,l.jsx)(v.Vf,{label:"Password",value:e.http.password,onChange:e=>s(s=>s.password=e)})]})}),w=a.memo(e=>{let s=s=>{s(e.redir),e.onChange(e.redir)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(v.Vf,{label:"Host",value:e.redir.host,onChange:e=>s(s=>s.host=e)})})}),N=a.memo(e=>{let s=s=>{s(e.socks5),e.onChange(e.socks5)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{label:"Host",value:e.socks5.host,onChange:e=>s(s=>s.host=e)}),(0,l.jsx)(v.Vf,{label:"Username",value:e.socks5.username,onChange:e=>s(s=>s.username=e)}),(0,l.jsx)(v.Vf,{label:"Password",value:e.socks5.password,onChange:e=>s(s=>s.password=e)})]})}),E=a.memo(e=>{let s=s=>{s(e.tun),e.onChange(e.tun)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Jg,{label:"DNS Hijacking",checked:e.tun.dns_hijacking,onChange:()=>s(e=>e.dns_hijacking=!e.dns_hijacking)}),(0,l.jsx)(v.Jg,{checked:e.tun.skip_multicast,onChange:()=>s(e=>e.skip_multicast=!e.skip_multicast),label:"Skip Multicast"}),(0,l.jsx)(v.Vf,{label:"Name",value:e.tun.name,onChange:e=>s(s=>s.name=e)}),(0,l.jsx)(v.Vf,{label:"Mtu",value:e.tun.mtu,onChange:e=>s(s=>s.mtu=isNaN(Number(e))?s.mtu:Number(e))}),(0,l.jsx)(v.Vf,{label:"Gateway",value:e.tun.gateway,onChange:e=>s(s=>s.gateway=e)}),(0,l.jsx)(v.Vf,{label:"Portal",value:e.tun.portal,onChange:e=>s(s=>s.portal=e)}),(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,children:"Driver"}),(0,l.jsx)(i.Z,{sm:10,children:(0,l.jsxs)(t.Z.Select,{value:e.tun.driver,onChange:e=>s(s=>s.driver=x.yE.listener.tun.endpoint_driver[e.target.value]),children:[(0,l.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.fdbased],children:"Fdbased"}),(0,l.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.channel],children:"Channel"}),(0,l.jsx)("option",{value:x.yE.listener.tun.endpoint_driver[x.yE.listener.tun.endpoint_driver.system_gvisor],children:"System"})]})})]})]})}),S=e=>{if(null==e||void 0===e.certificates&&void 0===e.next_protos&&void 0===e.server_name_certificate)return!0},V=a.memo(e=>{let s=s=>{s(e.cert),e.onChange(e.cert)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.NZ,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:e=>s(s=>{s.cert=new TextEncoder().encode(e)})}),(0,l.jsx)(v.NZ,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:e=>s(s=>{s.key=new TextEncoder().encode(e)})}),(0,l.jsx)(v.Vf,{label:"Cert File",value:e.cert.cert_file_path,onChange:e=>s(s=>{s.cert_file_path=e})}),(0,l.jsx)(v.Vf,{label:"Key File",value:e.cert.key_file_path,onChange:e=>s(s=>{s.key_file_path=e})})]})}),P=a.memo(e=>{var s,n,u;let[d,v]=(0,a.useState)("www.example.com"),[m,j]=(0,a.useState)({value:""}),p=s=>{s(e.tls),e.onChange(e.tls)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Next Protos"}),null!==e.tls&&(null===(s=e.tls.next_protos)||void 0===s?void 0:s.map((e,s)=>(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==s?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:e,onChange:e=>p(n=>{null!==n&&void 0!==n.next_protos&&(n.next_protos[s]=e.target.value)})}),(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>p(e=>{null!==e&&void 0!==e.next_protos&&(null==e||e.next_protos.splice(s,1))}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]})},s))),(0,l.jsx)(i.Z,{sm:{span:10,offset:null!==e.tls&&(null===(n=e.tls.next_protos)||void 0===n?void 0:n.length)!==0?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:m.value,onChange:e=>j({value:e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-success",onClick:()=>p(e=>{e.next_protos.push(m.value)}),children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),null!==e.tls&&(null===(u=e.tls.certificates)||void 0===u?void 0:u.map((e,s)=>(0,l.jsx)(r.Z,{className:"mb-2",children:(0,l.jsxs)(r.Z.Body,{children:[(0,l.jsx)(r.Z.Title,{className:"d-flex justify-content-end align-items-center",children:(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>p(e=>{(null==e?void 0:e.certificates)!==void 0&&e.certificates.splice(s,1)}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})}),(0,l.jsx)(V,{cert:new x.yE.listener.certificate(e),onChange:e=>p(n=>{(null==n?void 0:n.certificates)!==void 0&&(n.certificates[s]=e)})})]})},"tls_certificates"+s))),(0,l.jsx)(h.Z,{className:"d-flex justify-content-end mb-2",children:(0,l.jsxs)(c.Z,{variant:"outline-success",onClick:()=>p(e=>{e.certificates.push({cert:new Uint8Array(0),key:new Uint8Array(0),cert_file_path:"",key_file_path:""})}),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),null!==e.tls&&void 0!==e.tls.server_name_certificate&&Object.entries(e.tls.server_name_certificate).map(e=>{let[s,n]=e;return(0,l.jsx)(r.Z,{className:"mb-2",children:(0,l.jsxs)(r.Z.Body,{children:[(0,l.jsxs)(r.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[s,(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>p(e=>{(null==e?void 0:e.server_name_certificate)!==void 0&&(null==e||delete e.server_name_certificate[s])}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,l.jsx)(V,{cert:new x.yE.listener.certificate(n),onChange:e=>p(n=>{(null==n?void 0:n.server_name_certificate)!==void 0&&(n.server_name_certificate[s]=e)})})]})},"server_name_certificate"+s)}),(0,l.jsxs)(h.Z,{className:"d-flex justify-content-end",children:[(0,l.jsx)(t.Z.Control,{value:d,onChange:e=>v(e.target.value)}),(0,l.jsxs)(c.Z,{variant:"outline-success",onClick:()=>p(e=>{""!==d&&(null==e?void 0:e.server_name_certificate)===void 0&&(e.server_name_certificate={})}),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),T=a.memo(e=>{let s=s=>{S(e.websocket.tls)&&(e.websocket.tls=void 0),s(e.websocket),e.onChange(e.websocket)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"Websocket"}),void 0!==e.websocket.tls&&(0,l.jsx)(P,{tls:new x.yE.listener.tls_config(null!==e.websocket.tls?e.websocket.tls:void 0),onChange:e=>s(s=>s.tls=e)})]})}),F=a.memo(e=>{let s=s=>{S(e.quic.tls)&&(e.quic.tls=void 0),s(e.quic),e.onChange(e.quic)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"QUIC"}),void 0!==e.quic.tls&&(0,l.jsx)(P,{tls:new x.yE.listener.tls_config(null!==e.quic.tls?e.quic.tls:void 0),onChange:e=>s(s=>s.tls=e)})]})}),I=a.memo(e=>{let s=s=>{S(e.grpc.tls)&&(e.grpc.tls=void 0),s(e.grpc),e.onChange(e.grpc)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"GRPC"}),null!==e.grpc.tls&&void 0!==e.grpc.tls&&(0,l.jsx)(P,{tls:new x.yE.listener.tls_config(e.grpc.tls),onChange:e=>s(s=>s.tls=e)})]})}),D=a.memo(e=>{let s=s=>{S(e.tls.tls)&&(e.tls.tls=void 0),s(e.tls),e.onChange(e.tls)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"TLS"}),null!==e.tls.tls&&(0,l.jsx)(P,{tls:new x.yE.listener.tls_config(e.tls.tls),onChange:e=>s(s=>s.tls=e)})]})}),O=a.memo(e=>{let s=s=>{S(e.http2.tls)&&(e.http2.tls=void 0),s(e.http2),e.onChange(e.http2)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"HTTP2"}),null!==e.http2.tls&&(0,l.jsx)(P,{tls:new x.yE.listener.tls_config(e.http2.tls),onChange:e=>s(s=>s.tls=e)})]})}),L=a.memo(e=>{let s=s=>{s(e.reality),e.onChange(e.reality)},[n,r]=(0,a.useState)({value:""}),[u,d]=(0,a.useState)({value:""});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Vf,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,l.jsx)(v.Vf,{label:"Dest",value:e.reality.dest,onChange:e=>s(s=>s.dest=e)}),(0,l.jsx)(v.Vf,{label:"Private Key",value:e.reality.private_key,onChange:e=>s(s=>s.private_key=e)}),(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.short_id.map((e,n)=>(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==n?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:e,onChange:e=>s(s=>{s.short_id[n]=e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>s(e=>{e.short_id.splice(n,1)}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]})},n)),(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==e.reality.short_id.length?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:n.value,onChange:e=>r({value:e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-success",onClick:()=>s(e=>{e.short_id.push(n.value)}),children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.server_name.map((e,n)=>(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==n?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:e,onChange:e=>s(s=>{s.server_name[n]=e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>s(e=>{e.server_name.splice(n,1)}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]})},n)),(0,l.jsx)(i.Z,{sm:{span:10,offset:0!==e.reality.server_name.length?2:0},children:(0,l.jsxs)(h.Z,{className:"mb-2",children:[(0,l.jsx)(t.Z.Control,{value:u.value,onChange:e=>d({value:e.target.value})}),(0,l.jsx)(c.Z,{variant:"outline-success",onClick:()=>s(e=>{e.server_name.push(u.value)}),children:(0,l.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})}),R=a.memo(e=>{let s=s=>{s(e.yuubinsya),e.onChange(e.yuubinsya)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v.Jg,{label:"Force Disable Encrypt",checked:e.yuubinsya.force_disable_encrypt,onChange:()=>s(e=>e.force_disable_encrypt=!e.force_disable_encrypt)}),(0,l.jsx)(v.Vf,{label:"Host",value:e.yuubinsya.host,onChange:e=>s(s=>s.host=e)}),(0,l.jsx)(v.Vf,{label:"Password",value:e.yuubinsya.password,onChange:e=>s(s=>s.password=e)}),(()=>{switch(e.yuubinsya.protocol){case"websocket":return(0,l.jsx)(T,{websocket:new x.yE.listener.websocket(e.yuubinsya.websocket),onChange:e=>s(s=>s.websocket=e)});case"quic":return(0,l.jsx)(F,{quic:new x.yE.listener.quic(e.yuubinsya.quic),onChange:e=>s(s=>s.quic=e)});case"grpc":return(0,l.jsx)(I,{grpc:new x.yE.listener.grpc(e.yuubinsya.grpc),onChange:e=>s(s=>s.grpc=e)});case"http2":return(0,l.jsx)(O,{http2:new x.yE.listener.http2(e.yuubinsya.http2),onChange:e=>s(s=>s.http2=e)});case"reality":return(0,l.jsx)(L,{reality:new x.yE.listener.reality(e.yuubinsya.reality),onChange:e=>s(s=>s.reality=e)});case"tls":return(0,l.jsx)(D,{tls:new x.yE.listener.tls(e.yuubinsya.tls),onChange:e=>s(s=>s.tls=e)})}})()]})}),H=a.memo(e=>{let s=s=>{s(e.protocol),e.onChange(e.protocol)};switch(e.protocol.protocol){case"http":return(0,l.jsx)(k,{http:new x.yE.listener.http(e.protocol.http),onChange:e=>s(s=>s.http=e)});case"socks5":return(0,l.jsx)(N,{socks5:new x.yE.listener.socks5(e.protocol.socks5),onChange:e=>s(s=>s.socks5=e)});case"redir":return(0,l.jsx)(w,{redir:new x.yE.listener.redir(e.protocol.redir),onChange:e=>s(s=>s.redir=e)});case"tun":return(0,l.jsx)(E,{tun:new x.yE.listener.tun(e.protocol.tun),onChange:e=>s(s=>s.tun=e)});case"yuubinsya":return(0,l.jsx)(R,{yuubinsya:new x.yE.listener.yuubinsya(e.protocol.yuubinsya),onChange:e=>s(s=>s.yuubinsya=e)})}return(0,l.jsx)(l.Fragment,{})}),q=a.memo(e=>{let[s,n]=(0,a.useState)({value:"http",name:""}),o=s=>{s(e.server),e.onChange(e.server)};return(0,l.jsxs)(l.Fragment,{children:[Object.entries(e.server).map(e=>{let[s,n]=e;return(0,l.jsxs)("div",{children:[(0,l.jsxs)(r.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[s,(0,l.jsx)(c.Z,{variant:"outline-danger",onClick:()=>o(e=>{delete e[s]}),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,l.jsx)(v.Jg,{label:"Enabled",checked:n.enabled,onChange:()=>o(e=>e[s].enabled=!e[s].enabled)}),(0,l.jsx)(H,{protocol:new x.yE.listener.protocol(n),onChange:e=>o(n=>n[s]=e)}),(0,l.jsx)("hr",{})]},s)}),(0,l.jsx)(r.Z,{className:"mb-2",children:(0,l.jsxs)(r.Z.Body,{children:[(0,l.jsx)(r.Z.Title,{children:"New Inbound"}),(0,l.jsx)(Z.Z,{label:"Protocol",className:"mb-2",children:(0,l.jsxs)(t.Z.Select,{value:s.value,onChange:e=>n({...s,value:e.target.value}),children:[(0,l.jsx)("option",{value:"http",children:"HTTP"}),(0,l.jsx)("option",{value:"socks5",children:"SOCKS5"}),(0,l.jsx)("option",{value:"tun",children:"TUN"}),(0,l.jsx)("option",{value:"redir",children:"Redir"}),(0,l.jsx)("option",{value:"yuubinsya",children:"Yuubinsya"}),(0,l.jsx)("option",{value:"yuubinsya-websocket",children:"Yuubinsya Websocket"}),(0,l.jsx)("option",{value:"yuubinsya-tls",children:"Yuubinsya TLS"}),(0,l.jsx)("option",{value:"yuubinsya-grpc",children:"Yuubinsya GRPC"}),(0,l.jsx)("option",{value:"yuubinsya-quic",children:"Yuubinsya QUIC"}),(0,l.jsx)("option",{value:"yuubinsya-http2",children:"Yuubinsya HTTP2"}),(0,l.jsx)("option",{value:"yuubinsya-reality",children:"Yuubinsya Reality"})]})}),(0,l.jsxs)(h.Z,{className:"d-flex justify-content-end",children:[(0,l.jsx)(t.Z.Control,{value:s.name,onChange:e=>n({...s,name:e.target.value})}),(0,l.jsxs)(c.Z,{variant:"outline-success",onClick:()=>o(e=>{console.log(s),G(e,s.name,s.value)}),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg"}),"New Inbound"]})]})]})})]})}),G=(e,s,n)=>{if(""===s||void 0!==e[s])return;let l={name:s,enabled:!1};switch(n){case"http":l.http={host:":8188",username:"",password:""};break;case"socks5":l.socks5={host:":1080",password:"",username:""};break;case"tun":l.tun={name:"tun://tun0",mtu:1500,gateway:"172.16.0.1",dns_hijacking:!0,skip_multicast:!1,driver:x.yE.listener.tun.endpoint_driver.system_gvisor,portal:"172.16.0.2"};break;case"redir":l.redir={host:":8088"};break;case"yuubinsya":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",normal:{}};break;case"yuubinsya-websocket":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",websocket:{tls:void 0}};break;case"yuubinsya-tls":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",tls:{tls:void 0}};break;case"yuubinsya-grpc":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",grpc:{tls:void 0}};break;case"yuubinsya-quic":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",quic:{tls:void 0}};break;case"yuubinsya-http2":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",http2:{tls:void 0}};break;case"yuubinsya-reality":l.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",reality:{short_id:["123456"],server_name:["www.example.com"],private_key:"",dest:"dl.google.com:443",debug:!1}};break;default:return}e[s]=new x.yE.listener.protocol(l)};var J=n(1308),U=n(6347),B=n(713),K=n(6934),Y=n(1375),A=n.n(Y);let M=x.yE.log.log_level;var Q=function(){let e=(0,a.useContext)(U.P),{data:s,error:n,isLoading:t,mutate:o}=(0,B.ZP)("/config",(0,K.PJ)(x.yE.config.setting),{revalidateOnFocus:!1});if(void 0!==n)return(0,l.jsx)(A(),{statusCode:n.code,title:n.msg});if(t||void 0===s)return(0,l.jsx)(J.Z,{});let i=e=>{o(s=>{let n=x.yE.config.setting.create(s);return e(n),n},!1)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.Z,{className:"mb-3",children:(0,l.jsxs)(r.Z.Body,{children:[(0,l.jsxs)(u.Z,{defaultActiveKey:"home",className:"mb-3",children:[(0,l.jsxs)(d.Z,{eventKey:"home",title:"Home",children:[(0,l.jsx)(v.Jg,{label:"IPv6",checked:s.ipv6,onChange:()=>o({...s,ipv6:!s.ipv6},!1)}),(0,l.jsx)(v.Vf,{label:"Network Interface",value:s.net_interface,onChange:e=>i(s=>s.net_interface=e)}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{className:"mb-2",children:"System Proxy"}),(0,l.jsx)(v.Jg,{label:"SOCKS5",checked:s.system_proxy.socks5,onChange:()=>i(e=>{var s;return e.system_proxy.socks5=!(null===(s=e.system_proxy)||void 0===s?void 0:s.socks5)})}),(0,l.jsx)(v.Jg,{label:"HTTP",checked:s.system_proxy.http,onChange:()=>i(e=>e.system_proxy.http=!e.system_proxy.http)}),(0,l.jsx)("hr",{}),(0,l.jsx)(r.Z.Title,{className:"mb-2",children:"Logcat"}),(0,l.jsx)(v.Jg,{label:"Save",checked:s.logcat.save,onChange:()=>i(e=>e.logcat.save=!e.logcat.save)}),(0,l.jsx)(W,{label:"Level",value:s.logcat.level,onChange:e=>i(s=>{s.logcat.level=e})})]}),(0,l.jsx)(d.Z,{eventKey:"bypass",title:"Bypass",children:(0,l.jsx)(y,{bypass:new x.yE.bypass.bypass_config(s.bypass),onChange:e=>i(s=>s.bypass=e)})}),(0,l.jsx)(d.Z,{eventKey:"dns",title:"DNS",children:(0,l.jsx)(m,{data:new x.yE.dns.dns_config(s.dns),onChange:e=>i(s=>s.dns=e)})}),(0,l.jsx)(d.Z,{eventKey:"inbound",title:"Inbound",children:(0,l.jsx)(q,{server:s.server.servers,onChange:e=>i(s=>s.server.servers=e)})})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("hr",{}),(0,l.jsx)(c.Z,{onClick:()=>{(0,K.Uo)("/config",{body:x.yE.config.setting.encode(s).finish()}).then(async s=>{let{error:n}=s;void 0!==n?e.Error("save config failed, ".concat(n.code,"| ").concat(await n.msg)):(e.Info("Save Config Successfully"),o())})},children:"Save"})]})]})})})};function W(e){return(0,l.jsxs)(t.Z.Group,{as:o.Z,className:"mb-3",children:[(0,l.jsx)(t.Z.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(i.Z,{sm:10,children:(0,l.jsxs)(t.Z.Select,{value:M[e.value],onChange:s=>e.onChange(M[s.target.value]),children:[(0,l.jsx)("option",{value:M[M.debug],children:"DEBUG"}),(0,l.jsx)("option",{value:M[M.info],children:"INFO"}),(0,l.jsx)("option",{value:M[M.warning],children:"WARN"}),(0,l.jsx)("option",{value:M[M.error],children:"ERROR"})]})})]})}}},function(e){e.O(0,[359,441,331,895,8,326,241,419,971,596,744],function(){return e(e.s=6320)}),_N_E=e.O()}]);