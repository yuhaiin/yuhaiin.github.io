(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{22523:(e,a,l)=>{"use strict";l.d(a,{u:()=>o});var s=l(95155),n=l(63678),c=l(36947);let o=e=>{let{onOk:a,content:l,show:o,onHide:r}=e;return(0,s.jsxs)(n.A,{show:o,onHide:r,centered:!0,children:[(0,s.jsx)(n.A.Body,{children:l}),(0,s.jsxs)(n.A.Footer,{children:[(0,s.jsx)(c.A,{variant:"outline-secondary",onClick:()=>{r()},children:"Cancel"}),(0,s.jsx)(c.A,{variant:"outline-danger",onClick:()=>{a(),r()},children:"OK"})]})]})}},28700:(e,a,l)=>{Promise.resolve().then(l.bind(l,78136))},30281:(e,a,l)=>{"use strict";l.d(a,{$d:()=>t,FX:()=>u,Vx:()=>i,no:()=>d});var s=l(95155),n=l(12115),c=l(22452),o=l(98649),r=l(62340);let t=n.memo(e=>{let{label:a,checked:l,onChange:n,className:t}=e;return(0,s.jsxs)(c.A.Group,{as:o.A,className:t,children:[(0,s.jsx)(c.A.Label,{column:!0,sm:2,children:a}),(0,s.jsx)(r.A,{sm:10,className:"d-flex align-items-center",children:(0,s.jsx)(c.A.Check,{className:"d-flex align-items-center",type:"switch",checked:l,onChange:e=>n(e.target.checked)})})]})}),i=n.memo(e=>{let{...a}=e,l=(0,n.useCallback)(e=>a.onChange(Number(e.target.value)),[a]),t=(0,n.useMemo)(()=>{var e;return a.type.values.filter(null!=(e=a.filter)?e:()=>!0)},[a.type,a.filter]);return(0,s.jsxs)(c.A.Group,{as:o.A,className:a.lastElem?"":"mb-2",children:[a.label&&(0,s.jsx)(c.A.Label,{column:!0,sm:2,children:a.label}),(0,s.jsx)(r.A,{sm:10,children:(0,s.jsxs)(c.A.Select,{value:a.value,onChange:l,children:[(0,s.jsx)(()=>a.emptyChoose?(0,s.jsx)("option",{value:"",children:"Choose..."}):(0,s.jsx)(s.Fragment,{}),{}),t.map(e=>(0,s.jsx)("option",{value:e.number,children:a.format?a.format(e.number):e.name},e.number))]})})]})}),d=n.memo(e=>{let{label:a,values:l,onChange:n,value:t,emptyChoose:i,emptyChooseName:d,lastElem:u}=e;return(0,s.jsxs)(c.A.Group,{as:o.A,className:u?"":"mb-2",children:[(0,s.jsx)(c.A.Label,{column:!0,sm:2,children:a}),(0,s.jsx)(r.A,{sm:10,children:(0,s.jsxs)(c.A.Select,{value:t,onChange:e=>n(e.target.value),children:[i&&(0,s.jsx)("option",{value:"",children:null!=d?d:"Choose..."}),l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})})]})}),u=n.memo(e=>{let{values:a,onChange:l,value:n,emptyChoose:o,format:r,emptyChooseName:t}=e;return(0,s.jsxs)(c.A.Select,{value:n,onChange:e=>l(e.target.value),children:[o&&(0,s.jsx)("option",{value:"",children:null!=t?t:"Choose..."}),a.map(e=>{let a="string"==typeof e?e:e[0],l="string"==typeof e?e:e[1];return(0,s.jsx)("option",{value:l,children:r?r(a):a},a)})]})})},51932:(e,a,l)=>{"use strict";l.d(a,{Ac:()=>t,LH:()=>r,TG:()=>i});var s=l(21863),n=l(80276),c=l(49288),o=l(20868);let r=(0,s.w)("ChBub2RlL3BvaW50LnByb3RvEg15dWhhaWluLnBvaW50IowBCgVwb2ludBIMCgRoYXNoGAEgASgJEgwKBG5hbWUYAiABKAkSDQoFZ3JvdXAYAyABKAkSJQoGb3JpZ2luGAQgASgOMhUueXVoYWlpbi5wb2ludC5vcmlnaW4SMQoJcHJvdG9jb2xzGAUgAygLMhoueXVoYWlpbi5wcm90b2NvbC5wcm90b2NvbEICKAEqLQoGb3JpZ2luEgsKB3Jlc2VydmUQABIKCgZyZW1vdGUQZRIKCgZtYW51YWwQZkI2WixnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvbm9kZZIDBdI+AhADYghlZGl0aW9uc3DoBw",[c.x4,o.AT]),t=(0,n.Z)(r,0);var i=function(e){return e[e.reserve=0]="reserve",e[e.remote=101]="remote",e[e.manual=102]="manual",e}({})},76562:(e,a,l)=>{"use strict";l.d(a,{X:()=>o,mm:()=>t,xN:()=>r});var s=l(21863),n=l(80276),c=l(20868);let o=(0,s.w)("Cg5ub2RlL3RhZy5wcm90bxILeXVoYWlpbi50YWciRgoEdGFncxILCgN0YWcYASABKAkSIwoEdHlwZRgDIAEoDjIVLnl1aGFpaW4udGFnLnRhZ190eXBlEgwKBGhhc2gYAiADKAkqIAoIdGFnX3R5cGUSCAoEbm9kZRAAEgoKBm1pcnJvchABQjZaLGdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9ub2RlkgMF0j4CEANiCGVkaXRpb25zcOgH",[c.AT]),r=(0,n.Z)(o,0);var t=function(e){return e[e.node=0]="node",e[e.mirror=1]="mirror",e}({})},78136:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>L});var s=l(95155),n=l(47319),c=l(89995),o=l(12115),r=l(41531),t=l(36947),i=l(80312),d=l(22523),u=l(50379),m=l(46057),h=l(30281),A=l(94226),g=l(21863),b=l(8824),v=l(20868),C=l(41528),W=l(80276),x=l(51932),j=l(79698),I=l(76562),p=l(36069),N=l(54323),B=l(95698);let y=(0,g.w)("ChNiYWNrdXAvYmFja3VwLnByb3RvEg55dWhhaWluLmJhY2t1cCJ8CgVub2RlcxIvCgVub2RlcxgBIAMoCzIgLnl1aGFpaW4uYmFja3VwLm5vZGVzLk5vZGVzRW50cnkaQgoKTm9kZXNFbnRyeRILCgNrZXkYASABKAkSIwoFdmFsdWUYAiABKAsyFC55dWhhaWluLnBvaW50LnBvaW50OgI4ASKJAQoKc3Vic2NyaWJlcxI0CgVsaW5rcxgBIAMoCzIlLnl1aGFpaW4uYmFja3VwLnN1YnNjcmliZXMuTGlua3NFbnRyeRpFCgpMaW5rc0VudHJ5EgsKA2tleRgBIAEoCRImCgV2YWx1ZRgCIAEoCzIXLnl1aGFpaW4uc3Vic2NyaWJlLmxpbms6AjgBIs0BCgVydWxlcxIoCgZjb25maWcYASABKAsyGC55dWhhaWluLmJ5cGFzcy5jb25maWd2MhIlCgVydWxlcxgCIAMoCzIWLnl1aGFpaW4uYnlwYXNzLnJ1bGV2MhIvCgVsaXN0cxgDIAMoCzIgLnl1aGFpaW4uYmFja3VwLnJ1bGVzLkxpc3RzRW50cnkaQgoKTGlzdHNFbnRyeRILCgNrZXkYASABKAkSIwoFdmFsdWUYAiABKAsyFC55dWhhaWluLmJ5cGFzcy5saXN0OgI4ASJ0CgR0YWdzEiwKBHRhZ3MYASADKAsyHi55dWhhaWluLmJhY2t1cC50YWdzLlRhZ3NFbnRyeRo+CglUYWdzRW50cnkSCwoDa2V5GAEgASgJEiAKBXZhbHVlGAIgASgLMhEueXVoYWlpbi50YWcudGFnczoCOAEikQIKDmJhY2t1cF9jb250ZW50EiQKBW5vZGVzGAIgASgLMhUueXVoYWlpbi5iYWNrdXAubm9kZXMSLgoKc3Vic2NyaWJlcxgDIAEoCzIaLnl1aGFpaW4uYmFja3VwLnN1YnNjcmliZXMSJwoDZG5zGAQgASgLMhoueXVoYWlpbi5kbnMuZG5zX2NvbmZpZ192MhIxCghpbmJvdW5kcxgFIAEoCzIfLnl1aGFpaW4uaW5ib3VuZC5pbmJvdW5kX2NvbmZpZxIkCgVydWxlcxgGIAEoCzIVLnl1aGFpaW4uYmFja3VwLnJ1bGVzEicKBHRhZ3MYByABKAsyFC55dWhhaWluLmJhY2t1cC50YWdzUgN0YWci8QEKDnJlc3RvcmVfb3B0aW9uEgsKA2FsbBgBIAEoCBINCgVydWxlcxgCIAEoCBINCgVsaXN0cxgDIAEoCBINCgVub2RlcxgEIAEoCBIMCgR0YWdzGAUgASgIEgsKA2RucxgGIAEoCBIQCghpbmJvdW5kcxgHIAEoCBISCgpzdWJzY3JpYmVzGAggASgIEj0KBnNvdXJjZRgJIAEoDjItLnl1aGFpaW4uYmFja3VwLnJlc3RvcmVfb3B0aW9uLnJlc3RvcmVfc291cmNlIiUKDnJlc3RvcmVfc291cmNlEgsKB3Vua25vd24QABIGCgJzMxABQjhaLmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9iYWNrdXCSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[v.AT,x.LH,j.VZ,I.X,p.wW,N._,B.$w]),Y=(0,W.Z)(y,5),G=(0,g.w)("ChBhcGkvYmFja3VwLnByb3RvEhJ5dWhhaWluLmFwaS5iYWNrdXAyggIKBmJhY2t1cBI9CgRzYXZlEh0ueXVoYWlpbi5jb25maWcuYmFja3VwX29wdGlvbhoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRI8CgNnZXQSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHS55dWhhaWluLmNvbmZpZy5iYWNrdXBfb3B0aW9uEjgKBmJhY2t1cBIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRJBCgdyZXN0b3JlEh4ueXVoYWlpbi5iYWNrdXAucmVzdG9yZV9vcHRpb24aFi5nb29nbGUucHJvdG9idWYuRW1wdHlCNVorZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL2FwaZIDBdI+AhADYghlZGl0aW9uc3DoBw",[v.AT,c.t,C.Pr,y]),k=(0,b.Z)(G,0);var Z=l(91602);let L=function(){let e=(0,o.useContext)(A.u),[a,l]=(0,o.useState)(!1),{data:g,error:b,isLoading:v,mutate:C}=(0,m.mp)(k.method.get,{revalidateOnFocus:!1}),W=(0,o.useCallback)(e=>{C(a=>({...a,instanceName:e}),!1)},[C]),x=(0,o.useCallback)(e=>{C(a=>({...a,s3:{...a.s3,endpointUrl:e}}),!1)},[C]),j=(0,o.useCallback)(e=>{C(a=>({...a,s3:{...a.s3,accessKey:e}}),!1)},[C]),I=(0,o.useCallback)(e=>{C(a=>({...a,s3:{...a.s3,secretKey:e}}),!1)},[C]),p=(0,o.useCallback)(e=>{C(a=>({...a,s3:{...a.s3,region:e}}),!1)},[C]),N=(0,o.useCallback)(e=>{C(a=>({...a,s3:{...a.s3,bucket:e}}),!1)},[C]),B=(0,o.useCallback)(()=>{C(e=>({...e,s3:{...e.s3,usePathStyle:!e.s3.usePathStyle}}),!1)},[C]),y=(0,o.useCallback)(()=>{C(e=>({...e,s3:{...e.s3,enabled:!e.s3.enabled}}),!1)},[C]),G=(0,o.useCallback)(()=>{l(!0),(0,m.kP)(k.method.save,g).then(async a=>{let{error:l}=a;void 0!==l?e.Error("save config failed, ".concat(l.code,"| ").concat(l.msg)):(e.Info("Save Config Successfully"),C())}).finally(()=>l(!1))},[g,C,e,l]),L=(0,o.useCallback)(()=>{l(!0),(0,m.kP)(k.method.backup,(0,n.v)(c.v,{})).then(async a=>{let{error:l}=a;void 0!==l?e.Error("backup config failed, ".concat(l.code,"| ").concat(l.msg)):(e.Info("Backup Config Successfully"),C())}).finally(()=>l(!1))},[e,l,C]),w=(0,o.useCallback)(()=>{l(!0),(0,m.kP)(k.method.restore,(0,n.v)(Y,{all:!0})).then(async a=>{let{error:l}=a;void 0!==l?e.Error("restore config failed, ".concat(l.code,"| ").concat(l.msg)):(e.Info("Restore Config Successfully"),C())}).finally(()=>l(!1))},[e,l,C]),[V,R]=(0,o.useState)(!1),E=(0,o.useCallback)(()=>{R(e=>!e)},[R]),F=(0,o.useCallback)(e=>{e<0||Number.isNaN(e)||C(a=>({...a,interval:BigInt(e)}),!1)},[C]);return void 0!==b?(0,s.jsx)(u.$,{statusCode:b.code,title:b.msg}):v||!g?(0,s.jsx)(u.A,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.u,{show:V,content:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("p",{children:"Are you sure you want to restore, this will override all config?"})}),onOk:w,onHide:E}),(0,s.jsxs)(r.A,{children:[(0,s.jsxs)(r.A.Body,{children:[(0,s.jsx)(Z.a9,{label:"Instance Name",value:g.instanceName,onChange:W}),(0,s.jsx)(Z.a9,{label:"Backup Interval",value:Number(g.interval),onChange:F}),(0,s.jsx)(Z.a9,{label:"Last Backup Hash",value:g.lastBackupHash,readonly:!0,plaintext:!0}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.A.Title,{children:"S3"}),(0,s.jsx)(h.$d,{label:"Enabled",checked:g.s3.enabled,onChange:y}),(0,s.jsx)(Z.a9,{label:"Endpoint Url",value:g.s3.endpointUrl,onChange:x}),(0,s.jsx)(h.$d,{label:"Use Path Style",checked:g.s3.usePathStyle,onChange:B}),(0,s.jsx)(Z.a9,{label:"Bucket",value:g.s3.bucket,onChange:N}),(0,s.jsx)(Z.a9,{label:"Region",value:g.s3.region,onChange:p}),(0,s.jsx)(Z.a9,{label:"Access Key",password:!0,value:g.s3.accessKey,onChange:j}),(0,s.jsx)(Z.a9,{label:"Secret Key",password:!0,value:g.s3.secretKey,onChange:I})]}),(0,s.jsxs)(r.A.Footer,{className:"d-flex justify-content-md-end",children:[(0,s.jsxs)(t.A,{variant:"outline-success",onClick:L,disabled:a,children:[(0,s.jsx)("i",{className:"bi bi-save"})," Backup Now",a&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(i.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,s.jsxs)(t.A,{className:"ms-2",variant:"outline-info",onClick:E,disabled:a,children:[(0,s.jsx)("i",{className:"bi bi-arrow-clockwise"})," Restore Now",a&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(i.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,s.jsxs)(t.A,{className:"ms-2",variant:"outline-primary",onClick:G,disabled:a,children:[(0,s.jsx)("i",{className:"bi bi-floppy"})," Save",a&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(i.A,{size:"sm",animation:"border",variant:"primary"})]})]})]})]})]})}},79698:(e,a,l)=>{"use strict";l.d(a,{NW:()=>t,VZ:()=>o,Yk:()=>r});var s=l(21863),n=l(80276),c=l(20868);let o=(0,s.w)("ChRub2RlL3N1YnNjcmliZS5wcm90bxIReXVoYWlpbi5zdWJzY3JpYmUiSAoEbGluaxIMCgRuYW1lGAEgASgJEiUKBHR5cGUYAiABKA4yFy55dWhhaWluLnN1YnNjcmliZS50eXBlEgsKA3VybBgDIAEoCSpNCgR0eXBlEgsKB3Jlc2VydmUQABIKCgZ0cm9qYW4QARIJCgV2bWVzcxACEg8KC3NoYWRvd3NvY2tzEAMSEAoMc2hhZG93c29ja3NyEARCNlosZ2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL25vZGWSAwXSPgIQA2IIZWRpdGlvbnNw6Ac",[c.AT]),r=(0,n.Z)(o,0);var t=function(e){return e[e.reserve=0]="reserve",e[e.trojan=1]="trojan",e[e.vmess=2]="vmess",e[e.shadowsocks=3]="shadowsocks",e[e.shadowsocksr=4]="shadowsocksr",e}({})},94226:(e,a,l)=>{"use strict";l.d(a,{u:()=>r,y:()=>t});var s=l(95155),n=l(12115),c=l(52141),o=l(88618);let r=(0,n.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),t=e=>{let{children:a}=e,[l,t]=(0,n.useState)({value:{},index:0}),i=(e,a)=>t(l=>({value:{...l.value,[l.index]:{text:e,type:a}},index:l.index+1}));return(0,s.jsxs)(r.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,s.jsx)(c.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(l.value).map(e=>{let[a,l]=e;return(0,s.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{t(e=>{let l={...e.value};return delete l[a],{...e,value:l}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(o.A.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(o.A.Body,{className:"text-center",children:l.text})]},"toast"+a)})}),a]})}}},e=>{e.O(0,[6970,962,2141,449,4066,9048,9968,6164,1528,8441,1255,7358],()=>e(e.s=28700)),_N_E=e.O()}]);