(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{6320:function(e,s,a){Promise.resolve().then(a.bind(a,7786))},6491:function(e,s,a){"use strict";var n=a(3827),l=a(477),t=a(2283),r=a.n(t);s.Z=function(e){return(0,n.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,n.jsx)("div",{className:"p2",children:(0,n.jsx)(l.Z,{})})]})}},6756:function(e,s,a){"use strict";a.d(s,{P:function(){return o},t:function(){return i}});var n=a(3827),l=a(4090),t=a(4349),r=a(4051);let o=(0,l.createContext)({Info:e=>{},Error:e=>{}}),i=e=>{let{children:s}=e,[a,i]=(0,l.useState)({value:{},index:0}),c=(e,s)=>{i(a=>(a.value[a.index]={text:e,type:s},a.index++,{...a}))};return(0,n.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,n.jsx)(t.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:1},children:Object.entries(a.value).map(e=>{let[s,l]=e;return(0,n.jsxs)(r.Z,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{let e=a.value;delete e[s],i({...a,value:e}),console.log("close: "+s)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,n.jsxs)(r.Z.Header,{children:[(0,n.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,n.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,n.jsx)(r.Z.Body,{className:"text-center",children:l.text})]},"toast"+s)})}),s]})}},9318:function(e,s,a){"use strict";a.d(s,{Jg:function(){return c},NZ:function(){return i},Vf:function(){return o}});var n=a(3827),l=a(9317),t=a(5914),r=a(590);let o=e=>(0,n.jsxs)(l.Z.Group,{as:t.Z,className:"mb-3",children:[(0,n.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,n.jsx)(r.Z,{sm:10,children:(0,n.jsx)(l.Z.Control,{value:null!==e.value?e.value:"",plaintext:e.plaintext,onChange:s=>void 0!==e.onChange&&e.onChange(s.target.value)})})]}),i=e=>(0,n.jsxs)(l.Z.Group,{as:t.Z,className:"mb-3",children:[(0,n.jsx)(l.Z.Label,{column:!0,sm:2,className:"nowrap",children:e.label}),(0,n.jsx)(r.Z,{sm:10,children:(0,n.jsx)(l.Z.Control,{as:"textarea",rows:5,value:e.value,onChange:s=>e.onChange(s.target.value)})})]}),c=e=>(0,n.jsxs)(l.Z.Group,{as:t.Z,className:"mb-3",children:[(0,n.jsx)(l.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(r.Z,{sm:10,className:"d-flex align-items-center",children:(0,n.jsx)(l.Z.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},7786:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return z}});var n=a(3827),l=a(4090),t=a(8168),r=a(5785),o=a(1497),i=a(6879),c=a(9317),u=a(5914),d=a(590),h=a(9252),x=a(9318),v=a(2520);let m=l.memo(e=>{var s,a,r,o,v,m,j,g,b,y,f,C;let[_,Z]=(0,l.useState)({key:"",value:""}),[k,w]=(0,l.useState)({value:""}),N=s=>{s(e.data),e.onChange(e.data)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{label:"Server",value:e.data.server,onChange:e=>N(s=>s.server=e)}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{children:"FakeDNS"}),(0,n.jsx)(x.Jg,{label:"Enabled",checked:e.data.fakedns,onChange:()=>N(e=>e.fakedns=!e.fakedns)}),(0,n.jsx)(x.Vf,{label:"Fake IP Range",value:e.data.fakedns_ip_range,onChange:e=>N(s=>s.fakedns_ip_range=e)}),(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Whitelist"}),e.data.fakedns_whitelist.map((e,s)=>(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==s?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:e,onChange:e=>N(a=>a.fakedns_whitelist[s]=e.target.value)}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>N(e=>e.fakedns_whitelist.splice(s,1)),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]})},s)),(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==e.data.fakedns_whitelist.length?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:k.value,onChange:e=>w({value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>N(e=>e.fakedns_whitelist.push(k.value)),children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{children:"Local DNS"}),(0,n.jsx)(x.Vf,{label:"Host",value:null===(s=e.data.local)||void 0===s?void 0:s.host,onChange:e=>N(s=>{void 0!==s.local&&(s.local.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(a=e.data.local)||void 0===a?void 0:a.type,onChange:e=>N(s=>{void 0!==s.local&&(s.local.type=e)})}),(0,n.jsx)(x.Vf,{label:"Subnet",value:null===(r=e.data.local)||void 0===r?void 0:r.subnet,onChange:e=>N(s=>{void 0!==s.local&&(s.local.subnet=e)})}),(0,n.jsx)(x.Vf,{label:"SNI",value:null===(o=e.data.local)||void 0===o?void 0:o.tls_servername,onChange:e=>N(s=>{void 0!==s.local&&(s.local.tls_servername=e)})}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{children:"Remote DNS"}),(0,n.jsx)(x.Jg,{label:"Use IP",checked:e.data.resolve_remote_domain,onChange:()=>N(e=>e.resolve_remote_domain=!e.resolve_remote_domain)}),(0,n.jsx)(x.Vf,{label:"Host",value:null===(v=e.data.remote)||void 0===v?void 0:v.host,onChange:e=>N(s=>{void 0!==s.remote&&(s.remote.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(m=e.data.remote)||void 0===m?void 0:m.type,onChange:e=>N(s=>{void 0!==s.remote&&(s.remote.type=e)})}),(0,n.jsx)(x.Vf,{label:"Subnet",value:null===(j=e.data.remote)||void 0===j?void 0:j.subnet,onChange:e=>N(s=>{void 0!==s.remote&&(s.remote.subnet=e)})}),(0,n.jsx)(x.Vf,{label:"SNI",value:null===(g=e.data.remote)||void 0===g?void 0:g.tls_servername,onChange:e=>N(s=>{void 0!==s.remote&&(s.remote.tls_servername=e)})}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{children:"Bootstrap DNS"}),(0,n.jsx)(x.Vf,{label:"Host",value:null===(b=e.data.bootstrap)||void 0===b?void 0:b.host,onChange:e=>N(s=>{void 0!==s.bootstrap&&(s.bootstrap.host=e)})}),(0,n.jsx)(p,{label:"Type",value:null===(y=e.data.bootstrap)||void 0===y?void 0:y.type,onChange:e=>N(s=>{void 0!==s.bootstrap&&(s.bootstrap.type=e)})}),(0,n.jsx)(x.Vf,{label:"Subnet",value:null===(f=e.data.bootstrap)||void 0===f?void 0:f.subnet,onChange:e=>N(s=>{void 0!==s.bootstrap&&(s.bootstrap.subnet=e)})}),(0,n.jsx)(x.Vf,{label:"SNI",value:null===(C=e.data.bootstrap)||void 0===C?void 0:C.tls_servername,onChange:e=>N(s=>{void 0!==s.bootstrap&&(s.bootstrap.tls_servername=e)})}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{children:"Hosts"}),Object.entries(e.data.hosts).sort((e,s)=>{let[a]=e,[n]=s;return a>n?-1:1}).map(e=>{let[s,a]=e;return(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{readOnly:!0,value:s}),(0,n.jsx)(h.Z.Text,{children:(0,n.jsx)("i",{className:"bi bi-arrow-right"})}),(0,n.jsx)(c.Z.Control,{value:a,onChange:e=>N(a=>a.hosts[s]=e.target.value)}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>N(e=>delete e.hosts[s]),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+s)}),(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:_.key,onChange:e=>Z({..._,key:e.target.value})}),(0,n.jsx)(h.Z.Text,{children:(0,n.jsx)("i",{className:"bi bi-arrow-right"})}),(0,n.jsx)(c.Z.Control,{value:_.value,onChange:e=>Z({..._,value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>{""!==_.key&&void 0===e.data.hosts[_.key]&&N(e=>e.hosts[_.key]=_.value)},children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})]})}),j=v.yE.dns.type;function p(e){return(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(d.Z,{sm:10,children:(0,n.jsxs)(c.Z.Select,{value:j[void 0===e.value||null===e.value?j.udp:e.value],onChange:s=>e.onChange(j[s.target.value]),children:[(0,n.jsx)("option",{value:j[j.udp],children:"UDP"}),(0,n.jsx)("option",{value:j[j.tcp],children:"TCP"}),(0,n.jsx)("option",{value:j[j.doh],children:"DOH"}),(0,n.jsx)("option",{value:j[j.dot],children:"DOT"}),(0,n.jsx)("option",{value:j[j.doq],children:"DOQ"}),(0,n.jsx)("option",{value:j[j.doh3],children:"DOH3"})]})})]})}let g=v.yE.bypass.mode,b=v.yE.bypass.resolve_strategy;g.bypass,g.bypass;let y=l.memo(e=>{let s={hostname:["www.example.com"],mode:g.proxy,tag:"",resolve_strategy:b.default},a=s=>{s(e.bypass),e.onChange(e.bypass)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>a(s=>s.tcp=e)}),(0,n.jsx)(C,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>a(s=>s.udp=e)}),(0,n.jsx)(x.Vf,{label:"Bypass File",value:e.bypass.bypass_file,onChange:e=>a(s=>s.bypass_file=e)}),(0,n.jsx)("hr",{}),"Custom Rules",e.bypass.custom_rule_v3.map((e,s)=>(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("hr",{}),(0,n.jsx)(f,{config:new v.yE.bypass.mode_config(e),onChange:e=>a(a=>a.custom_rule_v3[s]=e)}),(0,n.jsxs)(i.Z,{variant:"outline-danger",onClick:()=>a(e=>e.custom_rule_v3.splice(s,1)),children:[(0,n.jsx)("i",{className:"bi bi-x-lg"}),"Remove Current Rule"]})]},"custom_rule_v3"+s)),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{className:"d-flex mb-2",children:(0,n.jsxs)(i.Z,{className:"flex-grow-1",variant:"outline-success",onClick:()=>a(e=>e.custom_rule_v3.push(s)),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})}),f=e=>{let s=s=>{s(e.config),e.onChange(e.config)},[a,t]=(0,l.useState)({value:""});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>s(s=>s.mode=e)}),(0,n.jsx)(x.Vf,{label:"Tag",value:e.config.tag,onChange:e=>s(s=>s.tag=e)}),(0,n.jsx)(_,{label:"Resolve Strategy",value:e.config.resolve_strategy,onChange:e=>s(s=>s.resolve_strategy=e)}),(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,className:"nowrap",children:"IP/DOMAIN"}),e.config.hostname.map((e,a)=>(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==a?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:e,onChange:e=>s(s=>s.hostname[a]=e.target.value)}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>s(e=>e.hostname.splice(a,1)),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==e.config.hostname.length?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:a.value,onChange:e=>t({value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>s(e=>e.hostname.push(a.value)),children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})};function C(e){return(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(d.Z,{sm:10,children:(0,n.jsxs)(c.Z.Select,{value:g[e.value],onChange:s=>e.onChange(g[s.target.value]),children:[e.network&&(0,n.jsx)("option",{value:g[g.bypass],children:"BYPASS"}),(0,n.jsx)("option",{value:g[g.direct],children:"DIRECT"}),(0,n.jsx)("option",{value:g[g.proxy],children:"PROXY"}),(0,n.jsx)("option",{value:g[g.block],children:"BLOCK"})]})})]})}function _(e){return(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(d.Z,{sm:10,children:(0,n.jsxs)(c.Z.Select,{value:b[e.value],onChange:s=>e.onChange(b[s.target.value]),children:[(0,n.jsx)("option",{value:b[b.default],children:"default"}),(0,n.jsx)("option",{value:b[b.prefer_ipv4],children:"prefer_ipv4"}),(0,n.jsx)("option",{value:b[b.only_ipv4],children:"only_ipv4"}),(0,n.jsx)("option",{value:b[b.prefer_ipv6],children:"prefer_ipv6"}),(0,n.jsx)("option",{value:b[b.only_ipv6],children:"only_ipv6"})]})})]})}var Z=a(8647);let k=l.memo(e=>{let s=s=>{s(e.http),e.onChange(e.http)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{label:"Host",value:e.http.host,onChange:e=>s(s=>s.host=e)}),(0,n.jsx)(x.Vf,{label:"Username",value:e.http.username,onChange:e=>s(s=>s.username=e)}),(0,n.jsx)(x.Vf,{label:"Password",value:e.http.password,onChange:e=>s(s=>s.password=e)})]})}),w=l.memo(e=>{let s=s=>{s(e.redir),e.onChange(e.redir)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.Vf,{label:"Host",value:e.redir.host,onChange:e=>s(s=>s.host=e)})})}),N=l.memo(e=>{let s=s=>{s(e.tproxy),e.onChange(e.tproxy)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Jg,{label:"DNS Hijacking",checked:e.tproxy.dns_hijacking,onChange:()=>s(e=>e.dns_hijacking=!e.dns_hijacking)}),(0,n.jsx)(x.Jg,{label:"Force Fake IP",checked:e.tproxy.force_fakeip,onChange:()=>s(e=>e.force_fakeip=!e.force_fakeip)}),(0,n.jsx)(x.Vf,{label:"Host",value:e.tproxy.host,onChange:e=>s(s=>s.host=e)})]})}),E=l.memo(e=>{let s=s=>{s(e.socks5),e.onChange(e.socks5)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{label:"Host",value:e.socks5.host,onChange:e=>s(s=>s.host=e)}),(0,n.jsx)(x.Vf,{label:"Username",value:e.socks5.username,onChange:e=>s(s=>s.username=e)}),(0,n.jsx)(x.Vf,{label:"Password",value:e.socks5.password,onChange:e=>s(s=>s.password=e)})]})}),S=l.memo(e=>{let s=s=>{s(e.mixed),e.onChange(e.mixed)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{label:"Host",value:e.mixed.host,onChange:e=>s(s=>s.host=e)}),(0,n.jsx)(x.Vf,{label:"Username",value:e.mixed.username,onChange:e=>s(s=>s.username=e)}),(0,n.jsx)(x.Vf,{label:"Password",value:e.mixed.password,onChange:e=>s(s=>s.password=e)})]})}),V=l.memo(e=>{let s=s=>{s(e.tun),e.onChange(e.tun)},a=v.yE.listener.tun.endpoint_driver;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Jg,{label:"DNS Hijacking",checked:e.tun.dns_hijacking,onChange:()=>s(e=>e.dns_hijacking=!e.dns_hijacking)}),(0,n.jsx)(x.Jg,{checked:e.tun.skip_multicast,onChange:()=>s(e=>e.skip_multicast=!e.skip_multicast),label:"Skip Multicast"}),(0,n.jsx)(x.Vf,{label:"Name",value:e.tun.name,onChange:e=>s(s=>s.name=e)}),(0,n.jsx)(x.Vf,{label:"Mtu",value:e.tun.mtu,onChange:e=>s(s=>s.mtu=isNaN(Number(e))?s.mtu:Number(e))}),(0,n.jsx)(x.Vf,{label:"Gateway",value:e.tun.gateway,onChange:e=>s(s=>s.gateway=e)}),(0,n.jsx)(x.Vf,{label:"Portal",value:e.tun.portal,onChange:e=>s(s=>s.portal=e)}),(0,n.jsx)(function(e){return(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(d.Z,{sm:10,children:(0,n.jsxs)(c.Z.Select,{value:a[void 0===e.value||null===e.value?a.fdbased:e.value],onChange:s=>e.onChange(a[s.target.value]),children:[(0,n.jsx)("option",{value:a[a.fdbased],children:"Fdbased"}),(0,n.jsx)("option",{value:a[a.channel],children:"Channel"}),(0,n.jsx)("option",{value:a[a.system_gvisor],children:"System"})]})})]})},{label:"Driver",value:e.tun.driver,onChange:e=>s(s=>s.driver=e)})]})}),P=e=>null==e||void 0===e.certificates&&void 0===e.next_protos&&void 0===e.server_name_certificate,T=l.memo(e=>{let s=s=>{s(e.cert),e.onChange(e.cert)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.NZ,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:e=>s(s=>{s.cert=new TextEncoder().encode(e)})}),(0,n.jsx)(x.NZ,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:e=>s(s=>{s.key=new TextEncoder().encode(e)})}),(0,n.jsx)(x.Vf,{label:"Cert File",value:e.cert.cert_file_path,onChange:e=>s(s=>{s.cert_file_path=e})}),(0,n.jsx)(x.Vf,{label:"Key File",value:e.cert.key_file_path,onChange:e=>s(s=>{s.key_file_path=e})})]})}),F=l.memo(e=>{var s;let[a,r]=(0,l.useState)("www.example.com"),[o,x]=(0,l.useState)({value:""}),m=s=>{s(e.tls),e.onChange(e.tls)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Next Protos"}),e.tls&&e.tls.next_protos.map((e,s)=>(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==s?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:e,onChange:e=>m(a=>{null!==a&&void 0!==a.next_protos&&(a.next_protos[s]=e.target.value)})}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>m(e=>{null!==e&&void 0!==e.next_protos&&(null==e||e.next_protos.splice(s,1))}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]})},s)),(0,n.jsx)(d.Z,{sm:{span:10,offset:e.tls&&(null===(s=e.tls.next_protos)||void 0===s?void 0:s.length)!==0?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:o.value,onChange:e=>x({value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>m(e=>{e.next_protos.push(o.value)}),children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),e.tls&&e.tls.certificates.map((e,s)=>(0,n.jsx)(t.Z,{className:"mb-2",children:(0,n.jsxs)(t.Z.Body,{children:[(0,n.jsx)(t.Z.Title,{className:"d-flex justify-content-end align-items-center",children:(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>m(e=>{(null==e?void 0:e.certificates)!==void 0&&e.certificates.splice(s,1)}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})}),(0,n.jsx)(T,{cert:new v.yE.listener.certificate(e),onChange:e=>m(a=>{(null==a?void 0:a.certificates)!==void 0&&(a.certificates[s]=e)})})]})},"tls_certificates"+s)),(0,n.jsx)(h.Z,{className:"d-flex justify-content-end mb-2",children:(0,n.jsxs)(i.Z,{variant:"outline-success",onClick:()=>m(e=>{e.certificates.push({cert:new Uint8Array(0),key:new Uint8Array(0),cert_file_path:"",key_file_path:""})}),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.server_name_certificate&&Object.entries(e.tls.server_name_certificate).map(e=>{let[s,a]=e;return(0,n.jsx)(t.Z,{className:"mb-2",children:(0,n.jsxs)(t.Z.Body,{children:[(0,n.jsxs)(t.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[s,(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>m(e=>{(null==e?void 0:e.server_name_certificate)!==void 0&&(null==e||delete e.server_name_certificate[s])}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,n.jsx)(T,{cert:new v.yE.listener.certificate(a),onChange:e=>m(a=>{(null==a?void 0:a.server_name_certificate)!==void 0&&(a.server_name_certificate[s]=e)})})]})},"server_name_certificate"+s)}),(0,n.jsxs)(h.Z,{className:"d-flex justify-content-end",children:[(0,n.jsx)(c.Z.Control,{value:a,onChange:e=>r(e.target.value)}),(0,n.jsxs)(i.Z,{variant:"outline-success",onClick:()=>m(e=>{""!==a&&(e.server_name_certificate[a]={})}),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),I=l.memo(e=>{var s;let a=s=>{P(e.websocket.tls)&&(e.websocket.tls=void 0),s(e.websocket),e.onChange(e.websocket)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"Websocket"}),e.websocket.tls&&(0,n.jsx)(F,{tls:new v.yE.listener.tls_config(null!==(s=e.websocket.tls)&&void 0!==s?s:void 0),onChange:e=>a(s=>s.tls=e)})]})}),D=l.memo(e=>{let s=s=>{P(e.quic.tls)&&(e.quic.tls=void 0),s(e.quic),e.onChange(e.quic)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"QUIC"}),e.quic.tls&&(0,n.jsx)(F,{tls:new v.yE.listener.tls_config(null!==e.quic.tls?e.quic.tls:void 0),onChange:e=>s(s=>s.tls=e)})]})}),H=l.memo(e=>{let s=s=>{P(e.grpc.tls)&&(e.grpc.tls=void 0),s(e.grpc),e.onChange(e.grpc)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"GRPC"}),e.grpc.tls&&(0,n.jsx)(F,{tls:new v.yE.listener.tls_config(e.grpc.tls),onChange:e=>s(s=>s.tls=e)})]})}),L=l.memo(e=>{let s=s=>{P(e.tls.tls)&&(e.tls.tls=void 0),s(e.tls),e.onChange(e.tls)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,n.jsx)(F,{tls:new v.yE.listener.tls_config(e.tls.tls),onChange:e=>s(s=>s.tls=e)})]})}),O=l.memo(e=>{let s=s=>{P(e.http2.tls)&&(e.http2.tls=void 0),s(e.http2),e.onChange(e.http2)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"HTTP2"}),e.http2.tls&&(0,n.jsx)(F,{tls:new v.yE.listener.tls_config(e.http2.tls),onChange:e=>s(s=>s.tls=e)})]})}),R=l.memo(e=>{let s=s=>{s(e.reality),e.onChange(e.reality)},[a,t]=(0,l.useState)({value:""}),[r,o]=(0,l.useState)({value:""});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Vf,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,n.jsx)(x.Vf,{label:"Dest",value:e.reality.dest,onChange:e=>s(s=>s.dest=e)}),(0,n.jsx)(x.Vf,{label:"Private Key",value:e.reality.private_key,onChange:e=>s(s=>s.private_key=e)}),(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.short_id.map((e,a)=>(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==a?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:e,onChange:e=>s(s=>{s.short_id[a]=e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>s(e=>{e.short_id.splice(a,1)}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==e.reality.short_id.length?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:a.value,onChange:e=>t({value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>s(e=>{e.short_id.push(a.value)}),children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.server_name.map((e,a)=>(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==a?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:e,onChange:e=>s(s=>{s.server_name[a]=e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>s(e=>{e.server_name.splice(a,1)}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]})},a)),(0,n.jsx)(d.Z,{sm:{span:10,offset:0!==e.reality.server_name.length?2:0},children:(0,n.jsxs)(h.Z,{className:"mb-2",children:[(0,n.jsx)(c.Z.Control,{value:r.value,onChange:e=>o({value:e.target.value})}),(0,n.jsx)(i.Z,{variant:"outline-success",onClick:()=>s(e=>{e.server_name.push(r.value)}),children:(0,n.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})}),G=l.memo(e=>{let s=s=>{s(e.yuubinsya),e.onChange(e.yuubinsya)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Jg,{label:"Force Disable Encrypt",checked:e.yuubinsya.force_disable_encrypt,onChange:()=>s(e=>e.force_disable_encrypt=!e.force_disable_encrypt)}),(0,n.jsx)(x.Jg,{label:"Mux",checked:e.yuubinsya.mux,onChange:()=>s(e=>e.mux=!e.mux)}),(0,n.jsx)(x.Vf,{label:"Host",value:e.yuubinsya.host,onChange:e=>s(s=>s.host=e)}),(0,n.jsx)(x.Vf,{label:"Password",value:e.yuubinsya.password,onChange:e=>s(s=>s.password=e)}),(()=>{switch(e.yuubinsya.protocol){case"websocket":return(0,n.jsx)(I,{websocket:new v.yE.listener.websocket(e.yuubinsya.websocket),onChange:e=>s(s=>s.websocket=e)});case"quic":return(0,n.jsx)(D,{quic:new v.yE.listener.quic(e.yuubinsya.quic),onChange:e=>s(s=>s.quic=e)});case"grpc":return(0,n.jsx)(H,{grpc:new v.yE.listener.grpc(e.yuubinsya.grpc),onChange:e=>s(s=>s.grpc=e)});case"http2":return(0,n.jsx)(O,{http2:new v.yE.listener.http2(e.yuubinsya.http2),onChange:e=>s(s=>s.http2=e)});case"reality":return(0,n.jsx)(R,{reality:new v.yE.listener.reality(e.yuubinsya.reality),onChange:e=>s(s=>s.reality=e)});case"tls":return(0,n.jsx)(L,{tls:new v.yE.listener.tls(e.yuubinsya.tls),onChange:e=>s(s=>s.tls=e)})}})()]})}),q=l.memo(e=>{let s=s=>{s(e.protocol),e.onChange(e.protocol)};switch(e.protocol.protocol){case"http":return(0,n.jsx)(k,{http:new v.yE.listener.http(e.protocol.http),onChange:e=>s(s=>s.http=e)});case"socks5":return(0,n.jsx)(E,{socks5:new v.yE.listener.socks5(e.protocol.socks5),onChange:e=>s(s=>s.socks5=e)});case"mix":return(0,n.jsx)(S,{mixed:new v.yE.listener.mixed(e.protocol.mix),onChange:e=>s(s=>s.mix=e)});case"redir":return(0,n.jsx)(w,{redir:new v.yE.listener.redir(e.protocol.redir),onChange:e=>s(s=>s.redir=e)});case"tun":return(0,n.jsx)(V,{tun:new v.yE.listener.tun(e.protocol.tun),onChange:e=>s(s=>s.tun=e)});case"yuubinsya":return(0,n.jsx)(G,{yuubinsya:new v.yE.listener.yuubinsya(e.protocol.yuubinsya),onChange:e=>s(s=>s.yuubinsya=e)});case"tproxy":return(0,n.jsx)(N,{tproxy:new v.yE.listener.tproxy(e.protocol.tproxy),onChange:e=>s(s=>s.tproxy=e)})}return(0,n.jsx)(n.Fragment,{})}),J=l.memo(e=>{let[s,a]=(0,l.useState)({value:"http",name:""}),r=s=>{s(e.server),e.onChange(e.server)};return(0,n.jsxs)(n.Fragment,{children:[Object.entries(e.server).sort((e,s)=>e[0]<=s[0]?-1:1).map(e=>{let[s,a]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(t.Z.Title,{className:"d-flex justify-content-between align-items-center",children:[s,(0,n.jsx)(i.Z,{variant:"outline-danger",onClick:()=>r(e=>{delete e[s]}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,n.jsx)(x.Jg,{label:"Enabled",checked:a.enabled,onChange:()=>r(e=>e[s].enabled=!e[s].enabled)}),(0,n.jsx)(q,{protocol:new v.yE.listener.protocol(a),onChange:e=>r(a=>a[s]=e)}),(0,n.jsx)("hr",{})]},s)}),(0,n.jsx)(t.Z,{className:"mb-2",children:(0,n.jsxs)(t.Z.Body,{children:[(0,n.jsx)(t.Z.Title,{children:"New Inbound"}),(0,n.jsx)(Z.Z,{label:"Protocol",className:"mb-2",children:(0,n.jsxs)(c.Z.Select,{value:s.value,onChange:e=>a({...s,value:e.target.value}),children:[(0,n.jsx)("option",{value:"mix",children:"Mixed"}),(0,n.jsx)("option",{value:"http",children:"HTTP"}),(0,n.jsx)("option",{value:"socks5",children:"SOCKS5"}),(0,n.jsx)("option",{value:"tun",children:"TUN"}),(0,n.jsx)("option",{value:"redir",children:"Redir"}),(0,n.jsx)("option",{value:"tproxy",children:"TProxy"}),(0,n.jsx)("option",{value:"yuubinsya",children:"Yuubinsya"}),(0,n.jsx)("option",{value:"yuubinsya-websocket",children:"Yuubinsya Websocket"}),(0,n.jsx)("option",{value:"yuubinsya-tls",children:"Yuubinsya TLS"}),(0,n.jsx)("option",{value:"yuubinsya-grpc",children:"Yuubinsya GRPC"}),(0,n.jsx)("option",{value:"yuubinsya-quic",children:"Yuubinsya QUIC"}),(0,n.jsx)("option",{value:"yuubinsya-http2",children:"Yuubinsya HTTP2"}),(0,n.jsx)("option",{value:"yuubinsya-reality",children:"Yuubinsya Reality"})]})}),(0,n.jsxs)(h.Z,{className:"d-flex justify-content-end",children:[(0,n.jsx)(c.Z.Control,{value:s.name,onChange:e=>a({...s,name:e.target.value})}),(0,n.jsxs)(i.Z,{variant:"outline-success",onClick:()=>r(e=>{console.log(s),U(e,s.name,s.value)}),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New Inbound"]})]})]})})]})}),U=(e,s,a)=>{if(""===s||void 0!==e[s])return;let n={name:s,enabled:!1};switch(a){case"http":n.http={host:":8188",username:"",password:""};break;case"socks5":n.socks5={host:":1080",password:"",username:""};break;case"mix":n.mix={host:":1080",password:"",username:""};break;case"tun":n.tun={name:"tun://tun0",mtu:1500,gateway:"172.16.0.1",dns_hijacking:!0,skip_multicast:!1,driver:v.yE.listener.tun.endpoint_driver.system_gvisor,portal:"172.16.0.2"};break;case"redir":n.redir={host:":8088"};break;case"yuubinsya":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",normal:{}};break;case"yuubinsya-websocket":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",websocket:{tls:{}}};break;case"yuubinsya-tls":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",tls:{tls:{}}};break;case"yuubinsya-grpc":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",grpc:{tls:{}}};break;case"yuubinsya-quic":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",quic:{tls:{}}};break;case"yuubinsya-http2":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",http2:{tls:{}}};break;case"yuubinsya-reality":n.yuubinsya={host:":2096",force_disable_encrypt:!1,password:"password",reality:{short_id:["123456"],server_name:["www.example.com"],private_key:"",dest:"dl.google.com:443",debug:!1}};break;case"tproxy":n.tproxy={host:"0.0.0.0:8083"};break;default:return}e[s]=new v.yE.listener.protocol(n)};var B=a(6491),K=a(6756),Y=a(1252),A=a(8224),M=a(2283),W=a.n(M);let Q=v.yE.log.log_level;var z=function(){let e=(0,l.useContext)(K.P),{data:s,error:a,isLoading:c,mutate:u}=(0,Y.ZP)("/config",(0,A.PJ)(v.yE.config.setting),{revalidateOnFocus:!1});if(void 0!==a)return(0,n.jsx)(W(),{statusCode:a.code,title:a.msg});if(c||void 0===s)return(0,n.jsx)(B.Z,{});let d=e=>{u(s=>{let a=v.yE.config.setting.create(s);return e(a),a},!1)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(t.Z,{className:"mb-3",children:(0,n.jsxs)(t.Z.Body,{children:[(0,n.jsxs)(r.Z,{defaultActiveKey:"home",className:"mb-3",children:[(0,n.jsxs)(o.Z,{eventKey:"home",title:"Home",children:[(0,n.jsx)(x.Jg,{label:"IPv6",checked:s.ipv6,onChange:()=>u(v.yE.config.setting.create({...s,ipv6:!s.ipv6}),!1)}),(0,n.jsx)(x.Vf,{label:"Network Interface",value:s.net_interface,onChange:e=>d(s=>s.net_interface=e)}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{className:"mb-2",children:"System Proxy"}),(0,n.jsx)(x.Jg,{label:"SOCKS5",checked:s.system_proxy.socks5,onChange:()=>d(e=>{var s;return e.system_proxy.socks5=!(null===(s=e.system_proxy)||void 0===s?void 0:s.socks5)})}),(0,n.jsx)(x.Jg,{label:"HTTP",checked:s.system_proxy.http,onChange:()=>d(e=>e.system_proxy.http=!e.system_proxy.http)}),(0,n.jsx)("hr",{}),(0,n.jsx)(t.Z.Title,{className:"mb-2",children:"Logcat"}),(0,n.jsx)(x.Jg,{label:"Save",checked:s.logcat.save,onChange:()=>d(e=>e.logcat.save=!e.logcat.save)}),(0,n.jsx)(X,{label:"Level",value:s.logcat.level,onChange:e=>d(s=>{s.logcat.level=e})})]}),(0,n.jsx)(o.Z,{eventKey:"bypass",title:"Bypass",children:(0,n.jsx)(y,{bypass:new v.yE.bypass.bypass_config(s.bypass),onChange:e=>d(s=>s.bypass=e)})}),(0,n.jsx)(o.Z,{eventKey:"dns",title:"DNS",children:(0,n.jsx)(m,{data:new v.yE.dns.dns_config(s.dns),onChange:e=>d(s=>s.dns=e)})}),(0,n.jsx)(o.Z,{eventKey:"inbound",title:"Inbound",children:(0,n.jsx)(J,{server:s.server.servers,onChange:e=>d(s=>s.server.servers=e)})})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("hr",{}),(0,n.jsx)(i.Z,{onClick:()=>{(0,A.Uo)("/config",{body:v.yE.config.setting.encode(s).finish()}).then(async s=>{let{error:a}=s;void 0!==a?e.Error("save config failed, ".concat(a.code,"| ").concat(await a.msg)):(e.Info("Save Config Successfully"),u())})},children:"Save"})]})]})})})};function X(e){return(0,n.jsxs)(c.Z.Group,{as:u.Z,className:"mb-3",children:[(0,n.jsx)(c.Z.Label,{column:!0,sm:2,children:e.label}),(0,n.jsx)(d.Z,{sm:10,children:(0,n.jsxs)(c.Z.Select,{value:Q[e.value],onChange:s=>e.onChange(Q[s.target.value]),children:[(0,n.jsx)("option",{value:Q[Q.debug],children:"DEBUG"}),(0,n.jsx)("option",{value:Q[Q.info],children:"INFO"}),(0,n.jsx)("option",{value:Q[Q.warning],children:"WARN"}),(0,n.jsx)("option",{value:Q[Q.error],children:"ERROR"})]})})]})}}},function(e){e.O(0,[644,149,300,634,713,797,524,289,971,69,744],function(){return e(e.s=6320)}),_N_E=e.O()}]);