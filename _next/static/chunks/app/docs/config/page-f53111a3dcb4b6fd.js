(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{6381:(e,a,n)=>{Promise.resolve().then(n.bind(n,9205))},9169:(e,a,n)=>{"use strict";n.d(a,{A:()=>o});var s=n(5155),l=n(4216),t=n(5554),r=n.n(t);let o=function(e){return(0,s.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,s.jsx)("div",{className:"p2",children:(0,s.jsx)(l.A,{})})]})}},2859:(e,a,n)=>{"use strict";n.d(a,{$d:()=>o});var s=n(5155);n(2115);var l=n(6180),t=n(6121),r=n(3667);let o=e=>(0,s.jsxs)(l.A.Group,{as:t.A,className:"mb-2",children:[(0,s.jsx)(l.A.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(r.A,{sm:10,className:"d-flex align-items-center",children:(0,s.jsx)(l.A.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},148:(e,a,n)=>{"use strict";n.d(a,{u:()=>o,y:()=>i});var s=n(5155),l=n(2115),t=n(1757),r=n(491);let o=(0,l.createContext)({Info:e=>{},Error:e=>{}}),i=e=>{let{children:a}=e,[n,i]=(0,l.useState)({value:{},index:0}),c=(e,a)=>i(n=>({value:{...n.value,[n.index]:{text:e,type:a}},index:n.index+1}));return(0,s.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,s.jsx)(t.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[a,l]=e;return(0,s.jsxs)(r.A,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{let e=n.value;delete e[a],i({...n,value:e}),console.log("close: "+a)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(r.A.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(r.A.Body,{className:"text-center",children:l.text})]},"toast"+a)})}),a]})}},9205:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>ei});var s=n(5155),l=n(2115),t=n(7471),r=n(2981),o=n(3360),i=n(6180),c=n(6121),d=n(3667),u=n(5166),v=n(8627),h=n(2963),x=n(8003),m=n(7204),j=n(2859),p=n(1463);let b=l.memo(e=>{var a,n,t,r,o,c,d,u,v,p,b,C,y,A,k,f,N,w,S,F,P;let[I,H]=(0,l.useState)({key:"",value:""}),D=a=>{a(e.data),e.onChange(e.data)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Server",value:e.data.server,onChange:e=>D(a=>a.server=e)}),(0,s.jsx)(m.mc,{title:"FakeDNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{label:"Enabled",checked:e.data.fakedns,onChange:()=>D(e=>e.fakedns=!e.fakedns)}),(0,s.jsx)(m.a9,{label:"IPv4 Range",value:e.data.fakednsIpRange,onChange:e=>D(a=>a.fakednsIpRange=e)}),(0,s.jsx)(m.a9,{label:"IPv6 Range",value:e.data.fakednsIpv6Range,onChange:e=>D(a=>a.fakednsIpv6Range=e)}),(0,s.jsx)(m.e9,{title:"Whitelist",data:e.data.fakednsWhitelist,onChange:e=>D(a=>{e&&(a.fakednsWhitelist=e)})})]})}),(0,s.jsx)(m.mc,{title:"Local DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Host",value:null!==(y=null===(a=e.data.local)||void 0===a?void 0:a.host)&&void 0!==y?y:"",onChange:e=>D(a=>{void 0!==a.local&&(a.local.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(n=e.data.local)||void 0===n?void 0:n.type,onChange:e=>D(a=>{void 0!==a.local&&(a.local.type=e)})}),(0,s.jsx)(m.a9,{label:"Subnet",value:null!==(A=null===(t=e.data.local)||void 0===t?void 0:t.subnet)&&void 0!==A?A:"",onChange:e=>D(a=>{void 0!==a.local&&(a.local.subnet=e)})}),(0,s.jsx)(m.a9,{label:"SNI",value:null!==(k=null===(r=e.data.local)||void 0===r?void 0:r.tlsServername)&&void 0!==k?k:"",onChange:e=>D(a=>{void 0!==a.local&&(a.local.tlsServername=e)})})]})}),(0,s.jsx)(m.mc,{title:"Remote DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Host",value:null!==(f=null===(o=e.data.remote)||void 0===o?void 0:o.host)&&void 0!==f?f:"",onChange:e=>D(a=>{void 0!==a.remote&&(a.remote.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(c=e.data.remote)||void 0===c?void 0:c.type,onChange:e=>D(a=>{void 0!==a.remote&&(a.remote.type=e)})}),(0,s.jsx)(m.a9,{label:"Subnet",value:null!==(N=null===(d=e.data.remote)||void 0===d?void 0:d.subnet)&&void 0!==N?N:"",onChange:e=>D(a=>{void 0!==a.remote&&(a.remote.subnet=e)})}),(0,s.jsx)(m.a9,{label:"SNI",value:null!==(w=null===(u=e.data.remote)||void 0===u?void 0:u.tlsServername)&&void 0!==w?w:"",onChange:e=>D(a=>{void 0!==a.remote&&(a.remote.tlsServername=e)})})]})}),(0,s.jsx)(m.mc,{title:"Bootstrap DNS",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Host",value:null!==(S=null===(v=e.data.bootstrap)||void 0===v?void 0:v.host)&&void 0!==S?S:"",onChange:e=>D(a=>{void 0!==a.bootstrap&&(a.bootstrap.host=e)})}),(0,s.jsx)(g,{label:"Type",value:null===(p=e.data.bootstrap)||void 0===p?void 0:p.type,onChange:e=>D(a=>{void 0!==a.bootstrap&&(a.bootstrap.type=e)})}),(0,s.jsx)(m.a9,{label:"Subnet",value:null!==(F=null===(b=e.data.bootstrap)||void 0===b?void 0:b.subnet)&&void 0!==F?F:"",onChange:e=>D(a=>{void 0!==a.bootstrap&&(a.bootstrap.subnet=e)})}),(0,s.jsx)(m.a9,{label:"SNI",value:null!==(P=null===(C=e.data.bootstrap)||void 0===C?void 0:C.tlsServername)&&void 0!==P?P:"",onChange:e=>D(a=>{void 0!==a.bootstrap&&(a.bootstrap.tlsServername=e)})})]})}),(0,s.jsx)(m.mc,{title:"Hosts",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[Object.entries(e.data.hosts).sort((e,a)=>{let[n]=e,[s]=a;return n>s?-1:1}).map(e=>{let[a,n]=e;return(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{readOnly:!0,value:a}),(0,s.jsx)(x.A.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(i.A.Control,{value:n,onChange:e=>D(n=>n.hosts[a]=e.target.value)}),(0,s.jsx)(h.A,{variant:"outline-danger",onClick:()=>D(e=>delete e.hosts[a]),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]},"hosts"+a)}),(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{value:I.key,onChange:e=>H({...I,key:e.target.value})}),(0,s.jsx)(x.A.Text,{children:(0,s.jsx)("i",{className:"bi bi-arrow-right"})}),(0,s.jsx)(i.A.Control,{value:I.value,onChange:e=>H({...I,value:e.target.value})}),(0,s.jsx)(h.A,{variant:"outline-success",onClick:()=>{""!==I.key&&void 0===e.data.hosts[I.key]&&D(e=>e.hosts[I.key]=I.value)},children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})]})})]})});function g(e){var a;return(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.A,{sm:10,children:(0,s.jsx)(i.A.Select,{value:p.NW[null!==(a=e.value)&&void 0!==a?a:p.NW.udp],onChange:a=>e.onChange(p.NW[a.target.value]),children:p.m9.values.filter(e=>0!==e.number).map(e=>(0,s.jsx)("option",{value:p.NW[e.number],children:e.name},e.number))})})]})}var C=n(9169),y=n(148),A=n(4995),k=n(8927),f=n(5554),N=n.n(f),w=n(878),S=n(6496),F=n(4431),P=n(950),I=n(3577),H=n(7641),D=n(0),Z=n(57),T=n(2273);let E=l.memo(e=>{let a=a=>{a(e.http),e.onChange(e.http)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Username",value:e.http.username,onChange:e=>a(a=>a.username=e)}),(0,s.jsx)(m.a9,{label:"Password",value:e.http.password,onChange:e=>a(a=>a.password=e)})]})}),R=l.memo(e=>{let a=a=>{a(e.reverse_http),e.onChange(e.reverse_http)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.a9,{label:"Url",value:e.reverse_http.url,onChange:e=>a(a=>a.url=e)})})}),q=l.memo(e=>{let a=a=>{a(e.reverse_tcp),e.onChange(e.reverse_tcp)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.a9,{label:"Host",value:e.reverse_tcp.host,onChange:e=>a(a=>a.host=e)})})}),G=l.memo(e=>{let a=a=>{a(e.redir),e.onChange(e.redir)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.a9,{label:"Host",value:e.redir.host,onChange:e=>a(a=>a.host=e)})})}),L=l.memo(e=>{let a=a=>{a(e.tproxy),e.onChange(e.tproxy)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{label:"DNS Hijacking",checked:e.tproxy.dnsHijacking,onChange:()=>a(e=>e.dnsHijacking=!e.dnsHijacking)}),(0,s.jsx)(j.$d,{label:"Force Fake IP",checked:e.tproxy.forceFakeip,onChange:()=>a(e=>e.forceFakeip=!e.forceFakeip)}),(0,s.jsx)(m.a9,{label:"Host",value:e.tproxy.host,onChange:e=>a(a=>a.host=e)})]})}),W=l.memo(e=>{let a=a=>{a(e.socks5),e.onChange(e.socks5)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Username",value:e.socks5.username,onChange:e=>a(a=>a.username=e)}),(0,s.jsx)(m.a9,{label:"Password",value:e.socks5.password,onChange:e=>a(a=>a.password=e)})]})}),_=l.memo(e=>{let a=a=>{a(e.mixed),e.onChange(e.mixed)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Username",value:e.mixed.username,onChange:e=>a(a=>a.username=e)}),(0,s.jsx)(m.a9,{label:"Password",value:e.mixed.password,onChange:e=>a(a=>a.password=e)})]})}),z=l.memo(e=>{var a,n;let t=a=>{a(e.tun),e.onChange(e.tun)},[r,o]=(0,l.useState)((0,T.fj)(e.tun.postUp)),[u,v]=(0,l.useState)((0,T.fj)(e.tun.postDown));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{checked:e.tun.skipMulticast,onChange:()=>t(e=>e.skipMulticast=!e.skipMulticast),label:"Skip Multicast"}),(0,s.jsx)(m.a9,{label:"Name",value:e.tun.name,onChange:e=>t(a=>a.name=e)}),(0,s.jsx)(m.a9,{label:"MTU",value:e.tun.mtu,onChange:e=>t(a=>a.mtu=isNaN(Number(e))?a.mtu:Number(e))}),(0,s.jsx)(m.a9,{label:"IPv4",value:e.tun.portal,onChange:e=>t(a=>a.portal=e)}),(0,s.jsx)(m.a9,{label:"IPv6",value:e.tun.portalV6,onChange:e=>t(a=>a.portalV6=e)}),(0,s.jsx)(m.a9,{label:"Post Up",value:r,onChange:e=>{o(e);try{let a=(0,T.lD)(e);t(e=>e.postUp=a)}catch(e){console.log(e)}}}),(0,s.jsx)(m.a9,{label:"Post Down",value:u,onChange:e=>{v(e);try{let a=(0,T.lD)(e);t(e=>e.postDown=a)}catch(e){console.log(e)}}}),(0,s.jsx)(function(e){return(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.A,{sm:10,children:(0,s.jsxs)(i.A.Select,{value:H.xz[void 0===e.value||null===e.value?H.xz.fdbased:e.value],onChange:a=>e.onChange(H.xz[a.target.value]),children:[(0,s.jsx)("option",{value:H.xz[H.xz.fdbased],children:"Fdbased"}),(0,s.jsx)("option",{value:H.xz[H.xz.channel],children:"Channel"}),(0,s.jsx)("option",{value:H.xz[H.xz.system_gvisor],children:"System"})]})})]})},{label:"Stack",value:e.tun.driver,onChange:e=>t(a=>a.driver=e)}),(0,s.jsx)(m.e9,{title:"Routes",data:null!==(n=null===(a=e.tun.route)||void 0===a?void 0:a.routes)&&void 0!==n?n:[],onChange:e=>t(a=>{a.route||(a.route=(0,I.v)(H.l,{})),e||(e=[]),a.route&&(a.route.routes=e)})})]})}),U=e=>null==e||void 0===e.certificates&&void 0===e.nextProtos&&void 0===e.serverNameCertificate,K=l.memo(e=>{let a=a=>{a(e.cert),e.onChange(e.cert)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.jU,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:e=>a(a=>{a.cert=new TextEncoder().encode(e)})}),(0,s.jsx)(m.jU,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:e=>a(a=>{a.key=new TextEncoder().encode(e)})}),(0,s.jsx)(m.a9,{label:"Cert File",value:e.cert.certFilePath,onChange:e=>a(a=>{a.certFilePath=e})}),(0,s.jsx)(m.a9,{label:"Key File",value:e.cert.keyFilePath,onChange:e=>a(a=>{a.keyFilePath=e})})]})}),B=l.memo(e=>{var a,n;let[t,o]=(0,l.useState)("www.example.com"),c=a=>{a(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.e9,{title:"Next Protos",data:null!==(n=null===(a=e.tls)||void 0===a?void 0:a.nextProtos)&&void 0!==n?n:[],onChange:e=>c(a=>{e&&(a.nextProtos=e)})}),e.tls&&e.tls.certificates.map((e,a)=>(0,s.jsx)(r.A,{className:"mb-2",children:(0,s.jsxs)(r.A.Body,{children:[(0,s.jsx)(r.A.Title,{className:"d-flex justify-content-end align-items-center",children:(0,s.jsx)(h.A,{variant:"outline-danger",onClick:()=>c(e=>{(null==e?void 0:e.certificates)!==void 0&&e.certificates.splice(a,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})}),(0,s.jsx)(K,{cert:(0,I.v)(H.f6,e),onChange:e=>c(n=>{(null==n?void 0:n.certificates)!==void 0&&(n.certificates[a]=e)})})]})},"tls_certificates"+a)),(0,s.jsx)(x.A,{className:"d-flex justify-content-end mb-2",children:(0,s.jsxs)(h.A,{variant:"outline-success",onClick:()=>c(e=>{e.certificates.push((0,I.v)(H.f6,{cert:new Uint8Array(0),key:new Uint8Array(0),certFilePath:"",keyFilePath:""}))}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.serverNameCertificate&&Object.entries(e.tls.serverNameCertificate).map(e=>{let[a,n]=e;return(0,s.jsx)(r.A,{className:"mb-2",children:(0,s.jsxs)(r.A.Body,{children:[(0,s.jsxs)(r.A.Title,{className:"d-flex justify-content-between align-items-center",children:[a,(0,s.jsx)(h.A,{variant:"outline-danger",onClick:()=>c(e=>{null==e||delete e.serverNameCertificate[a]}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,s.jsx)(K,{cert:(0,I.v)(H.f6,n),onChange:e=>c(n=>{n.serverNameCertificate[a]=e})})]})},"server_name_certificate"+a)}),(0,s.jsxs)(x.A,{className:"d-flex justify-content-end",children:[(0,s.jsx)(i.A.Control,{value:t,onChange:e=>o(e.target.value)}),(0,s.jsxs)(h.A,{variant:"outline-success",onClick:()=>c(e=>{""!==t&&(e.serverNameCertificate[t]=(0,I.v)(H.f6,{}))}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})}),M=l.memo(e=>{let a=a=>{U(e.quic.tls)&&(e.quic.tls=void 0),a(e.quic),e.onChange(e.quic)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Host",onChange:e=>a(a=>a.host=e),value:e.quic.host}),e.quic.tls&&(0,s.jsx)(B,{tls:(0,I.v)(H.Qi,null!==e.quic.tls?e.quic.tls:void 0),onChange:e=>a(a=>a.tls=e)})]})}),O=l.memo(e=>{let a=a=>{U(e.tls.tls)&&(e.tls.tls=void 0),a(e.tls),e.onChange(e.tls)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{plaintext:!0,label:"Protocol",value:"TLS"}),e.tls.tls&&(0,s.jsx)(B,{tls:(0,I.v)(H.Qi,e.tls.tls),onChange:e=>a(a=>a.tls=e)})]})}),$=l.memo(e=>{let a=a=>{a(e.reality),e.onChange(e.reality)},[n,t]=(0,l.useState)({value:""}),[r,o]=(0,l.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{plaintext:!0,label:"Protocol",value:"Reality"}),(0,s.jsx)(m.a9,{label:"Dest",value:e.reality.dest,onChange:e=>a(a=>a.dest=e)}),(0,s.jsx)(m.a9,{label:"Private Key",value:e.reality.privateKey,onChange:e=>a(a=>a.privateKey=e)}),(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,className:"nowrap",children:"Short ID"}),e.reality.shortId.map((e,n)=>(0,s.jsx)(d.A,{sm:{span:10,offset:0!==n?2:0},children:(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{value:e,onChange:e=>a(a=>{a.shortId[n]=e.target.value})}),(0,s.jsx)(h.A,{variant:"outline-danger",onClick:()=>a(e=>{e.shortId.splice(n,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},n)),(0,s.jsx)(d.A,{sm:{span:10,offset:0!==e.reality.shortId.length?2:0},children:(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{value:n.value,onChange:e=>t({value:e.target.value})}),(0,s.jsx)(h.A,{variant:"outline-success",onClick:()=>a(e=>{e.shortId.push(n.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]}),(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,className:"nowrap",children:"Server Name"}),e.reality.serverName.map((e,n)=>(0,s.jsx)(d.A,{sm:{span:10,offset:0!==n?2:0},children:(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{value:e,onChange:e=>a(a=>{a.serverName[n]=e.target.value})}),(0,s.jsx)(h.A,{variant:"outline-danger",onClick:()=>a(e=>{e.serverName.splice(n,1)}),children:(0,s.jsx)("i",{className:"bi bi-x-lg"})})]})},n)),(0,s.jsx)(d.A,{sm:{span:10,offset:0!==e.reality.serverName.length?2:0},children:(0,s.jsxs)(x.A,{className:"mb-2",children:[(0,s.jsx)(i.A.Control,{value:r.value,onChange:e=>o({value:e.target.value})}),(0,s.jsx)(h.A,{variant:"outline-success",onClick:()=>a(e=>{e.serverName.push(r.value)}),children:(0,s.jsx)("i",{className:"bi bi-plus-lg"})})]})})]})]})});function V(e,a,n){return n?function(e){e(a),n(a)}:function(e){}}let X=e=>{let[a,n]=(0,l.useState)((0,P.o)(H.Zq,e.value));return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(D.A,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},onShow:()=>{n((0,P.o)(H.Zq,e.value))},centered:!0,children:[(0,s.jsx)(D.A.Header,{children:(0,s.jsx)(D.A.Title,{id:"contained-modal-title-vcenter",children:e.value.name})}),(0,s.jsx)(D.A.Body,{children:(0,s.jsx)(Y,{inbound:a,onChange:e=>{n((0,P.o)(H.Zq,e))}})}),(0,s.jsxs)(D.A.Footer,{children:[(0,s.jsx)(h.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,s.jsx)(h.A,{variant:"outline-primary",onClick:()=>{e.onChange(a),e.onHide()},children:"Save"})]})]})})},Q=l.memo(e=>{var a;let n=V(H.GT,e.inbounds,e.onChange),[t,o]=(0,l.useState)({show:!1,inbound:(0,I.v)(H.Zq,{}),onChange:e=>{}}),[c,d]=(0,l.useState)({value:""});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{show:t.show,value:t.inbound,onHide:()=>{o({...t,show:!1})},onChange:t.onChange}),(0,s.jsx)(j.$d,{label:"DNS Hijack",checked:!!e.inbounds.hijackDns,onChange:()=>n(e=>e.hijackDns=!e.hijackDns)}),(0,s.jsx)(j.$d,{label:"Fakedns",checked:!!e.inbounds.hijackDnsFakeip,onChange:()=>n(e=>e.hijackDnsFakeip=!e.hijackDnsFakeip)}),(0,s.jsx)(j.$d,{label:"Sniff",checked:null!==(a=e.inbounds.sniff)&&void 0!==a&&!!a.enabled,onChange:()=>n(e=>{var a;return e.sniff=(0,I.v)(H.c1,{enabled:!(null===(a=e.sniff)||void 0===a?void 0:a.enabled)})})}),(0,s.jsx)("hr",{}),(0,s.jsxs)(r.A,{children:[(0,s.jsx)(r.A.Header,{children:"Inbounds"}),0===Object.keys(e.inbounds.inbounds).length?(0,s.jsx)(r.A.Body,{children:(0,s.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"})}):(0,s.jsx)(Z.A,{variant:"flush",children:Object.entries(e.inbounds.inbounds).sort((e,a)=>e[0]<=a[0]?-1:1).map(e=>{let[a,t]=e;return(0,s.jsx)(l.Fragment,{children:(0,s.jsxs)(Z.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:e=>{e.stopPropagation(),o({show:!0,inbound:t,onChange:e=>{n(n=>{n.inbounds[a]=e})}})},children:[a,(0,s.jsx)(h.A,{variant:"outline-danger",size:"sm",as:"span",onClick:e=>{e.stopPropagation(),n(e=>{delete e.inbounds[a]})},children:(0,s.jsx)("i",{className:"bi bi-x-lg"})},a+"span-button")]})},"inbounds-"+a)})}),(0,s.jsx)(r.A.Footer,{children:(0,s.jsxs)(x.A,{className:"d-flex justify-content-end",children:[(0,s.jsx)(i.A.Control,{value:c.value,onChange:e=>d({value:e.target.value})}),(0,s.jsxs)(h.A,{variant:"outline-success",onClick:()=>{""!==c.value&&void 0===e.inbounds.inbounds[c.value]&&n(e=>e.inbounds[c.value]=(0,I.v)(H.Zq,{name:c.value}))},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}),Y=e=>{let a=V(H.Zq,e.inbound,e.onChange),n=(n,s)=>{e.inbound.transport.length<=1||n&&0===s||!n&&s===e.inbound.transport.length-1||a(e=>{let a=e.transport[s];e.transport[s]=e.transport[s+(n?-1:1)],e.transport[s+(n?-1:1)]=a})},[t,r]=(0,l.useState)({value:"normal"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{a(e=>e.enabled=!e.enabled)}}),(0,s.jsx)(m.a9,{label:"Name",value:e.inbound.name,onChange:e=>{a(a=>a.name=e)}}),(0,s.jsx)(m.mc,{title:"Network",hideClose:!0,children:(0,s.jsx)(J,{inbound:e.inbound,onChange:e=>{a(a=>e)}})}),(0,s.jsx)(m.mc,{title:"Transport",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[e.inbound.transport.map((l,t)=>{var r,o;return(0,s.jsx)(m.mc,{title:null!==(o=null===(r=l.transport.case)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",onClose:()=>{a(e=>e.transport.splice(t,1))},moveUpDown:new m.fH(e.inbound.transport.length,t,e=>n(e,t)),children:(0,s.jsx)(ea,{transport:l,onChange:e=>{a(a=>a.transport[t]=e)}},t)},t)}),(0,s.jsx)(Z.A,{variant:"flush",children:(0,s.jsx)(Z.A.Item,{children:(0,s.jsxs)(x.A,{children:[(0,s.jsx)(i.A.Select,{value:t.value,onChange:e=>r({value:e.target.value}),children:["normal","tls","mux","http2","websocket","grpc","reality"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsxs)(h.A,{variant:"outline-success",onClick:()=>a(e=>{switch(t.value){case"normal":e.transport.push((0,I.v)(H.ls,{transport:{case:"normal",value:(0,I.v)(H.Rc,{})}}));break;case"tls":e.transport.push((0,I.v)(H.ls,{transport:{case:"tls",value:(0,I.v)(H.fx,{tls:(0,I.v)(H.Qi,{})})}}));break;case"mux":e.transport.push((0,I.v)(H.ls,{transport:{case:"mux",value:(0,I.v)(H.gE,{})}}));break;case"http2":e.transport.push((0,I.v)(H.ls,{transport:{case:"http2",value:(0,I.v)(H.ql,{})}}));break;case"websocket":e.transport.push((0,I.v)(H.ls,{transport:{case:"websocket",value:(0,I.v)(H.BP,{})}}));break;case"grpc":e.transport.push((0,I.v)(H.ls,{transport:{case:"grpc",value:(0,I.v)(H.E_,{})}}));break;case"reality":e.transport.push((0,I.v)(H.ls,{transport:{case:"reality",value:(0,I.v)(H.K0,{})}}))}}),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,s.jsx)(m.mc,{title:"Protocol",hideClose:!0,children:(0,s.jsx)(es,{inbound:e.inbound,onChange:e=>{a(a=>e)}})})]})},J=e=>{var a,n;let t=V(H.Zq,e.inbound,e.onChange),[r,o]=(0,l.useState)({value:null!==(n=null===(a=e.inbound.network.case)||void 0===a?void 0:a.toString())&&void 0!==n?n:"tcpudp"});return(0,l.useEffect)(()=>{o({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.A,{variant:"flush",children:(0,s.jsx)(Z.A.Item,{children:(0,s.jsxs)(x.A,{children:[(0,s.jsx)(i.A.Select,{value:r.value,onChange:e=>o({value:e.target.value}),children:["empty","tcpudp","quic"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(h.A,{variant:"outline-success",onClick:()=>t(e=>{switch(r.value){case"tcpudp":e.network={case:"tcpudp",value:(0,I.v)(H.as,{})};break;case"quic":e.network={case:"quic",value:(0,I.v)(H.sn,{})};break;case"empty":e.network={case:"empty",value:(0,I.v)(H.bN,{})}}}),children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(ee,{inbound:e.inbound,onChange:e.onChange})]})},ee=e=>{let a=V(H.Zq,e.inbound,e.onChange);switch(e.inbound.network.case){case"tcpudp":return(0,s.jsx)(et,{protocol:e.inbound.network.value,onChange:e=>{a(a=>a.network.value=e)}});case"quic":return(0,s.jsx)(M,{quic:e.inbound.network.value,onChange:e=>{a(a=>a.network.value=e)}});case"empty":return(0,s.jsx)(s.Fragment,{})}},ea=e=>{let a=V(H.ls,e.transport,e.onChange);switch(e.transport.transport.case){case"normal":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,s.jsx)(O,{tls:e.transport.transport.value,onChange:e=>{a(a=>a.transport.value=e)}});case"mux":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,s.jsx)($,{reality:e.transport.transport.value,onChange:e=>{a(a=>a.transport.value=e)}})}},en=e=>{let a=V(H.Zq,e.inbound,e.onChange);switch(e.inbound.protocol.case){case"http":return(0,s.jsx)(E,{http:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"reverseHttp":return(0,s.jsx)(R,{reverse_http:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"reverseTcp":return(0,s.jsx)(q,{reverse_tcp:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"socks5":return(0,s.jsx)(W,{socks5:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"socks4a":return(0,s.jsx)(s.Fragment,{});case"mix":return(0,s.jsx)(_,{mixed:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"redir":return(0,s.jsx)(G,{redir:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"tun":return(0,s.jsx)(z,{tun:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"yuubinsya":return(0,s.jsx)(el,{yuubinsya:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}});case"tproxy":return(0,s.jsx)(L,{tproxy:e.inbound.protocol.value,onChange:e=>{a(a=>a.protocol.value=e)}})}},es=e=>{let a=V(H.Zq,e.inbound,e.onChange),[n,t]=(0,l.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,l.useEffect)(()=>{t({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.A,{variant:"flush",children:(0,s.jsx)(Z.A.Item,{children:(0,s.jsxs)(x.A,{children:[(0,s.jsx)(i.A.Select,{value:n.value,onChange:e=>t({value:e.target.value}),children:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(h.A,{variant:"outline-success",onClick:()=>a(e=>{switch(n.value){case"http":e.protocol={case:"http",value:(0,I.v)(H.UM,{})};break;case"reverseHttp":e.protocol={case:"reverseHttp",value:(0,I.v)(H.l0,{})};break;case"reverseTcp":e.protocol={case:"reverseTcp",value:(0,I.v)(H.A0,{})};break;case"socks5":e.protocol={case:"socks5",value:(0,I.v)(H.AK,{})};break;case"mix":e.protocol={case:"mix",value:(0,I.v)(H.JX,{})};break;case"redir":e.protocol={case:"redir",value:(0,I.v)(H.Q9,{})};break;case"tun":e.protocol={case:"tun",value:(0,I.v)(H.vC,{})};break;case"yuubinsya":e.protocol={case:"yuubinsya",value:(0,I.v)(H.lA,{})};break;case"tproxy":e.protocol={case:"tproxy",value:(0,I.v)(H.SL,{})}}}),children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(en,{inbound:e.inbound,onChange:e=>{a(a=>e)}})]})},el=e=>{let a=V(H.lA,e.yuubinsya,e.onChange);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{label:"TCP Encrypt",checked:e.yuubinsya.tcpEncrypt,onChange:()=>{a(e=>e.tcpEncrypt=!e.tcpEncrypt)}}),(0,s.jsx)(j.$d,{label:"UDP Encrypt",checked:e.yuubinsya.udpEncrypt,onChange:()=>{a(e=>e.udpEncrypt=!e.udpEncrypt)}}),(0,s.jsx)(m.a9,{label:"Password",value:e.yuubinsya.password,onChange:e=>{a(a=>a.password=e)}})]})},et=e=>{let a=V(H.as,e.protocol,e.onChange);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.a9,{label:"Host",value:e.protocol.host,onChange:e=>{a(a=>a.host=e)}}),(0,s.jsx)(er,{label:"Control",type:H.JM,value:e.protocol.control,onChange:e=>{a(a=>{a.control=e})}})]})};function er(e){var a;return(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.A,{sm:10,children:(0,s.jsx)(i.A.Select,{value:e.value,onChange:a=>e.onChange(Number(a.target.value)),children:e.type.values.filter(null!==(a=e.filter)&&void 0!==a?a:()=>!0).map(e=>(0,s.jsx)("option",{value:e.number,children:e.name},e.number))})})]})}var eo=n(7558);let ei=function(){var e,a,n,x,g;let f=(0,l.useContext)(y.u),{data:F,error:D,isLoading:Z,mutate:T}=(0,A.Ay)("/config",(0,k.AD)(w.QN),{revalidateOnFocus:!1}),{data:E}=(0,A.Ay)((null==F?void 0:null===(e=F.platform)||void 0===e?void 0:e.androidApp)?null:"/interfaces",(0,k.AD)(S.yz),{revalidateOnFocus:!0});if(void 0!==D)return(0,s.jsx)(N(),{statusCode:D.code,title:D.msg});if(Z||void 0===F)return(0,s.jsx)(C.A,{});let R=e=>{T(a=>{let n=(0,P.o)(w.QN,a);return e(n),n},!1)},q=e=>{var a,n,s=[];return(null===(a=e.systemProxy)||void 0===a?void 0:a.http)&&s.push(1),(null===(n=e.systemProxy)||void 0===n?void 0:n.socks5)&&s.push(2),s};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(t.A.Container,{defaultActiveKey:"home",children:(0,s.jsxs)(r.A,{className:"mb-3",children:[(0,s.jsx)(r.A.Header,{children:(0,s.jsxs)(o.A,{variant:"tabs",style:{flexWrap:"nowrap",overflow:"auto hidden"},children:[(0,s.jsx)(o.A.Item,{children:(0,s.jsx)(o.A.Link,{eventKey:"home",children:"Setting"})}),(0,s.jsx)(o.A.Item,{children:(0,s.jsx)(o.A.Link,{eventKey:"dns",children:"DNS"})}),(0,s.jsx)(o.A.Item,{children:(0,s.jsx)(o.A.Link,{eventKey:"inbound",children:"Inbound"})})]})}),(0,s.jsx)(r.A.Body,{children:(0,s.jsxs)(t.A.Content,{children:[(0,s.jsx)(t.A.Pane,{eventKey:"home",children:(0,s.jsxs)("fieldset",{disabled:null===(a=F.platform)||void 0===a?void 0:a.androidApp,children:[(0,s.jsx)(j.$d,{label:"IPv6",checked:F.ipv6,onChange:()=>T((0,I.v)(w.QN,{...F,ipv6:!F.ipv6}),!1)}),(0,s.jsx)(m.a9,{label:"Network Interface",value:F.netInterface,onChange:e=>R(a=>a.netInterface=e),reminds:null==E?void 0:E.interfaces.map(e=>{if(e.name){var a;return{label:e.name,value:e.name,label_children:null===(a=e.addresses)||void 0===a?void 0:a.map(e=>e||"")}}}).filter(e=>!!e)}),(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-2",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,className:"nowrap",children:"System Proxy"}),(0,s.jsx)(d.A,{sm:10,children:(0,s.jsxs)(u.A,{type:"checkbox",className:"d-flex",defaultValue:q(F),value:q(F),onChange:e=>{let a=!1,n=!1;for(var s of e)1===s&&(a=!0),2===s&&(n=!0);R(e=>{e.systemProxy=(0,I.v)(w.Oe,{http:a,socks5:n})})},children:[(0,s.jsx)(v.A,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-1",value:1,children:"HTTP"}),(0,s.jsx)(v.A,{variant:"outline-primary",className:"w-100",id:"system-proxy-tbg-btn-2",value:2,children:"SOCKS5"})]})})]}),(0,s.jsx)("hr",{}),(0,s.jsx)(r.A.Title,{className:"mb-2",children:"Logcat"}),(0,s.jsx)(j.$d,{label:"Save",checked:F.logcat.save,onChange:()=>R(e=>e.logcat.save=!e.logcat.save)}),(0,s.jsx)(ec,{label:"Level",value:F.logcat.level,onChange:e=>R(a=>{a.logcat.level=e})})]})}),(0,s.jsx)(t.A.Pane,{eventKey:"dns",title:"DNS",children:(0,s.jsx)("fieldset",{disabled:null===(n=F.platform)||void 0===n?void 0:n.androidApp,children:(0,s.jsx)(b,{data:(0,I.v)(p.ct,F.dns),onChange:e=>R(a=>a.dns=(0,P.o)(p.ct,e))})})}),(0,s.jsx)(t.A.Pane,{eventKey:"inbound",title:"Inbound",children:(0,s.jsx)("fieldset",{disabled:null===(x=F.platform)||void 0===x?void 0:x.androidApp,children:(0,s.jsx)(Q,{inbounds:(0,I.v)(H.GT,F.server),onChange:e=>R(a=>a.server=(0,P.o)(H.GT,e))})})})]})}),!(null===(g=F.platform)||void 0===g?void 0:g.androidApp)&&(0,s.jsx)(r.A.Footer,{className:"d-flex justify-content-md-end",children:(0,s.jsx)(h.A,{variant:"outline-primary",onClick:()=>{(0,k.Fp)("/config",{body:(0,eo.R)(w.QN,F)}).then(async e=>{let{error:a}=e;void 0!==a?f.Error("save config failed, ".concat(a.code,"| ").concat(await a.msg)):(f.Info("Save Config Successfully"),T())})},children:"Save"})})]})})})};function ec(e){return(0,s.jsxs)(i.A.Group,{as:c.A,className:"mb-3",children:[(0,s.jsx)(i.A.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(d.A,{sm:10,children:(0,s.jsxs)(i.A.Select,{value:F.cP[e.value],onChange:a=>e.onChange(F.cP[a.target.value]),children:[(0,s.jsx)("option",{value:F.cP[F.cP.debug],children:"DEBUG"}),(0,s.jsx)("option",{value:F.cP[F.cP.info],children:"INFO"}),(0,s.jsx)("option",{value:F.cP[F.cP.warning],children:"WARN"}),(0,s.jsx)("option",{value:F.cP[F.cP.error],children:"ERROR"})]})})]})}},6496:(e,a,n)=>{"use strict";n.d(a,{yz:()=>o});var s=n(6788),l=n(8123),t=n(9297);let r=(0,s.w)("ChF0b29scy90b29scy5wcm90bxINeXVoYWlpbi50b29scyI6CgpJbnRlcmZhY2VzEiwKCmludGVyZmFjZXMYASADKAsyGC55dWhhaWluLnRvb2xzLkludGVyZmFjZSIsCglJbnRlcmZhY2USDAoEbmFtZRgBIAEoCRIRCglhZGRyZXNzZXMYAiADKAkySwoFdG9vbHMSQgoNZ2V0X2ludGVyZmFjZRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRoZLnl1aGFpaW4udG9vbHMuSW50ZXJmYWNlc0IvWi1naXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvdG9vbHNiBnByb3RvMw",[t.t]),o=(0,l.Z)(r,0)}},e=>{var a=a=>e(e.s=a);e.O(0,[235,995,515,920,637,354,734,30,306,878,441,517,358],()=>a(6381)),_N_E=e.O()}]);