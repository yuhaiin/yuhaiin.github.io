(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{2673:(e,t,n)=>{Promise.resolve().then(n.bind(n,7981))},744:(e,t,n)=>{"use strict";n.d(t,{DH:()=>s,G_:()=>h,Ow:()=>u,Oz:()=>l,VN:()=>x,X3:()=>i,_s:()=>p,dp:()=>m,h$:()=>g,kP:()=>a,mv:()=>v,oH:()=>r,r3:()=>o,u1:()=>c});var a="",l="https://clients3.google.com/generate_204",o="dns.nextdns.io:853",r=!0,s="http://ip.sb",c="stun.syncthing.net:3478",i="stun.nextcloud.com:443";let d=()=>{let e=localStorage.getItem("api_url");a=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(l=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(o=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(r="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(s=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{y("api_url",e)},m=e=>{y("latency_dns_url",e)},h=e=>{y("latency_http_url",e)},v=e=>{y("latency_ipv6",e.toString())},g=e=>{y("latency_ip_url",e)},p=e=>{y("latency_stun_url",e)},x=e=>{y("latency_stun_tcp_url",e)},y=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},8927:(e,t,n)=>{"use strict";n.d(t,{AD:()=>s,gR:()=>i,kP:()=>c});var a=n(744),l=n(950),o=n(7558),r=n(6989);function s(e,t,n,s){return c=>s?(0,l.o)(e.output,s):fetch("".concat(a.kP).concat(c),{method:t,body:n?(0,o.R)(e.input,n):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,r.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function c(e,t,n,l){let s=await fetch("".concat(a.kP).concat(t),{method:n,body:l?(0,o.R)(e.input,l):void 0});return s.ok?{data:(0,r.Er)(e.output,new Uint8Array(await s.arrayBuffer()))}:{error:{code:s.status,msg:await s.text()}}}function i(e,t,n){return(l,o)=>{let s,{next:c}=o,i=new URL(""!==a.kP?a.kP:window.location.toString());i.pathname=l,i.protocol="https:"===i.protocol?"wss:":"ws:";let d=!1,u=()=>{d||(console.log("connecting to: ".concat(i)),(s=new WebSocket(i)).binaryType="arraybuffer",s.addEventListener("open",t=>{console.log("connect to: ".concat(i,", event type: ").concat(t.type)),null==s||s.send(e)}),s.addEventListener("message",e=>{let a=(0,r.Er)(t,new Uint8Array(e.data));c(null,e=>n(e,a))}),s.addEventListener("error",e=>{let t="websocket have some error";c({msg:t,code:500}),console.log(t,e.type)}),s.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code),c(null,void 0),d||(console.log("reconnect after 1 seconds"),setTimeout(u,1e3))}))};return u(),()=>{d=!0,void 0!==s&&(console.log("close: ".concat(l)),s.close(),s=void 0)}}}},148:(e,t,n)=>{"use strict";n.d(t,{u:()=>s,y:()=>c});var a=n(5155),l=n(2115),o=n(1757),r=n(491);let s=(0,l.createContext)({Info:e=>{},Error:e=>{}}),c=e=>{let{children:t}=e,[n,c]=(0,l.useState)({value:{},index:0}),i=(e,t)=>c(n=>({value:{...n.value,[n.index]:{text:e,type:t}},index:n.index+1}));return(0,a.jsxs)(s.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,a.jsx)(o.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[t,l]=e;return(0,a.jsxs)(r.A,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{let e=n.value;delete e[t],c({...n,value:e})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,a.jsxs)(r.A.Header,{children:[(0,a.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,a.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,a.jsx)(r.A.Body,{className:"text-center",children:l.text})]},"toast"+t)})}),t]})}},7981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(5155),l=n(2115),o=n(6121),r=n(3667),s=n(2981),c=n(3614),i=n(2963),d=n(4216),u=n(8143),m=n(9637),h=n(2926),v=n(6180),g=n(9169),p=n(148),x=n(4995),y=n(8927),A=n(5554),_=n.n(A),j=n(4601),w=n(9969),k=n(3577);let f=function(){let[e,t]=(0,l.useState)({}),[n,A]=(0,l.useState)((0,k.v)(j.Yk,{name:"",url:"",type:j.NW.reserve})),{data:f,error:b,isLoading:N,mutate:E}=(0,x.Ay)("/sublist",(0,y.AD)(w.B1.method.get)),S=(0,l.useContext)(p.u);if(void 0!==b)return(0,a.jsx)(_(),{statusCode:b.code,title:b.msg});if(N||void 0===f)return(0,a.jsx)(g.A,{});let I=n=>{t({...e,[n]:!0}),(0,y.kP)(w.B1.method.update,"/sub","PATCH",(0,k.v)(w.tA,{names:[n]})).then(async a=>{let{error:l}=a;void 0!==l?S.Error("Update failed ".concat(l.code,"| ").concat(l.msg)):S.Info("Update successfully"),t({...e,[n]:!1})})},C=e=>{(0,y.kP)(w.B1.method.remove,"/sub","DELETE",(0,k.v)(w.tA,{names:[e]})).then(async t=>{let{error:n}=t;void 0!==n?S.Error("delete ".concat(e," failed, ").concat(n.code,"| ").concat(n.msg)):E()})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.A,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[f.links&&Object.entries(f.links).sort((e,t)=>e<=t?-1:1).map(t=>{let[n,l]=t;return(0,a.jsx)(r.A,{className:"mb-3",children:(0,a.jsxs)(s.A,{className:"h-100",children:[(0,a.jsx)(s.A.Header,{children:l.name}),(0,a.jsx)(s.A.Body,{children:l.url}),(0,a.jsxs)(c.A,{as:s.A.Footer,className:"d-flex",children:[(0,a.jsxs)(i.A,{variant:"outline-primary",onClick:()=>I(l.name),disabled:e[l.name],className:"w-100",children:[e[l.name]&&(0,a.jsx)(d.A,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,a.jsxs)(u.A,{onSelect:e=>{"ok"===e&&C(l.name)},as:c.A,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,a.jsx)(m.A.Item,{eventKey:"ok",children:"OK"}),(0,a.jsx)(m.A.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},n)}),(0,a.jsx)(r.A,{className:"mb-3",children:(0,a.jsxs)(s.A,{className:"h-100",children:[(0,a.jsx)(s.A.Header,{children:"Add"}),(0,a.jsxs)(s.A.Body,{children:[(0,a.jsx)(h.A,{label:"Name",className:"mb-3",children:(0,a.jsx)(v.A.Control,{placeholder:"group1",value:n.name,onChange:e=>A((0,k.v)(j.Yk,{...n,name:e.target.value}))})}),(0,a.jsx)(h.A,{label:"Link",className:"mb-3",children:(0,a.jsx)(v.A.Control,{placeholder:"https://www.example.com",value:n.url,onChange:e=>A((0,k.v)(j.Yk,{...n,url:e.target.value}))})})]}),(0,a.jsx)(c.A,{as:s.A.Footer,children:(0,a.jsx)(i.A,{variant:"outline-primary",onClick:async()=>{""!==n.name&&""!==n.url&&(0,y.kP)(w.B1.method.save,"/sub","POST",(0,k.v)(w.bT,{links:[n]})).then(async e=>{let{error:t}=e;void 0!==t?S.Error("save link ".concat(n.url," failed, ").concat(t.code,"| ").concat(t.msg)):E()})},children:"ADD"})})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[295,995,515,920,637,376,145,441,517,358],()=>t(2673)),_N_E=e.O()}]);