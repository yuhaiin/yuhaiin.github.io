(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2129],{7637:(e,a,s)=>{Promise.resolve().then(s.bind(s,9798))},1159:(e,a,s)=>{"use strict";s.d(a,{P:()=>o,t:()=>c});var t=s(7437),l=s(2265),n=s(8620),r=s(1529);let o=(0,l.createContext)({Info:e=>{},Error:e=>{}}),c=e=>{let{children:a}=e,[s,c]=(0,l.useState)({value:{},index:0}),i=(e,a)=>c(s=>({value:{...s.value,[s.index]:{text:e,type:a}},index:s.index+1}));return(0,t.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,t.jsx)(n.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(s.value).map(e=>{let[a,l]=e;return(0,t.jsxs)(r.Z,{role:"alert","aria-live":"assertive",show:!0,bg:l.type,onClose:()=>{let e=s.value;delete e[a],c({...s,value:e}),console.log("close: "+a)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,t.jsxs)(r.Z.Header,{children:[(0,t.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,t.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,t.jsx)(r.Z.Body,{className:"text-center",children:l.text})]},"toast"+a)})}),a]})}},9798:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>C});var t=s(7437),l=s(2265),n=s(358),r=s(6712),o=s(7185),c=s(3181),i=s(2808),d=s(2514),m=s(8785),u=s(5554),x=s(5374),h=s(7420),j=s(716),v=s(1159),Z=s(1617),p=s(879),b=s(6264),y=s.n(b),N=s(1462),g=s(3056),f=s(8537),w=s(6878);let C=function(){let[e,a]=(0,l.useState)({}),[s,b]=(0,l.useState)((0,f.U)(N.Me,{name:"",url:"",type:N.dt.reserve})),{data:C,error:k,isLoading:U,mutate:E}=(0,Z.ZP)("/sublist",(0,p.D4)(g.q_)),O=(0,l.useContext)(v.P);if(void 0!==k)return(0,t.jsx)(y(),{statusCode:k.code,title:k.msg});if(U||void 0===C)return(0,t.jsx)(j.Z,{});let F=s=>{a({...e,[s]:!0}),(0,p.Uo)("/sub",{method:"PATCH",body:(0,w.O)(g.F8,(0,f.U)(g.F8,{names:[s]}))}).then(async t=>{let{error:l}=t;void 0!==l?O.Error("Update failed ".concat(l.code,"| ").concat(await l.msg)):O.Info("Update successfully"),a({...e,[s]:!1})})},P=e=>{(0,p.Uo)("/sub",{method:"DELETE",body:(0,w.O)(g.F8,(0,f.U)(g.F8,{names:[e]}))}).then(async a=>{let{error:s}=a;void 0!==s?O.Error("delete ".concat(e," failed, ").concat(s.code,"| ").concat(await s.msg)):E()})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.Z,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[C.links&&Object.entries(C.links).sort((e,a)=>e<=a?-1:1).map(a=>{let[s,l]=a;return(0,t.jsx)(r.Z,{className:"mb-3",children:(0,t.jsxs)(o.Z,{className:"h-100",children:[(0,t.jsx)(o.Z.Header,{children:l.name}),(0,t.jsx)(o.Z.Body,{children:l.url}),(0,t.jsxs)(c.Z,{as:o.Z.Footer,className:"d-flex",children:[(0,t.jsxs)(i.Z,{variant:"outline-primary",onClick:()=>F(l.name),disabled:e[l.name],className:"w-100",children:[e[l.name]&&(0,t.jsx)(d.Z,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,t.jsxs)(m.Z,{onSelect:e=>{"ok"===e&&P(l.name)},as:c.Z,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,t.jsx)(u.Z.Item,{eventKey:"ok",children:"OK"}),(0,t.jsx)(u.Z.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},s)}),(0,t.jsx)(r.Z,{className:"mb-3",children:(0,t.jsxs)(o.Z,{className:"h-100",children:[(0,t.jsx)(o.Z.Header,{children:"Add"}),(0,t.jsxs)(o.Z.Body,{children:[(0,t.jsx)(x.Z,{label:"Name",className:"mb-3",children:(0,t.jsx)(h.Z.Control,{placeholder:"group1",value:s.name,onChange:e=>b((0,f.U)(N.Me,{...s,name:e.target.value}))})}),(0,t.jsx)(x.Z,{label:"Link",className:"mb-3",children:(0,t.jsx)(h.Z.Control,{placeholder:"https://www.example.com",value:s.url,onChange:e=>b((0,f.U)(N.Me,{...s,url:e.target.value}))})})]}),(0,t.jsx)(c.Z,{as:o.Z.Footer,children:(0,t.jsx)(i.Z,{variant:"outline-primary",onClick:async()=>{""!==s.name&&""!==s.url&&(0,p.Uo)("/sub",{body:(0,w.O)(g.o8,(0,f.U)(g.o8,{links:[s]}))}).then(async e=>{let{error:a}=e;void 0!==a?O.Error("save link ".concat(s.url," failed, ").concat(a.code,"| ").concat(await a.msg)):E()})},children:"ADD"})})]})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8817,1617,548,5554,9768,785,6784,7130,6215,1744],()=>a(7637)),_N_E=e.O()}]);