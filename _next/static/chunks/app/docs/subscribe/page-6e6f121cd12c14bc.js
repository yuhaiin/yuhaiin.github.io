(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2129],{7637:function(e,s,a){Promise.resolve().then(a.bind(a,8323))},4954:function(e,s,a){"use strict";a.d(s,{P:function(){return o},t:function(){return c}});var n=a(7437),t=a(2265),l=a(2230),r=a(6647);let o=(0,t.createContext)({Info:e=>{},Error:e=>{}}),c=e=>{let{children:s}=e,[a,c]=(0,t.useState)({value:{},index:0}),i=(e,s)=>c(a=>({value:{...a.value,[a.index]:{text:e,type:s}},index:a.index+1}));return(0,n.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,n.jsx)(l.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(a.value).map(e=>{let[s,t]=e;return(0,n.jsxs)(r.Z,{role:"alert","aria-live":"assertive",show:!0,bg:t.type,onClose:()=>{let e=a.value;delete e[s],c({...a,value:e}),console.log("close: "+s)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,n.jsxs)(r.Z.Header,{children:[(0,n.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,n.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,n.jsx)(r.Z.Body,{className:"text-center",children:t.text})]},"toast"+s)})}),s]})}},8323:function(e,s,a){"use strict";a.r(s);var n=a(7437),t=a(2265),l=a(4402),r=a(4670),o=a(9420),c=a(2115),i=a(4076),d=a(279),u=a(6926),m=a(4122),x=a(4444),h=a(1593),j=a(6263),v=a(4954),Z=a(5118),f=a(5594),p=a(914),b=a.n(p),y=a(9536),N=a(9862),g=a(8560),w=a(9569);s.default=function(){let[e,s]=(0,t.useState)({}),[a,p]=(0,t.useState)((0,g.U)(y.Me,{name:"",url:"",type:y.dt.reserve})),{data:C,error:k,isLoading:U,mutate:E}=(0,Z.ZP)("/sublist",(0,f.D4)(N.q_)),O=(0,t.useContext)(v.P);if(void 0!==k)return(0,n.jsx)(b(),{statusCode:k.code,title:k.msg});if(U||void 0===C)return(0,n.jsx)(j.Z,{});let F=a=>{s({...e,[a]:!0}),(0,f.Uo)("/sub",{method:"PATCH",body:(0,w.O)(N.F8,(0,g.U)(N.F8,{names:[a]}))}).then(async n=>{let{error:t}=n;void 0!==t?O.Error("Update failed ".concat(t.code,"| ").concat(await t.msg)):O.Info("Update successfully"),s({...e,[a]:!1})})},P=e=>{(0,f.Uo)("/sub",{method:"DELETE",body:(0,w.O)(N.F8,(0,g.U)(N.F8,{names:[e]}))}).then(async s=>{let{error:a}=s;void 0!==a?O.Error("delete ".concat(e," failed, ").concat(a.code,"| ").concat(await a.msg)):E()})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[C.links&&Object.entries(C.links).sort((e,s)=>e<=s?-1:1).map(s=>{let[a,t]=s;return(0,n.jsx)(r.Z,{className:"mb-3",children:(0,n.jsxs)(o.Z,{className:"h-100",children:[(0,n.jsx)(o.Z.Header,{children:t.name}),(0,n.jsx)(o.Z.Body,{children:t.url}),(0,n.jsxs)(c.Z,{as:o.Z.Footer,className:"d-flex",children:[(0,n.jsxs)(i.Z,{variant:"outline-primary",onClick:()=>F(t.name),disabled:e[t.name],className:"w-100",children:[e[t.name]&&(0,n.jsx)(d.Z,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,n.jsxs)(u.Z,{onSelect:e=>{"ok"===e&&P(t.name)},as:c.Z,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,n.jsx)(m.Z.Item,{eventKey:"ok",children:"OK"}),(0,n.jsx)(m.Z.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},a)}),(0,n.jsx)(r.Z,{className:"mb-3",children:(0,n.jsxs)(o.Z,{className:"h-100",children:[(0,n.jsx)(o.Z.Header,{children:"Add"}),(0,n.jsxs)(o.Z.Body,{children:[(0,n.jsx)(x.Z,{label:"Name",className:"mb-3",children:(0,n.jsx)(h.Z.Control,{placeholder:"group1",value:a.name,onChange:e=>p((0,g.U)(y.Me,{...a,name:e.target.value}))})}),(0,n.jsx)(x.Z,{label:"Link",className:"mb-3",children:(0,n.jsx)(h.Z.Control,{placeholder:"https://www.example.com",value:a.url,onChange:e=>p((0,g.U)(y.Me,{...a,url:e.target.value}))})})]}),(0,n.jsx)(c.Z,{as:o.Z.Footer,children:(0,n.jsx)(i.Z,{variant:"outline-primary",onClick:async()=>{""!==a.name&&""!==a.url&&(0,f.Uo)("/sub",{body:(0,w.O)(N.o8,(0,g.U)(N.o8,{links:[a]}))}).then(async e=>{let{error:s}=e;void 0!==s?O.Error("save link ".concat(a.url," failed, ").concat(s.code,"| ").concat(await s.msg)):E()})},children:"ADD"})})]})})]})})}}},function(e){e.O(0,[7439,5118,5982,4122,1253,3605,8719,2971,2117,1744],function(){return e(e.s=7637)}),_N_E=e.O()}]);