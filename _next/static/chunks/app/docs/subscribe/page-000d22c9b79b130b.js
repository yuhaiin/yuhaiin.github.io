(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{7637:function(e,t,n){Promise.resolve().then(n.bind(n,9798))},4971:function(e,t,n){"use strict";n.d(t,{$f:function(){return m},Mj:function(){return b},Ti:function(){return c},U9:function(){return g},XE:function(){return h},YO:function(){return l},Z5:function(){return a},dn:function(){return i},fG:function(){return r},gU:function(){return s},gW:function(){return f},q$:function(){return v},r:function(){return u},rQ:function(){return o}});var r="",o="https://clients3.google.com/generate_204",s="dns.nextdns.io:853",l=!0,c="http://ip.sb",a="stun.syncthing.net:3478",i="stun.nextcloud.com:443";let d=()=>{let e=localStorage.getItem("api_url");r=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(o=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(s=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(l="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(a=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{x("api_url",e)},m=e=>{x("latency_dns_url",e)},h=e=>{x("latency_http_url",e)},f=e=>{x("latency_ipv6",e.toString())},g=e=>{x("latency_ip_url",e)},b=e=>{x("latency_stun_url",e)},v=e=>{x("latency_stun_tcp_url",e)},x=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},716:function(e,t,n){"use strict";var r=n(7437),o=n(2514),s=n(6264),l=n.n(s);t.Z=function(e){return(0,r.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,r.jsx)("div",{className:"p2",children:(0,r.jsx)(o.Z,{})})]})}},879:function(e,t,n){"use strict";n.d(t,{D4:function(){return l},OV:function(){return c},Uo:function(){return a},o5:function(){return i}});var r=n(4971),o=n(4050),s=n(7764);function l(e,t,n,l){return c=>l?(0,o.d)(e,l):fetch("".concat(r.fG).concat(c),{method:t,body:n}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,s.h4)(e,new Uint8Array(await t.arrayBuffer()))})}function c(e,t,n,o){return l=>fetch("".concat(r.fG).concat(l),{method:n,body:o}).then(async n=>{if(!n.ok)throw{code:n.status,msg:n.statusText,raw:n.text()};return t((0,s.h4)(e,new Uint8Array(await n.arrayBuffer())))})}let a=async(e,t)=>{let n=await fetch("".concat(r.fG).concat(e),{method:void 0!==t.method?t.method:"POST",body:t.body});return n.ok?void 0===t.process?{}:{data:t.process(n)}:{error:{code:n.status,msg:n.text()}}};function i(e,t,n){return(o,l)=>{let c,{next:a}=l,i=new URL(""!==r.fG?r.fG:window.location.toString());i.pathname=o,i.protocol="https:"===i.protocol?"wss:":"ws:";let d=!1,u=()=>{d||(console.log("connecting to: ".concat(i)),(c=new WebSocket(i)).binaryType="arraybuffer",c.addEventListener("open",t=>{console.log("connect to: ".concat(i,", event type: ").concat(t.type)),null==c||c.send(e)}),c.addEventListener("message",e=>{let r=(0,s.h4)(t,new Uint8Array(e.data));a(null,e=>n(e,r))}),c.addEventListener("error",e=>{let t="websocket have some error";a({msg:t,code:500}),console.log(t,e.type)}),c.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code),a(null,void 0),d||(console.log("reconnect after 1 seconds"),setTimeout(u,1e3))}))};return u(),()=>{d=!0,void 0!==c&&(console.log("close: ".concat(o)),c.close(),c=void 0)}}}},1159:function(e,t,n){"use strict";n.d(t,{P:function(){return c},t:function(){return a}});var r=n(7437),o=n(2265),s=n(8620),l=n(1529);let c=(0,o.createContext)({Info:e=>{},Error:e=>{}}),a=e=>{let{children:t}=e,[n,a]=(0,o.useState)({value:{},index:0}),i=(e,t)=>a(n=>({value:{...n.value,[n.index]:{text:e,type:t}},index:n.index+1}));return(0,r.jsxs)(c.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,r.jsx)(s.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[t,o]=e;return(0,r.jsxs)(l.Z,{role:"alert","aria-live":"assertive",show:!0,bg:o.type,onClose:()=>{let e=n.value;delete e[t],a({...n,value:e}),console.log("close: "+t)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,r.jsxs)(l.Z.Header,{children:[(0,r.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,r.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,r.jsx)(l.Z.Body,{className:"text-center",children:o.text})]},"toast"+t)})}),t]})}},9798:function(e,t,n){"use strict";n.r(t);var r=n(7437),o=n(2265),s=n(358),l=n(6712),c=n(7185),a=n(3181),i=n(2808),d=n(2514),u=n(8785),m=n(5554),h=n(5374),f=n(7420),g=n(716),b=n(1159),v=n(1617),x=n(879),y=n(6264),p=n.n(y),Z=n(1462),j=n(3056),w=n(8537),S=n(6878);t.default=function(){let[e,t]=(0,o.useState)({}),[n,y]=(0,o.useState)((0,w.U)(Z.Me,{name:"",url:"",type:Z.dt.reserve})),{data:U,error:_,isLoading:A,mutate:C}=(0,v.ZP)("/sublist",(0,x.D4)(j.q_)),I=(0,o.useContext)(b.P);if(void 0!==_)return(0,r.jsx)(p(),{statusCode:_.code,title:_.msg});if(A||void 0===U)return(0,r.jsx)(g.Z,{});let N=n=>{t({...e,[n]:!0}),(0,x.Uo)("/sub",{method:"PATCH",body:(0,S.O)(j.F8,(0,w.U)(j.F8,{names:[n]}))}).then(async r=>{let{error:o}=r;void 0!==o?I.Error("Update failed ".concat(o.code,"| ").concat(await o.msg)):I.Info("Update successfully"),t({...e,[n]:!1})})},B=e=>{(0,x.Uo)("/sub",{method:"DELETE",body:(0,S.O)(j.F8,(0,w.U)(j.F8,{names:[e]}))}).then(async t=>{let{error:n}=t;void 0!==n?I.Error("delete ".concat(e," failed, ").concat(n.code,"| ").concat(await n.msg)):C()})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(s.Z,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[U.links&&Object.entries(U.links).sort((e,t)=>e<=t?-1:1).map(t=>{let[n,o]=t;return(0,r.jsx)(l.Z,{className:"mb-3",children:(0,r.jsxs)(c.Z,{className:"h-100",children:[(0,r.jsx)(c.Z.Header,{children:o.name}),(0,r.jsx)(c.Z.Body,{children:o.url}),(0,r.jsxs)(a.Z,{as:c.Z.Footer,className:"d-flex",children:[(0,r.jsxs)(i.Z,{variant:"outline-primary",onClick:()=>N(o.name),disabled:e[o.name],className:"w-100",children:[e[o.name]&&(0,r.jsx)(d.Z,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,r.jsxs)(u.Z,{onSelect:e=>{"ok"===e&&B(o.name)},as:a.Z,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,r.jsx)(m.Z.Item,{eventKey:"ok",children:"OK"}),(0,r.jsx)(m.Z.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},n)}),(0,r.jsx)(l.Z,{className:"mb-3",children:(0,r.jsxs)(c.Z,{className:"h-100",children:[(0,r.jsx)(c.Z.Header,{children:"Add"}),(0,r.jsxs)(c.Z.Body,{children:[(0,r.jsx)(h.Z,{label:"Name",className:"mb-3",children:(0,r.jsx)(f.Z.Control,{placeholder:"group1",value:n.name,onChange:e=>y((0,w.U)(Z.Me,{...n,name:e.target.value}))})}),(0,r.jsx)(h.Z,{label:"Link",className:"mb-3",children:(0,r.jsx)(f.Z.Control,{placeholder:"https://www.example.com",value:n.url,onChange:e=>y((0,w.U)(Z.Me,{...n,url:e.target.value}))})})]}),(0,r.jsx)(a.Z,{as:c.Z.Footer,children:(0,r.jsx)(i.Z,{variant:"outline-primary",onClick:async()=>{""!==n.name&&""!==n.url&&(0,x.Uo)("/sub",{body:(0,S.O)(j.o8,(0,w.U)(j.o8,{links:[n]}))}).then(async e=>{let{error:t}=e;void 0!==t?I.Error("save link ".concat(n.url," failed, ").concat(t.code,"| ").concat(await t.msg)):C()})},children:"ADD"})})]})})]})})}},8785:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(2265),o=n(1448),s=n.n(o),l=n(5554),c=n(3868),a=n(6852);let i=s().oneOf(["start","end"]),d=s().oneOfType([i,s().shape({sm:i}),s().shape({md:i}),s().shape({lg:i}),s().shape({xl:i}),s().shape({xxl:i}),s().object]);var u=n(7437);let m={id:s().string,href:s().string,onClick:s().func,title:s().node.isRequired,disabled:s().bool,align:d,menuRole:s().string,renderMenuOnMount:s().bool,rootCloseEvent:s().string,menuVariant:s().oneOf(["dark"]),flip:s().bool,bsPrefix:s().string,variant:s().string,size:s().string},h=r.forwardRef((e,t)=>{let{title:n,children:r,bsPrefix:o,rootCloseEvent:s,variant:i,size:d,menuRole:m,renderMenuOnMount:h,disabled:f,href:g,id:b,menuVariant:v,flip:x,...y}=e;return(0,u.jsxs)(l.Z,{ref:t,...y,children:[(0,u.jsx)(c.Z,{id:b,href:g,size:d,variant:i,disabled:f,childBsPrefix:o,children:n}),(0,u.jsx)(a.Z,{role:m,renderOnMount:h,rootCloseEvent:s,variant:v,flip:x,children:r})]})});h.displayName="DropdownButton",h.propTypes=m;var f=h},8516:function(e,t,n){"use strict";n.d(t,{r:function(){return s},u:function(){return l}});var r=n(200),o=n(9320);let s=(0,r.l)("Chtnb29nbGUvcHJvdG9idWYvZW1wdHkucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIHCgVFbXB0eUJ9ChNjb20uZ29vZ2xlLnByb3RvYnVmQgpFbXB0eVByb3RvUAFaLmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2VtcHR5cGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),l=(0,o.L)(s,0)},3168:function(e,t,n){"use strict";n.d(t,{hD:function(){return s},mV:function(){return l}});var r=n(200),o=n(9320);let s=(0,r.l)("Ch5nb29nbGUvcHJvdG9idWYvd3JhcHBlcnMucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIcCgtEb3VibGVWYWx1ZRINCgV2YWx1ZRgBIAEoASIbCgpGbG9hdFZhbHVlEg0KBXZhbHVlGAEgASgCIhsKCkludDY0VmFsdWUSDQoFdmFsdWUYASABKAMiHAoLVUludDY0VmFsdWUSDQoFdmFsdWUYASABKAQiGwoKSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoBSIcCgtVSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoDSIaCglCb29sVmFsdWUSDQoFdmFsdWUYASABKAgiHAoLU3RyaW5nVmFsdWUSDQoFdmFsdWUYASABKAkiGwoKQnl0ZXNWYWx1ZRINCgV2YWx1ZRgBIAEoDEKDAQoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWjFnb29nbGUuZ29sYW5nLm9yZy9wcm90b2J1Zi90eXBlcy9rbm93bi93cmFwcGVyc3Bi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),l=(0,o.L)(s,7)}},function(e){e.O(0,[986,256,466,262,364,56,971,23,744],function(){return e(e.s=7637)}),_N_E=e.O()}]);