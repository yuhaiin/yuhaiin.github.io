(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[129],{7637:function(e,t,n){Promise.resolve().then(n.bind(n,9798))},4971:function(e,t,n){"use strict";n.d(t,{$f:function(){return m},Mj:function(){return h},Ti:function(){return c},U9:function(){return g},XE:function(){return f},YO:function(){return s},Z5:function(){return l},dn:function(){return i},fG:function(){return r},gU:function(){return a},gW:function(){return b},q$:function(){return v},r:function(){return d},rQ:function(){return o}});var r="",o="https://clients3.google.com/generate_204",a="dns.nextdns.io:853",s=!0,c="http://ip.sb",l="stun.syncthing.net:3478",i="stun.nextcloud.com:443";let u=()=>{let e=localStorage.getItem("api_url");r=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(o=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(a=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(s="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(l=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},d=e=>{w("api_url",e)},m=e=>{w("latency_dns_url",e)},f=e=>{w("latency_http_url",e)},b=e=>{w("latency_ipv6",e.toString())},g=e=>{w("latency_ip_url",e)},h=e=>{w("latency_stun_url",e)},v=e=>{w("latency_stun_tcp_url",e)},w=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),u()};u()},716:function(e,t,n){"use strict";var r=n(7437),o=n(2514),a=n(6264),s=n.n(a);t.Z=function(e){return(0,r.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,r.jsx)("div",{className:"p2",children:(0,r.jsx)(o.Z,{})})]})}},879:function(e,t,n){"use strict";n.d(t,{D4:function(){return s},OV:function(){return c},Uo:function(){return l},o5:function(){return i}});var r=n(4971),o=n(4050),a=n(7764);function s(e,t,n,s){return c=>s?(0,o.d)(e,s):fetch("".concat(r.fG).concat(c),{method:t,body:n}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,a.h4)(e,new Uint8Array(await t.arrayBuffer()))})}function c(e,t,n,o){return s=>fetch("".concat(r.fG).concat(s),{method:n,body:o}).then(async n=>{if(!n.ok)throw{code:n.status,msg:n.statusText,raw:n.text()};return t((0,a.h4)(e,new Uint8Array(await n.arrayBuffer())))})}let l=async(e,t)=>{let n=await fetch("".concat(r.fG).concat(e),{method:void 0!==t.method?t.method:"POST",body:t.body});return n.ok?void 0===t.process?{}:{data:t.process(n)}:{error:{code:n.status,msg:n.text()}}};function i(e,t,n){return(o,s)=>{let c,{next:l}=s,i=new URL(""!==r.fG?r.fG:window.location.toString());i.pathname=o,i.protocol="https:"===i.protocol?"wss:":"ws:";let u=!1,d=()=>{u||(console.log("connecting to: ".concat(i)),(c=new WebSocket(i)).binaryType="arraybuffer",c.addEventListener("open",t=>{console.log("connect to: ".concat(i,", event type: ").concat(t.type)),null==c||c.send(e)}),c.addEventListener("message",e=>{let r=(0,a.h4)(t,new Uint8Array(e.data));l(null,e=>n(e,r))}),c.addEventListener("error",e=>{let t="websocket have some error";l({msg:t,code:500}),console.log(t,e.type)}),c.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code),l(null,void 0),u||(console.log("reconnect after 1 seconds"),setTimeout(d,1e3))}))};return d(),()=>{u=!0,void 0!==c&&(console.log("close: ".concat(o)),c.close(),c=void 0)}}}},1159:function(e,t,n){"use strict";n.d(t,{P:function(){return c},t:function(){return l}});var r=n(7437),o=n(2265),a=n(8620),s=n(1529);let c=(0,o.createContext)({Info:e=>{},Error:e=>{}}),l=e=>{let{children:t}=e,[n,l]=(0,o.useState)({value:{},index:0}),i=(e,t)=>l(n=>({value:{...n.value,[n.index]:{text:e,type:t}},index:n.index+1}));return(0,r.jsxs)(c.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,r.jsx)(a.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[t,o]=e;return(0,r.jsxs)(s.Z,{role:"alert","aria-live":"assertive",show:!0,bg:o.type,onClose:()=>{let e=n.value;delete e[t],l({...n,value:e}),console.log("close: "+t)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,r.jsxs)(s.Z.Header,{children:[(0,r.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,r.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,r.jsx)(s.Z.Body,{className:"text-center",children:o.text})]},"toast"+t)})}),t]})}},9798:function(e,t,n){"use strict";n.r(t);var r=n(7437),o=n(2265),a=n(358),s=n(6712),c=n(7185),l=n(3181),i=n(2808),u=n(2514),d=n(8785),m=n(5554),f=n(5374),b=n(7420),g=n(716),h=n(1159),v=n(1617),w=n(879),x=n(6264),p=n.n(x),y=n(1462),Z=n(3056),j=n(8537),I=n(6878);t.default=function(){let[e,t]=(0,o.useState)({}),[n,x]=(0,o.useState)((0,j.U)(y.Me,{name:"",url:"",type:y.dt.reserve})),{data:k,error:S,isLoading:N,mutate:E}=(0,v.ZP)("/sublist",(0,w.D4)(Z.q_)),D=(0,o.useContext)(h.P);if(void 0!==S)return(0,r.jsx)(p(),{statusCode:S.code,title:S.msg});if(N||void 0===k)return(0,r.jsx)(g.Z,{});let U=n=>{t({...e,[n]:!0}),(0,w.Uo)("/sub",{method:"PATCH",body:(0,I.O)(Z.F8,(0,j.U)(Z.F8,{names:[n]}))}).then(async r=>{let{error:o}=r;void 0!==o?D.Error("Update failed ".concat(o.code,"| ").concat(await o.msg)):D.Info("Update successfully"),t({...e,[n]:!1})})},B=e=>{(0,w.Uo)("/sub",{method:"DELETE",body:(0,I.O)(Z.F8,(0,j.U)(Z.F8,{names:[e]}))}).then(async t=>{let{error:n}=t;void 0!==n?D.Error("delete ".concat(e," failed, ").concat(n.code,"| ").concat(await n.msg)):E()})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.Z,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[k.links&&Object.entries(k.links).sort((e,t)=>e<=t?-1:1).map(t=>{let[n,o]=t;return(0,r.jsx)(s.Z,{className:"mb-3",children:(0,r.jsxs)(c.Z,{className:"h-100",children:[(0,r.jsx)(c.Z.Header,{children:o.name}),(0,r.jsx)(c.Z.Body,{children:o.url}),(0,r.jsxs)(l.Z,{as:c.Z.Footer,className:"d-flex",children:[(0,r.jsxs)(i.Z,{variant:"outline-primary",onClick:()=>U(o.name),disabled:e[o.name],className:"w-100",children:[e[o.name]&&(0,r.jsx)(u.Z,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,r.jsxs)(d.Z,{onSelect:e=>{"ok"===e&&B(o.name)},as:l.Z,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,r.jsx)(m.Z.Item,{eventKey:"ok",children:"OK"}),(0,r.jsx)(m.Z.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},n)}),(0,r.jsx)(s.Z,{className:"mb-3",children:(0,r.jsxs)(c.Z,{className:"h-100",children:[(0,r.jsx)(c.Z.Header,{children:"Add"}),(0,r.jsxs)(c.Z.Body,{children:[(0,r.jsx)(f.Z,{label:"Name",className:"mb-3",children:(0,r.jsx)(b.Z.Control,{placeholder:"group1",value:n.name,onChange:e=>x((0,j.U)(y.Me,{...n,name:e.target.value}))})}),(0,r.jsx)(f.Z,{label:"Link",className:"mb-3",children:(0,r.jsx)(b.Z.Control,{placeholder:"https://www.example.com",value:n.url,onChange:e=>x((0,j.U)(y.Me,{...n,url:e.target.value}))})})]}),(0,r.jsx)(l.Z,{as:c.Z.Footer,children:(0,r.jsx)(i.Z,{variant:"outline-primary",onClick:async()=>{""!==n.name&&""!==n.url&&(0,w.Uo)("/sub",{body:(0,I.O)(Z.o8,(0,j.U)(Z.o8,{links:[n]}))}).then(async e=>{let{error:t}=e;void 0!==t?D.Error("save link ".concat(n.url," failed, ").concat(t.code,"| ").concat(await t.msg)):E()})},children:"ADD"})})]})})]})})}},3181:function(e,t,n){"use strict";var r=n(6800),o=n.n(r),a=n(2265),s=n(2574),c=n(7437);let l=a.forwardRef((e,t)=>{let{bsPrefix:n,size:r,vertical:a=!1,className:l,role:i="group",as:u="div",...d}=e,m=(0,s.vE)(n,"btn-group"),f=m;return a&&(f="".concat(m,"-vertical")),(0,c.jsx)(u,{...d,ref:t,role:i,className:o()(l,f,r&&"".concat(m,"-").concat(r))})});l.displayName="ButtonGroup",t.Z=l},8785:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(2265),o=n(1448),a=n.n(o),s=n(5554),c=n(3868),l=n(6852);let i=a().oneOf(["start","end"]),u=a().oneOfType([i,a().shape({sm:i}),a().shape({md:i}),a().shape({lg:i}),a().shape({xl:i}),a().shape({xxl:i}),a().object]);var d=n(7437);let m={id:a().string,href:a().string,onClick:a().func,title:a().node.isRequired,disabled:a().bool,align:u,menuRole:a().string,renderMenuOnMount:a().bool,rootCloseEvent:a().string,menuVariant:a().oneOf(["dark"]),flip:a().bool,bsPrefix:a().string,variant:a().string,size:a().string},f=r.forwardRef((e,t)=>{let{title:n,children:r,bsPrefix:o,rootCloseEvent:a,variant:i,size:u,menuRole:m,renderMenuOnMount:f,disabled:b,href:g,id:h,menuVariant:v,flip:w,...x}=e;return(0,d.jsxs)(s.Z,{ref:t,...x,children:[(0,d.jsx)(c.Z,{id:h,href:g,size:u,variant:i,disabled:b,childBsPrefix:o,children:n}),(0,d.jsx)(l.Z,{role:m,renderOnMount:f,rootCloseEvent:a,variant:v,flip:w,children:r})]})});f.displayName="DropdownButton",f.propTypes=m;var b=f},358:function(e,t,n){"use strict";var r=n(6800),o=n.n(r),a=n(2265),s=n(2574),c=n(7437);let l=a.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:a="div",...l}=e,i=(0,s.vE)(n,"row"),u=(0,s.pi)(),d=(0,s.zG)(),m="".concat(i,"-cols"),f=[];return u.forEach(e=>{let t;let n=l[e];delete l[e],null!=n&&"object"==typeof n?{cols:t}=n:t=n,null!=t&&f.push("".concat(m).concat(e!==d?"-".concat(e):"","-").concat(t))}),(0,c.jsx)(a,{ref:t,...l,className:o()(r,i,...f)})});l.displayName="Row",t.Z=l},6878:function(e,t,n){"use strict";n.d(t,{O:function(){return c},d:function(){return i}});var r=n(5482),o=n(1650),a=n(240);let s={writeUnknownFields:!0};function c(e,t,n){return l(new o.Lt,n?Object.assign(Object.assign({},s),n):s,(0,r.SC)(e,t)).finish()}function l(e,t,n){var r;for(let r of n.sortedFields){if(!n.isSet(r)){if(3==r.presence)throw Error(`cannot encode field ${n.desc.typeName}.${r.name} to binary: required field not set`);continue}i(e,t,n,r)}if(t.writeUnknownFields)for(let{no:t,wireType:o,data:a}of null!==(r=n.getUnknown())&&void 0!==r?r:[])e.tag(t,o).raw(a);return e}function i(e,t,n,r){var s;switch(r.fieldKind){case"scalar":case"enum":u(e,null!==(s=r.scalar)&&void 0!==s?s:a.w.INT32,r.number,n.get(r));break;case"list":!function(e,t,n,r){var s;if("message"==n.listKind){for(let o of r)d(e,t,n,o);return}let c=null!==(s=n.scalar)&&void 0!==s?s:a.w.INT32;if(n.packed){if(!r.size)return;for(let t of(e.tag(n.number,o.TD.LengthDelimited).fork(),r))m(e,c,t);e.join();return}for(let t of r)u(e,c,n.number,t)}(e,t,r,n.get(r));break;case"message":d(e,t,r,n.get(r));break;case"map":for(let[s,c]of n.get(r))!function(e,t,n,r,s){var c;switch(e.tag(n.number,o.TD.LengthDelimited).fork(),u(e,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":u(e,null!==(c=n.scalar)&&void 0!==c?c:a.w.INT32,2,s);break;case"message":l(e.tag(2,o.TD.LengthDelimited).fork(),t,s).join()}e.join()}(e,t,r,s,c)}}function u(e,t,n,r){m(e.tag(n,function(e){switch(e){case a.w.BYTES:case a.w.STRING:return o.TD.LengthDelimited;case a.w.DOUBLE:case a.w.FIXED64:case a.w.SFIXED64:return o.TD.Bit64;case a.w.FIXED32:case a.w.SFIXED32:case a.w.FLOAT:return o.TD.Bit32;default:return o.TD.Varint}}(t)),t,r)}function d(e,t,n,r){n.delimitedEncoding?l(e.tag(n.number,o.TD.StartGroup),t,r).tag(n.number,o.TD.EndGroup):l(e.tag(n.number,o.TD.LengthDelimited).fork(),t,r).join()}function m(e,t,n){switch(t){case a.w.STRING:e.string(n);break;case a.w.BOOL:e.bool(n);break;case a.w.DOUBLE:e.double(n);break;case a.w.FLOAT:e.float(n);break;case a.w.INT32:e.int32(n);break;case a.w.INT64:e.int64(n);break;case a.w.UINT64:e.uint64(n);break;case a.w.FIXED64:e.fixed64(n);break;case a.w.BYTES:e.bytes(n);break;case a.w.FIXED32:e.fixed32(n);break;case a.w.SFIXED32:e.sfixed32(n);break;case a.w.SFIXED64:e.sfixed64(n);break;case a.w.SINT64:e.sint64(n);break;case a.w.UINT32:e.uint32(n);break;case a.w.SINT32:e.sint32(n)}}},8516:function(e,t,n){"use strict";n.d(t,{r:function(){return a},u:function(){return s}});var r=n(200),o=n(9320);let a=(0,r.l)("Chtnb29nbGUvcHJvdG9idWYvZW1wdHkucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIHCgVFbXB0eUJ9ChNjb20uZ29vZ2xlLnByb3RvYnVmQgpFbXB0eVByb3RvUAFaLmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2VtcHR5cGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),s=(0,o.L)(a,0)},3168:function(e,t,n){"use strict";n.d(t,{hD:function(){return a},mV:function(){return s}});var r=n(200),o=n(9320);let a=(0,r.l)("Ch5nb29nbGUvcHJvdG9idWYvd3JhcHBlcnMucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIcCgtEb3VibGVWYWx1ZRINCgV2YWx1ZRgBIAEoASIbCgpGbG9hdFZhbHVlEg0KBXZhbHVlGAEgASgCIhsKCkludDY0VmFsdWUSDQoFdmFsdWUYASABKAMiHAoLVUludDY0VmFsdWUSDQoFdmFsdWUYASABKAQiGwoKSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoBSIcCgtVSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoDSIaCglCb29sVmFsdWUSDQoFdmFsdWUYASABKAgiHAoLU3RyaW5nVmFsdWUSDQoFdmFsdWUYASABKAkiGwoKQnl0ZXNWYWx1ZRINCgV2YWx1ZRgBIAEoDEKDAQoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWjFnb29nbGUuZ29sYW5nLm9yZy9wcm90b2J1Zi90eXBlcy9rbm93bi93cmFwcGVyc3Bi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),s=(0,o.L)(a,7)}},function(e){e.O(0,[817,548,485,512,554,56,971,23,744],function(){return e(e.s=7637)}),_N_E=e.O()}]);