(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6943],{2673:(e,t,n)=>{Promise.resolve().then(n.bind(n,7981))},348:(e,t,n)=>{"use strict";n.d(t,{DH:()=>r,G_:()=>h,Ow:()=>u,Oz:()=>a,VN:()=>p,X3:()=>i,_s:()=>g,dp:()=>m,h$:()=>v,kP:()=>l,mv:()=>x,oH:()=>o,r3:()=>s,u1:()=>c});let l="",a="https://clients3.google.com/generate_204",s="dns.nextdns.io:853",o=!0,r="http://ip.sb",c="stun.syncthing.net:3478",i="stun.nextcloud.com:443",d=()=>{let e=localStorage.getItem("api_url");l=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(a=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(s=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(o="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(r=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{y("api_url",e)},m=e=>{y("latency_dns_url",e)},h=e=>{y("latency_http_url",e)},x=e=>{y("latency_ipv6",e.toString())},v=e=>{y("latency_ip_url",e)},g=e=>{y("latency_stun_url",e)},p=e=>{y("latency_stun_tcp_url",e)},y=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},9169:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,A:()=>o});var l=n(5155),a=n(4216);let s=e=>{let{statusCode:t,title:n}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("p",{className:"fw-bold fs-3",children:[t," | ",(0,l.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:n})]})})},o=function(e){return(0,l.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,l.jsx)("div",{className:"p2",children:(0,l.jsx)(a.A,{})})]})}},8927:(e,t,n)=>{"use strict";n.d(t,{AD:()=>r,kP:()=>c,zZ:()=>i});var l=n(950),a=n(7558),s=n(6989),o=n(348);function r(e,t,n,r){return c=>r?(0,l.o)(e.output,r):fetch("".concat(o.kP).concat(c),{method:t,body:n?(0,a.R)(e.input,n):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,s.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function c(e,t,n,l){let r=await fetch("".concat(o.kP).concat(t),{method:n,body:l?(0,a.R)(e.input,l):void 0});return r.ok?{data:(0,s.Er)(e.output,new Uint8Array(await r.arrayBuffer()))}:{error:{code:r.status,msg:await r.text()}}}function i(e,t,n){let l,r=!1;return(c,i)=>{let{next:d}=i,u=new URL(""!==o.kP?o.kP:window.location.toString());u.pathname=c,u.protocol="https:"===u.protocol?"wss:":"ws:";let m=()=>{r||(console.log("connecting to: ".concat(u)),(l=new WebSocket(u)).binaryType="arraybuffer",l.addEventListener("open",n=>{console.log("connect to: ".concat(u,", event type: ").concat(n.type)),null==l||l.send((0,a.R)(e.input,t))}),l.addEventListener("message",t=>{let l=(0,s.Er)(e.output,new Uint8Array(t.data));d(null,e=>n(l,e))}),l.addEventListener("error",e=>{let t="websocket have some error";d({msg:t,code:500}),console.log(t,e.type)}),l.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code),d(null,void 0),r||(console.log("reconnect after 1 seconds"),setTimeout(m,1e3))}))};return m(),()=>{r=!0,void 0!==l&&(console.log("close: ".concat(c)),l.close(),l=void 0)}}}},148:(e,t,n)=>{"use strict";n.d(t,{u:()=>r,y:()=>c});var l=n(5155),a=n(2115),s=n(1757),o=n(491);let r=(0,a.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)({value:{},index:0}),i=(e,t)=>c(n=>({value:{...n.value,[n.index]:{text:e,type:t}},index:n.index+1}));return(0,l.jsxs)(r.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,l.jsx)(s.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(n.value).map(e=>{let[t,n]=e;return(0,l.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{c(e=>{let n={...e.value};return delete n[t],{...e,value:n}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,l.jsxs)(o.A.Header,{children:[(0,l.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,l.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,l.jsx)(o.A.Body,{className:"text-center",children:n.text})]},"toast"+t)})}),t]})}},7981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var l=n(5155),a=n(3577),s=n(5554),o=n.n(s),r=n(2115),c=n(6121),i=n(3667),d=n(2981),u=n(3614),m=n(2963),h=n(4216),x=n(8143),v=n(9637),g=n(2926),p=n(6180),y=n(7021),j=n(9169),A=n(8927),f=n(148),_=n(9969),w=n(4601);let k=function(){let[e,t]=(0,r.useState)({}),[n,s]=(0,r.useState)((0,a.v)(w.Yk,{name:"",url:"",type:w.NW.reserve})),{data:k,error:b,isLoading:N,mutate:E}=(0,y.Ay)("/sublist",(0,A.AD)(_.B1.method.get)),S=(0,r.useContext)(f.u);if(void 0!==b)return(0,l.jsx)(o(),{statusCode:b.code,title:b.msg});if(N||void 0===k)return(0,l.jsx)(j.A,{});let I=n=>{t({...e,[n]:!0}),(0,A.kP)(_.B1.method.update,"/sub","PATCH",(0,a.v)(_.tA,{names:[n]})).then(async l=>{let{error:a}=l;void 0!==a?S.Error("Update failed ".concat(a.code,"| ").concat(a.msg)):S.Info("Update successfully"),t({...e,[n]:!1})})},C=e=>{(0,A.kP)(_.B1.method.remove,"/sub","DELETE",(0,a.v)(_.tA,{names:[e]})).then(async t=>{let{error:n}=t;void 0!==n?S.Error("delete ".concat(e," failed, ").concat(n.code,"| ").concat(n.msg)):E()})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.A,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[k.links&&Object.entries(k.links).sort((e,t)=>e<=t?-1:1).map(t=>{let[n,a]=t;return(0,l.jsx)(i.A,{className:"mb-3",children:(0,l.jsxs)(d.A,{className:"h-100",children:[(0,l.jsx)(d.A.Header,{children:a.name}),(0,l.jsx)(d.A.Body,{children:a.url}),(0,l.jsxs)(u.A,{as:d.A.Footer,className:"d-flex",children:[(0,l.jsxs)(m.A,{variant:"outline-primary",onClick:()=>I(a.name),disabled:e[a.name],className:"w-100",children:[e[a.name]&&(0,l.jsx)(h.A,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,l.jsxs)(x.A,{onSelect:e=>{"ok"===e&&C(a.name)},as:u.A,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,l.jsx)(v.A.Item,{eventKey:"ok",children:"OK"}),(0,l.jsx)(v.A.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},n)}),(0,l.jsx)(i.A,{className:"mb-3",children:(0,l.jsxs)(d.A,{className:"h-100",children:[(0,l.jsx)(d.A.Header,{children:"Add"}),(0,l.jsxs)(d.A.Body,{children:[(0,l.jsx)(g.A,{label:"Name",className:"mb-3",children:(0,l.jsx)(p.A.Control,{placeholder:"group1",value:n.name,onChange:e=>s((0,a.v)(w.Yk,{...n,name:e.target.value}))})}),(0,l.jsx)(g.A,{label:"Link",className:"mb-3",children:(0,l.jsx)(p.A.Control,{placeholder:"https://www.example.com",value:n.url,onChange:e=>s((0,a.v)(w.Yk,{...n,url:e.target.value}))})})]}),(0,l.jsx)(u.A,{as:d.A.Footer,children:(0,l.jsx)(m.A,{variant:"outline-primary",onClick:async()=>{""!==n.name&&""!==n.url&&(0,A.kP)(_.B1.method.save,"/sub","POST",(0,a.v)(_.bT,{links:[n]})).then(async e=>{let{error:t}=e;void 0!==t?S.Error("save link ".concat(n.url," failed, ").concat(t.code,"| ").concat(t.msg)):E()})},children:"ADD"})})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7295,867,6306,8920,9818,9637,7443,9969,8441,1517,7358],()=>t(2673)),_N_E=e.O()}]);