(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{2673:(e,t,a)=>{Promise.resolve().then(a.bind(a,7981))},744:(e,t,a)=>{"use strict";a.d(t,{DH:()=>l,G_:()=>h,Ow:()=>u,Oz:()=>o,VN:()=>g,X3:()=>i,_s:()=>v,dp:()=>m,h$:()=>p,kP:()=>n,mv:()=>y,oH:()=>s,r3:()=>r,u1:()=>c});var n="",o="https://clients3.google.com/generate_204",r="dns.nextdns.io:853",s=!0,l="http://ip.sb",c="stun.syncthing.net:3478",i="stun.nextcloud.com:443";let d=()=>{let e=localStorage.getItem("api_url");n=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(o=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(r=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(s="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(l=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{x("api_url",e)},m=e=>{x("latency_dns_url",e)},h=e=>{x("latency_http_url",e)},y=e=>{x("latency_ipv6",e.toString())},p=e=>{x("latency_ip_url",e)},v=e=>{x("latency_stun_url",e)},g=e=>{x("latency_stun_tcp_url",e)},x=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},8927:(e,t,a)=>{"use strict";a.d(t,{AD:()=>l,EY:()=>i,Fp:()=>u,L1:()=>c,gR:()=>m,kP:()=>d});var n=a(744),o=a(950),r=a(6989),s=a(7558);function l(e,t,a,s){return l=>s?(0,o.o)(e,s):fetch("".concat(n.kP).concat(l),{method:t,body:a}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,r.Er)(e,new Uint8Array(await t.arrayBuffer()))})}function c(e,t,a,l){return c=>l?(0,o.o)(e.output,l):fetch("".concat(n.kP).concat(c),{method:t,body:a?(0,s.R)(e.input,a):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,r.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}function i(e,t,a,o){return s=>fetch("".concat(n.kP).concat(s),{method:a,body:o}).then(async a=>{if(!a.ok)throw{code:a.status,msg:a.statusText,raw:a.text()};return t((0,r.Er)(e,new Uint8Array(await a.arrayBuffer())))})}async function d(e,t,a,n){return u(t,{method:a,body:n?(0,s.R)(e.input,n):void 0,process:async t=>(0,r.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}let u=async(e,t)=>{let a=await fetch("".concat(n.kP).concat(e),{method:void 0!==t.method?t.method:"POST",body:t.body});return a.ok?void 0===t.process?{}:{data:t.process(a)}:{error:{code:a.status,msg:a.text()}}};function m(e,t,a){return(o,s)=>{let l,{next:c}=s,i=new URL(""!==n.kP?n.kP:window.location.toString());i.pathname=o,i.protocol="https:"===i.protocol?"wss:":"ws:";let d=!1,u=()=>{d||(console.log("connecting to: ".concat(i)),(l=new WebSocket(i)).binaryType="arraybuffer",l.addEventListener("open",t=>{console.log("connect to: ".concat(i,", event type: ").concat(t.type)),null==l||l.send(e)}),l.addEventListener("message",e=>{let n=(0,r.Er)(t,new Uint8Array(e.data));c(null,e=>a(e,n))}),l.addEventListener("error",e=>{let t="websocket have some error";c({msg:t,code:500}),console.log(t,e.type)}),l.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code),c(null,void 0),d||(console.log("reconnect after 1 seconds"),setTimeout(u,1e3))}))};return u(),()=>{d=!0,void 0!==l&&(console.log("close: ".concat(o)),l.close(),l=void 0)}}}},148:(e,t,a)=>{"use strict";a.d(t,{u:()=>l,y:()=>c});var n=a(5155),o=a(2115),r=a(1757),s=a(491);let l=(0,o.createContext)({Info:e=>{},Error:e=>{}}),c=e=>{let{children:t}=e,[a,c]=(0,o.useState)({value:{},index:0}),i=(e,t)=>c(a=>({value:{...a.value,[a.index]:{text:e,type:t}},index:a.index+1}));return(0,n.jsxs)(l.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,n.jsx)(r.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(a.value).map(e=>{let[t,o]=e;return(0,n.jsxs)(s.A,{role:"alert","aria-live":"assertive",show:!0,bg:o.type,onClose:()=>{let e=a.value;delete e[t],c({...a,value:e})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,n.jsxs)(s.A.Header,{children:[(0,n.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,n.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,n.jsx)(s.A.Body,{className:"text-center",children:o.text})]},"toast"+t)})}),t]})}},7981:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var n=a(5155),o=a(2115),r=a(6121),s=a(3667),l=a(2981),c=a(3614),i=a(2963),d=a(4216),u=a(8143),m=a(9637),h=a(2926),y=a(6180),p=a(9169),v=a(148),g=a(4995),x=a(8927),A=a(5554),w=a.n(A),f=a(4601),b=a(9969),_=a(3577),j=a(7558);let k=function(){let[e,t]=(0,o.useState)({}),[a,A]=(0,o.useState)((0,_.v)(f.Yk,{name:"",url:"",type:f.NW.reserve})),{data:k,error:N,isLoading:E,mutate:S}=(0,g.Ay)("/sublist",(0,x.AD)(b.JN)),I=(0,o.useContext)(v.u);if(void 0!==N)return(0,n.jsx)(w(),{statusCode:N.code,title:N.msg});if(E||void 0===k)return(0,n.jsx)(p.A,{});let C=a=>{t({...e,[a]:!0}),(0,x.Fp)("/sub",{method:"PATCH",body:(0,j.R)(b.tA,(0,_.v)(b.tA,{names:[a]}))}).then(async n=>{let{error:o}=n;void 0!==o?I.Error("Update failed ".concat(o.code,"| ").concat(await o.msg)):I.Info("Update successfully"),t({...e,[a]:!1})})},P=e=>{(0,x.Fp)("/sub",{method:"DELETE",body:(0,j.R)(b.tA,(0,_.v)(b.tA,{names:[e]}))}).then(async t=>{let{error:a}=t;void 0!==a?I.Error("delete ".concat(e," failed, ").concat(a.code,"| ").concat(await a.msg)):S()})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(r.A,{className:"row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4",children:[k.links&&Object.entries(k.links).sort((e,t)=>e<=t?-1:1).map(t=>{let[a,o]=t;return(0,n.jsx)(s.A,{className:"mb-3",children:(0,n.jsxs)(l.A,{className:"h-100",children:[(0,n.jsx)(l.A.Header,{children:o.name}),(0,n.jsx)(l.A.Body,{children:o.url}),(0,n.jsxs)(c.A,{as:l.A.Footer,className:"d-flex",children:[(0,n.jsxs)(i.A,{variant:"outline-primary",onClick:()=>C(o.name),disabled:e[o.name],className:"w-100",children:[e[o.name]&&(0,n.jsx)(d.A,{size:"sm",animation:"border",variant:"primary"}),"Update"]}),(0,n.jsxs)(u.A,{onSelect:e=>{"ok"===e&&P(o.name)},as:c.A,variant:"outline-danger",title:"Remove",className:"w-100",children:[(0,n.jsx)(m.A.Item,{eventKey:"ok",children:"OK"}),(0,n.jsx)(m.A.Item,{eventKey:"cancel",children:"Cancel"})]})]})]})},a)}),(0,n.jsx)(s.A,{className:"mb-3",children:(0,n.jsxs)(l.A,{className:"h-100",children:[(0,n.jsx)(l.A.Header,{children:"Add"}),(0,n.jsxs)(l.A.Body,{children:[(0,n.jsx)(h.A,{label:"Name",className:"mb-3",children:(0,n.jsx)(y.A.Control,{placeholder:"group1",value:a.name,onChange:e=>A((0,_.v)(f.Yk,{...a,name:e.target.value}))})}),(0,n.jsx)(h.A,{label:"Link",className:"mb-3",children:(0,n.jsx)(y.A.Control,{placeholder:"https://www.example.com",value:a.url,onChange:e=>A((0,_.v)(f.Yk,{...a,url:e.target.value}))})})]}),(0,n.jsx)(c.A,{as:l.A.Footer,children:(0,n.jsx)(i.A,{variant:"outline-primary",onClick:async()=>{""!==a.name&&""!==a.url&&(0,x.Fp)("/sub",{body:(0,j.R)(b.bT,(0,_.v)(b.bT,{links:[a]}))}).then(async e=>{let{error:t}=e;void 0!==t?I.Error("save link ".concat(a.url," failed, ").concat(t.code,"| ").concat(await t.msg)):S()})},children:"ADD"})})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[488,995,515,920,637,942,145,441,517,358],()=>t(2673)),_N_E=e.O()}]);