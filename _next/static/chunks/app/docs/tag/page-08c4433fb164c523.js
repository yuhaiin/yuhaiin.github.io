(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5120:function(e,t,a){Promise.resolve().then(a.bind(a,4997))},1308:function(e,t,a){"use strict";var s=a(7437),n=a(4860),o=a(1375),r=a.n(o);t.Z=function(e){return(0,s.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,s.jsx)("div",{className:"p2",children:(0,s.jsx)(n.Z,{})})]})}},6347:function(e,t,a){"use strict";a.d(t,{P:function(){return i},t:function(){return l}});var s=a(7437),n=a(2265),o=a(8215),r=a(9023);let i=(0,n.createContext)({Info:e=>{},Error:e=>{}}),l=e=>{let{children:t}=e,[a,l]=(0,n.useState)({value:{},index:0}),c=(e,t)=>{l(a=>(a.value[a.index]={text:e,type:t},a.index++,{...a}))};return(0,s.jsxs)(i.Provider,{value:{Info:e=>{console.log(e),c(e,"success")},Error:e=>{console.error(e),c(e,"danger")}},children:[(0,s.jsx)(r.Z,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:1},children:Object.entries(a.value).map(e=>{let[t,n]=e;return(0,s.jsxs)(o.Z,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{let e=a.value;delete e[t],l({...a,value:e}),console.log("close: "+t)},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(o.Z.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(o.Z.Body,{className:"text-center",children:n.text})]},"toast"+t)})}),t]})}},6168:function(e,t,a){"use strict";var s=a(7437),n=a(2265),o=a(4297),r=a(1701),i=a(733),l=a(6879),c=a(713),d=a(6934),h=a(1308),u=a(1375),x=a.n(u),v=a(6347),g=a(8640);let m=g.lk.protobuf.StringValue,j=g.yE.point.point;t.Z=function(e){let t=(0,n.useContext)(v.P),{data:a,error:u,isLoading:g,mutate:p}=(0,c.ZP)(void 0===e.point&&""!==e.hash&&void 0!==e.hash?"/node":null,(0,d.Sh)(j,"POST",m.encode({value:e.hash}).finish())),[f,y]=(0,n.useState)({msg:"",code:0});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(r.Z,{show:e.show,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},centered:!0,children:[(0,s.jsx)(r.Z.Header,{closeButton:!0,children:(0,s.jsx)(r.Z.Title,{id:"contained-modal-title-vcenter",children:e.hash})}),(0,s.jsx)(r.Z.Body,{children:void 0!==u?(0,s.jsx)(x(),{statusCode:u.code,title:u.msg}):g?(0,s.jsx)(h.Z,{}):(0,s.jsx)(i.Z.Control,{as:"textarea",value:void 0!==a?a:e.point,style:{height:"65vh",fontFamily:"monospace"},readOnly:!e.editable,onChange:t=>{void 0!==e.hash&&p(t.target.value,!1),void 0!==e.point&&void 0!==e.onChangePoint&&e.onChangePoint(t.target.value)}})}),(0,s.jsxs)(r.Z.Footer,{children:[""!==f.msg&&(0,s.jsxs)(l.Z,{bg:"danger",children:[f.code," | ",f.msg]}),(0,s.jsx)(o.Z,{variant:"secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,s.jsx)(()=>void 0!==e.editable&&e.editable?(0,s.jsx)(o.Z,{variant:"primary",active:!g&&void 0===u,onClick:()=>{(0,d.Uo)("/node",{method:"PATCH",body:j.encode(j.fromObject(JSON.parse(void 0!==a?a:void 0!==e.point?e.point:"{}"))).finish()}).then(async a=>{let{error:s}=a;if(void 0===s)t.Info("save successful"),void 0!==e.onSave&&e.onSave(),e.onHide();else{let e=await s.msg;t.Error(e),y({msg:e,code:s.code}),setTimeout(()=>{y({msg:"",code:0})},5e3)}})},children:"Save"}):(0,s.jsx)(s.Fragment,{}),{})]})]})})}},4997:function(e,t,a){"use strict";a.r(t);var s=a(7437),n=a(2265),o=a(6879),r=a(4297),i=a(3518),l=a(51),c=a(733),d=a(3508),h=a(5503),u=a(1308),x=a(713),v=a(6934),g=a(1375),m=a.n(g),j=a(6168),p=a(6347),f=a(8640);let y=f.lk.protobuf.StringValue,b=f.yE.node.manager,Z=f.yE.tag.tag_type;f.yE.tag.tags;let C=f.yE.protos.node.service.save_tag_req;t.default=function(){var e;let t=(0,n.useContext)(p.P),[a,g]=(0,n.useState)(""),[N,E]=(0,n.useState)(new f.yE.protos.node.service.save_tag_req({tag:"",hash:"",type:Z.node})),{data:w,error:_,isLoading:k,mutate:S}=(0,x.ZP)("/nodes",(0,v.PJ)(b)),[P,O]=(0,n.useState)({hash:""});if(void 0!==_)return(0,s.jsx)(m(),{statusCode:_.code,title:_.msg});if(k||void 0==w)return(0,s.jsx)(u.Z,{});let F=(e,a)=>(0,s.jsx)(h.Z.Item,{style:{border:"0ch",borderBottom:"1px solid #dee2e6"},children:(0,s.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,s.jsx)("a",{className:"text-decoration-none",href:"#empty",onClick:t=>{t.preventDefault(),E(t=>new f.yE.protos.node.service.save_tag_req({...t,tag:e}))},children:e}),(0,s.jsx)(o.Z,{className:"rounded-pill bg-light text-dark text-truncate ms-1",children:0===a.hash.length||""===a.hash[0]?(0,s.jsxs)(s.Fragment,{children:["Fallback ",(0,s.jsx)("i",{className:"bi bi-heart-arrow"})," Global"]}):a.type===Z.mirror?(0,s.jsxs)(s.Fragment,{children:["Mirror ",(0,s.jsx)("i",{className:"bi bi-arrow-right"})," ",a.hash]}):(0,s.jsxs)(s.Fragment,{children:["Target ",(0,s.jsx)("i",{className:"bi bi-arrow-right"}),(0,s.jsx)("a",{className:"text-truncate",href:"#",onClick:e=>{e.preventDefault(),O({hash:a.hash[0]})},children:a.hash})]})}),(0,s.jsxs)("a",{className:"text-decoration-none ms-auto text-truncate",href:"#empty",onClick:a=>{a.preventDefault(),(0,v.Uo)("/tag",{method:"DELETE",body:y.encode({value:e}).finish()}).then(async a=>{let{error:s}=a;void 0!==s?t.Error("delete tag ".concat(e," failed, ").concat(s.code,"| ").concat(await s.msg)):(t.Info("delete tag ".concat(e," success")),await S())})},children:[(0,s.jsx)("i",{className:"bi-trash"}),"DELETE"]})]})},e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{show:""!==P.hash,hash:P.hash,onHide:()=>O({hash:""})}),(0,s.jsx)(i.Z,{className:"mb-3",children:(0,s.jsx)(h.Z,{variant:"flush",children:Object.entries(w.tags).sort((e,t)=>e<=t?-1:1).map(e=>{let[t,a]=e;return F(t,new f.yE.tag.tags(a))})})}),(0,s.jsx)(i.Z,{className:"mb-3",children:(0,s.jsxs)(i.Z.Body,{children:[(0,s.jsxs)(d.Z,{className:"mb-3",children:[(0,s.jsx)(c.Z.Check,{inline:!0,type:"radio",onChange:()=>{E(e=>new f.yE.protos.node.service.save_tag_req({...e,type:Z.node,hash:""}))},checked:N.type===Z.node,label:"Node"}),(0,s.jsx)(c.Z.Check,{inline:!0,type:"radio",onChange:()=>{E(e=>new f.yE.protos.node.service.save_tag_req({...e,type:Z.mirror,hash:""}))},checked:N.type===Z.mirror,label:"Mirror"})]}),(0,s.jsx)(l.Z,{label:"Tag",className:"mb-2",children:(0,s.jsx)(c.Z.Control,{placeholder:"Tag","aria-label":"Tag","aria-describedby":"basic-addon1",value:N.tag,onChange:e=>{E(t=>new f.yE.protos.node.service.save_tag_req({...t,tag:e.target.value}))}})}),N.type===Z.node?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{label:"Group",className:"mb-2",children:(0,s.jsxs)(c.Z.Select,{defaultValue:"",onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{children:"Choose..."}),Object.keys(w.groupsV2).sort((e,t)=>e<=t?-1:1).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)(l.Z,{label:"Node",className:"mb-2",children:(0,s.jsxs)(c.Z.Select,{defaultValue:"",onChange:e=>{E(t=>new f.yE.protos.node.service.save_tag_req({...t,hash:e.target.value}))},children:[(0,s.jsx)("option",{value:"",children:"Choose..."}),Object.entries((0,v.Sv)(null===(e=w.groupsV2[a])||void 0===e?void 0:e.nodesV2)).sort((e,t)=>e<=t?-1:1).map(e=>{let[t,a]=e;return(0,s.jsx)("option",{value:a,children:t},t)})]})})]}):(0,s.jsx)(l.Z,{label:"Mirror",className:"mb-2",children:(0,s.jsxs)(c.Z.Select,{defaultValue:"",onChange:e=>{E(t=>new f.yE.protos.node.service.save_tag_req({...t,hash:e.target.value}))},children:[(0,s.jsx)("option",{value:"",children:"Choose..."}),Object.keys(w.tags).sort((e,t)=>e<=t?-1:1).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})}),(0,s.jsx)(r.Z,{variant:"outline-primary",onClick:()=>{""!==N.tag&&""!==N.hash&&(0,v.Uo)("/tag",{body:C.encode(N).finish()}).then(async e=>{let{error:a}=e;void 0!==a?t.Error("save tag ".concat(N.tag," failed, ").concat(a.code,"| ").concat(await a.msg)):(t.Info("Set tag ".concat(N.tag," to ").concat(N.hash," successful")),await S())})},children:"Save"})]})})]})}},3508:function(e,t,a){"use strict";var s=a(4440),n=a.n(s),o=a(2265),r=a(499),i=a(6376),l=a(9062),c=a(7447),d=a(7437);let h=(0,r.Z)("input-group-text",{Component:"span"}),u=o.forwardRef((e,t)=>{let{bsPrefix:a,size:s,hasValidation:r,className:l,as:h="div",...u}=e;a=(0,i.vE)(a,"input-group");let x=(0,o.useMemo)(()=>({}),[]);return(0,d.jsx)(c.Z.Provider,{value:x,children:(0,d.jsx)(h,{ref:t,...u,className:n()(l,a,s&&"".concat(a,"-").concat(s),r&&"has-validation")})})});u.displayName="InputGroup",t.Z=Object.assign(u,{Text:h,Radio:e=>(0,d.jsx)(h,{children:(0,d.jsx)(l.Z,{type:"radio",...e})}),Checkbox:e=>(0,d.jsx)(h,{children:(0,d.jsx)(l.Z,{type:"checkbox",...e})})})},7447:function(e,t,a){"use strict";var s=a(2265);let n=s.createContext(null);n.displayName="InputGroupContext",t.Z=n}},function(e){e.O(0,[359,441,331,895,8,946,419,971,596,744],function(){return e(e.s=5120)}),_N_E=e.O()}]);