(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5120:function(e,r,t){Promise.resolve().then(t.bind(t,9566))},9566:function(e,r,t){"use strict";t.r(r);var a=t(7437),n=t(2265),s=t(2389),o=t(5097),i=t(8168),l=t(9252),u=t(9317),c=t(8647),w=t(6879),d=t(6491),h=t(1252),m=t(8224),f=t(2283),g=t.n(f),p=t(5952),v=t(6756),y=t(5051),j=t(7682),J=t(4344),x=t(3525);r.default=function(){var e;let r=(0,n.useContext)(v.P),[t,f]=(0,n.useState)(""),[b,S]=(0,n.useState)(new y.hr({tag:"",hash:"",type:j.f.node})),{data:N,error:F,isLoading:B,mutate:E}=(0,h.ZP)("/nodes",(0,m.D4)(new J.BP)),[T,k]=(0,n.useState)({hash:"",show:!1});if(void 0!==F)return(0,a.jsx)(g(),{statusCode:F.code,title:F.msg});if(B||void 0==N)return(0,a.jsx)(d.Z,{});let V=(e,t)=>(0,a.jsx)(s.Z.Item,{style:{border:"0ch",borderBottom:"1px solid #dee2e6"},children:(0,a.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,a.jsx)("a",{className:"text-decoration-none",href:"#empty",onClick:r=>{r.preventDefault(),S(r=>new y.hr({...r,tag:e}))},children:e}),(0,a.jsx)(o.Z,{className:"rounded-pill bg-light text-dark text-truncate ms-1",children:0===t.hash.length||""===t.hash[0]?(0,a.jsxs)(a.Fragment,{children:["Fallback ",(0,a.jsx)("i",{className:"bi bi-heart-arrow"})," Global"]}):t.type===j.f.mirror?(0,a.jsxs)(a.Fragment,{children:["Mirror ",(0,a.jsx)("i",{className:"bi bi-arrow-right"})," ",t.hash]}):(0,a.jsxs)(a.Fragment,{children:["Target ",(0,a.jsx)("i",{className:"bi bi-arrow-right"}),(0,a.jsx)("a",{className:"text-truncate",href:"#",onClick:e=>{e.preventDefault(),k({hash:t.hash[0],show:!0})},children:t.hash})]})}),(0,a.jsxs)("a",{className:"text-decoration-none ms-auto text-truncate",href:"#empty",onClick:t=>{t.preventDefault(),(0,m.Uo)("/tag",{method:"DELETE",body:new x.Gm({value:e}).toBinary()}).then(async t=>{let{error:a}=t;void 0!==a?r.Error("delete tag ".concat(e," failed, ").concat(a.code,"| ").concat(await a.msg)):(r.Info("delete tag ".concat(e," success")),await E())})},children:[(0,a.jsx)("i",{className:"bi-trash"}),"DELETE"]})]})},e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{show:T.show,hash:T.hash,onHide:()=>k({...T,show:!1})}),(0,a.jsx)(i.Z,{className:"mb-3",children:(0,a.jsx)(s.Z,{variant:"flush",children:Object.entries(N.tags).sort((e,r)=>e<=r?-1:1).map(e=>{let[r,t]=e;return V(r,new j.p(t))})})}),(0,a.jsx)(i.Z,{className:"mb-3",children:(0,a.jsxs)(i.Z.Body,{children:[(0,a.jsxs)(l.Z,{className:"mb-3",children:[(0,a.jsx)(u.Z.Check,{inline:!0,type:"radio",onChange:()=>{S(e=>new y.hr({...e,type:j.f.node,hash:""}))},checked:b.type===j.f.node,label:"Node"}),(0,a.jsx)(u.Z.Check,{inline:!0,type:"radio",onChange:()=>{S(e=>new y.hr({...e,type:j.f.mirror,hash:""}))},checked:b.type===j.f.mirror,label:"Mirror"})]}),(0,a.jsx)(c.Z,{label:"Tag",className:"mb-2",children:(0,a.jsx)(u.Z.Control,{placeholder:"Tag","aria-label":"Tag","aria-describedby":"basic-addon1",value:b.tag,onChange:e=>{S(r=>new y.hr({...r,tag:e.target.value}))}})}),b.type===j.f.node?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{label:"Group",className:"mb-2",children:(0,a.jsxs)(u.Z.Select,{defaultValue:"",onChange:e=>f(e.target.value),children:[(0,a.jsx)("option",{children:"Choose..."}),Object.keys(N.groupsV2).sort((e,r)=>e<=r?-1:1).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)(c.Z,{label:"Node",className:"mb-2",children:(0,a.jsxs)(u.Z.Select,{defaultValue:"",onChange:e=>{S(r=>new y.hr({...r,hash:e.target.value}))},children:[(0,a.jsx)("option",{value:"",children:"Choose..."}),Object.entries((0,m.Sv)(null===(e=N.groupsV2[t])||void 0===e?void 0:e.nodesV2)).sort((e,r)=>e<=r?-1:1).map(e=>{let[r,t]=e;return(0,a.jsx)("option",{value:t,children:r},r)})]})})]}):(0,a.jsx)(c.Z,{label:"Mirror",className:"mb-2",children:(0,a.jsxs)(u.Z.Select,{defaultValue:"",onChange:e=>{S(r=>new y.hr({...r,hash:e.target.value}))},children:[(0,a.jsx)("option",{value:"",children:"Choose..."}),Object.keys(N.tags).sort((e,r)=>e<=r?-1:1).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)(w.Z,{variant:"outline-primary",onClick:()=>{""!==b.tag&&""!==b.hash&&(0,m.Uo)("/tag",{body:b.toBinary()}).then(async e=>{let{error:t}=e;void 0!==t?r.Error("save tag ".concat(b.tag," failed, ").concat(t.code,"| ").concat(await t.msg)):(r.Info("Set tag ".concat(b.tag," to ").concat(b.hash," successful")),await E())})},children:"Save"})]})})]})}},5097:function(e,r,t){"use strict";var a=t(6480),n=t.n(a),s=t(2265),o=t(2865),i=t(7437);let l=s.forwardRef((e,r)=>{let{bsPrefix:t,bg:a="primary",pill:s=!1,text:l,className:u,as:c="span",...w}=e,d=(0,o.vE)(t,"badge");return(0,i.jsx)(c,{ref:r,...w,className:n()(u,d,s&&"rounded-pill",l&&"text-".concat(l),a&&"bg-".concat(a))})});l.displayName="Badge",r.Z=l},3525:function(e,r,t){"use strict";t.d(r,{Gm:function(){return m}});var a=t(4272),n=t(7866),s=t(7931),o=t(5658);class i extends a.v{constructor(e){super(),this.value=0,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.DOUBLE,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.DOUBLE,e)}catch(r){let e='cannot decode message google.protobuf.DoubleValue from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new i().fromBinary(e,r)}static fromJson(e,r){return new i().fromJson(e,r)}static fromJsonString(e,r){return new i().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(i,e,r)}}i.runtime=n.w,i.typeName="google.protobuf.DoubleValue",i.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:1}]),i.fieldWrapper={wrapField:e=>new i({value:e}),unwrapField:e=>e.value};class l extends a.v{constructor(e){super(),this.value=0,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.FLOAT,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.FLOAT,e)}catch(r){let e='cannot decode message google.protobuf.FloatValue from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new l().fromBinary(e,r)}static fromJson(e,r){return new l().fromJson(e,r)}static fromJsonString(e,r){return new l().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(l,e,r)}}l.runtime=n.w,l.typeName="google.protobuf.FloatValue",l.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:2}]),l.fieldWrapper={wrapField:e=>new l({value:e}),unwrapField:e=>e.value};class u extends a.v{constructor(e){super(),this.value=o.q.zero,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.INT64,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.INT64,e)}catch(r){let e='cannot decode message google.protobuf.Int64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new u().fromBinary(e,r)}static fromJson(e,r){return new u().fromJson(e,r)}static fromJsonString(e,r){return new u().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(u,e,r)}}u.runtime=n.w,u.typeName="google.protobuf.Int64Value",u.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:3}]),u.fieldWrapper={wrapField:e=>new u({value:e}),unwrapField:e=>e.value};class c extends a.v{constructor(e){super(),this.value=o.q.zero,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.UINT64,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.UINT64,e)}catch(r){let e='cannot decode message google.protobuf.UInt64Value from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new c().fromBinary(e,r)}static fromJson(e,r){return new c().fromJson(e,r)}static fromJsonString(e,r){return new c().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(c,e,r)}}c.runtime=n.w,c.typeName="google.protobuf.UInt64Value",c.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:4}]),c.fieldWrapper={wrapField:e=>new c({value:e}),unwrapField:e=>e.value};class w extends a.v{constructor(e){super(),this.value=0,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.INT32,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.INT32,e)}catch(r){let e='cannot decode message google.protobuf.Int32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new w().fromBinary(e,r)}static fromJson(e,r){return new w().fromJson(e,r)}static fromJsonString(e,r){return new w().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(w,e,r)}}w.runtime=n.w,w.typeName="google.protobuf.Int32Value",w.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:5}]),w.fieldWrapper={wrapField:e=>new w({value:e}),unwrapField:e=>e.value};class d extends a.v{constructor(e){super(),this.value=0,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.UINT32,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.UINT32,e)}catch(r){let e='cannot decode message google.protobuf.UInt32Value from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new d().fromBinary(e,r)}static fromJson(e,r){return new d().fromJson(e,r)}static fromJsonString(e,r){return new d().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(d,e,r)}}d.runtime=n.w,d.typeName="google.protobuf.UInt32Value",d.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:13}]),d.fieldWrapper={wrapField:e=>new d({value:e}),unwrapField:e=>e.value};class h extends a.v{constructor(e){super(),this.value=!1,n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.BOOL,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.BOOL,e)}catch(r){let e='cannot decode message google.protobuf.BoolValue from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new h().fromBinary(e,r)}static fromJson(e,r){return new h().fromJson(e,r)}static fromJsonString(e,r){return new h().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(h,e,r)}}h.runtime=n.w,h.typeName="google.protobuf.BoolValue",h.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:8}]),h.fieldWrapper={wrapField:e=>new h({value:e}),unwrapField:e=>e.value};class m extends a.v{constructor(e){super(),this.value="",n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.STRING,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.STRING,e)}catch(r){let e='cannot decode message google.protobuf.StringValue from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new m().fromBinary(e,r)}static fromJson(e,r){return new m().fromJson(e,r)}static fromJsonString(e,r){return new m().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(m,e,r)}}m.runtime=n.w,m.typeName="google.protobuf.StringValue",m.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:9}]),m.fieldWrapper={wrapField:e=>new m({value:e}),unwrapField:e=>e.value};class f extends a.v{constructor(e){super(),this.value=new Uint8Array(0),n.w.util.initPartial(e,this)}toJson(e){return n.w.json.writeScalar(s.w.BYTES,this.value,!0)}fromJson(e,r){try{this.value=n.w.json.readScalar(s.w.BYTES,e)}catch(r){let e='cannot decode message google.protobuf.BytesValue from JSON"';throw r instanceof Error&&r.message.length>0&&(e+=`: ${r.message}`),Error(e)}return this}static fromBinary(e,r){return new f().fromBinary(e,r)}static fromJson(e,r){return new f().fromJson(e,r)}static fromJsonString(e,r){return new f().fromJsonString(e,r)}static equals(e,r){return n.w.util.equals(f,e,r)}}f.runtime=n.w,f.typeName="google.protobuf.BytesValue",f.fields=n.w.util.newFieldList(()=>[{no:1,name:"value",kind:"scalar",T:12}]),f.fieldWrapper={wrapField:e=>new f({value:e}),unwrapField:e=>e.value}}},function(e){e.O(0,[465,149,329,728,717,713,355,860,178,186,971,69,744],function(){return e(e.s=5120)}),_N_E=e.O()}]);