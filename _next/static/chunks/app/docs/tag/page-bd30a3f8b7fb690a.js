(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5120:function(e,a,s){Promise.resolve().then(s.bind(s,9566))},9566:function(e,a,s){"use strict";s.r(a);var t=s(7437),n=s(2265),r=s(2389),l=s(5097),o=s(6879),i=s(8168),c=s(9252),h=s(9317),d=s(8647),u=s(6491),g=s(1252),m=s(8224),x=s(2283),j=s.n(x),b=s(5952),p=s(6756),f=s(5051),v=s(7682),w=s(4344),y=s(3525);a.default=function(){var e;let a=(0,n.useContext)(p.P),[s,x]=(0,n.useState)(""),[Z,N]=(0,n.useState)(new f.hr({tag:"",hash:"",type:v.f.node})),{data:C,error:k,isLoading:E,mutate:S}=(0,g.ZP)("/nodes",(0,m.D4)(new w.BP)),[B,F]=(0,n.useState)({hash:"",show:!1});if(void 0!==k)return(0,t.jsx)(j(),{statusCode:k.code,title:k.msg});if(E||void 0==C)return(0,t.jsx)(u.Z,{});let O=(e,s)=>(0,t.jsxs)(r.Z.Item,{className:"align-items-center d-flex justify-content-between",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},action:!0,onClick:a=>{N(a=>new f.hr({...a,tag:e}))},children:[(0,t.jsxs)("div",{children:[e,(0,t.jsx)(l.Z,{className:"rounded-pill bg-light text-dark ms-1",children:0===s.hash.length||""===s.hash[0]?(0,t.jsxs)(t.Fragment,{children:["Fallback ",(0,t.jsx)("i",{className:"bi bi-heart-arrow"})," Global"]}):s.type===v.f.mirror?(0,t.jsxs)(t.Fragment,{children:["Mirror ",(0,t.jsx)("i",{className:"bi bi-arrow-right"})," ",s.hash]}):(0,t.jsxs)(t.Fragment,{children:["Target ",(0,t.jsx)("i",{className:"bi bi-arrow-right"}),(0,t.jsx)("a",{className:"text-truncate",href:"#",onClick:e=>{e.preventDefault(),e.stopPropagation(),F({hash:s.hash[0],show:!0})},children:s.hash})]})})]}),(0,t.jsx)(o.Z,{variant:"outline-danger",size:"sm",onClick:s=>{s.stopPropagation(),(0,m.Uo)("/tag",{method:"DELETE",body:new y.Gm({value:e}).toBinary()}).then(async s=>{let{error:t}=s;void 0!==t?a.Error("delete tag ".concat(e," failed, ").concat(t.code,"| ").concat(await t.msg)):(a.Info("delete tag ".concat(e," success")),await S())})},children:(0,t.jsx)("i",{className:"bi-trash"})})]},e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Z,{show:B.show,hash:B.hash,onHide:()=>F({...B,show:!1})}),(0,t.jsx)(i.Z,{className:"mb-3",children:(0,t.jsx)(r.Z,{variant:"flush",children:Object.entries(C.tags).sort((e,a)=>e<=a?-1:1).map(e=>{let[a,s]=e;return O(a,new v.p(s))})})}),(0,t.jsx)(i.Z,{className:"mb-3",children:(0,t.jsxs)(i.Z.Body,{children:[(0,t.jsxs)(c.Z,{className:"mb-3",children:[(0,t.jsx)(h.Z.Check,{inline:!0,type:"radio",onChange:()=>{N(e=>new f.hr({...e,type:v.f.node,hash:""}))},checked:Z.type===v.f.node,label:"Node"}),(0,t.jsx)(h.Z.Check,{inline:!0,type:"radio",onChange:()=>{N(e=>new f.hr({...e,type:v.f.mirror,hash:""}))},checked:Z.type===v.f.mirror,label:"Mirror"})]}),(0,t.jsx)(d.Z,{label:"Tag",className:"mb-2",children:(0,t.jsx)(h.Z.Control,{placeholder:"Tag","aria-label":"Tag","aria-describedby":"basic-addon1",value:Z.tag,onChange:e=>{N(a=>new f.hr({...a,tag:e.target.value}))}})}),Z.type===v.f.node?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{label:"Group",className:"mb-2",children:(0,t.jsxs)(h.Z.Select,{defaultValue:"",onChange:e=>x(e.target.value),children:[(0,t.jsx)("option",{children:"Choose..."}),Object.keys(C.groupsV2).sort((e,a)=>e<=a?-1:1).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}),(0,t.jsx)(d.Z,{label:"Node",className:"mb-2",children:(0,t.jsxs)(h.Z.Select,{defaultValue:"",onChange:e=>{N(a=>new f.hr({...a,hash:e.target.value}))},children:[(0,t.jsx)("option",{value:"",children:"Choose..."}),Object.entries((0,m.Sv)(null===(e=C.groupsV2[s])||void 0===e?void 0:e.nodesV2)).sort((e,a)=>e<=a?-1:1).map(e=>{let[a,s]=e;return(0,t.jsx)("option",{value:s,children:a},a)})]})})]}):(0,t.jsx)(d.Z,{label:"Mirror",className:"mb-2",children:(0,t.jsxs)(h.Z.Select,{defaultValue:"",onChange:e=>{N(a=>new f.hr({...a,hash:e.target.value}))},children:[(0,t.jsx)("option",{value:"",children:"Choose..."}),Object.keys(C.tags).sort((e,a)=>e<=a?-1:1).map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})}),(0,t.jsx)(o.Z,{variant:"outline-primary",onClick:()=>{""!==Z.tag&&""!==Z.hash&&(0,m.Uo)("/tag",{body:Z.toBinary()}).then(async e=>{let{error:s}=e;void 0!==s?a.Error("save tag ".concat(Z.tag," failed, ").concat(s.code,"| ").concat(await s.msg)):(a.Info("Set tag ".concat(Z.tag," to ").concat(Z.hash," successful")),await S())})},children:"Save"})]})})]})}},5097:function(e,a,s){"use strict";var t=s(6480),n=s.n(t),r=s(2265),l=s(2865),o=s(7437);let i=r.forwardRef((e,a)=>{let{bsPrefix:s,bg:t="primary",pill:r=!1,text:i,className:c,as:h="span",...d}=e,u=(0,l.vE)(s,"badge");return(0,o.jsx)(h,{ref:a,...d,className:n()(c,u,r&&"rounded-pill",i&&"text-".concat(i),t&&"bg-".concat(t))})});i.displayName="Badge",a.Z=i}},function(e){e.O(0,[465,149,329,728,318,713,355,161,860,178,186,971,69,744],function(){return e(e.s=5120)}),_N_E=e.O()}]);