(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5120:function(e,t,n){Promise.resolve().then(n.bind(n,9566))},9566:function(e,t,n){"use strict";n.r(t);var a=n(7437),r=n(2265),s=n(2389),o=n(5097),c=n(8168),i=n(9252),l=n(9317),u=n(8647),h=n(6879),d=n(6491),f=n(1252),x=n(8224),m=n(2283),p=n.n(m),g=n(5952),j=n(6756),v=n(5051),b=n(7682),Z=n(4344),y=n(3525);t.default=function(){var e;let t=(0,r.useContext)(j.P),[n,m]=(0,r.useState)(""),[N,w]=(0,r.useState)(new v.hr({tag:"",hash:"",type:b.f.node})),{data:C,error:k,isLoading:E,mutate:S}=(0,f.ZP)("/nodes",(0,x.D4)(new Z.BP)),[D,P]=(0,r.useState)({hash:""});if(void 0!==k)return(0,a.jsx)(p(),{statusCode:k.code,title:k.msg});if(E||void 0==C)return(0,a.jsx)(d.Z,{});let T=(e,n)=>(0,a.jsx)(s.Z.Item,{style:{border:"0ch",borderBottom:"1px solid #dee2e6"},children:(0,a.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,a.jsx)("a",{className:"text-decoration-none",href:"#empty",onClick:t=>{t.preventDefault(),w(t=>new v.hr({...t,tag:e}))},children:e}),(0,a.jsx)(o.Z,{className:"rounded-pill bg-light text-dark text-truncate ms-1",children:0===n.hash.length||""===n.hash[0]?(0,a.jsxs)(a.Fragment,{children:["Fallback ",(0,a.jsx)("i",{className:"bi bi-heart-arrow"})," Global"]}):n.type===b.f.mirror?(0,a.jsxs)(a.Fragment,{children:["Mirror ",(0,a.jsx)("i",{className:"bi bi-arrow-right"})," ",n.hash]}):(0,a.jsxs)(a.Fragment,{children:["Target ",(0,a.jsx)("i",{className:"bi bi-arrow-right"}),(0,a.jsx)("a",{className:"text-truncate",href:"#",onClick:e=>{e.preventDefault(),P({hash:n.hash[0]})},children:n.hash})]})}),(0,a.jsxs)("a",{className:"text-decoration-none ms-auto text-truncate",href:"#empty",onClick:n=>{n.preventDefault(),(0,x.Uo)("/tag",{method:"DELETE",body:new y.Gm({value:e}).toBinary()}).then(async n=>{let{error:a}=n;void 0!==a?t.Error("delete tag ".concat(e," failed, ").concat(a.code,"| ").concat(await a.msg)):(t.Info("delete tag ".concat(e," success")),await S())})},children:[(0,a.jsx)("i",{className:"bi-trash"}),"DELETE"]})]})},e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{show:""!==D.hash,hash:D.hash,onHide:()=>P({hash:""})}),(0,a.jsx)(c.Z,{className:"mb-3",children:(0,a.jsx)(s.Z,{variant:"flush",children:Object.entries(C.tags).sort((e,t)=>e<=t?-1:1).map(e=>{let[t,n]=e;return T(t,new b.p(n))})})}),(0,a.jsx)(c.Z,{className:"mb-3",children:(0,a.jsxs)(c.Z.Body,{children:[(0,a.jsxs)(i.Z,{className:"mb-3",children:[(0,a.jsx)(l.Z.Check,{inline:!0,type:"radio",onChange:()=>{w(e=>new v.hr({...e,type:b.f.node,hash:""}))},checked:N.type===b.f.node,label:"Node"}),(0,a.jsx)(l.Z.Check,{inline:!0,type:"radio",onChange:()=>{w(e=>new v.hr({...e,type:b.f.mirror,hash:""}))},checked:N.type===b.f.mirror,label:"Mirror"})]}),(0,a.jsx)(u.Z,{label:"Tag",className:"mb-2",children:(0,a.jsx)(l.Z.Control,{placeholder:"Tag","aria-label":"Tag","aria-describedby":"basic-addon1",value:N.tag,onChange:e=>{w(t=>new v.hr({...t,tag:e.target.value}))}})}),N.type===b.f.node?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{label:"Group",className:"mb-2",children:(0,a.jsxs)(l.Z.Select,{defaultValue:"",onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{children:"Choose..."}),Object.keys(C.groupsV2).sort((e,t)=>e<=t?-1:1).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)(u.Z,{label:"Node",className:"mb-2",children:(0,a.jsxs)(l.Z.Select,{defaultValue:"",onChange:e=>{w(t=>new v.hr({...t,hash:e.target.value}))},children:[(0,a.jsx)("option",{value:"",children:"Choose..."}),Object.entries((0,x.Sv)(null===(e=C.groupsV2[n])||void 0===e?void 0:e.nodesV2)).sort((e,t)=>e<=t?-1:1).map(e=>{let[t,n]=e;return(0,a.jsx)("option",{value:n,children:t},t)})]})})]}):(0,a.jsx)(u.Z,{label:"Mirror",className:"mb-2",children:(0,a.jsxs)(l.Z.Select,{defaultValue:"",onChange:e=>{w(t=>new v.hr({...t,hash:e.target.value}))},children:[(0,a.jsx)("option",{value:"",children:"Choose..."}),Object.keys(C.tags).sort((e,t)=>e<=t?-1:1).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)(h.Z,{variant:"outline-primary",onClick:()=>{""!==N.tag&&""!==N.hash&&(0,x.Uo)("/tag",{body:N.toBinary()}).then(async e=>{let{error:n}=e;void 0!==n?t.Error("save tag ".concat(N.tag," failed, ").concat(n.code,"| ").concat(await n.msg)):(t.Info("Set tag ".concat(N.tag," to ").concat(N.hash," successful")),await S())})},children:"Save"})]})})]})}},3756:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(2265);function r(){return(0,a.useState)(null)}},3106:function(e,t,n){"use strict";var a=n(2265);let r=void 0!==n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;t.Z="undefined"!=typeof document||r?a.useLayoutEffect:a.useEffect},7531:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(2265);function r(e){let t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{t.current=e}),t.current}},7848:function(e,t,n){"use strict";var a=n(9476),r=n(1564),s=n(2265);t.Z=function({children:e,in:t,onExited:n,mountOnEnter:o,unmountOnExit:c}){let i=(0,s.useRef)(null),l=(0,s.useRef)(t),u=(0,a.Z)(n);(0,s.useEffect)(()=>{t?l.current=!0:u(i.current)},[t,u]);let h=(0,r.Z)(i,e.ref),d=(0,s.cloneElement)(e,{ref:h});return t?d:c||!l.current&&o?null:d}},5324:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(2265),r=n(7550);let s=(0,a.createContext)(r.Z?window:void 0);function o(){return(0,a.useContext)(s)}s.Provider},4343:function(e,t,n){"use strict";function a(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,{Z:function(){return a}})},9252:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(6480),r=n.n(a),s=n(2265),o=n(2865),c=n(6183),i=n(1805),l=n(7437);let u=s.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:s="span",...c}=e;return a=(0,o.vE)(a,"input-group-text"),(0,l.jsx)(s,{ref:t,className:r()(n,a),...c})});u.displayName="InputGroupText";let h=s.forwardRef((e,t)=>{let{bsPrefix:n,size:a,hasValidation:c,className:u,as:h="div",...d}=e;n=(0,o.vE)(n,"input-group");let f=(0,s.useMemo)(()=>({}),[]);return(0,l.jsx)(i.Z.Provider,{value:f,children:(0,l.jsx)(h,{ref:t,...d,className:r()(u,n,a&&"".concat(n,"-").concat(a),c&&"has-validation")})})});h.displayName="InputGroup";var d=Object.assign(h,{Text:u,Radio:e=>(0,l.jsx)(u,{children:(0,l.jsx)(c.Z,{type:"radio",...e})}),Checkbox:e=>(0,l.jsx)(u,{children:(0,l.jsx)(c.Z,{type:"checkbox",...e})})})},1805:function(e,t,n){"use strict";let a=n(2265).createContext(null);a.displayName="InputGroupContext",t.Z=a}},function(e){e.O(0,[465,149,300,634,713,111,860,186,971,69,744],function(){return e(e.s=5120)}),_N_E=e.O()}]);