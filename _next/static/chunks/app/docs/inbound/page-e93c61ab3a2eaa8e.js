(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3754],{4780:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>X});var a=s(95155),t=s(20960),r=s(4965),o=s(56487),l=s(12115),c=s(28468),i=s(60902),u=s(76355),d=s(91867),h=s(69056),p=s(98347),v=s(98054),m=s(19169),b=s(74086),x=s(98508),j=s(92358),g=s(66835),C=s(46878),k=s(2144),y=s(55028),f=s(13697),A=s(32410);let w=e=>{let[n,s]=(0,l.useState)({value:"normal"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.$d,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{e.onChange({...e.inbound,enabled:!e.inbound.enabled})}}),(0,a.jsx)(f.mc,{title:"Network",className:"mb-2",hideClose:!0,children:(0,a.jsx)(N,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})}),(0,a.jsx)(f.mc,{title:"Transport",className:"mb-2",hideClose:!0,children:(0,a.jsxs)(a.Fragment,{children:[e.inbound.transport.map((n,s)=>{var t,r;return(0,a.jsx)(f.mc,{className:0!==s?"mt-2":"",title:null!=(r=null==(t=n.transport.case)?void 0:t.toString())?r:"",onClose:()=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,s),...e.inbound.transport.slice(s+1)]})},moveUpDown:new f.fH(e.inbound.transport,s,n=>e.onChange({...e.inbound,transport:n})),children:(0,a.jsx)(P,{transport:n,onChange:n=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,s),n,...e.inbound.transport.slice(s+1)]})}},s)},s)}),(0,a.jsx)(h.A,{variant:"flush",children:(0,a.jsx)(h.A.Item,{children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.FX,{value:n.value,values:["normal","tls","mux","http2","websocket","grpc","reality","tlsAuto","httpMock"],onChange:e=>s({value:e})}),(0,a.jsxs)(i.A,{variant:"outline-success",onClick:()=>{let s={...e.inbound,transport:[...e.inbound.transport]};switch(n.value){case"normal":s.transport.push((0,t.v)(k.ls,{transport:{case:"normal",value:(0,t.v)(k.Rc,{})}}));break;case"tlsAuto":s.transport.push((0,t.v)(k.ls,{transport:{case:"tlsAuto",value:(0,t.v)(k.RN,{})}}));break;case"tls":s.transport.push((0,t.v)(k.ls,{transport:{case:"tls",value:(0,t.v)(k.fx,{tls:(0,t.v)(A.Gc,{})})}}));break;case"mux":s.transport.push((0,t.v)(k.ls,{transport:{case:"mux",value:(0,t.v)(k.gE,{})}}));break;case"http2":s.transport.push((0,t.v)(k.ls,{transport:{case:"http2",value:(0,t.v)(k.ql,{})}}));break;case"websocket":s.transport.push((0,t.v)(k.ls,{transport:{case:"websocket",value:(0,t.v)(k.BP,{})}}));break;case"grpc":s.transport.push((0,t.v)(k.ls,{transport:{case:"grpc",value:(0,t.v)(k.E_,{})}}));break;case"reality":s.transport.push((0,t.v)(k.ls,{transport:{case:"reality",value:(0,t.v)(k.K0,{})}}));break;case"httpMock":s.transport.push((0,t.v)(k.ls,{transport:{case:"httpMock",value:(0,t.v)(k.RT,{})}}))}e.onChange(s)},children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,a.jsx)(f.mc,{title:"Protocol",hideClose:!0,children:(0,a.jsx)(L,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})})]})},N=e=>{var n,s;let[r,o]=(0,l.useState)({value:null!=(s=null==(n=e.inbound.network.case)?void 0:n.toString())?s:"tcpudp"});return(0,l.useEffect)(()=>{o({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{variant:"flush",children:(0,a.jsx)(h.A.Item,{children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.FX,{value:r.value,values:["empty","tcpudp","quic"],onChange:e=>o({value:e})}),(0,a.jsx)(i.A,{variant:"outline-success",onClick:()=>{let n={...e.inbound};switch(r.value){case"tcpudp":n.network={case:"tcpudp",value:(0,t.v)(k.as,{})};break;case"quic":n.network={case:"quic",value:(0,t.v)(k.sn,{})};break;case"empty":n.network={case:"empty",value:(0,t.v)(k.bN,{})}}e.onChange({...n})},children:"Use"})]})})}),(0,a.jsx)("br",{}),(0,a.jsx)(T,{inbound:e.inbound,onChange:e.onChange})]})},F=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.TcpUdp),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),S=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.QuicComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),T=e=>{switch(e.inbound.network.case){case"tcpudp":return(0,a.jsx)(F,{protocol:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"tcpudp",value:n}})}});case"quic":return(0,a.jsx)(S,{quic:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"quic",value:n}})}});case"empty":return(0,a.jsx)(a.Fragment,{})}},G=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.TlsComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),H=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.TLSAutoComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),E=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.RealityComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),P=e=>{switch(e.transport.transport.case){case"normal":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,a.jsx)(G,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tls",value:n}})}});case"tlsAuto":return(0,a.jsx)(H,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tlsAuto",value:n}})}});case"mux":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,a.jsx)(E,{reality:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"reality",value:n}})}});case"httpMock":return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP MOCK"})})}},I=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.HTTPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),z=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.ReverseHTTPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),D=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.ReverseTCPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),q=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.RedirComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),M=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.Socks5Components),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),_=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.TProxyComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),R=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.MixedComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),B=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.TunComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),O=(0,y.default)(()=>s.e(4701).then(s.bind(s,84701)).then(e=>e.Yuubinsya),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),$=e=>{switch(e.inbound.protocol.case){case"http":return(0,a.jsx)(I,{http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"http",value:n}})}});case"reverseHttp":return(0,a.jsx)(z,{reverse_http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseHttp",value:n}})}});case"reverseTcp":return(0,a.jsx)(D,{reverse_tcp:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseTcp",value:n}})}});case"socks5":return(0,a.jsx)(M,{socks5:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"socks5",value:n}})}});case"socks4a":return(0,a.jsx)(a.Fragment,{});case"mix":return(0,a.jsx)(R,{mixed:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"mix",value:n}})}});case"redir":return(0,a.jsx)(q,{redir:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"redir",value:n}})}});case"tun":return(0,a.jsx)(B,{tun:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tun",value:n}})}});case"yuubinsya":return(0,a.jsx)(O,{yuubinsya:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"yuubinsya",value:n}})}});case"tproxy":return(0,a.jsx)(_,{tproxy:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tproxy",value:n}})}})}},L=e=>{let[n,s]=(0,l.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,l.useEffect)(()=>{s({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{variant:"flush",children:(0,a.jsx)(h.A.Item,{children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(j.FX,{value:n.value,values:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"],onChange:e=>s({value:e})}),(0,a.jsx)(i.A,{variant:"outline-success",onClick:()=>{let s={...e.inbound};switch(n.value){case"http":s.protocol={case:"http",value:(0,t.v)(k.UM,{})};break;case"reverseHttp":s.protocol={case:"reverseHttp",value:(0,t.v)(k.l0,{})};break;case"reverseTcp":s.protocol={case:"reverseTcp",value:(0,t.v)(k.A0,{})};break;case"socks5":s.protocol={case:"socks5",value:(0,t.v)(k.AK,{})};break;case"mix":s.protocol={case:"mix",value:(0,t.v)(k.JX,{})};break;case"redir":s.protocol={case:"redir",value:(0,t.v)(k.Q9,{})};break;case"tun":s.protocol={case:"tun",value:(0,t.v)(k.vC,{})};break;case"yuubinsya":s.protocol={case:"yuubinsya",value:(0,t.v)(k.lA,{})};break;case"tproxy":s.protocol={case:"tproxy",value:(0,t.v)(k.SL,{})}}e.onChange({...s})},children:"Use"})]})})}),(0,a.jsx)("br",{}),(0,a.jsx)($,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})]})},U=e=>{let n=(0,l.useContext)(g.u),{data:s,error:u,isLoading:d,isValidating:h,mutate:p}=(0,m.Ay)(""===e.name?void 0:(0,x.cY)(C.mz.method.get),(0,x.AD)(C.mz.method.get,(0,t.v)(o.g8,{value:e.name}),e.isNew?(0,t.v)(k.Zq,{name:e.name,enabled:!1}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});return(0,l.useEffect)(()=>{p()},[e.name,e.isNew,p]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.A,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},centered:!0,children:[(0,a.jsx)(c.A.Header,{children:(0,a.jsx)(c.A.Title,{id:"contained-modal-title-vcenter",children:e.name})}),(0,a.jsx)(c.A.Body,{children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h4",{className:"text-center my-2",children:[u.code," - ",u.msg]}),(0,a.jsx)("pre",{className:"text-center my-2 text-danger lead",children:u.raw})]}):h||d||!s?(0,a.jsx)(b.A,{}):(0,a.jsx)(w,{inbound:s,onChange:e=>{p((0,r.o)(k.Zq,e),!1)}})}),(0,a.jsxs)(c.A.Footer,{children:[(0,a.jsx)(i.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,a.jsx)(i.A,{variant:"outline-primary",onClick:()=>{s.name=e.name,(0,x.kP)(C.mz.method.save,s).then(async s=>{let{error:a}=s;if(void 0===a)n.Info("save successful"),p(),e.onHide(!0);else{let e=a.msg;n.Error(e),console.error(a.code,e)}})},children:"Save"})]})]})})},X=function(){var e;let n=(0,l.useContext)(g.u),{data:s,error:r,isLoading:c,mutate:m}=(0,x.mp)(C.mz.method.list),[k,y]=(0,l.useState)(!1),[f,A]=(0,l.useState)({show:!1,name:"",new:!1}),[w,N]=(0,l.useState)({value:""});if(void 0!==r)return(0,a.jsx)(b.$,{statusCode:r.code,title:r.msg});if(c||void 0===s)return(0,a.jsx)(b.A,{});let F=e=>{(0,x.kP)(C.mz.method.remove,(0,t.v)(o.g8,{value:e})).then(async e=>{let{error:s}=e;if(void 0===s)n.Info("remove successful"),m();else{let e=s.msg;n.Error(e),console.error(s.code,e)}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{show:f.show,name:f.name,onHide:e=>{e&&m(),A({...f,show:!1})},isNew:f.new}),(0,a.jsx)(u.A,{children:(0,a.jsxs)(u.A.Body,{children:[(0,a.jsx)(j.$d,{label:"DNS Hijack",checked:s.hijackDns,onChange:()=>{m({...s,hijackDns:!s.hijackDns},!1)}}),(0,a.jsx)(j.$d,{label:"Fakedns",checked:s.hijackDnsFakeip,onChange:()=>{m({...s,hijackDnsFakeip:!s.hijackDnsFakeip},!1)}}),(0,a.jsx)(j.$d,{label:"Sniff",checked:!!(null==(e=s.sniff)?void 0:e.enabled),onChange:()=>m({...s,sniff:{...s.sniff,enabled:!s.sniff.enabled}},!1)}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"d-flex justify-content-end",children:(0,a.jsxs)(i.A,{variant:"outline-primary",disabled:k,onClick:()=>{y(!0),(0,x.kP)(C.mz.method.apply,s).then(async e=>{let{error:s}=e;if(void 0===s)n.Info("save hosts successful");else{let e=s.msg;n.Error(e),console.error(s.code,e)}m(),y(!1)})},children:["Save",k&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(d.A,{size:"sm",animation:"border"})]})]})})]})}),(0,a.jsxs)(u.A,{className:"mt-3",children:[0===s.names.length&&(0,a.jsxs)(u.A.Body,{children:[(0,a.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"}),"  "]}),0!==s.names.length&&(0,a.jsx)(h.A,{variant:"flush",style:{borderBottom:"none"},children:s.names.sort((e,n)=>e<=n?-1:1).map((e,n)=>(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)(h.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:n=>{n.stopPropagation(),A({show:!0,name:e,new:!1})},children:[e,(0,a.jsx)(i.A,{variant:"outline-danger",size:"sm",as:"span",onClick:n=>{n.stopPropagation(),F(e)},children:(0,a.jsx)("i",{className:"bi bi-x-lg"})},n+"span-button")]})},"inbounds-"+n))}),(0,a.jsx)(u.A.Footer,{children:(0,a.jsxs)(p.A,{className:"d-flex justify-content-end",children:[(0,a.jsx)(v.A.Control,{value:w.value,onChange:e=>N({value:e.target.value})}),(0,a.jsxs)(i.A,{variant:"outline-success",onClick:()=>{!w.value||s.names.includes(w.value)||(f.name===w.value&&f.new?A(e=>({...e,show:!0})):A({show:!0,name:w.value,new:!0}))},children:[(0,a.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}},11486:(e,n,s)=>{Promise.resolve().then(s.bind(s,4780))},66835:(e,n,s)=>{"use strict";s.d(n,{u:()=>l,y:()=>c});var a=s(95155),t=s(12115),r=s(99376),o=s(66215);let l=(0,t.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),c=e=>{let{children:n}=e,[s,c]=(0,t.useState)({value:{},index:0}),i=(e,n)=>c(s=>({value:{...s.value,[s.index]:{text:e,type:n}},index:s.index+1}));return(0,a.jsxs)(l.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,a.jsx)(r.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(s.value).map(e=>{let[n,s]=e;return(0,a.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:s.type,onClose:()=>{c(e=>{let s={...e.value};return delete s[n],{...e,value:s}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,a.jsxs)(o.A.Header,{children:[(0,a.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,a.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,a.jsx)(o.A.Body,{className:"text-center",children:s.text})]},"toast"+n)})}),n]})}},92358:(e,n,s)=>{"use strict";s.d(n,{$d:()=>c,FX:()=>d,Vx:()=>i,no:()=>u});var a=s(95155),t=s(12115),r=s(98054),o=s(11846),l=s(68136);let c=t.memo(e=>{let{label:n,checked:s,onChange:t,className:c}=e;return(0,a.jsxs)(r.A.Group,{as:o.A,className:c,children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:n}),(0,a.jsx)(l.A,{sm:10,className:"d-flex align-items-center",children:(0,a.jsx)(r.A.Check,{className:"d-flex align-items-center",type:"switch",checked:s,onChange:e=>t(e.target.checked)})})]})}),i=t.memo(e=>{let{...n}=e,s=(0,t.useCallback)(e=>n.onChange(Number(e.target.value)),[n]),c=(0,t.useMemo)(()=>{var e;return n.type.values.filter(null!=(e=n.filter)?e:()=>!0)},[n.type,n.filter]);return(0,a.jsxs)(r.A.Group,{as:o.A,className:n.lastElem?"":"mb-2",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:n.label}),(0,a.jsx)(l.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:n.value,onChange:s,children:[(0,a.jsx)(()=>n.emptyChoose?(0,a.jsx)("option",{value:"",children:"Choose..."}):(0,a.jsx)(a.Fragment,{}),{}),c.map(e=>(0,a.jsx)("option",{value:e.number,children:n.format?n.format(e.number):e.name},e.number))]})})]})}),u=t.memo(e=>{let{label:n,values:s,onChange:t,value:c,emptyChoose:i,lastElem:u}=e;return(0,a.jsxs)(r.A.Group,{as:o.A,className:u?"":"mb-2",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:n}),(0,a.jsx)(l.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:c,onChange:e=>t(e.target.value),children:[i&&(0,a.jsx)("option",{value:"",children:"Choose..."}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})})]})}),d=t.memo(e=>{let{values:n,onChange:s,value:t,emptyChoose:o,format:l}=e;return(0,a.jsxs)(r.A.Select,{value:t,onChange:e=>s(e.target.value),children:[o&&(0,a.jsx)("option",{value:"",children:"Choose..."}),n.map(e=>{let n="string"==typeof e?e:e[0],s="string"==typeof e?e:e[1];return(0,a.jsx)("option",{value:s,children:l?l(n):n},n)})]})})}},e=>{var n=n=>e(e.s=n);e.O(0,[3528,11,601,3779,5453,2362,2765,7581,4386,3874,3697,6878,8441,1684,7358],()=>n(11486)),_N_E=e.O()}]);