(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3754],{4780:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>X});var s=a(95155),t=a(20960),r=a(4965),o=a(56487),l=a(12115),c=a(28468),i=a(60902),u=a(76355),d=a(91867),h=a(69056),p=a(98347),v=a(98054),b=a(19169),x=a(74086),m=a(98508),j=a(92358),g=a(66835),C=a(46878),k=a(2144),y=a(55028),f=a(13697),A=a(32410);let w=e=>{let[n,a]=(0,l.useState)({value:"normal"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.$d,{label:"Enabled",checked:e.inbound.enabled,onChange:()=>{e.onChange({...e.inbound,enabled:!e.inbound.enabled})}}),(0,s.jsx)(f.mc,{title:"Network",className:"mb-2",hideClose:!0,children:(0,s.jsx)(N,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})}),(0,s.jsx)(f.mc,{title:"Transport",className:"mb-2",hideClose:!0,children:(0,s.jsxs)(s.Fragment,{children:[e.inbound.transport.map((n,a)=>{var t,r;return(0,s.jsx)(f.mc,{className:0!==a?"mt-2":"",title:null!=(r=null==(t=n.transport.case)?void 0:t.toString())?r:"",onClose:()=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,a),...e.inbound.transport.slice(a+1)]})},moveUpDown:new f.fH(e.inbound.transport,a,n=>e.onChange({...e.inbound,transport:n})),children:(0,s.jsx)(P,{transport:n,onChange:n=>{e.onChange({...e.inbound,transport:[...e.inbound.transport.slice(0,a),n,...e.inbound.transport.slice(a+1)]})}},a)},a)}),(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(j.FX,{value:n.value,values:["normal","tls","mux","http2","websocket","grpc","reality","tlsAuto","httpMock"],onChange:e=>a({value:e})}),(0,s.jsxs)(i.A,{variant:"outline-success",onClick:()=>{let a={...e.inbound,transport:[...e.inbound.transport]};switch(n.value){case"normal":a.transport.push((0,t.v)(k.ls,{transport:{case:"normal",value:(0,t.v)(k.Rc,{})}}));break;case"tlsAuto":a.transport.push((0,t.v)(k.ls,{transport:{case:"tlsAuto",value:(0,t.v)(k.RN,{})}}));break;case"tls":a.transport.push((0,t.v)(k.ls,{transport:{case:"tls",value:(0,t.v)(k.fx,{tls:(0,t.v)(A.Gc,{})})}}));break;case"mux":a.transport.push((0,t.v)(k.ls,{transport:{case:"mux",value:(0,t.v)(k.gE,{})}}));break;case"http2":a.transport.push((0,t.v)(k.ls,{transport:{case:"http2",value:(0,t.v)(k.ql,{})}}));break;case"websocket":a.transport.push((0,t.v)(k.ls,{transport:{case:"websocket",value:(0,t.v)(k.BP,{})}}));break;case"grpc":a.transport.push((0,t.v)(k.ls,{transport:{case:"grpc",value:(0,t.v)(k.E_,{})}}));break;case"reality":a.transport.push((0,t.v)(k.ls,{transport:{case:"reality",value:(0,t.v)(k.K0,{})}}));break;case"httpMock":a.transport.push((0,t.v)(k.ls,{transport:{case:"httpMock",value:(0,t.v)(k.RT,{})}}))}e.onChange(a)},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"Add"]})]})})})]})}),(0,s.jsx)(f.mc,{title:"Protocol",hideClose:!0,children:(0,s.jsx)(L,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})})]})},N=e=>{var n,a;let[r,o]=(0,l.useState)({value:null!=(a=null==(n=e.inbound.network.case)?void 0:n.toString())?a:"tcpudp"});return(0,l.useEffect)(()=>{o({value:e.inbound.network.case?e.inbound.network.case.toString():"tcpudp"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(j.FX,{value:r.value,values:["empty","tcpudp","quic"],onChange:e=>o({value:e})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>{let n={...e.inbound};switch(r.value){case"tcpudp":n.network={case:"tcpudp",value:(0,t.v)(k.as,{})};break;case"quic":n.network={case:"quic",value:(0,t.v)(k.sn,{})};break;case"empty":n.network={case:"empty",value:(0,t.v)(k.bN,{})}}e.onChange({...n})},children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)(T,{inbound:e.inbound,onChange:e.onChange})]})},F=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.TcpUdp),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),S=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.QuicComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),T=e=>{switch(e.inbound.network.case){case"tcpudp":return(0,s.jsx)(F,{protocol:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"tcpudp",value:n}})}});case"quic":return(0,s.jsx)(S,{quic:e.inbound.network.value,onChange:n=>{e.onChange({...e.inbound,network:{case:"quic",value:n}})}});case"empty":return(0,s.jsx)(s.Fragment,{})}},G=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.TlsComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),H=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.TLSAutoComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),E=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.RealityComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),P=e=>{switch(e.transport.transport.case){case"normal":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Normal"})});case"tls":return(0,s.jsx)(G,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tls",value:n}})}});case"tlsAuto":return(0,s.jsx)(H,{tls:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"tlsAuto",value:n}})}});case"mux":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Mux"})});case"http2":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP2"})});case"websocket":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Websocket"})});case"grpc":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"Grpc"})});case"reality":return(0,s.jsx)(E,{reality:e.transport.transport.value,onChange:n=>{e.onChange({...e.transport,transport:{case:"reality",value:n}})}});case"httpMock":return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"text-center",style:{opacity:"0.4"},children:"HTTP MOCK"})})}},I=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.HTTPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),z=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.ReverseHTTPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),D=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.ReverseTCPComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),q=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.RedirComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),_=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.Socks5Components),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),M=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.TProxyComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),R=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.MixedComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),B=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.TunComponents),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),O=(0,y.default)(()=>a.e(4701).then(a.bind(a,84701)).then(e=>e.Yuubinsya),{loadableGenerated:{webpack:()=>[84701]},ssr:!1}),$=e=>{switch(e.inbound.protocol.case){case"http":return(0,s.jsx)(I,{http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"http",value:n}})}});case"reverseHttp":return(0,s.jsx)(z,{reverse_http:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseHttp",value:n}})}});case"reverseTcp":return(0,s.jsx)(D,{reverse_tcp:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"reverseTcp",value:n}})}});case"socks5":return(0,s.jsx)(_,{socks5:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"socks5",value:n}})}});case"socks4a":return(0,s.jsx)(s.Fragment,{});case"mix":return(0,s.jsx)(R,{mixed:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"mix",value:n}})}});case"redir":return(0,s.jsx)(q,{redir:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"redir",value:n}})}});case"tun":return(0,s.jsx)(B,{tun:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tun",value:n}})}});case"yuubinsya":return(0,s.jsx)(O,{yuubinsya:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"yuubinsya",value:n}})}});case"tproxy":return(0,s.jsx)(M,{tproxy:e.inbound.protocol.value,onChange:n=>{e.onChange({...e.inbound,protocol:{case:"tproxy",value:n}})}})}},L=e=>{let[n,a]=(0,l.useState)({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"});return(0,l.useEffect)(()=>{a({value:e.inbound.protocol.case?e.inbound.protocol.case.toString():"yuubinsya"})},[e.inbound]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{variant:"flush",children:(0,s.jsx)(h.A.Item,{children:(0,s.jsxs)(p.A,{children:[(0,s.jsx)(j.FX,{value:n.value,values:["http","reverseHttp","reverseTcp","socks5","mix","redir","tun","yuubinsya","tproxy"],onChange:e=>a({value:e})}),(0,s.jsx)(i.A,{variant:"outline-success",onClick:()=>{let a={...e.inbound};switch(n.value){case"http":a.protocol={case:"http",value:(0,t.v)(k.UM,{})};break;case"reverseHttp":a.protocol={case:"reverseHttp",value:(0,t.v)(k.l0,{})};break;case"reverseTcp":a.protocol={case:"reverseTcp",value:(0,t.v)(k.A0,{})};break;case"socks5":a.protocol={case:"socks5",value:(0,t.v)(k.AK,{})};break;case"mix":a.protocol={case:"mix",value:(0,t.v)(k.JX,{})};break;case"redir":a.protocol={case:"redir",value:(0,t.v)(k.Q9,{})};break;case"tun":a.protocol={case:"tun",value:(0,t.v)(k.vC,{})};break;case"yuubinsya":a.protocol={case:"yuubinsya",value:(0,t.v)(k.lA,{})};break;case"tproxy":a.protocol={case:"tproxy",value:(0,t.v)(k.SL,{})}}e.onChange({...a})},children:"Use"})]})})}),(0,s.jsx)("br",{}),(0,s.jsx)($,{inbound:e.inbound,onChange:n=>{e.onChange({...n})}})]})},U=e=>{let n=(0,l.useContext)(g.u),{data:a,error:u,isLoading:d,isValidating:h,mutate:p}=(0,b.Ay)(""===e.name?void 0:(0,m.cY)(C.mz.method.get),(0,m.AD)(C.mz.method.get,(0,t.v)(o.g8,{value:e.name}),e.isNew?(0,t.v)(k.Zq,{name:e.name,enabled:!1}):void 0),{shouldRetryOnError:!1,keepPreviousData:!1,revalidateOnFocus:!1});return(0,l.useEffect)(()=>{p()},[e.name,e.isNew,p]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.A,{show:e.show,scrollable:!0,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{e.onHide()},centered:!0,children:[(0,s.jsx)(c.A.Header,{children:(0,s.jsx)(c.A.Title,{id:"contained-modal-title-vcenter",children:e.name})}),(0,s.jsx)(c.A.Body,{children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h4",{className:"text-center my-2",children:[u.code," - ",u.msg]}),(0,s.jsx)("pre",{className:"text-center my-2 text-danger lead",children:u.raw})]}):h||d||!a?(0,s.jsx)(x.A,{}):(0,s.jsx)(w,{inbound:a,onChange:e=>{p((0,r.o)(k.Zq,e),!1)}})}),(0,s.jsxs)(c.A.Footer,{children:[(0,s.jsx)(i.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,s.jsx)(i.A,{variant:"outline-primary",onClick:()=>{a.name=e.name,(0,m.kP)(C.mz.method.save,a).then(async a=>{let{error:s}=a;if(void 0===s)n.Info("save successful"),p(),e.onHide(!0);else{let e=s.msg;n.Error(e),console.error(s.code,e)}})},children:"Save"})]})]})})},X=function(){var e;let n=(0,l.useContext)(g.u),{data:a,error:r,isLoading:c,mutate:b}=(0,m.mp)(C.mz.method.list),[k,y]=(0,l.useState)(!1),[f,A]=(0,l.useState)({show:!1,name:"",new:!1}),[w,N]=(0,l.useState)({value:""});if(void 0!==r)return(0,s.jsx)(x.$,{statusCode:r.code,title:r.msg});if(c||void 0===a)return(0,s.jsx)(x.A,{});let F=e=>{(0,m.kP)(C.mz.method.remove,(0,t.v)(o.g8,{value:e})).then(async e=>{let{error:a}=e;if(void 0===a)n.Info("remove successful"),b();else{let e=a.msg;n.Error(e),console.error(a.code,e)}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U,{show:f.show,name:f.name,onHide:e=>{e&&b(),A({...f,show:!1})},isNew:f.new}),(0,s.jsx)(u.A,{children:(0,s.jsxs)(u.A.Body,{children:[(0,s.jsx)(j.$d,{label:"DNS Hijack",checked:a.hijackDns,onChange:()=>{b({...a,hijackDns:!a.hijackDns},!1)}}),(0,s.jsx)(j.$d,{label:"Fakedns",checked:a.hijackDnsFakeip,onChange:()=>{b({...a,hijackDnsFakeip:!a.hijackDnsFakeip},!1)}}),(0,s.jsx)(j.$d,{label:"Sniff",checked:!!(null==(e=a.sniff)?void 0:e.enabled),onChange:()=>b({...a,sniff:{...a.sniff,enabled:!a.sniff.enabled}},!1)}),(0,s.jsx)("hr",{}),(0,s.jsx)("div",{className:"d-flex justify-content-end",children:(0,s.jsxs)(i.A,{variant:"outline-primary",disabled:k,onClick:()=>{y(!0),(0,m.kP)(C.mz.method.apply,a).then(async e=>{let{error:a}=e;if(void 0===a)n.Info("save hosts successful");else{let e=a.msg;n.Error(e),console.error(a.code,e)}b(),y(!1)})},children:["Save",k&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(d.A,{size:"sm",animation:"border"})]})]})})]})}),(0,s.jsxs)(u.A,{className:"mt-3",children:[0===a.names.length&&(0,s.jsxs)(u.A.Body,{children:[(0,s.jsx)("div",{className:"text-center my-2",style:{opacity:"0.4"},children:"No Inbounds"}),"  "]}),0!==a.names.length&&(0,s.jsx)(h.A,{variant:"flush",style:{borderBottom:"none"},children:a.names.sort((e,n)=>e<=n?-1:1).map((e,n)=>(0,s.jsx)(l.Fragment,{children:(0,s.jsxs)(h.A.Item,{action:!0,className:"d-flex justify-content-between align-items-center",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},onClick:n=>{n.stopPropagation(),A({show:!0,name:e,new:!1})},children:[e,(0,s.jsx)(i.A,{variant:"outline-danger",size:"sm",as:"span",onClick:n=>{n.stopPropagation(),F(e)},children:(0,s.jsx)("i",{className:"bi bi-x-lg"})},n+"span-button")]})},"inbounds-"+n))}),(0,s.jsx)(u.A.Footer,{children:(0,s.jsxs)(p.A,{className:"d-flex justify-content-end",children:[(0,s.jsx)(v.A.Control,{value:w.value,onChange:e=>N({value:e.target.value})}),(0,s.jsxs)(i.A,{variant:"outline-success",onClick:()=>{!w.value||a.names.includes(w.value)||(f.name===w.value&&f.new?A(e=>({...e,show:!0})):A({show:!0,name:w.value,new:!0}))},children:[(0,s.jsx)("i",{className:"bi bi-plus-lg"}),"New "]})]})})]})]})}},11486:(e,n,a)=>{Promise.resolve().then(a.bind(a,4780))},66835:(e,n,a)=>{"use strict";a.d(n,{u:()=>l,y:()=>c});var s=a(95155),t=a(12115),r=a(99376),o=a(66215);let l=(0,t.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),c=e=>{let{children:n}=e,[a,c]=(0,t.useState)({value:{},index:0}),i=(e,n)=>c(a=>({value:{...a.value,[a.index]:{text:e,type:n}},index:a.index+1}));return(0,s.jsxs)(l.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,s.jsx)(r.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(a.value).map(e=>{let[n,a]=e;return(0,s.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:a.type,onClose:()=>{c(e=>{let a={...e.value};return delete a[n],{...e,value:a}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,s.jsxs)(o.A.Header,{children:[(0,s.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,s.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,s.jsx)(o.A.Body,{className:"text-center",children:a.text})]},"toast"+n)})}),n]})}},92358:(e,n,a)=>{"use strict";a.d(n,{$d:()=>l,FX:()=>u,Vx:()=>c,no:()=>i});var s=a(95155),t=a(98054),r=a(11846),o=a(68136);let l=e=>{let{label:n,checked:a,onChange:l,className:c}=e;return(0,s.jsxs)(t.A.Group,{as:r.A,className:c,children:[(0,s.jsx)(t.A.Label,{column:!0,sm:2,children:n}),(0,s.jsx)(o.A,{sm:10,className:"d-flex align-items-center",children:(0,s.jsx)(t.A.Check,{className:"d-flex align-items-center",type:"switch",checked:a,onChange:e=>l(e.target.checked)})})]})},c=e=>{var n;let{...a}=e;return(0,s.jsxs)(t.A.Group,{as:r.A,className:a.lastElem?"":"mb-2",children:[(0,s.jsx)(t.A.Label,{column:!0,sm:2,children:a.label}),(0,s.jsx)(o.A,{sm:10,children:(0,s.jsxs)(t.A.Select,{value:a.value,onChange:e=>a.onChange(Number(e.target.value)),children:[a.emptyChoose&&(0,s.jsx)("option",{value:"",children:"Choose..."}),a.type.values.filter(null!=(n=a.filter)?n:()=>!0).map(e=>(0,s.jsx)("option",{value:e.number,children:a.format?a.format(e.number):e.name},e.number))]})})]})},i=e=>{let{label:n,values:a,onChange:l,value:c,emptyChoose:i,lastElem:u}=e;return(0,s.jsxs)(t.A.Group,{as:r.A,className:u?"":"mb-2",children:[(0,s.jsx)(t.A.Label,{column:!0,sm:2,children:n}),(0,s.jsx)(o.A,{sm:10,children:(0,s.jsxs)(t.A.Select,{value:c,onChange:e=>l(e.target.value),children:[i&&(0,s.jsx)("option",{value:"",children:"Choose..."}),a.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})})]})},u=e=>{let{values:n,onChange:a,value:r,emptyChoose:o,format:l}=e;return(0,s.jsxs)(t.A.Select,{value:r,onChange:e=>a(e.target.value),children:[o&&(0,s.jsx)("option",{value:"",children:"Choose..."}),n.map(e=>{let n="string"==typeof e?e:e[0],a="string"==typeof e?e:e[1];return(0,s.jsx)("option",{value:a,children:l?l(n):n},n)})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[6077,8865,601,3779,5453,2362,2765,7581,4386,3874,3697,6878,8441,1684,7358],()=>n(11486)),_N_E=e.O()}]);