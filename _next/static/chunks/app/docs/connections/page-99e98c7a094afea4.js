(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2448:function(d,n,a){Promise.resolve().then(a.bind(a,4305))},4305:function(d,n,a){"use strict";a.r(n),a.d(n,{default:function(){return L}});var l,o,c=a(7437),e=a(2265),t=a(7185),u=a(4694),A=a(2064),g=a(2098),i=a(2808),b=a(2514),s=a(7833),m=a(3656),r=a(716),h=a(879),G=a(1159),B=a(200);let I=(0,B.l)("ChZzdGF0aXN0aWMvY29uZmlnLnByb3RvEhF5dWhhaWluLnN0YXRpc3RpYyKEAQoIbmV0X3R5cGUSNQoJY29ubl90eXBlGAEgASgOMhcueXVoYWlpbi5zdGF0aXN0aWMudHlwZVIJY29ubl90eXBlEkEKD3VuZGVybHlpbmdfdHlwZRgCIAEoDjIXLnl1aGFpaW4uc3RhdGlzdGljLnR5cGVSD3VuZGVybHlpbmdfdHlwZSK4AQoKY29ubmVjdGlvbhIMCgRhZGRyGAEgASgJEgoKAmlkGAIgASgEEikKBHR5cGUYAyABKAsyGy55dWhhaWluLnN0YXRpc3RpYy5uZXRfdHlwZRI3CgVleHRyYRgEIAMoCzIoLnl1aGFpaW4uc3RhdGlzdGljLmNvbm5lY3Rpb24uRXh0cmFFbnRyeRosCgpFeHRyYUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEqjwEKBHR5cGUSCwoHdW5rbm93bhAAEgcKA3RjcBABEggKBHRjcDQQAhIICgR0Y3A2EAMSBwoDdWRwEAQSCAoEdWRwNBAFEggKBHVkcDYQBhIGCgJpcBAHEgcKA2lwNBAIEgcKA2lwNhAJEggKBHVuaXgQChIMCgh1bml4Z3JhbRALEg4KCnVuaXhwYWNrZXQQDEIzWjFnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvc3RhdGlzdGljYgZwcm90bzM");(l=o||(o={}))[l.unknown=0]="unknown",l[l.tcp=1]="tcp",l[l.tcp4=2]="tcp4",l[l.tcp6=3]="tcp6",l[l.udp=4]="udp",l[l.udp4=5]="udp4",l[l.udp6=6]="udp6",l[l.ip=7]="ip",l[l.ip4=8]="ip4",l[l.ip6=9]="ip6",l[l.unix=10]="unix",l[l.unixgram=11]="unixgram",l[l.unixpacket=12]="unixpacket";var W=a(9320),v=a(8516);let C=(0,B.l)("ChtzdGF0aXN0aWMvZ3JwYy9jb25maWcucHJvdG8SIHl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlIi4KCnRvdGFsX2Zsb3cSEAoIZG93bmxvYWQYASABKAQSDgoGdXBsb2FkGAIgASgEIpcCCgtub3RpZnlfZGF0YRJCCgp0b3RhbF9mbG93GAMgASgLMiwueXVoYWlpbi5wcm90b3Muc3RhdGlzdGljLnNlcnZpY2UudG90YWxfZmxvd0gAEloKFm5vdGlmeV9uZXdfY29ubmVjdGlvbnMYASABKAsyOC55dWhhaWluLnByb3Rvcy5zdGF0aXN0aWMuc2VydmljZS5ub3RpZnlfbmV3X2Nvbm5lY3Rpb25zSAASYAoZbm90aWZ5X3JlbW92ZV9jb25uZWN0aW9ucxgCIAEoCzI7Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnNIAEIGCgRkYXRhIkwKFm5vdGlmeV9uZXdfY29ubmVjdGlvbnMSMgoLY29ubmVjdGlvbnMYASADKAsyHS55dWhhaWluLnN0YXRpc3RpYy5jb25uZWN0aW9uIigKGW5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnMSCwoDaWRzGAEgAygEMu0CCgtjb25uZWN0aW9ucxJZCgVjb25ucxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRo4Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9uZXdfY29ubmVjdGlvbnMSYQoKY2xvc2VfY29ubhI7Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnMaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSTQoFdG90YWwSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaLC55dWhhaWluLnByb3Rvcy5zdGF0aXN0aWMuc2VydmljZS50b3RhbF9mbG93ElEKBm5vdGlmeRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRotLnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9kYXRhMAFCO1o5Z2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL3N0YXRpc3RpYy9zZXJ2aWNlYgZwcm90bzM",[v.r,I]),Y=(0,W.L)(C,0),p=(0,W.L)(C,1),R=(0,W.L)(C,3);var E=a(6878),Z=a(8537),y=a(1617);let w=function(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+d)return"0B";let a=Math.floor(Math.log(d)/Math.log(1024)),l=parseFloat((d/Math.pow(1024,a)).toFixed(0>n?0:n)),o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"][a];return isNaN(l)||void 0===o?"":"".concat(l).concat(o)},V=(d,n)=>{let a=(d.download-(n.download!==BigInt(0)?n.download:d.download))/BigInt(2),l=(d.upload-(n.upload!==BigInt(0)?n.upload:d.upload))/BigInt(2);return{download:"(".concat(w(Number(d.download)),"): ").concat(w(Number(a)),"/S"),upload:"(".concat(w(Number(d.upload)),"): ").concat(w(Number(l)),"/S")}},N=e.memo(d=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:d.itemKey}),(0,c.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"Hash"!==d.itemKey?d.itemValue:(0,c.jsx)("a",{href:"#",onClick:n=>{n.preventDefault(),d.showModal(d.itemValue)},children:d.itemValue})})]})})})),S=e.memo(d=>{var n,a,l,t,s,m;let r=(0,e.useContext)(G.P),[B,I]=(0,e.useState)(!1);return(0,c.jsxs)(A.Z.Item,{eventKey:d.data.id.toString(),children:[(0,c.jsx)(A.Z.Header,{children:(0,c.jsxs)("div",{className:"d-line",children:[(0,c.jsx)("code",{className:"ms-2",children:d.data.id.toString()}),(0,c.jsx)("span",{className:"ms-2",children:d.data.addr}),(0,c.jsx)(g.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:d.data.extra.MODE}),(0,c.jsx)(g.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:o[null!==(t=null===(n=d.data.type)||void 0===n?void 0:n.connType)&&void 0!==t?t:0]}),void 0!==d.data.extra.Tag&&(0,c.jsx)(g.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:d.data.extra.Tag})]})}),(0,c.jsx)(A.Z.Body,{children:(0,c.jsxs)(u.Z,{variant:"flush",children:[(0,c.jsx)(N,{itemKey:"Type",itemValue:o[null!==(s=null===(a=d.data.type)||void 0===a?void 0:a.connType)&&void 0!==s?s:0],showModal:d.showModal}),(0,c.jsx)(N,{itemKey:"Underlying",itemValue:o[null!==(m=null===(l=d.data.type)||void 0===l?void 0:l.underlyingType)&&void 0!==m?m:0],showModal:d.showModal}),Object.entries(d.data.extra).sort((d,n)=>d<=n?-1:1).map(n=>{let[a,l]=n;return(0,c.jsx)(N,{itemKey:a,itemValue:l,showModal:d.showModal},a)}),(0,c.jsx)(u.Z.Item,{children:(0,c.jsx)("div",{className:"d-sm-flex",children:(0,c.jsxs)(i.Z,{variant:"outline-danger",className:"flex-grow-1 notranslate",disabled:B,onClick:()=>{I(!0),(0,h.Uo)("/conn",{method:"DELETE",body:(0,E.O)(R,(0,Z.U)(R,{ids:[d.data.id]}))}).then(async n=>{let{error:a}=n;a?(r.Error("code ".concat(d.data.id," failed, ").concat(a.code,"| ").concat(await a.msg)),I(!1)):setTimeout(()=>{I(!1)},5e3)})},children:["Close",B&&(0,c.jsxs)(c.Fragment,{children:["\xa0",(0,c.jsx)(b.Z,{size:"sm",animation:"border",variant:"danger"})]})]})})})]})})]},d.data.id)});var L=function(){let[d,n]=(0,e.useState)({show:!1,hash:""}),[a,l]=(0,e.useState)({download:BigInt(0),upload:BigInt(0)}),{data:o,error:g}=(0,y.ZP)("/flow/total",(0,h.OV)(Y,d=>{let n=V(d,{download:a.download,upload:a.upload});return l({download:d.download,upload:d.upload}),n}),{refreshInterval:2e3}),{data:i,error:b}=(0,m.Z)("/conn",(0,h.o5)((0,E.O)(v.u,(0,Z.U)(v.u)),p,(d,n)=>{switch(void 0===d&&(d=new Map),n.data.case){case"notifyNewConnections":n.data.value.connections.sort((d,n)=>d.id>n.id?1:-1).forEach(n=>{d.set(n.id,n)});break;case"notifyRemoveConnections":n.data.value.ids.forEach(n=>{d.delete(n)})}return d}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.c,{show:d.show,hash:d.hash,editable:!1,onHide:()=>n({hash:"",show:!1})}),(0,c.jsx)(t.Z,{className:"mb-3",children:(0,c.jsxs)(u.Z,{variant:"flush",children:[(0,c.jsx)(u.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,c.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:o?o.download:void 0!==g?g.msg:"Loading..."})]})}),(0,c.jsx)(u.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,c.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:o?o.upload:void 0!==g?g.msg:"Loading..."})]})})]})}),void 0!==b?(0,c.jsx)(r.Z,{code:b.code,children:b.msg}):void 0===i?(0,c.jsx)(r.Z,{}):(0,c.jsx)(A.Z,{className:"mb-3",alwaysOpen:!0,id:"connections",children:[...i.values()].reverse().map(d=>(0,c.jsx)(S,{data:d,showModal:d=>n({show:!0,hash:d})},d.id))})]})}},629:function(d,n,a){"use strict";a.d(n,{Xm:function(){return u},hW:function(){return o},tQ:function(){return A}});var l,o,c=a(200),e=a(9320),t=a(8401);let u=(0,c.l)("ChZub2RlL3BvaW50L3BvaW50LnByb3RvEg15dWhhaWluLnBvaW50IogBCgVwb2ludBIMCgRoYXNoGAEgASgJEgwKBG5hbWUYAiABKAkSDQoFZ3JvdXAYAyABKAkSJQoGb3JpZ2luGAQgASgOMhUueXVoYWlpbi5wb2ludC5vcmlnaW4SLQoJcHJvdG9jb2xzGAUgAygLMhoueXVoYWlpbi5wcm90b2NvbC5wcm90b2NvbCotCgZvcmlnaW4SCwoHcmVzZXJ2ZRAAEgoKBnJlbW90ZRBlEgoKBm1hbnVhbBBmQjRaMmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9ub2RlL3BvaW50YgZwcm90bzM",[t.u0]),A=(0,e.L)(u,0);(l=o||(o={}))[l.reserve=0]="reserve",l[l.remote=101]="remote",l[l.manual=102]="manual"},8401:function(d,n,a){"use strict";a.d(n,{$e:function(){return m},A9:function(){return s},Ap:function(){return C},Ii:function(){return u},Kn:function(){return A},Mw:function(){return h},NJ:function(){return R},Q4:function(){return I},UM:function(){return r},Um:function(){return b},W0:function(){return v},cj:function(){return W},dN:function(){return w},jS:function(){return B},l1:function(){return p},n0:function(){return e},pJ:function(){return t},pj:function(){return Y},qN:function(){return E},rg:function(){return i},s:function(){return y},u0:function(){return c},uH:function(){return g},y$:function(){return Z},zW:function(){return G}});var l=a(200),o=a(9320);let c=(0,l.l)("Chxub2RlL3Byb3RvY29sL3Byb3RvY29sLnByb3RvEhB5dWhhaWluLnByb3RvY29sIvoHCghwcm90b2NvbBI0CgtzaGFkb3dzb2NrcxgBIAEoCzIdLnl1aGFpaW4ucHJvdG9jb2wuc2hhZG93c29ja3NIABI2CgxzaGFkb3dzb2Nrc3IYAiABKAsyHi55dWhhaWluLnByb3RvY29sLnNoYWRvd3NvY2tzckgAEigKBXZtZXNzGAMgASgLMhcueXVoYWlpbi5wcm90b2NvbC52bWVzc0gAEjAKCXdlYnNvY2tldBgEIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wud2Vic29ja2V0SAASJgoEcXVpYxgFIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wucXVpY0gAEjsKCW9iZnNfaHR0cBgGIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wub2Jmc19odHRwSABSCW9iZnNfaHR0cBIqCgZ0cm9qYW4YByABKAsyGC55dWhhaWluLnByb3RvY29sLnRyb2phbkgAEioKBnNpbXBsZRgIIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuc2ltcGxlSAASJgoEbm9uZRgJIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wubm9uZUgAEioKBnNvY2tzNRgKIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuc29ja3M1SAASJgoEaHR0cBgLIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wuaHR0cEgAEioKBmRpcmVjdBgMIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuZGlyZWN0SAASKgoGcmVqZWN0GA0gASgLMhgueXVoYWlpbi5wcm90b2NvbC5yZWplY3RIABIwCgl5dXViaW5zeWEYDiABKAsyGy55dWhhaWluLnByb3RvY29sLnl1dWJpbnN5YUgAEiYKBGdycGMYDyABKAsyFi55dWhhaWluLnByb3RvY29sLmdycGNIABIoCgVodHRwMhgQIAEoCzIXLnl1aGFpaW4ucHJvdG9jb2wuaHR0cDJIABIsCgdyZWFsaXR5GBEgASgLMhkueXVoYWlpbi5wcm90b2NvbC5yZWFsaXR5SAASKwoDdGxzGBIgASgLMhwueXVoYWlpbi5wcm90b2NvbC50bHNfY29uZmlnSAASMAoJd2lyZWd1YXJkGBMgASgLMhsueXVoYWlpbi5wcm90b2NvbC53aXJlZ3VhcmRIABIkCgNtdXgYFCABKAsyFS55dWhhaWluLnByb3RvY29sLm11eEgAEiYKBGRyb3AYFSABKAsyFi55dWhhaWluLnByb3RvY29sLmRyb3BIABIoCgV2bGVzcxgWIAEoCzIXLnl1aGFpaW4ucHJvdG9jb2wudmxlc3NIAEIKCghwcm90b2NvbCI6CgZzb2NrczUSEAoIaG9zdG5hbWUYAyABKAkSDAoEdXNlchgBIAEoCRIQCghwYXNzd29yZBgCIAEoCSImCgRodHRwEgwKBHVzZXIYASABKAkSEAoIcGFzc3dvcmQYAiABKAkiLwoLc2hhZG93c29ja3MSDgoGbWV0aG9kGAEgASgJEhAKCHBhc3N3b3JkGAIgASgJIpUBCgxzaGFkb3dzb2Nrc3ISDgoGc2VydmVyGAEgASgJEgwKBHBvcnQYAiABKAkSDgoGbWV0aG9kGAMgASgJEhAKCHBhc3N3b3JkGAQgASgJEgwKBG9iZnMYBSABKAkSEQoJb2Jmc3BhcmFtGAYgASgJEhAKCHByb3RvY29sGAcgASgJEhIKCnByb3RvcGFyYW0YCCABKAkiHAoFaHR0cDISEwoLY29uY3VycmVuY3kYASABKAUiQgoFdm1lc3MSEAoEdXVpZBgBIAEoCVICaWQSFQoIYWx0ZXJfaWQYAiABKAlSA2FpZBIQCghzZWN1cml0eRgDIAEoCSIVCgV2bGVzcxIMCgR1dWlkGAEgASgJIigKBnRyb2phbhIQCghwYXNzd29yZBgBIAEoCRIMCgRwZWVyGAIgASgJIpwBCgl5dXViaW5zeWESEAoIcGFzc3dvcmQYASABKAkSIAoLdGNwX2VuY3J5cHQYBCABKAhSC3RjcF9lbmNyeXB0EiAKC3VkcF9lbmNyeXB0GAUgASgIUgt1ZHBfZW5jcnlwdBIoCg91ZHBfb3Zlcl9zdHJlYW0YAyABKAhSD3VkcF9vdmVyX3N0cmVhbUoECAIQA1IJZW5jcnlwdGVkIjoKCXdlYnNvY2tldBIMCgRob3N0GAEgASgJEgwKBHBhdGgYAiABKAlKBAgEEAVSC3Rsc19lbmFibGVkIjEKBGdycGMSKQoDdGxzGAEgASgLMhwueXVoYWlpbi5wcm90b2NvbC50bHNfY29uZmlnIj8KBHF1aWMSDAoEaG9zdBgCIAEoCRIpCgN0bHMYASABKAsyHC55dWhhaWluLnByb3RvY29sLnRsc19jb25maWcidgoHcmVhbGl0eRIgCgtzZXJ2ZXJfbmFtZRgBIAEoCVILc2VydmVyX25hbWUSHgoKcHVibGljX2tleRgCIAEoCVIKcHVibGljX2tleRIaCghzaG9ydF9pZBgDIAEoCVIIc2hvcnRfaWQSDQoFZGVidWcYBCABKAgiJwoJb2Jmc19odHRwEgwKBGhvc3QYASABKAkSDAoEcG9ydBgCIAEoCSIGCgRub25lIpgBCgZzaW1wbGUSDAoEaG9zdBgBIAEoCRIMCgRwb3J0GAIgASgFEj4KDmFsdGVybmF0ZV9ob3N0GAUgAygLMhYueXVoYWlpbi5wcm90b2NvbC5ob3N0Ug5hbHRlcm5hdGVfaG9zdEoECAQQBUoECAYQB0oECAMQBFIDdGxzUgd0aW1lb3V0UhJwYWNrZXRfY29ubl9kaXJlY3QirwEKCnRsc19jb25maWcSDgoGZW5hYmxlGAEgASgIEiEKDHNlcnZlcl9uYW1lcxgGIAMoCVILc2VydmVybmFtZXMSGAoHY2FfY2VydBgDIAMoDFIHY2FfY2VydBIyChRpbnNlY3VyZV9za2lwX3ZlcmlmeRgEIAEoCFIUaW5zZWN1cmVfc2tpcF92ZXJpZnkSIAoLbmV4dF9wcm90b3MYBSADKAlSC25leHRfcHJvdG9zIhcKBmRpcmVjdEoECAEQAlIHdGltZW91dCIICgZyZWplY3QiBgoEZHJvcCIiCgRob3N0EgwKBGhvc3QYASABKAkSDAoEcG9ydBgCIAEoBSJ+ChV3aXJlZ3VhcmRfcGVlcl9jb25maWcSEgoKcHVibGljX2tleRgBIAEoCRIWCg5wcmVfc2hhcmVkX2tleRgCIAEoCRIQCghlbmRwb2ludBgDIAEoCRISCgprZWVwX2FsaXZlGAQgASgFEhMKC2FsbG93ZWRfaXBzGAUgAygJIp4BCgl3aXJlZ3VhcmQSEgoKc2VjcmV0X2tleRgBIAEoCRIQCghlbmRwb2ludBgCIAMoCRI2CgVwZWVycxgDIAMoCzInLnl1aGFpaW4ucHJvdG9jb2wud2lyZWd1YXJkX3BlZXJfY29uZmlnEgsKA210dRgEIAEoBRIQCghyZXNlcnZlZBgGIAEoDBIUCgxpZGxlX3RpbWVvdXQYByABKAUiGgoDbXV4EhMKC2NvbmN1cnJlbmN5GAEgASgFQjdaNWdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9ub2RlL3Byb3RvY29sYgZwcm90bzM"),e=(0,o.L)(c,0),t=(0,o.L)(c,1),u=(0,o.L)(c,2),A=(0,o.L)(c,3),g=(0,o.L)(c,4),i=(0,o.L)(c,5),b=(0,o.L)(c,6),s=(0,o.L)(c,7),m=(0,o.L)(c,8),r=(0,o.L)(c,9),h=(0,o.L)(c,10),G=(0,o.L)(c,11),B=(0,o.L)(c,12),I=(0,o.L)(c,13),W=(0,o.L)(c,14),v=(0,o.L)(c,15),C=(0,o.L)(c,16),Y=(0,o.L)(c,17),p=(0,o.L)(c,18),R=(0,o.L)(c,20),E=(0,o.L)(c,21),Z=(0,o.L)(c,22),y=(0,o.L)(c,23),w=(0,o.L)(c,24)}},function(d){d.O(0,[986,256,466,262,364,210,361,856,591,100,833,971,23,744],function(){return d(d.s=2448)}),_N_E=d.O()}]);