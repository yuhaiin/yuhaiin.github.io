(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8706],{5717:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(29300),a=s.n(n),r=s(12115),l=s(97390),d=s(95155);let i=r.forwardRef((e,t)=>{let{bsPrefix:s,bg:n="primary",pill:r=!1,text:i,className:o,as:c="span",...u}=e,m=(0,l.oU)(s,"badge");return(0,d.jsx)(c,{ref:t,...u,className:a()(o,m,r&&"rounded-pill",i&&"text-".concat(i),n&&"bg-".concat(n))})});i.displayName="Badge";let o=i},11347:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var n=s(95155),a=s(20960),r=s(71464),l=s(12115),d=s(76355),i=s(69056),o=s(65677),c=s(5717),u=s(60902),m=s(91867),h=s(40840),x=s(74086),j=s(98508),v=s(66835),g=s(87494),f=s(29940),p=s(70715),b=s(3384),y=s(26506);let w=e=>{var t,s;let{data:r,counter:d,showModal:h}=e,x=(0,l.useContext)(v.u),[g,w]=(0,l.useState)(!1);return(0,n.jsxs)(o.A.Item,{eventKey:r.id.toString(),children:[(0,n.jsx)(o.A.Header,{children:(0,n.jsxs)("div",{className:"d-line text-break",children:[(0,n.jsx)("code",{className:"ms-2",children:r.id.toString()}),(0,n.jsx)("span",{className:"ms-2",children:r.addr}),(0,n.jsxs)(c.A,{className:"bg-light rounded-pill text-dark ms-1",children:[(0,y.z3)(Number(d&&d.download?d.download:0))," / ",(0,y.z3)(Number(d&&d.upload?d.upload:0))]}),(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:f.Mq[r.mode]}),(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:p.NW[null!=(s=null==(t=r.type)?void 0:t.connType)?s:0]}),r.tag&&(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:r.tag})]})}),(0,n.jsx)(o.A.Body,{children:(0,n.jsx)(y.TH,{value:r,showModal:h,endContent:(0,n.jsx)(i.A.Item,{children:(0,n.jsx)("div",{className:"d-sm-flex",children:(0,n.jsxs)(u.A,{variant:"outline-danger",className:"flex-grow-1 notranslate",disabled:g,onClick:()=>{w(!0),(0,j.kP)(b.oQ.method.close_conn,(0,a.v)(b.SE,{ids:[r.id]})).then(async e=>{let{error:t}=e;t?(x.Error("code ".concat(r.id," failed, ").concat(t.code,"| ").concat(t.msg)),w(!1)):setTimeout(()=>{w(!1)},5e3)})},children:["Close",g&&(0,n.jsxs)(n.Fragment,{children:["\xa0",(0,n.jsx)(m.A,{size:"sm",animation:"border",variant:"danger"})]})]})})})})})]},r.id)},N=function(){let[e,t]=(0,l.useState)({show:!1,hash:""}),{data:s,error:c}=(0,y.qM)(),{data:u,error:m}=(0,h.A)((0,j.cY)(b.oQ.method.notify),(0,j.zZ)(b.oQ.method.notify,(0,a.v)(r.v,{}),(e,t)=>{switch(void 0===t&&(t=new Map),e.data.case){case"notifyNewConnections":e.data.value.connections.sort((e,t)=>e.id>t.id?1:-1).forEach(e=>{t.set(e.id,e)});break;case"notifyRemoveConnections":e.data.value.ids.forEach(e=>{t.delete(e)})}return t}),{});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.y,{show:e.show,hash:e.hash,editable:!1,onHide:()=>t({...e,show:!1})}),(0,n.jsx)(d.A,{className:"mb-3",children:(0,n.jsxs)(i.A,{variant:"flush",children:[(0,n.jsx)(i.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:c?c.msg:s?s.DownloadString():"Loading..."})]})}),(0,n.jsx)(i.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:c?c.msg:s?s.UploadString():"Loading..."})]})})]})}),void 0!==m?(0,n.jsx)(x.A,{code:m.code,children:m.msg}):void 0===u?(0,n.jsx)(x.A,{}):(0,n.jsx)(o.A,{className:"mb-3",alwaysOpen:!0,id:"connections",children:[...u.values()].reverse().map(e=>(0,n.jsx)(w,{data:e,counter:s.counters[e.id.toString()],showModal:e=>t({show:!0,hash:e})},e.id))})]})}},18438:(e,t,s)=>{Promise.resolve().then(s.bind(s,11347))},26506:(e,t,s)=>{"use strict";s.d(t,{HU:()=>h,TH:()=>j,c5:()=>w,qM:()=>b,z3:()=>g});var n=s(95155),a=s(67167),r=s(12115),l=s(69056),d=s(5717),i=s(76355),o=s(19169),c=s(98508),u=s(70715),m=s(3384);let h=e=>{let{itemKey:t,itemValue:s,showModal:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:t}),(0,n.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:(0,n.jsx)(x,{itemKey:t,itemValue:s,showModal:a})})]})})})},x=e=>{let{itemKey:t,itemValue:s,showModal:a}=e;if("mode reason"===t){let e=JSON.parse(s);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,n.jsx)("div",{style:{flex:1,height:"1px",background:"black"}}),(0,n.jsx)("span",{children:(0,n.jsx)("b",{children:"Rule Name"})}),(0,n.jsx)("div",{style:{flex:1,height:"1px",background:"black"}})]}),(0,n.jsx)("div",{className:"mt-2 mb-2",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.A,{bg:"success",children:"Hit"})," List Name"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.A,{bg:"danger",children:"Miss"})," List Name"]})]})})]}),(0,n.jsx)("hr",{}),e.map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,n.jsx)("div",{style:{flex:1,height:"1px",background:"black"}}),(0,n.jsx)("span",{children:(0,n.jsx)("b",{children:e.rule_name})}),(0,n.jsx)("div",{style:{flex:1,height:"1px",background:"black"}})]}),(0,n.jsx)("div",{className:"mt-2 mb-2",children:e.history.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[e.matched?(0,n.jsx)(d.A,{bg:"success",children:"Hit"}):(0,n.jsx)(d.A,{bg:"danger",children:"Miss"})," ",e.list_name]})},"list-"+e.list_name+t))})]},"rule-"+e.rule_name+t))]})}return"hash"==t&&a?(0,n.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),a(s)},children:s}):(0,n.jsx)(n.Fragment,{children:s})},j=e=>{let{value:t,startContent:s,endContent:r,showModal:d}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.A,{variant:"flush",className:"w-100 p-2",children:[s,function(e){let t=(0,a.E4)(u.mR,e),s=(e,t)=>{if("enum"===e.fieldKind){let s=t.get(e);return e.enum.value[s].name}{let s=t.get(e);if(!s)return;return s.toString()}},r=e=>{let{f:t,ref:a}=e,r=s(t,a);if(r)return(0,n.jsx)(h,{itemKey:t.name.replaceAll("_"," "),itemValue:r,showModal:d})};return(0,n.jsx)(n.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let s=t.get(e);return s.fields.map(e=>(0,n.jsx)(r,{f:e,ref:s},e.name))}return(0,n.jsx)(r,{f:e,ref:t},e.name)})})}(t),r]})})},v={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:s,unit:n}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:v.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:v.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:v.GB}:e>=1048576?{bytes:e/1048576,unit:v.MB}:e>=1024?{bytes:e/1024,unit:v.KB}:{bytes:e,unit:v.B};return"".concat(s.toFixed(t)).concat(n)};class f{DownloadString(){let e=g(this.download),t=g(this.download_rate)+"/S";return"(".concat(e,"): ").concat(t)}UploadString(){let e=g(this.upload),t=g(this.upload_rate)+"/S";return"(".concat(e,"): ").concat(t)}constructor(e=0,t=0,s=0,n=0,a={}){this.download=e,this.download_rate=t,this.upload=s,this.upload_rate=n,this.counters=a,this.time=new Date}}let p=(e,t)=>{let s=(new Date().getTime()-t.time.getTime())/1e3,n=0,a=0;if((0!==t.download||0!==t.upload)&&0!==s){let r=Number(e.download),l=Number(e.upload);n=(r-t.download)/s,a=(l-t.upload)/s}return{download_rate:n,upload_rate:a}},b=()=>{let[e,t]=(0,r.useState)(new f(0,0,0,0,{}));return(0,o.Ay)((0,c.cY)(m.oQ.method.total),async()=>(0,c.kP)(m.oQ.method.total).then(async s=>{let{data:n,error:a}=s;if(a)throw a;if(n)try{let s=p(n,e),a=new f(Number(n.download),s.download_rate,Number(n.upload),s.upload_rate,n.counters);return t(a),a}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})},y=e=>{let{lastFlow:t,flow_error:s,end_content:a}=e;return(0,n.jsx)(i.A,{className:"mb-3",children:(0,n.jsxs)(l.A,{variant:"flush",children:[(0,n.jsx)(l.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:s?s.msg:t?t.DownloadString():"Loading..."})]})}),(0,n.jsx)(l.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:s?s.msg:t?t.UploadString():"Loading..."})]})}),a]})})},w=r.memo(e=>{let{onUpdate:t,end_content:s}=e,{data:a,error:l}=b();return(0,r.useEffect)(()=>{t&&a&&t(a.counters)},[t,a]),(0,n.jsx)(y,{lastFlow:a,flow_error:l,end_content:s})})},40840:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(19169),a=s(45567),r=s(68974);let l=new WeakMap,d=(0,r.Ht)(n.Ay,e=>(t,s,n)=>{let[r,d]=(0,a.s)(t),i=r?"$sub$"+r:void 0,o=e(i,null,n),{cache:c}=n;l.has(c)||l.set(c,[new Map,new Map]);let[u,m]=l.get(c);return(0,a.u)(()=>{if(!i)return;let[,e]=(0,a.z)(c,i),t=u.get(i)||0;if(u.set(i,t+1),!t){let t=s(d,{next:(t,s)=>{null!=t?e({error:t}):(e({error:void 0}),o.mutate(s,!1))}});if("function"!=typeof t)throw Error("The `subscribe` function must return a function to unsubscribe.");m.set(i,t)}return()=>{let e=u.get(i)-1;if(u.set(i,e),!e){let e=m.get(i);null==e||e()}}},[i]),{get data(){return o.data},get error(){return o.error}}})},65677:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(29300),a=s.n(n),r=s(12115),l=s(91497),d=s(97390),i=s(48873);function o(e,t){return Array.isArray(e)?e.includes(t):e===t}let c=r.createContext({});c.displayName="AccordionContext";var u=s(95155);let m=r.forwardRef((e,t)=>{let{as:s="div",bsPrefix:n,className:l,children:m,eventKey:h,...x}=e,{activeEventKey:j}=(0,r.useContext)(c);return n=(0,d.oU)(n,"accordion-collapse"),(0,u.jsx)(i.A,{ref:t,in:o(j,h),...x,className:a()(l,n),children:(0,u.jsx)(s,{children:r.Children.only(m)})})});m.displayName="AccordionCollapse";let h=r.createContext({eventKey:""});h.displayName="AccordionItemContext";let x=r.forwardRef((e,t)=>{let{as:s="div",bsPrefix:n,className:l,onEnter:i,onEntering:o,onEntered:c,onExit:x,onExiting:j,onExited:v,...g}=e;n=(0,d.oU)(n,"accordion-body");let{eventKey:f}=(0,r.useContext)(h);return(0,u.jsx)(m,{eventKey:f,onEnter:i,onEntering:o,onEntered:c,onExit:x,onExiting:j,onExited:v,children:(0,u.jsx)(s,{ref:t,...g,className:a()(l,n)})})});x.displayName="AccordionBody";let j=r.forwardRef((e,t)=>{let{as:s="button",bsPrefix:n,className:l,onClick:i,...m}=e;n=(0,d.oU)(n,"accordion-button");let{eventKey:x}=(0,r.useContext)(h),j=function(e,t){let{activeEventKey:s,onSelect:n,alwaysOpen:a}=(0,r.useContext)(c);return r=>{let l=e===s?null:e;a&&(l=Array.isArray(s)?s.includes(e)?s.filter(t=>t!==e):[...s,e]:[e]),null==n||n(l,r),null==t||t(r)}}(x,i),{activeEventKey:v}=(0,r.useContext)(c);return"button"===s&&(m.type="button"),(0,u.jsx)(s,{ref:t,onClick:j,...m,"aria-expanded":Array.isArray(v)?v.includes(x):x===v,className:a()(l,n,!o(v,x)&&"collapsed")})});j.displayName="AccordionButton";let v=r.forwardRef((e,t)=>{let{as:s="h2","aria-controls":n,bsPrefix:r,className:l,children:i,onClick:o,...c}=e;return r=(0,d.oU)(r,"accordion-header"),(0,u.jsx)(s,{ref:t,...c,className:a()(l,r),children:(0,u.jsx)(j,{onClick:o,"aria-controls":n,children:i})})});v.displayName="AccordionHeader";let g=r.forwardRef((e,t)=>{let{as:s="div",bsPrefix:n,className:l,eventKey:i,...o}=e;n=(0,d.oU)(n,"accordion-item");let c=(0,r.useMemo)(()=>({eventKey:i}),[i]);return(0,u.jsx)(h.Provider,{value:c,children:(0,u.jsx)(s,{ref:t,...o,className:a()(l,n)})})});g.displayName="AccordionItem";let f=r.forwardRef((e,t)=>{let{as:s="div",activeKey:n,bsPrefix:i,className:o,onSelect:m,flush:h,alwaysOpen:x,...j}=(0,l.Zw)(e,{activeKey:"onSelect"}),v=(0,d.oU)(i,"accordion"),g=(0,r.useMemo)(()=>({activeEventKey:n,onSelect:m,alwaysOpen:x}),[n,m,x]);return(0,u.jsx)(c.Provider,{value:g,children:(0,u.jsx)(s,{ref:t,...j,className:a()(o,v,h&&"".concat(v,"-flush"))})})});f.displayName="Accordion";let p=Object.assign(f,{Button:j,Collapse:m,Item:g,Header:v,Body:x})},99695:(e,t,s)=>{"use strict";s.d(t,{i:()=>r,w:()=>l});var n=s(9152),a=s(78133);let r=(0,n.w)("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),l=(0,a.Z)(r,0)}},e=>{var t=t=>e(e.s=t);e.O(0,[3528,11,601,3779,5453,1085,6077,5225,9873,3959,5309,626,7494,3384,8441,1684,7358],()=>t(18438)),_N_E=e.O()}]);