(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7894],{4946:(e,t,s)=>{"use strict";s.d(t,{W:()=>r});var l=s(95155),n=s(93045);function r(e){let{currentPage:t,totalItems:s,pageSize:r,onPageChange:c}=e,o=Math.ceil(s/r),a=[];if(o<=7)for(let e=1;e<=o;e++)a.push(e);else if(t<=4){for(let e=1;e<=5;e++)a.push(e);a.push("ellipsis"),a.push(o)}else if(t>=o-2-1){a.push(1),a.push("ellipsis");for(let e=o-5+1;e<=o;e++)a.push(e)}else{a.push(1),a.push("ellipsis");for(let e=t-1;e<=t+1;e++)a.push(e);a.push("ellipsis"),a.push(o)}return(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)(n.A,{className:"justify-content-center d-inline-flex",children:[(0,l.jsx)(n.A.Prev,{onClick:()=>c(t-1),disabled:1===t}),a.map((e,s)=>"ellipsis"===e?(0,l.jsx)(n.A.Ellipsis,{disabled:!0},"e"+s):(0,l.jsx)(n.A.Item,{active:e===t,onClick:()=>c(e),children:e},e)),(0,l.jsx)(n.A.Next,{onClick:()=>c(t+1),disabled:t===o})]})})}},10577:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var l=s(95155),n=s(20960),r=s(99695),c=s(77849),o=s(12115),a=s(60902),i=s(91867),d=s(60926),u=s(50700),h=s.n(u),m=s(74086),p=s(4946),x=s(98508),g=s(70715),j=s(3384);let f=(0,n.v)(r.w,{seconds:BigInt(0),nanos:0}),y=function(){let[e,t]=(0,o.useState)("Time"),[s,n]=(0,o.useState)(1),r=(0,o.useCallback)(function(e,t){return e>t?-1*s:+s},[s]),u=r=>(0,l.jsxs)("th",{className:h().clickable,onClick:()=>r===e?n(-s):t(r),children:[r,r===e?(0,l.jsx)("i",{className:-1===s?"bi bi-sort-up-alt":"bi bi-sort-down-alt"}):(0,l.jsx)(l.Fragment,{})]}),y=(0,o.useCallback)((t,s)=>{var l,n;return"Host"===e?r(t.host,s.host):"Proc"===e?r(t.process,s.process):"Count"===e?r(t.failedCount,s.failedCount):r((0,c.FP)(null!=(l=t.time)?l:f),(0,c.FP)(null!=(n=s.time)?n:f))},[e,r]),[_,b]=(0,o.useState)(1),{data:v,error:k,isLoading:w,isValidating:N,mutate:S}=(0,x.mp)(j.oQ.method.failed_history),P=(0,o.useMemo)(()=>{var e;return null==v||null==(e=v.objects)?void 0:e.filter(e=>e.time).sort(y)},[v,y]);return k?(0,l.jsx)(m.A,{code:k.code,children:k.msg}):w||void 0===v?(0,l.jsx)(m.A,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,l.jsxs)(a.A,{variant:"outline-primary",className:"mb-3",onClick:()=>S(),disabled:N||w,children:[(0,l.jsx)("i",{className:"bi bi-arrow-clockwise"})," ",(N||w)&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(i.A,{size:"sm",animation:"border"})]})]}),(0,l.jsx)(p.W,{currentPage:_,totalItems:P.length,pageSize:30,onPageChange:e=>{b(e)}})]})}),(0,l.jsxs)(d.A,{hover:!0,striped:!0,size:"sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Index"}),u("Time"),(0,l.jsx)("th",{children:"Net"}),u("Host"),u("Count"),(0,l.jsx)("th",{children:"Err"}),v.dumpProcessEnabled&&u("Proc")]})}),(0,l.jsx)("tbody",{className:"text-break",children:P.slice((_-1)*30,(_-1)*30+30).map((e,t)=>{var s;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:t+(_-1)*30+1}),(0,l.jsx)("td",{children:(0,c.FP)(e.time).toLocaleString()}),(0,l.jsx)("td",{children:g.NW[null!=(s=e.protocol)?s:g.NW.unknown]}),(0,l.jsx)("td",{children:e.host}),(0,l.jsx)("td",{children:Number(e.failedCount)}),(0,l.jsx)("td",{children:e.error}),v.dumpProcessEnabled&&(0,l.jsx)("td",{children:e.process})]},"bh-"+t)})})]})]})}},23641:(e,t,s)=>{"use strict";s.d(t,{DH:()=>o,G_:()=>m,Ow:()=>u,Oz:()=>n,VN:()=>j,X3:()=>i,_s:()=>g,dp:()=>h,h$:()=>x,kP:()=>l,mv:()=>p,oH:()=>c,r3:()=>r,u1:()=>a});let l="",n="https://clients3.google.com/generate_204",r="dns.nextdns.io:853",c=!0,o="http://ip.sb",a="stun.syncthing.net:3478",i="stun.nextcloud.com:443",d=()=>{let e=localStorage.getItem("api_url");l=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(n=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(r=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(c="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(o=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(a=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{f("api_url",e)},h=e=>{f("latency_dns_url",e)},m=e=>{f("latency_http_url",e)},p=e=>{f("latency_ipv6",e.toString())},x=e=>{f("latency_ip_url",e)},g=e=>{f("latency_stun_url",e)},j=e=>{f("latency_stun_tcp_url",e)},f=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},24776:(e,t,s)=>{Promise.resolve().then(s.bind(s,10577))},50700:e=>{e.exports={clickable:"clickable_clickable__ytaUf"}},74086:(e,t,s)=>{"use strict";s.d(t,{$:()=>r,A:()=>c});var l=s(95155),n=s(91867);let r=e=>{let{statusCode:t,title:s,raw:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"fw-bold fs-3 text-center",children:[t," | ",(0,l.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:s})]}),n&&(0,l.jsx)("pre",{className:"text-center my-2 text-danger lead",children:n})]})},c=function(e){return(0,l.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,l.jsx)("div",{className:"p2",children:(0,l.jsx)(n.A,{})})]})}},98508:(e,t,s)=>{"use strict";s.d(t,{AD:()=>d,cY:()=>i,kP:()=>u,mp:()=>a,zZ:()=>h});var l=s(4965),n=s(77205),r=s(56398),c=s(19169),o=s(23641);function a(e,t){return(0,c.Ay)(i(e),d(e),t)}let i=e=>"/".concat(e.parent.typeName,"/").concat(e.name);function d(e,t,s){return()=>s?(0,l.o)(e.output,s):fetch("".concat(o.kP).concat(i(e)),{method:"POST",body:t?(0,n.R)(e.input,t):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,r.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function u(e,t){let s=await fetch("".concat(o.kP).concat(i(e)),{method:"POST",body:t?(0,n.R)(e.input,t):void 0});return s.ok?{data:(0,r.Er)(e.output,new Uint8Array(await s.arrayBuffer()))}:{error:{code:s.status,msg:await s.text()}}}function h(e,t,s){return(l,c)=>{let a,{next:d}=c,u=new URL(""!==o.kP?o.kP:window.location.toString());u.pathname=i(e),u.protocol="https:"===u.protocol?"wss:":"ws:";let h=!1,m=()=>{h||(console.log("connecting to: ".concat(u)),(a=new WebSocket(u)).binaryType="arraybuffer",a.addEventListener("open",s=>{console.log("connect to: ".concat(u,", event type: ").concat(s.type)),null==a||a.send((0,n.R)(e.input,t))}),a.addEventListener("message",t=>{let l=(0,r.Er)(e.output,new Uint8Array(t.data));d(null,e=>s(l,e))}),a.addEventListener("error",e=>{let t="websocket have some error";d({msg:t,code:500}),console.log(t,e.type)}),a.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code+", isClosed: ",h),d(null,void 0),h||(console.log("reconnect after 2 seconds"),setTimeout(()=>m(),2e3))}))};return m(),()=>{h=!0,void 0!==a&&(console.log("close: ".concat(l)),a.close(),a=void 0)}}}}},e=>{e.O(0,[9607,3528,3081,3384,8441,5964,7358],()=>e(e.s=24776)),_N_E=e.O()}]);