(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2448:function(a,n,d){Promise.resolve().then(d.bind(d,4305))},4305:function(a,n,d){"use strict";d.r(n),d.d(n,{default:function(){return L}});var l,o,c=d(7437),e=d(2265),t=d(7185),A=d(4694),u=d(2064),i=d(2098),g=d(2808),b=d(2514),s=d(7833),m=d(3656),r=d(716),G=d(879),h=d(1159),B=d(200);let W=(0,B.l)("ChZzdGF0aXN0aWMvY29uZmlnLnByb3RvEhF5dWhhaWluLnN0YXRpc3RpYyKEAQoIbmV0X3R5cGUSNQoJY29ubl90eXBlGAEgASgOMhcueXVoYWlpbi5zdGF0aXN0aWMudHlwZVIJY29ubl90eXBlEkEKD3VuZGVybHlpbmdfdHlwZRgCIAEoDjIXLnl1aGFpaW4uc3RhdGlzdGljLnR5cGVSD3VuZGVybHlpbmdfdHlwZSK4AQoKY29ubmVjdGlvbhIMCgRhZGRyGAEgASgJEgoKAmlkGAIgASgEEikKBHR5cGUYAyABKAsyGy55dWhhaWluLnN0YXRpc3RpYy5uZXRfdHlwZRI3CgVleHRyYRgEIAMoCzIoLnl1aGFpaW4uc3RhdGlzdGljLmNvbm5lY3Rpb24uRXh0cmFFbnRyeRosCgpFeHRyYUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEqjwEKBHR5cGUSCwoHdW5rbm93bhAAEgcKA3RjcBABEggKBHRjcDQQAhIICgR0Y3A2EAMSBwoDdWRwEAQSCAoEdWRwNBAFEggKBHVkcDYQBhIGCgJpcBAHEgcKA2lwNBAIEgcKA2lwNhAJEggKBHVuaXgQChIMCgh1bml4Z3JhbRALEg4KCnVuaXhwYWNrZXQQDEIzWjFnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3Mvc3RhdGlzdGljYgZwcm90bzM");(l=o||(o={}))[l.unknown=0]="unknown",l[l.tcp=1]="tcp",l[l.tcp4=2]="tcp4",l[l.tcp6=3]="tcp6",l[l.udp=4]="udp",l[l.udp4=5]="udp4",l[l.udp6=6]="udp6",l[l.ip=7]="ip",l[l.ip4=8]="ip4",l[l.ip6=9]="ip6",l[l.unix=10]="unix",l[l.unixgram=11]="unixgram",l[l.unixpacket=12]="unixpacket";var v=d(9320),I=d(8516);let Y=(0,B.l)("ChtzdGF0aXN0aWMvZ3JwYy9jb25maWcucHJvdG8SIHl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlIi4KCnRvdGFsX2Zsb3cSEAoIZG93bmxvYWQYASABKAQSDgoGdXBsb2FkGAIgASgEIpcCCgtub3RpZnlfZGF0YRJCCgp0b3RhbF9mbG93GAMgASgLMiwueXVoYWlpbi5wcm90b3Muc3RhdGlzdGljLnNlcnZpY2UudG90YWxfZmxvd0gAEloKFm5vdGlmeV9uZXdfY29ubmVjdGlvbnMYASABKAsyOC55dWhhaWluLnByb3Rvcy5zdGF0aXN0aWMuc2VydmljZS5ub3RpZnlfbmV3X2Nvbm5lY3Rpb25zSAASYAoZbm90aWZ5X3JlbW92ZV9jb25uZWN0aW9ucxgCIAEoCzI7Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnNIAEIGCgRkYXRhIkwKFm5vdGlmeV9uZXdfY29ubmVjdGlvbnMSMgoLY29ubmVjdGlvbnMYASADKAsyHS55dWhhaWluLnN0YXRpc3RpYy5jb25uZWN0aW9uIigKGW5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnMSCwoDaWRzGAEgAygEMu0CCgtjb25uZWN0aW9ucxJZCgVjb25ucxIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRo4Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9uZXdfY29ubmVjdGlvbnMSYQoKY2xvc2VfY29ubhI7Lnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9yZW1vdmVfY29ubmVjdGlvbnMaFi5nb29nbGUucHJvdG9idWYuRW1wdHkSTQoFdG90YWwSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaLC55dWhhaWluLnByb3Rvcy5zdGF0aXN0aWMuc2VydmljZS50b3RhbF9mbG93ElEKBm5vdGlmeRIWLmdvb2dsZS5wcm90b2J1Zi5FbXB0eRotLnl1aGFpaW4ucHJvdG9zLnN0YXRpc3RpYy5zZXJ2aWNlLm5vdGlmeV9kYXRhMAFCO1o5Z2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL3N0YXRpc3RpYy9zZXJ2aWNlYgZwcm90bzM",[I.r,W]),C=(0,v.L)(Y,0),p=(0,v.L)(Y,1),Z=(0,v.L)(Y,3);var E=d(6878),R=d(8537),V=d(1617);let y=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+a)return"0B";let d=Math.floor(Math.log(a)/Math.log(1024)),l=parseFloat((a/Math.pow(1024,d)).toFixed(0>n?0:n)),o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"][d];return isNaN(l)||void 0===o?"":"".concat(l).concat(o)},w=(a,n)=>{let d=(a.download-(n.download!==BigInt(0)?n.download:a.download))/BigInt(2),l=(a.upload-(n.upload!==BigInt(0)?n.upload:a.upload))/BigInt(2);return{download:"(".concat(y(Number(a.download)),"): ").concat(y(Number(d)),"/S"),upload:"(".concat(y(Number(a.upload)),"): ").concat(y(Number(l)),"/S")}},S=e.memo(a=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(A.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:a.itemKey}),(0,c.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"Hash"!==a.itemKey?a.itemValue:(0,c.jsx)("a",{href:"#",onClick:n=>{n.preventDefault(),a.showModal(a.itemValue)},children:a.itemValue})})]})})})),N=e.memo(a=>{var n,d,l,t,s,m;let r=(0,e.useContext)(h.P),[B,W]=(0,e.useState)(!1);return(0,c.jsxs)(u.Z.Item,{eventKey:a.data.id.toString(),children:[(0,c.jsx)(u.Z.Header,{children:(0,c.jsxs)("div",{className:"d-line",children:[(0,c.jsx)("code",{className:"ms-2",children:a.data.id.toString()}),(0,c.jsx)("span",{className:"ms-2",children:a.data.addr}),(0,c.jsx)(i.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:a.data.extra.MODE}),(0,c.jsx)(i.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:o[null!==(t=null===(n=a.data.type)||void 0===n?void 0:n.connType)&&void 0!==t?t:0]}),void 0!==a.data.extra.Tag&&(0,c.jsx)(i.Z,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:a.data.extra.Tag})]})}),(0,c.jsx)(u.Z.Body,{children:(0,c.jsxs)(A.Z,{variant:"flush",children:[(0,c.jsx)(S,{itemKey:"Type",itemValue:o[null!==(s=null===(d=a.data.type)||void 0===d?void 0:d.connType)&&void 0!==s?s:0],showModal:a.showModal}),(0,c.jsx)(S,{itemKey:"Underlying",itemValue:o[null!==(m=null===(l=a.data.type)||void 0===l?void 0:l.underlyingType)&&void 0!==m?m:0],showModal:a.showModal}),Object.entries(a.data.extra).sort((a,n)=>a<=n?-1:1).map(n=>{let[d,l]=n;return(0,c.jsx)(S,{itemKey:d,itemValue:l,showModal:a.showModal},d)}),(0,c.jsx)(A.Z.Item,{children:(0,c.jsx)("div",{className:"d-sm-flex",children:(0,c.jsxs)(g.Z,{variant:"outline-danger",className:"flex-grow-1 notranslate",disabled:B,onClick:()=>{W(!0),(0,G.Uo)("/conn",{method:"DELETE",body:(0,E.O)(Z,(0,R.U)(Z,{ids:[a.data.id]}))}).then(async n=>{let{error:d}=n;d?(r.Error("code ".concat(a.data.id," failed, ").concat(d.code,"| ").concat(await d.msg)),W(!1)):setTimeout(()=>{W(!1)},5e3)})},children:["Close",B&&(0,c.jsxs)(c.Fragment,{children:["\xa0",(0,c.jsx)(b.Z,{size:"sm",animation:"border",variant:"danger"})]})]})})})]})})]},a.data.id)});var L=function(){let[a,n]=(0,e.useState)({show:!1,hash:""}),[d,l]=(0,e.useState)({download:BigInt(0),upload:BigInt(0)}),{data:o,error:i}=(0,V.ZP)("/flow/total",(0,G.OV)(C,a=>{let n=w(a,{download:d.download,upload:d.upload});return l({download:a.download,upload:a.upload}),n}),{refreshInterval:2e3}),{data:g,error:b}=(0,m.Z)("/conn",(0,G.o5)((0,E.O)(I.u,(0,R.U)(I.u)),p,(a,n)=>{switch(void 0===a&&(a=new Map),n.data.case){case"notifyNewConnections":n.data.value.connections.sort((a,n)=>a.id>n.id?1:-1).forEach(n=>{a.set(n.id,n)});break;case"notifyRemoveConnections":n.data.value.ids.forEach(n=>{a.delete(n)})}return a}));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.c,{show:a.show,hash:a.hash,editable:!1,onHide:()=>n({hash:"",show:!1})}),(0,c.jsx)(t.Z,{className:"mb-3",children:(0,c.jsxs)(A.Z,{variant:"flush",children:[(0,c.jsx)(A.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,c.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:o?o.download:void 0!==i?i.msg:"Loading..."})]})}),(0,c.jsx)(A.Z.Item,{children:(0,c.jsxs)("div",{className:"d-sm-flex",children:[(0,c.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,c.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:o?o.upload:void 0!==i?i.msg:"Loading..."})]})})]})}),void 0!==b?(0,c.jsx)(r.Z,{code:b.code,children:b.msg}):void 0===g?(0,c.jsx)(r.Z,{}):(0,c.jsx)(u.Z,{className:"mb-3",alwaysOpen:!0,id:"connections",children:[...g.values()].reverse().map(a=>(0,c.jsx)(N,{data:a,showModal:a=>n({show:!0,hash:a})},a.id))})]})}},629:function(a,n,d){"use strict";d.d(n,{Xm:function(){return A},hW:function(){return o},tQ:function(){return u}});var l,o,c=d(200),e=d(9320),t=d(8401);let A=(0,c.l)("ChZub2RlL3BvaW50L3BvaW50LnByb3RvEg15dWhhaWluLnBvaW50IogBCgVwb2ludBIMCgRoYXNoGAEgASgJEgwKBG5hbWUYAiABKAkSDQoFZ3JvdXAYAyABKAkSJQoGb3JpZ2luGAQgASgOMhUueXVoYWlpbi5wb2ludC5vcmlnaW4SLQoJcHJvdG9jb2xzGAUgAygLMhoueXVoYWlpbi5wcm90b2NvbC5wcm90b2NvbCotCgZvcmlnaW4SCwoHcmVzZXJ2ZRAAEgoKBnJlbW90ZRBlEgoKBm1hbnVhbBBmQjRaMmdpdGh1Yi5jb20vQXN1dG9ydWZhL3l1aGFpaW4vcGtnL3Byb3Rvcy9ub2RlL3BvaW50YgZwcm90bzM",[t.u0]),u=(0,e.L)(A,0);(l=o||(o={}))[l.reserve=0]="reserve",l[l.remote=101]="remote",l[l.manual=102]="manual"},8401:function(a,n,d){"use strict";d.d(n,{$e:function(){return m},A9:function(){return s},Ap:function(){return Y},Ii:function(){return A},Kn:function(){return u},Mw:function(){return G},NJ:function(){return Z},Q4:function(){return W},UM:function(){return r},Um:function(){return b},W0:function(){return I},cj:function(){return v},dN:function(){return y},jS:function(){return B},l1:function(){return p},n0:function(){return e},pJ:function(){return t},pj:function(){return C},qN:function(){return E},rg:function(){return g},s:function(){return V},u0:function(){return c},uH:function(){return i},y$:function(){return R},zW:function(){return h}});var l=d(200),o=d(9320);let c=(0,l.l)("Chxub2RlL3Byb3RvY29sL3Byb3RvY29sLnByb3RvEhB5dWhhaWluLnByb3RvY29sIvoHCghwcm90b2NvbBI0CgtzaGFkb3dzb2NrcxgBIAEoCzIdLnl1aGFpaW4ucHJvdG9jb2wuc2hhZG93c29ja3NIABI2CgxzaGFkb3dzb2Nrc3IYAiABKAsyHi55dWhhaWluLnByb3RvY29sLnNoYWRvd3NvY2tzckgAEigKBXZtZXNzGAMgASgLMhcueXVoYWlpbi5wcm90b2NvbC52bWVzc0gAEjAKCXdlYnNvY2tldBgEIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wud2Vic29ja2V0SAASJgoEcXVpYxgFIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wucXVpY0gAEjsKCW9iZnNfaHR0cBgGIAEoCzIbLnl1aGFpaW4ucHJvdG9jb2wub2Jmc19odHRwSABSCW9iZnNfaHR0cBIqCgZ0cm9qYW4YByABKAsyGC55dWhhaWluLnByb3RvY29sLnRyb2phbkgAEioKBnNpbXBsZRgIIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuc2ltcGxlSAASJgoEbm9uZRgJIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wubm9uZUgAEioKBnNvY2tzNRgKIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuc29ja3M1SAASJgoEaHR0cBgLIAEoCzIWLnl1aGFpaW4ucHJvdG9jb2wuaHR0cEgAEioKBmRpcmVjdBgMIAEoCzIYLnl1aGFpaW4ucHJvdG9jb2wuZGlyZWN0SAASKgoGcmVqZWN0GA0gASgLMhgueXVoYWlpbi5wcm90b2NvbC5yZWplY3RIABIwCgl5dXViaW5zeWEYDiABKAsyGy55dWhhaWluLnByb3RvY29sLnl1dWJpbnN5YUgAEiYKBGdycGMYDyABKAsyFi55dWhhaWluLnByb3RvY29sLmdycGNIABIoCgVodHRwMhgQIAEoCzIXLnl1aGFpaW4ucHJvdG9jb2wuaHR0cDJIABIsCgdyZWFsaXR5GBEgASgLMhkueXVoYWlpbi5wcm90b2NvbC5yZWFsaXR5SAASKwoDdGxzGBIgASgLMhwueXVoYWlpbi5wcm90b2NvbC50bHNfY29uZmlnSAASMAoJd2lyZWd1YXJkGBMgASgLMhsueXVoYWlpbi5wcm90b2NvbC53aXJlZ3VhcmRIABIkCgNtdXgYFCABKAsyFS55dWhhaWluLnByb3RvY29sLm11eEgAEiYKBGRyb3AYFSABKAsyFi55dWhhaWluLnByb3RvY29sLmRyb3BIABIoCgV2bGVzcxgWIAEoCzIXLnl1aGFpaW4ucHJvdG9jb2wudmxlc3NIAEIKCghwcm90b2NvbCI6CgZzb2NrczUSEAoIaG9zdG5hbWUYAyABKAkSDAoEdXNlchgBIAEoCRIQCghwYXNzd29yZBgCIAEoCSImCgRodHRwEgwKBHVzZXIYASABKAkSEAoIcGFzc3dvcmQYAiABKAkiLwoLc2hhZG93c29ja3MSDgoGbWV0aG9kGAEgASgJEhAKCHBhc3N3b3JkGAIgASgJIpUBCgxzaGFkb3dzb2Nrc3ISDgoGc2VydmVyGAEgASgJEgwKBHBvcnQYAiABKAkSDgoGbWV0aG9kGAMgASgJEhAKCHBhc3N3b3JkGAQgASgJEgwKBG9iZnMYBSABKAkSEQoJb2Jmc3BhcmFtGAYgASgJEhAKCHByb3RvY29sGAcgASgJEhIKCnByb3RvcGFyYW0YCCABKAkiHAoFaHR0cDISEwoLY29uY3VycmVuY3kYASABKAUiQgoFdm1lc3MSEAoEdXVpZBgBIAEoCVICaWQSFQoIYWx0ZXJfaWQYAiABKAlSA2FpZBIQCghzZWN1cml0eRgDIAEoCSIVCgV2bGVzcxIMCgR1dWlkGAEgASgJIigKBnRyb2phbhIQCghwYXNzd29yZBgBIAEoCRIMCgRwZWVyGAIgASgJIpwBCgl5dXViaW5zeWESEAoIcGFzc3dvcmQYASABKAkSIAoLdGNwX2VuY3J5cHQYBCABKAhSC3RjcF9lbmNyeXB0EiAKC3VkcF9lbmNyeXB0GAUgASgIUgt1ZHBfZW5jcnlwdBIoCg91ZHBfb3Zlcl9zdHJlYW0YAyABKAhSD3VkcF9vdmVyX3N0cmVhbUoECAIQA1IJZW5jcnlwdGVkIjoKCXdlYnNvY2tldBIMCgRob3N0GAEgASgJEgwKBHBhdGgYAiABKAlKBAgEEAVSC3Rsc19lbmFibGVkIjEKBGdycGMSKQoDdGxzGAEgASgLMhwueXVoYWlpbi5wcm90b2NvbC50bHNfY29uZmlnIj8KBHF1aWMSDAoEaG9zdBgCIAEoCRIpCgN0bHMYASABKAsyHC55dWhhaWluLnByb3RvY29sLnRsc19jb25maWcidgoHcmVhbGl0eRIgCgtzZXJ2ZXJfbmFtZRgBIAEoCVILc2VydmVyX25hbWUSHgoKcHVibGljX2tleRgCIAEoCVIKcHVibGljX2tleRIaCghzaG9ydF9pZBgDIAEoCVIIc2hvcnRfaWQSDQoFZGVidWcYBCABKAgiJwoJb2Jmc19odHRwEgwKBGhvc3QYASABKAkSDAoEcG9ydBgCIAEoCSIGCgRub25lIpgBCgZzaW1wbGUSDAoEaG9zdBgBIAEoCRIMCgRwb3J0GAIgASgFEj4KDmFsdGVybmF0ZV9ob3N0GAUgAygLMhYueXVoYWlpbi5wcm90b2NvbC5ob3N0Ug5hbHRlcm5hdGVfaG9zdEoECAQQBUoECAYQB0oECAMQBFIDdGxzUgd0aW1lb3V0UhJwYWNrZXRfY29ubl9kaXJlY3QizwEKCnRsc19jb25maWcSDgoGZW5hYmxlGAEgASgIEiEKDHNlcnZlcl9uYW1lcxgGIAMoCVILc2VydmVybmFtZXMSGAoHY2FfY2VydBgDIAMoDFIHY2FfY2VydBIyChRpbnNlY3VyZV9za2lwX3ZlcmlmeRgEIAEoCFIUaW5zZWN1cmVfc2tpcF92ZXJpZnkSIAoLbmV4dF9wcm90b3MYBSADKAlSC25leHRfcHJvdG9zEh4KCmVjaF9jb25maWcYByABKAxSCmVjaF9jb25maWciFwoGZGlyZWN0SgQIARACUgd0aW1lb3V0IggKBnJlamVjdCIGCgRkcm9wIiIKBGhvc3QSDAoEaG9zdBgBIAEoCRIMCgRwb3J0GAIgASgFIn4KFXdpcmVndWFyZF9wZWVyX2NvbmZpZxISCgpwdWJsaWNfa2V5GAEgASgJEhYKDnByZV9zaGFyZWRfa2V5GAIgASgJEhAKCGVuZHBvaW50GAMgASgJEhIKCmtlZXBfYWxpdmUYBCABKAUSEwoLYWxsb3dlZF9pcHMYBSADKAkingEKCXdpcmVndWFyZBISCgpzZWNyZXRfa2V5GAEgASgJEhAKCGVuZHBvaW50GAIgAygJEjYKBXBlZXJzGAMgAygLMicueXVoYWlpbi5wcm90b2NvbC53aXJlZ3VhcmRfcGVlcl9jb25maWcSCwoDbXR1GAQgASgFEhAKCHJlc2VydmVkGAYgASgMEhQKDGlkbGVfdGltZW91dBgHIAEoBSIaCgNtdXgSEwoLY29uY3VycmVuY3kYASABKAVCN1o1Z2l0aHViLmNvbS9Bc3V0b3J1ZmEveXVoYWlpbi9wa2cvcHJvdG9zL25vZGUvcHJvdG9jb2xiBnByb3RvMw"),e=(0,o.L)(c,0),t=(0,o.L)(c,1),A=(0,o.L)(c,2),u=(0,o.L)(c,3),i=(0,o.L)(c,4),g=(0,o.L)(c,5),b=(0,o.L)(c,6),s=(0,o.L)(c,7),m=(0,o.L)(c,8),r=(0,o.L)(c,9),G=(0,o.L)(c,10),h=(0,o.L)(c,11),B=(0,o.L)(c,12),W=(0,o.L)(c,13),v=(0,o.L)(c,14),I=(0,o.L)(c,15),Y=(0,o.L)(c,16),C=(0,o.L)(c,17),p=(0,o.L)(c,18),Z=(0,o.L)(c,20),E=(0,o.L)(c,21),R=(0,o.L)(c,22),V=(0,o.L)(c,23),y=(0,o.L)(c,24)}},function(a){a.O(0,[817,548,485,512,554,356,137,828,856,591,100,833,971,23,744],function(){return a(a.s=2448)}),_N_E=a.O()}]);