(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4001],{23641:(e,t,n)=>{"use strict";n.d(t,{DH:()=>o,G_:()=>h,Ow:()=>u,Oz:()=>s,VN:()=>p,X3:()=>c,_s:()=>j,dp:()=>m,h$:()=>g,kP:()=>l,mv:()=>x,oH:()=>a,r3:()=>r,u1:()=>i});let l="",s="https://clients3.google.com/generate_204",r="dns.nextdns.io:853",a=!0,o="http://ip.sb",i="stun.syncthing.net:3478",c="stun.nextcloud.com:443",d=()=>{let e=localStorage.getItem("api_url");l=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(s=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(r=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(a="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(o=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(i=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(c=e)},u=e=>{v("api_url",e)},m=e=>{v("latency_dns_url",e)},h=e=>{v("latency_http_url",e)},x=e=>{v("latency_ipv6",e.toString())},g=e=>{v("latency_ip_url",e)},j=e=>{v("latency_stun_url",e)},p=e=>{v("latency_stun_tcp_url",e)},v=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},26506:(e,t,n)=>{"use strict";n.d(t,{HU:()=>h,TH:()=>g,c5:()=>b,qM:()=>y,z3:()=>p});var l=n(95155),s=n(67167),r=n(12115),a=n(69056),o=n(5717),i=n(76355),c=n(19169),d=n(98508),u=n(70715),m=n(3384);let h=e=>{let{itemKey:t,itemValue:n,showModal:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:t}),(0,l.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:(0,l.jsx)(x,{itemKey:t,itemValue:n,showModal:s})})]})})})},x=e=>{let{itemKey:t,itemValue:n,showModal:s}=e;if("mode reason"===t){let e=JSON.parse(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,l.jsx)("div",{style:{flex:1,height:"1px",background:"black"}}),(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Rule Name"})}),(0,l.jsx)("div",{style:{flex:1,height:"1px",background:"black"}})]}),(0,l.jsx)("div",{className:"mt-2 mb-2",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o.A,{bg:"success",children:"Hit"})," List Name"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.A,{bg:"danger",children:"Miss"})," List Name"]})]})})]}),(0,l.jsx)("hr",{}),e.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,l.jsx)("div",{style:{flex:1,height:"1px",background:"black"}}),(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:e.rule_name})}),(0,l.jsx)("div",{style:{flex:1,height:"1px",background:"black"}})]}),(0,l.jsx)("div",{className:"mt-2 mb-2",children:e.history.map((e,t)=>(0,l.jsx)("div",{children:(0,l.jsxs)("div",{children:[e.matched?(0,l.jsx)(o.A,{bg:"success",children:"Hit"}):(0,l.jsx)(o.A,{bg:"danger",children:"Miss"})," ",e.list_name]})},"list-"+e.list_name+t))})]},"rule-"+e.rule_name+t))]})}return"hash"==t&&s?(0,l.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),s(n)},children:n}):(0,l.jsx)(l.Fragment,{children:n})},g=e=>{let{value:t,startContent:n,endContent:r,showModal:o}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(a.A,{variant:"flush",className:"w-100 p-2",children:[n,function(e){let t=(0,s.E4)(u.mR,e),n=(e,t)=>{if("enum"===e.fieldKind){let n=t.get(e);return e.enum.value[n].name}{let n=t.get(e);if(!n)return;return n.toString()}},r=e=>{let{f:t,ref:s}=e,r=n(t,s);if(r)return(0,l.jsx)(h,{itemKey:t.name.replaceAll("_"," "),itemValue:r,showModal:o})};return(0,l.jsx)(l.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let n=t.get(e);return n.fields.map(e=>(0,l.jsx)(r,{f:e,ref:n},e.name))}return(0,l.jsx)(r,{f:e,ref:t},e.name)})})}(t),r]})})},j={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:n,unit:l}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:j.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:j.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:j.GB}:e>=1048576?{bytes:e/1048576,unit:j.MB}:e>=1024?{bytes:e/1024,unit:j.KB}:{bytes:e,unit:j.B};return"".concat(n.toFixed(t)).concat(l)};class v{DownloadString(){let e=p(this.download),t=p(this.download_rate)+"/S";return"(".concat(e,"): ").concat(t)}UploadString(){let e=p(this.upload),t=p(this.upload_rate)+"/S";return"(".concat(e,"): ").concat(t)}constructor(e=0,t=0,n=0,l=0,s={}){this.download=e,this.download_rate=t,this.upload=n,this.upload_rate=l,this.counters=s,this.time=new Date}}let f=(e,t)=>{let n=(new Date().getTime()-t.time.getTime())/1e3,l=0,s=0;if((0!==t.download||0!==t.upload)&&0!==n){let r=Number(e.download),a=Number(e.upload);l=(r-t.download)/n,s=(a-t.upload)/n}return{download_rate:l,upload_rate:s}},y=()=>{let[e,t]=(0,r.useState)(new v(0,0,0,0,{}));return(0,c.Ay)((0,d.cY)(m.oQ.method.total),async()=>(0,d.kP)(m.oQ.method.total).then(async n=>{let{data:l,error:s}=n;if(s)throw s;if(l)try{let n=f(l,e),s=new v(Number(l.download),n.download_rate,Number(l.upload),n.upload_rate,l.counters);return t(s),s}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})},w=e=>{let{lastFlow:t,flow_error:n,end_content:s}=e;return(0,l.jsx)(i.A,{className:"mb-3",children:(0,l.jsxs)(a.A,{variant:"flush",children:[(0,l.jsx)(a.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:n?n.msg:t?t.DownloadString():"Loading..."})]})}),(0,l.jsx)(a.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:n?n.msg:t?t.UploadString():"Loading..."})]})}),s]})})},b=r.memo(e=>{let{onUpdate:t,end_content:n}=e,{data:s,error:a}=y();return(0,r.useEffect)(()=>{t&&s&&t(s.counters)},[t,s]),(0,l.jsx)(w,{lastFlow:s,flow_error:a,end_content:n})})},46781:(e,t,n)=>{Promise.resolve().then(n.bind(n,99544))},50700:e=>{e.exports={clickable:"clickable_clickable__ytaUf"}},74086:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,A:()=>a});var l=n(95155),s=n(91867);let r=e=>{let{statusCode:t,title:n,raw:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"fw-bold fs-3 text-center",children:[t," | ",(0,l.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:n})]}),s&&(0,l.jsx)("pre",{className:"text-center my-2 text-danger lead",children:s})]})},a=function(e){return(0,l.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,l.jsx)("div",{className:"p2",children:(0,l.jsx)(s.A,{})})]})}},98508:(e,t,n)=>{"use strict";n.d(t,{AD:()=>d,cY:()=>c,kP:()=>u,mp:()=>i,zZ:()=>m});var l=n(4965),s=n(77205),r=n(56398),a=n(19169),o=n(23641);function i(e,t){return(0,a.Ay)(c(e),d(e),t)}let c=e=>"/".concat(e.parent.typeName,"/").concat(e.name);function d(e,t,n){return()=>n?(0,l.o)(e.output,n):fetch("".concat(o.kP).concat(c(e)),{method:"POST",body:t?(0,s.R)(e.input,t):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,r.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function u(e,t){let n=await fetch("".concat(o.kP).concat(c(e)),{method:"POST",body:t?(0,s.R)(e.input,t):void 0});return n.ok?{data:(0,r.Er)(e.output,new Uint8Array(await n.arrayBuffer()))}:{error:{code:n.status,msg:await n.text()}}}function m(e,t,n){return(l,a)=>{let i,{next:d}=a,u=new URL(""!==o.kP?o.kP:window.location.toString());u.pathname=c(e),u.protocol="https:"===u.protocol?"wss:":"ws:";let m=!1,h=()=>{m||(console.log("connecting to: ".concat(u)),(i=new WebSocket(u)).binaryType="arraybuffer",i.addEventListener("open",n=>{console.log("connect to: ".concat(u,", event type: ").concat(n.type)),null==i||i.send((0,s.R)(e.input,t))}),i.addEventListener("message",t=>{let l=(0,r.Er)(e.output,new Uint8Array(t.data));d(null,e=>n(l,e))}),i.addEventListener("error",e=>{let t="websocket have some error";d({msg:t,code:500}),console.log(t,e.type)}),i.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code+", isClosed: ",m),d(null,void 0),m||(console.log("reconnect after 2 seconds"),setTimeout(()=>h(),2e3))}))};return h(),()=>{m=!0,void 0!==i&&(console.log("close: ".concat(l)),i.close(),i=void 0)}}}},99544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var l=n(95155),s=n(20960),r=n(99695),a=n(77849),o=n(12115),i=n(28468),c=n(69056),d=n(60902),u=n(91867),m=n(60926),h=n(50700),x=n.n(h),g=n(74086),j=n(98508),p=n(70715),v=n(3384),f=n(26506);let y=(0,s.v)(r.w,{seconds:BigInt(0),nanos:0}),w=function(){var e,t,n,r,h,w,b;let[_,N]=(0,o.useState)("Time"),[k,S]=(0,o.useState)(1),A=e=>e===_?S(-k):N(e),B=e=>e===_?(0,l.jsx)("i",{className:-1===k?"bi bi-sort-up-alt":"bi bi-sort-down-alt"}):(0,l.jsx)(l.Fragment,{});function P(e,t){return e>t?-1*k:+k}let F=e=>(0,l.jsxs)("th",{className:x().clickable,onClick:()=>A(e),children:[e,B(e)]}),[I,T]=(0,o.useState)({show:!1}),{data:C,error:E,isLoading:H,isValidating:L,mutate:U}=(0,j.mp)(v.oQ.method.all_history);return E?(0,l.jsx)(g.A,{code:E.code,children:E.msg}):H||void 0===C?(0,l.jsx)(g.A,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.A,{centered:!0,show:I.show,onHide:()=>T(e=>({...e,show:!1})),children:(0,l.jsx)(i.A.Body,{children:(0,l.jsx)(f.TH,{value:null!=(h=null==(e=I.data)?void 0:e.connection)?h:(0,s.v)(p.mR,{}),startContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.HU,{itemKey:"Count",itemValue:null!=(w=null==(t=I.data)?void 0:t.count.toString())?w:"1"}),(0,l.jsx)(f.HU,{itemKey:"Time",itemValue:(0,a.FP)(null!=(b=null==(n=I.data)?void 0:n.time)?b:y).toLocaleString()})]}),endContent:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.A.Item,{className:"d-sm-flex justify-content-center",children:(0,l.jsx)(d.A,{variant:"outline-primary",className:"flex-grow-1",onClick:()=>T(e=>({...e,show:!1})),children:"Close"})})})})})}),(0,l.jsxs)(d.A,{variant:"outline-primary",className:"mb-3",onClick:()=>U(),disabled:L||H,children:["Refresh ",(L||H)&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(u.A,{size:"sm",animation:"border"})]})]}),(0,l.jsxs)(m.A,{hover:!0,striped:!0,size:"sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[F("Time"),F("Host"),(0,l.jsx)("th",{children:"Mode"}),(0,l.jsx)("th",{children:"Net"}),F("Count"),C.dumpProcessEnabled&&F("Proc")]})}),(0,l.jsx)("tbody",{className:"text-break",children:null==C||null==(r=C.objects)?void 0:r.filter(e=>e.time).sort((e,t)=>{var n,l,s,r,o,i;return"Host"===_?P(null==(n=e.connection)?void 0:n.addr,null==(l=t.connection)?void 0:l.addr):"Proc"===_?P(null==(s=e.connection)?void 0:s.process,null==(r=t.connection)?void 0:r.process):"Count"===_?P(e.count,t.count):P((0,a.FP)(null!=(o=e.time)?o:y),(0,a.FP)(null!=(i=t.time)?i:y))}).map((e,t)=>{var n,s,r,o,i,c;return(0,l.jsxs)("tr",{onClick:()=>T({show:!0,data:e}),children:[(0,l.jsx)("td",{children:(0,a.FP)(e.time).toLocaleString()}),(0,l.jsx)("td",{children:null==(n=e.connection)?void 0:n.addr}),(0,l.jsx)("td",{children:null==(s=e.connection)?void 0:s.mode}),(0,l.jsx)("td",{children:p.NW[null!=(c=null==(o=e.connection)||null==(r=o.type)?void 0:r.connType)?c:p.NW.unknown]}),(0,l.jsx)("td",{children:Number(e.count)}),C.dumpProcessEnabled&&(0,l.jsx)("td",{children:null==(i=e.connection)?void 0:i.process})]},"bh-"+t)})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9607,3528,11,601,6077,4059,3384,8441,1684,7358],()=>t(46781)),_N_E=e.O()}]);