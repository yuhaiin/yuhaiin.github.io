(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4001],{23641:(e,t,n)=>{"use strict";n.d(t,{DH:()=>c,G_:()=>h,Ow:()=>u,Oz:()=>l,VN:()=>f,X3:()=>i,_s:()=>g,dp:()=>m,h$:()=>p,kP:()=>o,mv:()=>x,oH:()=>r,r3:()=>a,u1:()=>s});let o="",l="https://clients3.google.com/generate_204",a="dns.nextdns.io:853",r=!0,c="http://ip.sb",s="stun.syncthing.net:3478",i="stun.nextcloud.com:443",d=()=>{let e=localStorage.getItem("api_url");o=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(l=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(a=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(r="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(s=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{v("api_url",e)},m=e=>{v("latency_dns_url",e)},h=e=>{v("latency_http_url",e)},x=e=>{v("latency_ipv6",e.toString())},p=e=>{v("latency_ip_url",e)},g=e=>{v("latency_stun_url",e)},f=e=>{v("latency_stun_tcp_url",e)},v=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},26506:(e,t,n)=>{"use strict";n.d(t,{HU:()=>u,TH:()=>m,qM:()=>g,z3:()=>x});var o=n(95155),l=n(67167),a=n(12115),r=n(69056),c=n(19169),s=n(98508),i=n(70715),d=n(3384);let u=e=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.A.Item,{children:(0,o.jsxs)("div",{className:"d-sm-flex",children:[(0,o.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:e.itemKey}),(0,o.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"hash"===e.itemKey&&e.showModal?(0,o.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.showModal&&e.showModal(e.itemValue)},children:e.itemValue}):e.itemValue})]})})}),m=e=>{let{value:t,startContent:n,endContent:a,showModal:c}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(r.A,{variant:"flush",children:[n,function(e){let t=(0,l.E4)(i.mR,e),n=(e,t)=>{if("enum"===e.fieldKind){let n=t.get(e);return e.enum.value[n].name}{let n=t.get(e);if(!n)return;return n.toString()}},a=e=>{let{f:t,ref:l}=e,a=n(t,l);if(a)return(0,o.jsx)(u,{itemKey:t.name.replaceAll("_"," "),itemValue:a,showModal:c})};return(0,o.jsx)(o.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let n=t.get(e);return n.fields.map(e=>(0,o.jsx)(a,{f:e,ref:n},e.name))}return(0,o.jsx)(a,{f:e,ref:t},e.name)})})}(t),a]})})},h={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:n,unit:o}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:h.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:h.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:h.GB}:e>=1048576?{bytes:e/1048576,unit:h.MB}:e>=1024?{bytes:e/1024,unit:h.KB}:{bytes:e,unit:h.B};return"".concat(n.toFixed(t)).concat(o)},p=(e,t)=>{let n=(new Date().getTime()-t.time.getTime())/1e3;if(0===t.download&&0===t.upload||0===n)return{download_rate:"Loading...",upload_rate:"Loading..."};let o=Number(e.download),l=Number(e.upload);return{download_rate:"(".concat(x(o),"): ").concat(x((o-t.download)/n),"/S"),upload_rate:"(".concat(x(l),"): ").concat(x((l-t.upload)/n),"/S")}},g=()=>{let[e,t]=(0,a.useState)({download:0,upload:0,counters:{},time:new Date,download_rate:"Loading...",upload_rate:"Loading..."});return(0,c.Ay)((0,s.cY)(d.oQ.method.total),async()=>(0,s.kP)(d.oQ.method.total).then(async n=>{let{data:o,error:l}=n;if(l)throw l;if(o)try{let n=p(o,e);return t(e=>({...e,download:Number(o.download),upload:Number(o.upload),counters:o.counters,time:new Date,download_rate:n.download_rate,upload_rate:n.upload_rate})),{...e}}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})}},31803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(12115),l=n(70317);let a=(0,o.createContext)(l.A?window:void 0);function r(){return(0,o.useContext)(a)}a.Provider},46781:(e,t,n)=>{Promise.resolve().then(n.bind(n,99544))},50700:e=>{e.exports={clickable:"clickable_clickable__ytaUf"}},51703:(e,t,n)=>{"use strict";function o(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,{A:()=>o})},58724:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(12115),l=n(29300),a=n.n(l),r=n(95155);let c=e=>o.forwardRef((t,n)=>(0,r.jsx)("div",{...t,ref:n,className:a()(t.className,e)}))},60902:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var o=n(29300),l=n.n(o),a=n(12115),r=n(32960),c=n(97390),s=n(95155);let i=a.forwardRef((e,t)=>{let{as:n,bsPrefix:o,variant:a="primary",size:i,active:d=!1,disabled:u=!1,className:m,...h}=e,x=(0,c.oU)(o,"btn"),[p,{tagName:g}]=(0,r.Am)({tagName:n,disabled:u,...h});return(0,s.jsx)(g,{...p,...h,ref:t,disabled:u,className:l()(m,x,d&&"active",a&&"".concat(x,"-").concat(a),i&&"".concat(x,"-").concat(i),h.href&&u&&"disabled")})});i.displayName="Button";let d=i},60926:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var o=n(29300),l=n.n(o),a=n(12115),r=n(97390),c=n(95155);let s=a.forwardRef((e,t)=>{let{bsPrefix:n,className:o,striped:a,bordered:s,borderless:i,hover:d,size:u,variant:m,responsive:h,...x}=e,p=(0,r.oU)(n,"table"),g=l()(o,p,m&&"".concat(p,"-").concat(m),u&&"".concat(p,"-").concat(u),a&&"".concat(p,"-").concat("string"==typeof a?"striped-".concat(a):"striped"),s&&"".concat(p,"-bordered"),i&&"".concat(p,"-borderless"),d&&"".concat(p,"-hover")),f=(0,c.jsx)("table",{...x,className:g,ref:t});if(h){let e="".concat(p,"-responsive");return"string"==typeof h&&(e="".concat(e,"-").concat(h)),(0,c.jsx)("div",{className:e,children:f})}return f});s.displayName="Table";let i=s},74086:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,A:()=>r});var o=n(95155),l=n(91867);let a=e=>{let{statusCode:t,title:n,raw:l}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{className:"fw-bold fs-3 text-center",children:[t," | ",(0,o.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:n})]}),l&&(0,o.jsx)("pre",{className:"text-center my-2 text-danger lead",children:l})]})},r=function(e){return(0,o.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,o.jsx)("div",{className:"p2",children:(0,o.jsx)(l.A,{})})]})}},77849:(e,t,n)=>{"use strict";function o(e){var t;return new Date(1e3*Number((t=e).seconds)+Math.ceil(t.nanos/1e6))}n.d(t,{FP:()=>o})},98508:(e,t,n)=>{"use strict";n.d(t,{AD:()=>d,cY:()=>i,kP:()=>u,mp:()=>s,zZ:()=>m});var o=n(4965),l=n(77205),a=n(56398),r=n(19169),c=n(23641);function s(e,t){return(0,r.Ay)(i(e),d(e),t)}let i=e=>"/".concat(e.parent.typeName,"/").concat(e.name);function d(e,t,n){return()=>n?(0,o.o)(e.output,n):fetch("".concat(c.kP).concat(i(e)),{method:"POST",body:t?(0,l.R)(e.input,t):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,a.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function u(e,t){let n=await fetch("".concat(c.kP).concat(i(e)),{method:"POST",body:t?(0,l.R)(e.input,t):void 0});return n.ok?{data:(0,a.Er)(e.output,new Uint8Array(await n.arrayBuffer()))}:{error:{code:n.status,msg:await n.text()}}}function m(e,t,n){return(o,r)=>{let s,{next:d}=r,u=new URL(""!==c.kP?c.kP:window.location.toString());u.pathname=i(e),u.protocol="https:"===u.protocol?"wss:":"ws:";let m=!1,h=()=>{m||(console.log("connecting to: ".concat(u)),(s=new WebSocket(u)).binaryType="arraybuffer",s.addEventListener("open",n=>{console.log("connect to: ".concat(u,", event type: ").concat(n.type)),null==s||s.send((0,l.R)(e.input,t))}),s.addEventListener("message",t=>{let o=(0,a.Er)(e.output,new Uint8Array(t.data));d(null,e=>n(o,e))}),s.addEventListener("error",e=>{let t="websocket have some error";d({msg:t,code:500}),console.log(t,e.type)}),s.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code+", isClosed: ",m),d(null,void 0),m||(console.log("reconnect after 2 seconds"),setTimeout(()=>h(),2e3))}))};return h(),()=>{m=!0,void 0!==s&&(console.log("close: ".concat(o)),s.close(),s=void 0)}}}},99544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var o=n(95155),l=n(20960),a=n(99695),r=n(77849),c=n(12115),s=n(28468),i=n(69056),d=n(60902),u=n(91867),m=n(60926),h=n(50700),x=n.n(h),p=n(74086),g=n(98508),f=n(70715),v=n(3384),y=n(26506);let j=(0,l.v)(a.w,{seconds:BigInt(0),nanos:0}),w=function(){var e,t,n,a,h,w,b;let[_,N]=(0,c.useState)("Time"),[k,A]=(0,c.useState)(1),S=e=>e===_?A(-k):N(e),P=e=>e===_?(0,o.jsx)("i",{className:-1===k?"bi bi-sort-up-alt":"bi bi-sort-down-alt"}):(0,o.jsx)(o.Fragment,{});function B(e,t){return e>t?-1*k:+k}let C=e=>(0,o.jsxs)("th",{className:x().clickable,onClick:()=>S(e),children:[e,P(e)]}),[T,F]=(0,c.useState)({show:!1}),{data:I,error:E,isLoading:L,isValidating:H,mutate:K}=(0,g.mp)(v.oQ.method.all_history);return E?(0,o.jsx)(p.A,{code:E.code,children:E.msg}):L||void 0===I?(0,o.jsx)(p.A,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.A,{centered:!0,show:T.show,onHide:()=>F(e=>({...e,show:!1})),children:(0,o.jsx)(s.A.Body,{children:(0,o.jsx)(y.TH,{value:null!=(h=null==(e=T.data)?void 0:e.connection)?h:(0,l.v)(f.mR,{}),startContent:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.HU,{itemKey:"Count",itemValue:null!=(w=null==(t=T.data)?void 0:t.count.toString())?w:"1"}),(0,o.jsx)(y.HU,{itemKey:"Time",itemValue:(0,r.FP)(null!=(b=null==(n=T.data)?void 0:n.time)?b:j).toLocaleString()})]}),endContent:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(i.A.Item,{className:"d-sm-flex justify-content-center",children:(0,o.jsx)(d.A,{variant:"outline-primary",className:"flex-grow-1",onClick:()=>F(e=>({...e,show:!1})),children:"Close"})})})})})}),(0,o.jsxs)(d.A,{variant:"outline-primary",className:"mb-3",onClick:()=>K(),disabled:H||L,children:["Refresh ",(H||L)&&(0,o.jsxs)(o.Fragment,{children:["\xa0",(0,o.jsx)(u.A,{size:"sm",animation:"border"})]})]}),(0,o.jsxs)(m.A,{hover:!0,striped:!0,size:"sm",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[C("Time"),C("Host"),(0,o.jsx)("th",{children:"Mode"}),(0,o.jsx)("th",{children:"Net"}),C("Count"),I.dumpProcessEnabled&&C("Proc")]})}),(0,o.jsx)("tbody",{className:"text-break",children:null==I||null==(a=I.objects)?void 0:a.filter(e=>e.time).sort((e,t)=>{var n,o,l,a,c,s;return"Host"===_?B(null==(n=e.connection)?void 0:n.addr,null==(o=t.connection)?void 0:o.addr):"Proc"===_?B(null==(l=e.connection)?void 0:l.process,null==(a=t.connection)?void 0:a.process):"Count"===_?B(e.count,t.count):B((0,r.FP)(null!=(c=e.time)?c:j),(0,r.FP)(null!=(s=t.time)?s:j))}).map((e,t)=>{var n,l,a,c,s,i;return(0,o.jsxs)("tr",{onClick:()=>F({show:!0,data:e}),children:[(0,o.jsx)("td",{children:(0,r.FP)(e.time).toLocaleString()}),(0,o.jsx)("td",{children:null==(n=e.connection)?void 0:n.addr}),(0,o.jsx)("td",{children:null==(l=e.connection)?void 0:l.mode}),(0,o.jsx)("td",{children:f.NW[null!=(i=null==(c=e.connection)||null==(a=c.type)?void 0:a.connType)?i:f.NW.unknown]}),(0,o.jsx)("td",{children:Number(e.count)}),I.dumpProcessEnabled&&(0,o.jsx)("td",{children:null==(s=e.connection)?void 0:s.process})]},"bh-"+t)})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9607,6077,8865,601,2765,7581,3384,8441,1684,7358],()=>t(46781)),_N_E=e.O()}]);