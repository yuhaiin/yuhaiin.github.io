(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4001],{23641:(e,t,n)=>{"use strict";n.d(t,{DH:()=>s,G_:()=>h,Ow:()=>u,Oz:()=>o,VN:()=>j,X3:()=>i,_s:()=>g,dp:()=>m,h$:()=>p,kP:()=>l,mv:()=>x,oH:()=>r,r3:()=>a,u1:()=>c});let l="",o="https://clients3.google.com/generate_204",a="dns.nextdns.io:853",r=!0,s="http://ip.sb",c="stun.syncthing.net:3478",i="stun.nextcloud.com:443",d=()=>{let e=localStorage.getItem("api_url");l=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(o=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(a=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(r="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(s=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(i=e)},u=e=>{y("api_url",e)},m=e=>{y("latency_dns_url",e)},h=e=>{y("latency_http_url",e)},x=e=>{y("latency_ipv6",e.toString())},p=e=>{y("latency_ip_url",e)},g=e=>{y("latency_stun_url",e)},j=e=>{y("latency_stun_tcp_url",e)},y=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),d()};d()},26506:(e,t,n)=>{"use strict";n.d(t,{HU:()=>m,TH:()=>h,c5:()=>f,qM:()=>j,z3:()=>p});var l=n(95155),o=n(67167),a=n(12115),r=n(69056),s=n(76355),c=n(19169),i=n(98508),d=n(70715),u=n(3384);let m=e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:e.itemKey}),(0,l.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"hash"===e.itemKey&&e.showModal?(0,l.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.showModal&&e.showModal(e.itemValue)},children:e.itemValue}):e.itemValue})]})})}),h=e=>{let{value:t,startContent:n,endContent:a,showModal:s}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(r.A,{variant:"flush",className:"w-100 p-2",children:[n,function(e){let t=(0,o.E4)(d.mR,e),n=(e,t)=>{if("enum"===e.fieldKind){let n=t.get(e);return e.enum.value[n].name}{let n=t.get(e);if(!n)return;return n.toString()}},a=e=>{let{f:t,ref:o}=e,a=n(t,o);if(a)return(0,l.jsx)(m,{itemKey:t.name.replaceAll("_"," "),itemValue:a,showModal:s})};return(0,l.jsx)(l.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let n=t.get(e);return n.fields.map(e=>(0,l.jsx)(a,{f:e,ref:n},e.name))}return(0,l.jsx)(a,{f:e,ref:t},e.name)})})}(t),a]})})},x={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:n,unit:l}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:x.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:x.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:x.GB}:e>=1048576?{bytes:e/1048576,unit:x.MB}:e>=1024?{bytes:e/1024,unit:x.KB}:{bytes:e,unit:x.B};return"".concat(n.toFixed(t)).concat(l)},g=(e,t)=>{let n=Number(e.download),l=Number(e.upload),o=(new Date().getTime()-t.time.getTime())/1e3,a=p(n),r=p(l),s="Loading...",c="Loading...";return(0!==t.download||0!==t.upload)&&0!==o&&(s=p((n-t.download)/o)+"/S",c=p((l-t.upload)/o)+"/S"),{download_rate:"(".concat(a,"): ").concat(s),upload_rate:"(".concat(r,"): ").concat(c)}},j=()=>{let[e,t]=(0,a.useState)({download:0,upload:0,counters:{},time:new Date,download_rate:"Loading...",upload_rate:"Loading..."});return(0,c.Ay)((0,i.cY)(u.oQ.method.total),async()=>(0,i.kP)(u.oQ.method.total).then(async n=>{let{data:l,error:o}=n;if(o)throw o;if(l)try{let n=g(l,e);return t(e=>({...e,download:Number(l.download),upload:Number(l.upload),counters:l.counters,time:new Date,download_rate:n.download_rate,upload_rate:n.upload_rate})),{...e}}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})},y=e=>{let{lastFlow:t,flow_error:n,end_content:o}=e;return(0,l.jsx)(s.A,{className:"mb-3",children:(0,l.jsxs)(r.A,{variant:"flush",children:[(0,l.jsx)(r.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:n?n.msg:t?t.download_rate:"Loading..."})]})}),(0,l.jsx)(r.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:n?n.msg:t?t.upload_rate:"Loading..."})]})}),o]})})},f=a.memo(e=>{let{onUpdate:t,end_content:n}=e,{data:o,error:r}=j();return(0,a.useEffect)(()=>{t&&o&&t(o.counters)},[t,o]),(0,l.jsx)(y,{lastFlow:o,flow_error:r,end_content:n})})},46781:(e,t,n)=>{Promise.resolve().then(n.bind(n,99544))},50700:e=>{e.exports={clickable:"clickable_clickable__ytaUf"}},74086:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,A:()=>r});var l=n(95155),o=n(91867);let a=e=>{let{statusCode:t,title:n,raw:o}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:"fw-bold fs-3 text-center",children:[t," | ",(0,l.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:n})]}),o&&(0,l.jsx)("pre",{className:"text-center my-2 text-danger lead",children:o})]})},r=function(e){return(0,l.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,l.jsx)("div",{className:"p2",children:(0,l.jsx)(o.A,{})})]})}},98508:(e,t,n)=>{"use strict";n.d(t,{AD:()=>d,cY:()=>i,kP:()=>u,mp:()=>c,zZ:()=>m});var l=n(4965),o=n(77205),a=n(56398),r=n(19169),s=n(23641);function c(e,t){return(0,r.Ay)(i(e),d(e),t)}let i=e=>"/".concat(e.parent.typeName,"/").concat(e.name);function d(e,t,n){return()=>n?(0,l.o)(e.output,n):fetch("".concat(s.kP).concat(i(e)),{method:"POST",body:t?(0,o.R)(e.input,t):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,a.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function u(e,t){let n=await fetch("".concat(s.kP).concat(i(e)),{method:"POST",body:t?(0,o.R)(e.input,t):void 0});return n.ok?{data:(0,a.Er)(e.output,new Uint8Array(await n.arrayBuffer()))}:{error:{code:n.status,msg:await n.text()}}}function m(e,t,n){return(l,r)=>{let c,{next:d}=r,u=new URL(""!==s.kP?s.kP:window.location.toString());u.pathname=i(e),u.protocol="https:"===u.protocol?"wss:":"ws:";let m=!1,h=()=>{m||(console.log("connecting to: ".concat(u)),(c=new WebSocket(u)).binaryType="arraybuffer",c.addEventListener("open",n=>{console.log("connect to: ".concat(u,", event type: ").concat(n.type)),null==c||c.send((0,o.R)(e.input,t))}),c.addEventListener("message",t=>{let l=(0,a.Er)(e.output,new Uint8Array(t.data));d(null,e=>n(l,e))}),c.addEventListener("error",e=>{let t="websocket have some error";d({msg:t,code:500}),console.log(t,e.type)}),c.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code+", isClosed: ",m),d(null,void 0),m||(console.log("reconnect after 2 seconds"),setTimeout(()=>h(),2e3))}))};return h(),()=>{m=!0,void 0!==c&&(console.log("close: ".concat(l)),c.close(),c=void 0)}}}},99544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var l=n(95155),o=n(20960),a=n(99695),r=n(77849),s=n(12115),c=n(28468),i=n(69056),d=n(60902),u=n(91867),m=n(60926),h=n(50700),x=n.n(h),p=n(74086),g=n(98508),j=n(70715),y=n(3384),f=n(26506);let v=(0,o.v)(a.w,{seconds:BigInt(0),nanos:0}),w=function(){var e,t,n,a,h,w,_;let[b,N]=(0,s.useState)("Time"),[k,S]=(0,s.useState)(1),A=e=>e===b?S(-k):N(e),B=e=>e===b?(0,l.jsx)("i",{className:-1===k?"bi bi-sort-up-alt":"bi bi-sort-down-alt"}):(0,l.jsx)(l.Fragment,{});function P(e,t){return e>t?-1*k:+k}let F=e=>(0,l.jsxs)("th",{className:x().clickable,onClick:()=>A(e),children:[e,B(e)]}),[I,T]=(0,s.useState)({show:!1}),{data:C,error:E,isLoading:L,isValidating:H,mutate:K}=(0,g.mp)(y.oQ.method.all_history);return E?(0,l.jsx)(p.A,{code:E.code,children:E.msg}):L||void 0===C?(0,l.jsx)(p.A,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{centered:!0,show:I.show,onHide:()=>T(e=>({...e,show:!1})),children:(0,l.jsx)(c.A.Body,{children:(0,l.jsx)(f.TH,{value:null!=(h=null==(e=I.data)?void 0:e.connection)?h:(0,o.v)(j.mR,{}),startContent:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.HU,{itemKey:"Count",itemValue:null!=(w=null==(t=I.data)?void 0:t.count.toString())?w:"1"}),(0,l.jsx)(f.HU,{itemKey:"Time",itemValue:(0,r.FP)(null!=(_=null==(n=I.data)?void 0:n.time)?_:v).toLocaleString()})]}),endContent:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(i.A.Item,{className:"d-sm-flex justify-content-center",children:(0,l.jsx)(d.A,{variant:"outline-primary",className:"flex-grow-1",onClick:()=>T(e=>({...e,show:!1})),children:"Close"})})})})})}),(0,l.jsxs)(d.A,{variant:"outline-primary",className:"mb-3",onClick:()=>K(),disabled:H||L,children:["Refresh ",(H||L)&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(u.A,{size:"sm",animation:"border"})]})]}),(0,l.jsxs)(m.A,{hover:!0,striped:!0,size:"sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[F("Time"),F("Host"),(0,l.jsx)("th",{children:"Mode"}),(0,l.jsx)("th",{children:"Net"}),F("Count"),C.dumpProcessEnabled&&F("Proc")]})}),(0,l.jsx)("tbody",{className:"text-break",children:null==C||null==(a=C.objects)?void 0:a.filter(e=>e.time).sort((e,t)=>{var n,l,o,a,s,c;return"Host"===b?P(null==(n=e.connection)?void 0:n.addr,null==(l=t.connection)?void 0:l.addr):"Proc"===b?P(null==(o=e.connection)?void 0:o.process,null==(a=t.connection)?void 0:a.process):"Count"===b?P(e.count,t.count):P((0,r.FP)(null!=(s=e.time)?s:v),(0,r.FP)(null!=(c=t.time)?c:v))}).map((e,t)=>{var n,o,a,s,c,i;return(0,l.jsxs)("tr",{onClick:()=>T({show:!0,data:e}),children:[(0,l.jsx)("td",{children:(0,r.FP)(e.time).toLocaleString()}),(0,l.jsx)("td",{children:null==(n=e.connection)?void 0:n.addr}),(0,l.jsx)("td",{children:null==(o=e.connection)?void 0:o.mode}),(0,l.jsx)("td",{children:j.NW[null!=(i=null==(s=e.connection)||null==(a=s.type)?void 0:a.connType)?i:j.NW.unknown]}),(0,l.jsx)("td",{children:Number(e.count)}),C.dumpProcessEnabled&&(0,l.jsx)("td",{children:null==(c=e.connection)?void 0:c.process})]},"bh-"+t)})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9607,3528,11,601,6077,7199,3384,8441,1684,7358],()=>t(46781)),_N_E=e.O()}]);