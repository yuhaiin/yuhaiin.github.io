(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4001],{23641:(e,t,n)=>{"use strict";n.d(t,{DH:()=>s,G_:()=>x,Ow:()=>u,Oz:()=>r,VN:()=>v,X3:()=>d,_s:()=>p,dp:()=>m,h$:()=>f,kP:()=>a,mv:()=>h,oH:()=>o,r3:()=>l,u1:()=>c});let a="",r="https://clients3.google.com/generate_204",l="dns.nextdns.io:853",o=!0,s="http://ip.sb",c="stun.syncthing.net:3478",d="stun.nextcloud.com:443",i=()=>{let e=localStorage.getItem("api_url");a=null!==e?e:"",e=localStorage.getItem("remote_bypass"),null!==(e=localStorage.getItem("latency_http_url"))&&(r=e),null!==(e=localStorage.getItem("latency_dns_url"))&&(l=e),null!==(e=localStorage.getItem("latency_ipv6"))&&(o="true"===e),null!==(e=localStorage.getItem("latency_ip_url"))&&(s=e),null!==(e=localStorage.getItem("latency_stun_url"))&&(c=e),null!==(e=localStorage.getItem("latency_stun_tcp_url"))&&(d=e)},u=e=>{g("api_url",e)},m=e=>{g("latency_dns_url",e)},x=e=>{g("latency_http_url",e)},h=e=>{g("latency_ipv6",e.toString())},f=e=>{g("latency_ip_url",e)},p=e=>{g("latency_stun_url",e)},v=e=>{g("latency_stun_tcp_url",e)},g=(e,t)=>{""===t?localStorage.removeItem(e):localStorage.setItem(e,t),i()};i()},26506:(e,t,n)=>{"use strict";n.d(t,{HU:()=>m,TH:()=>x,c5:()=>y,qM:()=>v,z3:()=>f});var a=n(95155),r=n(67167),l=n(12115),o=n(69056),s=n(76355),c=n(19169),d=n(98508),i=n(70715),u=n(3384);let m=e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.A.Item,{children:(0,a.jsxs)("div",{className:"d-sm-flex",children:[(0,a.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:e.itemKey}),(0,a.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"hash"===e.itemKey&&e.showModal?(0,a.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.showModal&&e.showModal(e.itemValue)},children:e.itemValue}):e.itemValue})]})})}),x=e=>{let{value:t,startContent:n,endContent:l,showModal:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.A,{variant:"flush",className:"w-100 p-2",children:[n,function(e){let t=(0,r.E4)(i.mR,e),n=(e,t)=>{if("enum"===e.fieldKind){let n=t.get(e);return e.enum.value[n].name}{let n=t.get(e);if(!n)return;return n.toString()}},l=e=>{let{f:t,ref:r}=e,l=n(t,r);if(l)return(0,a.jsx)(m,{itemKey:t.name.replaceAll("_"," "),itemValue:l,showModal:s})};return(0,a.jsx)(a.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let n=t.get(e);return n.fields.map(e=>(0,a.jsx)(l,{f:e,ref:n},e.name))}return(0,a.jsx)(l,{f:e,ref:t},e.name)})})}(t),l]})})},h={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:n,unit:a}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:h.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:h.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:h.GB}:e>=1048576?{bytes:e/1048576,unit:h.MB}:e>=1024?{bytes:e/1024,unit:h.KB}:{bytes:e,unit:h.B};return"".concat(n.toFixed(t)).concat(a)},p=(e,t)=>{let n=Number(e.download),a=Number(e.upload),r=(new Date().getTime()-t.time.getTime())/1e3,l=f(n),o=f(a),s="Loading...",c="Loading...";return(0!==t.download||0!==t.upload)&&0!==r&&(s=f((n-t.download)/r)+"/S",c=f((a-t.upload)/r)+"/S"),{download_rate:"(".concat(l,"): ").concat(s),upload_rate:"(".concat(o,"): ").concat(c)}},v=()=>{let[e,t]=(0,l.useState)({download:0,upload:0,counters:{},time:new Date,download_rate:"Loading...",upload_rate:"Loading..."});return(0,c.Ay)((0,d.cY)(u.oQ.method.total),async()=>(0,d.kP)(u.oQ.method.total).then(async n=>{let{data:a,error:r}=n;if(r)throw r;if(a)try{let n=p(a,e);return t(e=>({...e,download:Number(a.download),upload:Number(a.upload),counters:a.counters,time:new Date,download_rate:n.download_rate,upload_rate:n.upload_rate})),{...e}}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})},g=e=>{let{lastFlow:t,flow_error:n,end_content:r}=e;return(0,a.jsx)(s.A,{className:"mb-3",children:(0,a.jsxs)(o.A,{variant:"flush",children:[(0,a.jsx)(o.A.Item,{children:(0,a.jsxs)("div",{className:"d-sm-flex",children:[(0,a.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,a.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:n?n.msg:t?t.download_rate:"Loading..."})]})}),(0,a.jsx)(o.A.Item,{children:(0,a.jsxs)("div",{className:"d-sm-flex",children:[(0,a.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,a.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:n?n.msg:t?t.upload_rate:"Loading..."})]})}),r]})})},y=l.memo(e=>{let{onUpdate:t,end_content:n}=e,{data:r,error:o}=v();return(0,l.useEffect)(()=>{t&&r&&t(r.counters)},[t,r]),(0,a.jsx)(g,{lastFlow:r,flow_error:o,end_content:n})})},31803:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(12115),r=n(70317);let l=(0,a.createContext)(r.A?window:void 0);function o(){return(0,a.useContext)(l)}l.Provider},46781:(e,t,n)=>{Promise.resolve().then(n.bind(n,99544))},50700:e=>{e.exports={clickable:"clickable_clickable__ytaUf"}},51703:(e,t,n)=>{"use strict";function a(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,{A:()=>a})},58724:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(12115),r=n(29300),l=n.n(r),o=n(95155);let s=e=>a.forwardRef((t,n)=>(0,o.jsx)("div",{...t,ref:n,className:l()(t.className,e)}))},60902:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(29300),r=n.n(a),l=n(12115),o=n(32960),s=n(97390),c=n(95155);let d=l.forwardRef((e,t)=>{let{as:n,bsPrefix:a,variant:l="primary",size:d,active:i=!1,disabled:u=!1,className:m,...x}=e,h=(0,s.oU)(a,"btn"),[f,{tagName:p}]=(0,o.Am)({tagName:n,disabled:u,...x});return(0,c.jsx)(p,{...f,...x,ref:t,disabled:u,className:r()(m,h,i&&"active",l&&"".concat(h,"-").concat(l),d&&"".concat(h,"-").concat(d),x.href&&u&&"disabled")})});d.displayName="Button";let i=d},60926:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(29300),r=n.n(a),l=n(12115),o=n(97390),s=n(95155);let c=l.forwardRef((e,t)=>{let{bsPrefix:n,className:a,striped:l,bordered:c,borderless:d,hover:i,size:u,variant:m,responsive:x,...h}=e,f=(0,o.oU)(n,"table"),p=r()(a,f,m&&"".concat(f,"-").concat(m),u&&"".concat(f,"-").concat(u),l&&"".concat(f,"-").concat("string"==typeof l?"striped-".concat(l):"striped"),c&&"".concat(f,"-bordered"),d&&"".concat(f,"-borderless"),i&&"".concat(f,"-hover")),v=(0,s.jsx)("table",{...h,className:p,ref:t});if(x){let e="".concat(f,"-responsive");return"string"==typeof x&&(e="".concat(e,"-").concat(x)),(0,s.jsx)("div",{className:e,children:v})}return v});c.displayName="Table";let d=c},74086:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,A:()=>o});var a=n(95155),r=n(91867);let l=e=>{let{statusCode:t,title:n,raw:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"fw-bold fs-3 text-center",children:[t," | ",(0,a.jsx)("a",{className:"text-reset text-decoration-none fs-6 fw-normal",children:n})]}),r&&(0,a.jsx)("pre",{className:"text-center my-2 text-danger lead",children:r})]})},o=function(e){return(0,a.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l,{statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,a.jsx)("div",{className:"p2",children:(0,a.jsx)(r.A,{})})]})}},76355:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var a=n(29300),r=n.n(a),l=n(12115),o=n(97390),s=n(95155);let c=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l="div",...c}=e;return a=(0,o.oU)(a,"card-body"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});c.displayName="CardBody";let d=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l="div",...c}=e;return a=(0,o.oU)(a,"card-footer"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});d.displayName="CardFooter";var i=n(18452);let u=l.forwardRef((e,t)=>{let{bsPrefix:n,className:a,as:c="div",...d}=e,u=(0,o.oU)(n,"card-header"),m=(0,l.useMemo)(()=>({cardHeaderBsPrefix:u}),[u]);return(0,s.jsx)(i.A.Provider,{value:m,children:(0,s.jsx)(c,{ref:t,...d,className:r()(a,u)})})});u.displayName="CardHeader";let m=l.forwardRef((e,t)=>{let{bsPrefix:n,className:a,variant:l,as:c="img",...d}=e,i=(0,o.oU)(n,"card-img");return(0,s.jsx)(c,{ref:t,className:r()(l?"".concat(i,"-").concat(l):i,a),...d})});m.displayName="CardImg";let x=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l="div",...c}=e;return a=(0,o.oU)(a,"card-img-overlay"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});x.displayName="CardImgOverlay";let h=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l="a",...c}=e;return a=(0,o.oU)(a,"card-link"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});h.displayName="CardLink";var f=n(58724);let p=(0,f.A)("h6"),v=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l=p,...c}=e;return a=(0,o.oU)(a,"card-subtitle"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});v.displayName="CardSubtitle";let g=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l="p",...c}=e;return a=(0,o.oU)(a,"card-text"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});g.displayName="CardText";let y=(0,f.A)("h5"),b=l.forwardRef((e,t)=>{let{className:n,bsPrefix:a,as:l=y,...c}=e;return a=(0,o.oU)(a,"card-title"),(0,s.jsx)(l,{ref:t,className:r()(n,a),...c})});b.displayName="CardTitle";let j=l.forwardRef((e,t)=>{let{bsPrefix:n,className:a,bg:l,text:d,border:i,body:u=!1,children:m,as:x="div",...h}=e,f=(0,o.oU)(n,"card");return(0,s.jsx)(x,{ref:t,...h,className:r()(a,f,l&&"bg-".concat(l),d&&"text-".concat(d),i&&"border-".concat(i)),children:u?(0,s.jsx)(c,{children:m}):m})});j.displayName="Card";let w=Object.assign(j,{Img:m,Title:b,Subtitle:v,Body:c,Link:h,Text:g,Header:u,Footer:d,ImgOverlay:x})},77849:(e,t,n)=>{"use strict";function a(e){var t;return new Date(1e3*Number((t=e).seconds)+Math.ceil(t.nanos/1e6))}n.d(t,{FP:()=>a})},98508:(e,t,n)=>{"use strict";n.d(t,{AD:()=>i,cY:()=>d,kP:()=>u,mp:()=>c,zZ:()=>m});var a=n(4965),r=n(77205),l=n(56398),o=n(19169),s=n(23641);function c(e,t){return(0,o.Ay)(d(e),i(e),t)}let d=e=>"/".concat(e.parent.typeName,"/").concat(e.name);function i(e,t,n){return()=>n?(0,a.o)(e.output,n):fetch("".concat(s.kP).concat(d(e)),{method:"POST",body:t?(0,r.R)(e.input,t):void 0}).then(async t=>{if(!t.ok)throw{code:t.status,msg:t.statusText,raw:t.text()};return(0,l.Er)(e.output,new Uint8Array(await t.arrayBuffer()))})}async function u(e,t){let n=await fetch("".concat(s.kP).concat(d(e)),{method:"POST",body:t?(0,r.R)(e.input,t):void 0});return n.ok?{data:(0,l.Er)(e.output,new Uint8Array(await n.arrayBuffer()))}:{error:{code:n.status,msg:await n.text()}}}function m(e,t,n){return(a,o)=>{let c,{next:i}=o,u=new URL(""!==s.kP?s.kP:window.location.toString());u.pathname=d(e),u.protocol="https:"===u.protocol?"wss:":"ws:";let m=!1,x=()=>{m||(console.log("connecting to: ".concat(u)),(c=new WebSocket(u)).binaryType="arraybuffer",c.addEventListener("open",n=>{console.log("connect to: ".concat(u,", event type: ").concat(n.type)),null==c||c.send((0,r.R)(e.input,t))}),c.addEventListener("message",t=>{let a=(0,l.Er)(e.output,new Uint8Array(t.data));i(null,e=>n(a,e))}),c.addEventListener("error",e=>{let t="websocket have some error";i({msg:t,code:500}),console.log(t,e.type)}),c.addEventListener("close",e=>{console.log("websocket closed, code: "+e.code+", isClosed: ",m),i(null,void 0),m||(console.log("reconnect after 2 seconds"),setTimeout(()=>x(),2e3))}))};return x(),()=>{m=!0,void 0!==c&&(console.log("close: ".concat(a)),c.close(),c=void 0)}}}},99544:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var a=n(95155),r=n(20960),l=n(99695),o=n(77849),s=n(12115),c=n(28468),d=n(69056),i=n(60902),u=n(91867),m=n(60926),x=n(50700),h=n.n(x),f=n(74086),p=n(98508),v=n(70715),g=n(3384),y=n(26506);let b=(0,r.v)(l.w,{seconds:BigInt(0),nanos:0}),j=function(){var e,t,n,l,x,j,w;let[N,_]=(0,s.useState)("Time"),[A,B]=(0,s.useState)(1),S=e=>e===N?B(-A):_(e),k=e=>e===N?(0,a.jsx)("i",{className:-1===A?"bi bi-sort-up-alt":"bi bi-sort-down-alt"}):(0,a.jsx)(a.Fragment,{});function C(e,t){return e>t?-1*A:+A}let R=e=>(0,a.jsxs)("th",{className:h().clickable,onClick:()=>S(e),children:[e,k(e)]}),[P,F]=(0,s.useState)({show:!1}),{data:U,error:L,isLoading:I,isValidating:T,mutate:E}=(0,p.mp)(g.oQ.method.all_history);return L?(0,a.jsx)(f.A,{code:L.code,children:L.msg}):I||void 0===U?(0,a.jsx)(f.A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{centered:!0,show:P.show,onHide:()=>F(e=>({...e,show:!1})),children:(0,a.jsx)(c.A.Body,{children:(0,a.jsx)(y.TH,{value:null!=(x=null==(e=P.data)?void 0:e.connection)?x:(0,r.v)(v.mR,{}),startContent:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.HU,{itemKey:"Count",itemValue:null!=(j=null==(t=P.data)?void 0:t.count.toString())?j:"1"}),(0,a.jsx)(y.HU,{itemKey:"Time",itemValue:(0,o.FP)(null!=(w=null==(n=P.data)?void 0:n.time)?w:b).toLocaleString()})]}),endContent:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.A.Item,{className:"d-sm-flex justify-content-center",children:(0,a.jsx)(i.A,{variant:"outline-primary",className:"flex-grow-1",onClick:()=>F(e=>({...e,show:!1})),children:"Close"})})})})})}),(0,a.jsxs)(i.A,{variant:"outline-primary",className:"mb-3",onClick:()=>E(),disabled:T||I,children:["Refresh ",(T||I)&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(u.A,{size:"sm",animation:"border"})]})]}),(0,a.jsxs)(m.A,{hover:!0,striped:!0,size:"sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[R("Time"),R("Host"),(0,a.jsx)("th",{children:"Mode"}),(0,a.jsx)("th",{children:"Net"}),R("Count"),U.dumpProcessEnabled&&R("Proc")]})}),(0,a.jsx)("tbody",{className:"text-break",children:null==U||null==(l=U.objects)?void 0:l.filter(e=>e.time).sort((e,t)=>{var n,a,r,l,s,c;return"Host"===N?C(null==(n=e.connection)?void 0:n.addr,null==(a=t.connection)?void 0:a.addr):"Proc"===N?C(null==(r=e.connection)?void 0:r.process,null==(l=t.connection)?void 0:l.process):"Count"===N?C(e.count,t.count):C((0,o.FP)(null!=(s=e.time)?s:b),(0,o.FP)(null!=(c=t.time)?c:b))}).map((e,t)=>{var n,r,l,s,c,d;return(0,a.jsxs)("tr",{onClick:()=>F({show:!0,data:e}),children:[(0,a.jsx)("td",{children:(0,o.FP)(e.time).toLocaleString()}),(0,a.jsx)("td",{children:null==(n=e.connection)?void 0:n.addr}),(0,a.jsx)("td",{children:null==(r=e.connection)?void 0:r.mode}),(0,a.jsx)("td",{children:v.NW[null!=(d=null==(s=e.connection)||null==(l=s.type)?void 0:l.connType)?d:v.NW.unknown]}),(0,a.jsx)("td",{children:Number(e.count)}),U.dumpProcessEnabled&&(0,a.jsx)("td",{children:null==(c=e.connection)?void 0:c.process})]},"bh-"+t)})})]})]})}},99695:(e,t,n)=>{"use strict";n.d(t,{i:()=>l,w:()=>o});var a=n(9152),r=n(78133);let l=(0,a.w)("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),o=(0,r.Z)(l,0)}},e=>{var t=t=>e(e.s=t);e.O(0,[9607,3528,11,601,2765,7581,3384,8441,1684,7358],()=>t(46781)),_N_E=e.O()}]);