(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5619],{26506:(e,a,t)=>{"use strict";t.d(a,{HU:()=>m,TH:()=>h,c5:()=>g,qM:()=>w,z3:()=>p});var l=t(95155),s=t(67167),n=t(12115),o=t(69056),d=t(76355),r=t(19169),i=t(98508),c=t(70715),u=t(3384);let m=e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:e.itemKey}),(0,l.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"hash"===e.itemKey&&e.showModal?(0,l.jsx)("a",{href:"#",onClick:a=>{a.preventDefault(),e.showModal&&e.showModal(e.itemValue)},children:e.itemValue}):e.itemValue})]})})}),h=e=>{let{value:a,startContent:t,endContent:n,showModal:d}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A,{variant:"flush",className:"w-100 p-2",children:[t,function(e){let a=(0,s.E4)(c.mR,e),t=(e,a)=>{if("enum"===e.fieldKind){let t=a.get(e);return e.enum.value[t].name}{let t=a.get(e);if(!t)return;return t.toString()}},n=e=>{let{f:a,ref:s}=e,n=t(a,s);if(n)return(0,l.jsx)(m,{itemKey:a.name.replaceAll("_"," "),itemValue:n,showModal:d})};return(0,l.jsx)(l.Fragment,{children:a.fields.map(e=>{if("message"===e.fieldKind){let t=a.get(e);return t.fields.map(e=>(0,l.jsx)(n,{f:e,ref:t},e.name))}return(0,l.jsx)(n,{f:e,ref:a},e.name)})})}(a),n]})})},x={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:t,unit:l}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:x.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:x.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:x.GB}:e>=1048576?{bytes:e/1048576,unit:x.MB}:e>=1024?{bytes:e/1024,unit:x.KB}:{bytes:e,unit:x.B};return"".concat(t.toFixed(a)).concat(l)},j=(e,a)=>{let t=Number(e.download),l=Number(e.upload),s=(new Date().getTime()-a.time.getTime())/1e3,n=p(t),o=p(l),d="Loading...",r="Loading...";return(0!==a.download||0!==a.upload)&&0!==s&&(d=p((t-a.download)/s)+"/S",r=p((l-a.upload)/s)+"/S"),{download_rate:"(".concat(n,"): ").concat(d),upload_rate:"(".concat(o,"): ").concat(r)}},w=()=>{let[e,a]=(0,n.useState)({download:0,upload:0,counters:{},time:new Date,download_rate:"Loading...",upload_rate:"Loading..."});return(0,r.Ay)((0,i.cY)(u.oQ.method.total),async()=>(0,i.kP)(u.oQ.method.total).then(async t=>{let{data:l,error:s}=t;if(s)throw s;if(l)try{let t=j(l,e);return a(e=>({...e,download:Number(l.download),upload:Number(l.upload),counters:l.counters,time:new Date,download_rate:t.download_rate,upload_rate:t.upload_rate})),{...e}}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})},f=e=>{let{lastFlow:a,flow_error:t,end_content:s}=e;return(0,l.jsx)(d.A,{className:"mb-3",children:(0,l.jsxs)(o.A,{variant:"flush",children:[(0,l.jsx)(o.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:t?t.msg:a?a.download_rate:"Loading..."})]})}),(0,l.jsx)(o.A.Item,{children:(0,l.jsxs)("div",{className:"d-sm-flex",children:[(0,l.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,l.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:t?t.msg:a?a.upload_rate:"Loading..."})]})}),s]})})},g=n.memo(e=>{let{onUpdate:a,end_content:t}=e,{data:s,error:o}=w();return(0,n.useEffect)(()=>{a&&s&&a(s.counters)},[a,s]),(0,l.jsx)(f,{lastFlow:s,flow_error:o,end_content:t})})},84771:(e,a,t)=>{Promise.resolve().then(t.bind(t,96576))},96576:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>C});var l=t(95155),s=t(74086),n=t(98508),o=t(66835),d=t(26506),r=t(87494),i=t(70715),c=t(3384),u=t(20960),m=t(71464),h=t(12115),x=t(76355),p=t(69056),j=t(5717),w=t(12815),f=t(60902),g=t(91867),v=t(40840),N=t(29940);let y=(e,a)=>{let t;switch(t=void 0===a?{}:{...a},e.data.case){case"notifyNewConnections":e.data.value.connections.sort((e,a)=>e.id>a.id?1:-1).forEach(e=>{t[e.id.toString()]=e});break;case"notifyRemoveConnections":e.data.value.ids.forEach(e=>{delete t[e.toString()]})}return t},b=h.memo(e=>{let{conns:a,counters:t,conn_error:n,setInfo:o,sortFields:d,sortOrder:r}=e,i=(0,h.useMemo)(()=>Object.values(null!=a?a:{}).sort((e,a)=>{let l=1,s=-1;if("asc"===r&&(l=-1,s=1),d){var n,o,i,c,u,m,h,x;switch(d){case"download":return(null!=(i=null==(n=t[e.id.toString()])?void 0:n.download)?i:0)<(null!=(c=null==(o=t[a.id.toString()])?void 0:o.download)?c:0)?l:s;case"upload":return(null!=(h=null==(u=t[e.id.toString()])?void 0:u.upload)?h:0)<(null!=(x=null==(m=t[a.id.toString()])?void 0:m.upload)?x:0)?l:s;case"name":return e.addr<a.addr?l:s}}return e.id<a.id?l:s}),[a,d,t,r]);return void 0!==n?(0,l.jsx)(s.A,{code:n.code,children:n.msg}):void 0===a?(0,l.jsx)(s.A,{}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x.A,{children:(0,l.jsx)(p.A,{variant:"flush",style:{borderBottom:"none"},children:i.map(e=>{var a,s,n,d;return(0,l.jsx)(A,{data:e,download:Number(null!=(n=null==(a=t[e.id.toString()])?void 0:a.download)?n:0),upload:Number(null!=(d=null==(s=t[e.id.toString()])?void 0:s.upload)?d:0),onClick:()=>o({info:e,show:!0})},e.id)})})})})}),A=h.memo(e=>{let{data:a,download:t,upload:s,onClick:n}=e;return(0,l.jsxs)(p.A.Item,{className:"d-flex justify-content-between align-items-start py-3 flex-wrap",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},action:!0,onClick:n,children:[(0,l.jsxs)("div",{className:"text-break",children:[(0,l.jsx)("code",{children:a.id.toString()}),(0,l.jsx)("span",{className:"ms-2",children:a.addr})]}),(0,l.jsxs)("div",{className:"fs-9",children:[(0,l.jsx)(S,{download:t,upload:s}),(0,l.jsx)(()=>(0,l.jsx)(j.A,{bg:"primary",pill:!0,className:"ms-1 text-uppercase",children:N.Mq[a.mode]}),{}),(0,l.jsx)(()=>{var e,t;return(0,l.jsx)(j.A,{bg:"primary",pill:!0,className:"ms-1 text-uppercase",children:i.NW[null!=(t=null==(e=a.type)?void 0:e.connType)?t:0]})},{}),(0,l.jsx)(()=>a.tag?(0,l.jsx)(j.A,{bg:"primary",pill:!0,className:"ms-1 text-uppercase",children:a.tag}):(0,l.jsx)(l.Fragment,{}),{})]})]})}),S=h.memo(e=>{let{download:a,upload:t}=e;return(0,l.jsxs)(j.A,{bg:"primary",pill:!0,children:[(0,d.z3)(a)," / ",(0,d.z3)(t)]})}),B=h.memo(e=>{let{data:a,show:t,onClose:s,showModal:r}=e,i=(0,h.useContext)(o.u),[m,x]=(0,h.useState)(!1);return(0,l.jsx)(w.A,{className:"w-75",show:t,onHide:s,placement:"end",scroll:!0,renderStaticNode:!0,children:(0,l.jsx)(w.A.Body,{children:(0,l.jsx)(d.TH,{value:a,showModal:r,endContent:(0,l.jsx)(p.A.Item,{children:(0,l.jsx)("div",{className:"d-flex",children:(0,l.jsxs)(f.A,{variant:"outline-danger",className:"flex-grow-1 notranslate",disabled:m,onClick:()=>{x(!0),(0,n.kP)(c.oQ.method.close_conn,(0,u.v)(c.SE,{ids:[a.id]})).then(async e=>{let{error:t}=e;t?(i.Error("code ".concat(a.id," failed, ").concat(t.code,"| ").concat(t.msg)),x(!1)):setTimeout(()=>{x(!1)},5e3)})},children:["Close",m&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(g.A,{size:"sm",animation:"border",variant:"danger"})]})]})})})})})})}),C=function(){let[e,a]=(0,h.useState)({show:!1,hash:""}),[t,s]=(0,h.useState)({}),[o,x]=(0,h.useState)({info:(0,u.v)(i.mR,{}),show:!1}),p=(0,h.useCallback)(()=>{x(e=>({...e,show:!1}))},[]),j=(0,h.useCallback)(e=>{a({show:!0,hash:e})},[]),w=(0,h.useCallback)(()=>{a(e=>({...e,show:!1}))},[]),{data:f,error:g}=(0,v.A)((0,n.cY)(c.oQ.method.notify),(0,n.zZ)(c.oQ.method.notify,(0,u.v)(m.v,{}),y),{}),N=(0,h.useCallback)(e=>{s(e)},[]),[A,S]=(0,h.useState)(""),C=(0,h.useCallback)(e=>{S(e.target.value)},[S]),[_,k]=(0,h.useState)("desc"),M=(0,h.useCallback)(e=>{k(e.target.value)},[k]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.c5,{onUpdate:N}),(0,l.jsx)(r.y,{show:e.show,hash:e.hash,editable:!1,onHide:w}),(0,l.jsx)(B,{data:o.info,show:o.show,onClose:p,showModal:j}),(0,l.jsx)("div",{className:"d-flex",children:(0,l.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3 ms-auto flex-wrap",children:[(0,l.jsxs)("span",{className:"d-flex align-items-center gap-2",children:["Sort Order",(0,l.jsxs)("select",{className:"form-select",value:_,onChange:M,style:{width:150},children:[(0,l.jsx)("option",{value:"asc",children:"Asc"}),(0,l.jsx)("option",{value:"desc",children:"Desc"})]})]}),(0,l.jsxs)("span",{className:"d-flex align-items-center gap-2",children:["Sort By",(0,l.jsxs)("select",{className:"form-select",value:A,onChange:C,style:{width:150},children:[(0,l.jsx)("option",{value:"",children:"Id"}),(0,l.jsx)("option",{value:"name",children:"Name"}),(0,l.jsx)("option",{value:"download",children:"Download"}),(0,l.jsx)("option",{value:"upload",children:"Upload"})]})]})]})}),(0,l.jsx)(b,{conns:f,counters:t,setInfo:x,conn_error:g,sortFields:A,sortOrder:_})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[3528,11,601,3779,5453,1085,6077,5225,9873,3959,6160,5309,626,7494,3384,8441,1684,7358],()=>a(84771)),_N_E=e.O()}]);