(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8706],{5717:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(29300),r=a.n(n),s=a(12115),o=a(97390),l=a(95155);let d=s.forwardRef((e,t)=>{let{bsPrefix:a,bg:n="primary",pill:s=!1,text:d,className:i,as:c="span",...u}=e,m=(0,o.oU)(a,"badge");return(0,l.jsx)(c,{ref:t,...u,className:r()(i,m,s&&"rounded-pill",d&&"text-".concat(d),n&&"bg-".concat(n))})});d.displayName="Badge";let i=d},18438:(e,t,a)=>{Promise.resolve().then(a.bind(a,23779))},23779:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var n=a(95155),r=a(20960),s=a(71464),o=a(12115),l=a(76355),d=a(69056),i=a(65677),c=a(5717),u=a(60902),m=a(91867),h=a(19169),x=a(45567),f=a(68974);let p=new WeakMap,v=(0,f.Ht)(h.Ay,e=>(t,a,n)=>{let[r,s]=(0,x.s)(t),o=r?"$sub$"+r:void 0,l=e(o,null,n),{cache:d}=n;p.has(d)||p.set(d,[new Map,new Map]);let[i,c]=p.get(d);return(0,x.u)(()=>{if(!o)return;let[,e]=(0,x.z)(d,o),t=i.get(o)||0;if(i.set(o,t+1),!t){let t=a(s,{next:(t,a)=>{null!=t?e({error:t}):(e({error:void 0}),l.mutate(a,!1))}});if("function"!=typeof t)throw Error("The `subscribe` function must return a function to unsubscribe.");c.set(o,t)}return()=>{let e=i.get(o)-1;if(i.set(o,e),!e){let e=c.get(o);null==e||e()}}},[o]),{get data(){return l.data},get error(){return l.error}}});var j=a(74086),y=a(98508),g=a(66835),w=a(4415),N=a(29940),b=a(70715),A=a(3384),B=a(26506);let C=e=>{var t,a;let{data:s,counter:l,showModal:h}=e,x=(0,o.useContext)(g.u),[f,p]=(0,o.useState)(!1);return(0,n.jsxs)(i.A.Item,{eventKey:s.id.toString(),children:[(0,n.jsx)(i.A.Header,{children:(0,n.jsxs)("div",{className:"d-line text-break",children:[(0,n.jsx)("code",{className:"ms-2",children:s.id.toString()}),(0,n.jsx)("span",{className:"ms-2",children:s.addr}),(0,n.jsxs)(c.A,{className:"bg-light rounded-pill text-dark ms-1",children:[(0,B.z3)(Number(l&&l.download?l.download:0))," / ",(0,B.z3)(Number(l&&l.upload?l.upload:0))]}),(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:N.Mq[s.mode]}),(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:b.NW[null!=(a=null==(t=s.type)?void 0:t.connType)?a:0]}),s.tag&&(0,n.jsx)(c.A,{className:"bg-light rounded-pill text-dark ms-1 text-uppercase",children:s.tag})]})}),(0,n.jsx)(i.A.Body,{children:(0,n.jsx)(B.TH,{value:s,showModal:h,endContent:(0,n.jsx)(d.A.Item,{children:(0,n.jsx)("div",{className:"d-sm-flex",children:(0,n.jsxs)(u.A,{variant:"outline-danger",className:"flex-grow-1 notranslate",disabled:f,onClick:()=>{p(!0),(0,y.kP)(A.oQ.method.close_conn,(0,r.v)(A.SE,{ids:[s.id]})).then(async e=>{let{error:t}=e;t?(x.Error("code ".concat(s.id," failed, ").concat(t.code,"| ").concat(t.msg)),p(!1)):setTimeout(()=>{p(!1)},5e3)})},children:["Close",f&&(0,n.jsxs)(n.Fragment,{children:["\xa0",(0,n.jsx)(m.A,{size:"sm",animation:"border",variant:"danger"})]})]})})})})})]},s.id)},k=function(){let[e,t]=(0,o.useState)({show:!1,hash:""}),{data:a,error:c}=(0,B.qM)(),{data:u,error:m}=v((0,y.cY)(A.oQ.method.notify),(0,y.zZ)(A.oQ.method.notify,(0,r.v)(s.v,{}),(e,t)=>{switch(void 0===t&&(t=new Map),e.data.case){case"notifyNewConnections":e.data.value.connections.sort((e,t)=>e.id>t.id?1:-1).forEach(e=>{t.set(e.id,e)});break;case"notifyRemoveConnections":e.data.value.ids.forEach(e=>{t.delete(e)})}return t}),{});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.y,{show:e.show,hash:e.hash,editable:!1,onHide:()=>t({...e,show:!1})}),(0,n.jsx)(l.A,{className:"mb-3",children:(0,n.jsxs)(d.A,{variant:"flush",children:[(0,n.jsx)(d.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Download"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-download",children:c?c.msg:a.download_rate})]})}),(0,n.jsx)(d.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate",children:"Upload"}),(0,n.jsx)("div",{className:"notranslate",style:{opacity:.6},id:"statistic-upload",children:c?c.msg:a.upload_rate})]})})]})}),void 0!==m?(0,n.jsx)(j.A,{code:m.code,children:m.msg}):void 0===u?(0,n.jsx)(j.A,{}):(0,n.jsx)(i.A,{className:"mb-3",alwaysOpen:!0,id:"connections",children:[...u.values()].reverse().map(e=>(0,n.jsx)(C,{data:e,counter:a.counters[e.id.toString()],showModal:e=>t({show:!0,hash:e})},e.id))})]})}},26506:(e,t,a)=>{"use strict";a.d(t,{HU:()=>u,TH:()=>m,qM:()=>p,z3:()=>x});var n=a(95155),r=a(67167),s=a(12115),o=a(69056),l=a(19169),d=a(98508),i=a(70715),c=a(3384);let u=e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.A.Item,{children:(0,n.jsxs)("div",{className:"d-sm-flex",children:[(0,n.jsx)("div",{className:"endpoint-name flex-grow-1 notranslate text-capitalize",children:e.itemKey}),(0,n.jsx)("div",{className:"notranslate text-break",style:{opacity:.6},children:"hash"===e.itemKey&&e.showModal?(0,n.jsx)("a",{href:"#",onClick:t=>{t.preventDefault(),e.showModal&&e.showModal(e.itemValue)},children:e.itemValue}):e.itemValue})]})})}),m=e=>{let{value:t,startContent:a,endContent:s,showModal:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.A,{variant:"flush",children:[a,function(e){let t=(0,r.E4)(i.mR,e),a=(e,t)=>{if("enum"===e.fieldKind){let a=t.get(e);return e.enum.value[a].name}{let a=t.get(e);if(!a)return;return a.toString()}},s=e=>{let{f:t,ref:r}=e,s=a(t,r);if(s)return(0,n.jsx)(u,{itemKey:t.name.replaceAll("_"," "),itemValue:s,showModal:l})};return(0,n.jsx)(n.Fragment,{children:t.fields.map(e=>{if("message"===e.fieldKind){let a=t.get(e);return a.fields.map(e=>(0,n.jsx)(s,{f:e,ref:a},e.name))}return(0,n.jsx)(s,{f:e,ref:t},e.name)})})}(t),s]})})},h={B:"B",KB:"KB",MB:"MB",GB:"GB",TB:"TB",PB:"PB"},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,{bytes:a,unit:n}=e>=0x4000000000000?{bytes:e/0x4000000000000,unit:h.PB}:e>=0x10000000000?{bytes:e/0x10000000000,unit:h.TB}:e>=0x40000000?{bytes:e/0x40000000,unit:h.GB}:e>=1048576?{bytes:e/1048576,unit:h.MB}:e>=1024?{bytes:e/1024,unit:h.KB}:{bytes:e,unit:h.B};return"".concat(a.toFixed(t)).concat(n)},f=(e,t)=>{let a=Number(e.download),n=Number(e.upload),r=(new Date().getTime()-t.time.getTime())/1e3,s=x(a),o=x(n),l="Loading...",d="Loading...";return(0!==t.download||0!==t.upload)&&0!==r&&(l=x((a-t.download)/r)+"/S",d=x((n-t.upload)/r)+"/S"),{download_rate:"(".concat(s,"): ").concat(l),upload_rate:"(".concat(o,"): ").concat(d)}},p=()=>{let[e,t]=(0,s.useState)({download:0,upload:0,counters:{},time:new Date,download_rate:"Loading...",upload_rate:"Loading..."});return(0,l.Ay)((0,d.cY)(c.oQ.method.total),async()=>(0,d.kP)(c.oQ.method.total).then(async a=>{let{data:n,error:r}=a;if(r)throw r;if(n)try{let a=f(n,e);return t(e=>({...e,download:Number(n.download),upload:Number(n.upload),counters:n.counters,time:new Date,download_rate:a.download_rate,upload_rate:a.upload_rate})),{...e}}catch(e){throw{msg:e.toString(),code:500}}}),{refreshInterval:2e3})}},65677:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var n=a(29300),r=a.n(n),s=a(12115),o=a(91497),l=a(97390),d=a(48873);function i(e,t){return Array.isArray(e)?e.includes(t):e===t}let c=s.createContext({});c.displayName="AccordionContext";var u=a(95155);let m=s.forwardRef((e,t)=>{let{as:a="div",bsPrefix:n,className:o,children:m,eventKey:h,...x}=e,{activeEventKey:f}=(0,s.useContext)(c);return n=(0,l.oU)(n,"accordion-collapse"),(0,u.jsx)(d.A,{ref:t,in:i(f,h),...x,className:r()(o,n),children:(0,u.jsx)(a,{children:s.Children.only(m)})})});m.displayName="AccordionCollapse";let h=s.createContext({eventKey:""});h.displayName="AccordionItemContext";let x=s.forwardRef((e,t)=>{let{as:a="div",bsPrefix:n,className:o,onEnter:d,onEntering:i,onEntered:c,onExit:x,onExiting:f,onExited:p,...v}=e;n=(0,l.oU)(n,"accordion-body");let{eventKey:j}=(0,s.useContext)(h);return(0,u.jsx)(m,{eventKey:j,onEnter:d,onEntering:i,onEntered:c,onExit:x,onExiting:f,onExited:p,children:(0,u.jsx)(a,{ref:t,...v,className:r()(o,n)})})});x.displayName="AccordionBody";let f=s.forwardRef((e,t)=>{let{as:a="button",bsPrefix:n,className:o,onClick:d,...m}=e;n=(0,l.oU)(n,"accordion-button");let{eventKey:x}=(0,s.useContext)(h),f=function(e,t){let{activeEventKey:a,onSelect:n,alwaysOpen:r}=(0,s.useContext)(c);return s=>{let o=e===a?null:e;r&&(o=Array.isArray(a)?a.includes(e)?a.filter(t=>t!==e):[...a,e]:[e]),null==n||n(o,s),null==t||t(s)}}(x,d),{activeEventKey:p}=(0,s.useContext)(c);return"button"===a&&(m.type="button"),(0,u.jsx)(a,{ref:t,onClick:f,...m,"aria-expanded":Array.isArray(p)?p.includes(x):x===p,className:r()(o,n,!i(p,x)&&"collapsed")})});f.displayName="AccordionButton";let p=s.forwardRef((e,t)=>{let{as:a="h2","aria-controls":n,bsPrefix:s,className:o,children:d,onClick:i,...c}=e;return s=(0,l.oU)(s,"accordion-header"),(0,u.jsx)(a,{ref:t,...c,className:r()(o,s),children:(0,u.jsx)(f,{onClick:i,"aria-controls":n,children:d})})});p.displayName="AccordionHeader";let v=s.forwardRef((e,t)=>{let{as:a="div",bsPrefix:n,className:o,eventKey:d,...i}=e;n=(0,l.oU)(n,"accordion-item");let c=(0,s.useMemo)(()=>({eventKey:d}),[d]);return(0,u.jsx)(h.Provider,{value:c,children:(0,u.jsx)(a,{ref:t,...i,className:r()(o,n)})})});v.displayName="AccordionItem";let j=s.forwardRef((e,t)=>{let{as:a="div",activeKey:n,bsPrefix:d,className:i,onSelect:m,flush:h,alwaysOpen:x,...f}=(0,o.Zw)(e,{activeKey:"onSelect"}),p=(0,l.oU)(d,"accordion"),v=(0,s.useMemo)(()=>({activeEventKey:n,onSelect:m,alwaysOpen:x}),[n,m,x]);return(0,u.jsx)(c.Provider,{value:v,children:(0,u.jsx)(a,{ref:t,...f,className:r()(i,p,h&&"".concat(p,"-flush"))})})});j.displayName="Accordion";let y=Object.assign(j,{Button:f,Collapse:m,Item:v,Header:p,Body:x})}},e=>{var t=t=>e(e.s=t);e.O(0,[6077,8865,601,3779,5453,2362,2765,7581,1725,4459,3874,3697,9070,4415,3384,8441,1684,7358],()=>t(18438)),_N_E=e.O()}]);