(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{1103:(e,l,s)=>{Promise.resolve().then(s.bind(s,5297))},5297:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>V});var a=s(5155),n=s(4995),c=s(2115),o=s(2981),t=s(2963),r=s(6180),i=s(6121),d=s(3667),u=s(7204),h=s(4805),p=s(2859),m=s(3577);(0,m.v)(h.Qn,{tcp:h.Mq.bypass,udp:h.Mq.bypass,bypassFile:"yuhaiin.conf",customRuleV3:[]});let g=c.memo(e=>{let l=(0,m.v)(h.eT,{hostname:["www.example.com"],mode:h.Mq.proxy,tag:"",resolveStrategy:h.pI.default}),s=(0,m.v)(h.Nm,{name:"my rule",enabled:!1,object:{case:"file",value:(0,m.v)(h.Uu,{})}}),n=l=>{l(e.bypass),e.onChange(e.bypass)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mb-3",children:(0,a.jsxs)(o.A.Body,{children:[(0,a.jsx)(b,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>n(l=>l.tcp=e)}),(0,a.jsx)(b,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>n(l=>l.udp=e)}),(0,a.jsx)(p.$d,{label:"Resolve Locally",checked:e.bypass.resolveLocally,onChange:()=>n(e=>e.resolveLocally=!e.resolveLocally)}),(0,a.jsx)(p.$d,{label:"Udp proxy Fqdn",checked:e.bypass.udpProxyFqdn===h.f5.skip_resolve,onChange:()=>n(e=>e.udpProxyFqdn=e.udpProxyFqdn===h.f5.skip_resolve?h.f5.resolve:h.f5.skip_resolve)})]})}),e.bypass.remoteRules.map((e,l)=>(0,a.jsx)(u.mc,{title:e.name,onClose:()=>n(e=>e.remoteRules.splice(l,1)),children:(0,a.jsx)(v,{config:e,onChange:e=>n(s=>s.remoteRules[l]=e)})},"remote_rules"+l)),(0,a.jsx)("div",{className:"d-flex mb-2",children:(0,a.jsxs)(t.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>n(e=>e.remoteRules.push(s)),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Remote Rule"]})}),(0,a.jsx)("hr",{}),e.bypass.customRuleV3.map((e,l)=>(0,a.jsx)(u.mc,{title:""!==e.tag?e.tag:h.Mq[e.mode],onClose:()=>n(e=>e.customRuleV3.splice(l,1)),children:(0,a.jsx)(x,{config:e,onChange:e=>n(s=>s.customRuleV3[l]=e)})},"rule"+l)),(0,a.jsx)("div",{className:"d-flex mb-2",children:(0,a.jsxs)(t.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>n(e=>e.customRuleV3.push(l)),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})}),x=e=>{let l=l=>{l(e.config),e.onChange(e.config)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>l(l=>l.mode=e)}),(0,a.jsx)(u.a9,{label:"Tag",value:e.config.tag,onChange:e=>l(l=>l.tag=e)}),(0,a.jsx)(A,{label:"Resolve Strategy",value:e.config.resolveStrategy,onChange:e=>l(l=>l.resolveStrategy=e)}),(0,a.jsx)(f,{label:"UDP proxy Fqdn",value:e.config.udpProxyFqdnStrategy,onChange:e=>l(l=>l.udpProxyFqdnStrategy=e)}),(0,a.jsx)(u.e9,{title:"IP/DOMAIN",data:e.config.hostname,onChange:e=>l(l=>{e&&(l.hostname=e)}),errorMsgs:e.config.errorMsgs})]})},v=e=>{let l=l=>{l(e.config),e.onChange(e.config)},s=()=>{switch(e.config.object.case){case"file":return"file";case"http":return"http";default:return""}},n=(e,l)=>{switch(e.object.case){case"file":e.object.value.path=l;break;case"http":e.object.value.url=l}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$d,{label:"Enabled",checked:e.config.enabled,onChange:()=>l(e=>e.enabled=!e.enabled)}),(0,a.jsx)(u.a9,{label:"Name",value:e.config.name,onChange:e=>l(l=>l.name=e)}),(0,a.jsxs)(r.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:"Type"}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:s(),onChange:e=>l(l=>{if(s()!=e.target.value)switch(e.target.value){case"file":l.object={case:"file",value:(0,m.v)(h.Uu,{})};break;case"http":l.object={case:"http",value:(0,m.v)(h.ie,{})}}}),children:[(0,a.jsx)("option",{value:"file",children:"file"}),(0,a.jsx)("option",{value:"http",children:"http"})]})})]}),(0,a.jsx)(u.a9,{label:"Value",value:(()=>{switch(e.config.object.case){case"file":return e.config.object.value.path;case"http":return e.config.object.value.url;default:return""}})(),errorMsg:e.config.errorMsg,onChange:e=>l(l=>n(l,e))})]})};function b(e){return(0,a.jsxs)(r.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:h.Mq[e.value],onChange:l=>e.onChange(h.Mq[l.target.value]),children:[e.network&&(0,a.jsx)("option",{value:h.Mq[h.Mq.bypass],children:"BYPASS"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.direct],children:"DIRECT"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.proxy],children:"PROXY"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.block],children:"BLOCK"})]})})]})}function f(e){return(0,a.jsxs)(r.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:h.f5[e.value],onChange:l=>e.onChange(h.f5[l.target.value]),children:[(0,a.jsx)("option",{value:h.f5[h.f5.udp_proxy_fqdn_strategy_default],children:"Global"}),(0,a.jsx)("option",{value:h.f5[h.f5.resolve],children:"Resolve"}),(0,a.jsx)("option",{value:h.f5[h.f5.skip_resolve],children:"Skip"})]})})]})}function A(e){return(0,a.jsxs)(r.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(r.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(r.A.Select,{value:h.pI[e.value],onChange:l=>e.onChange(h.pI[l.target.value]),children:[(0,a.jsx)("option",{value:h.pI[h.pI.default],children:"default"}),(0,a.jsx)("option",{value:h.pI[h.pI.prefer_ipv4],children:"prefer_ipv4"}),(0,a.jsx)("option",{value:h.pI[h.pI.only_ipv4],children:"only_ipv4"}),(0,a.jsx)("option",{value:h.pI[h.pI.prefer_ipv6],children:"prefer_ipv6"}),(0,a.jsx)("option",{value:h.pI[h.pI.only_ipv6],children:"only_ipv6"})]})})]})}var y=s(8927),j=s(9169),C=s(950),Z=s(7558),R=s(148),X=s(3339),I=s(4216);let V=function(){let e=(0,c.useContext)(R.u),[l,s]=(0,c.useState)(!1),[o,r]=(0,c.useState)(!1),{data:i,error:d,isLoading:u,mutate:p}=(0,n.Ay)("/bypass",(0,y.AD)(h.Qn),{revalidateOnFocus:!1});return d?(0,a.jsx)(j.A,{code:d.code,children:d.msg}):u||!i?(0,a.jsx)(j.A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{bypass:(0,C.o)(h.Qn,i),onChange:e=>{p(e,!1)}}),(0,a.jsx)("hr",{}),(0,a.jsxs)(X.A,{gap:1,direction:"horizontal",children:[(0,a.jsxs)(t.A,{variant:"outline-primary",disabled:l,onClick:()=>{s(!0),(0,y.Fp)("/bypass",{body:(0,Z.R)(h.Qn,i),method:"PATCH"}).then(async l=>{let{error:a}=l;void 0!==a?e.Error("save config failed, ".concat(a.code,"| ").concat(await a.msg)):(e.Info("Save Successfully"),p()),s(!1)})},children:["Save",l&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(I.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,a.jsxs)(t.A,{variant:"outline-primary",disabled:o,onClick:()=>{r(!0),(0,y.Fp)("/bypass/reload",{method:"POST"}).then(async l=>{let{error:s}=l;void 0!==s?e.Error("reload failed, ".concat(s.code,"| ").concat(await s.msg)):(e.Info("Reload Successfully"),p()),r(!1)})},children:["Refresh Now",o&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(I.A,{size:"sm",animation:"border",variant:"primary"})]})]})]})]})}},9169:(e,l,s)=>{"use strict";s.d(l,{A:()=>t});var a=s(5155),n=s(4216),c=s(5554),o=s.n(c);let t=function(e){return(0,a.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,a.jsx)("div",{className:"p2",children:(0,a.jsx)(n.A,{})})]})}},2859:(e,l,s)=>{"use strict";s.d(l,{$d:()=>t});var a=s(5155);s(2115);var n=s(6180),c=s(6121),o=s(3667);let t=e=>(0,a.jsxs)(n.A.Group,{as:c.A,className:"mb-2",children:[(0,a.jsx)(n.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(o.A,{sm:10,className:"d-flex align-items-center",children:(0,a.jsx)(n.A.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},148:(e,l,s)=>{"use strict";s.d(l,{u:()=>t,y:()=>r});var a=s(5155),n=s(2115),c=s(1757),o=s(491);let t=(0,n.createContext)({Info:e=>{},Error:e=>{}}),r=e=>{let{children:l}=e,[s,r]=(0,n.useState)({value:{},index:0}),i=(e,l)=>r(s=>({value:{...s.value,[s.index]:{text:e,type:l}},index:s.index+1}));return(0,a.jsxs)(t.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,a.jsx)(c.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(s.value).map(e=>{let[l,n]=e;return(0,a.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{let e=s.value;delete e[l],r({...s,value:e})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,a.jsxs)(o.A.Header,{children:[(0,a.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,a.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,a.jsx)(o.A.Body,{className:"text-center",children:n.text})]},"toast"+l)})}),l]})}},4805:(e,l,s)=>{"use strict";s.d(l,{Mq:()=>u,Nm:()=>r,Qn:()=>o,Uu:()=>i,eT:()=>t,f5:()=>p,ie:()=>d,pI:()=>h,qc:()=>c});var a=s(6788),n=s(8123);let c=(0,a.w)("Chpjb25maWcvYnlwYXNzL2J5cGFzcy5wcm90bxIOeXVoYWlpbi5ieXBhc3Mi9QIKBmNvbmZpZxIhCgN0Y3AYAyABKA4yFC55dWhhaWluLmJ5cGFzcy5tb2RlEiEKA3VkcBgEIAEoDjIULnl1aGFpaW4uYnlwYXNzLm1vZGUSJAoLYnlwYXNzX2ZpbGUYAiABKAlCAhgBUgtieXBhc3NfZmlsZRJPCg51ZHBfcHJveHlfZnFkbhgGIAEoDjInLnl1aGFpaW4uYnlwYXNzLnVkcF9wcm94eV9mcWRuX3N0cmF0ZWd5Ug51ZHBfcHJveHlfZnFkbhJDCg5jdXN0b21fcnVsZV92MxgHIAMoCzIbLnl1aGFpaW4uYnlwYXNzLm1vZGVfY29uZmlnUg5jdXN0b21fcnVsZV92MxI/CgxyZW1vdGVfcnVsZXMYCCADKAsyGy55dWhhaWluLmJ5cGFzcy5yZW1vdGVfcnVsZVIMcmVtb3RlX3J1bGVzEigKD3Jlc29sdmVfbG9jYWxseRgJIAEoCFIPcmVzb2x2ZV9sb2NhbGx5IpQDCgttb2RlX2NvbmZpZxIiCgRtb2RlGAEgASgOMhQueXVoYWlpbi5ieXBhc3MubW9kZRILCgN0YWcYAiABKAkSEAoIaG9zdG5hbWUYAyADKAkSTAoQcmVzb2x2ZV9zdHJhdGVneRgEIAEoDjIgLnl1aGFpaW4uYnlwYXNzLnJlc29sdmVfc3RyYXRlZ3lSEHJlc29sdmVfc3RyYXRlZ3kSYQoXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kYBiABKA4yJy55dWhhaWluLmJ5cGFzcy51ZHBfcHJveHlfZnFkbl9zdHJhdGVneVIXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kSSQoKZXJyb3JfbXNncxgHIAMoCzIqLnl1aGFpaW4uYnlwYXNzLm1vZGVfY29uZmlnLkVycm9yTXNnc0VudHJ5UgllcnJvcl9tc2caMAoORXJyb3JNc2dzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4AUoECAUQBlIOdWRwX3Byb3h5X2ZxZG4i+QEKC3JlbW90ZV9ydWxlEg8KB2VuYWJsZWQYASABKAgSDAoEbmFtZRgCIAEoCRIwCgRmaWxlGAMgASgLMiAueXVoYWlpbi5ieXBhc3MucmVtb3RlX3J1bGVfZmlsZUgAEjAKBGh0dHAYBCABKAsyIC55dWhhaWluLmJ5cGFzcy5yZW1vdGVfcnVsZV9odHRwSAASHAoJZXJyb3JfbXNnGAUgASgJUgllcnJvcl9tc2cSPwoMZGVmYXVsdF9tb2RlGAYgASgLMhsueXVoYWlpbi5ieXBhc3MubW9kZV9jb25maWdSDGRlZmF1bHRfbW9kZUIICgZvYmplY3QiIAoQcmVtb3RlX3J1bGVfZmlsZRIMCgRwYXRoGAEgASgJIi8KEHJlbW90ZV9ydWxlX2h0dHASCwoDdXJsGAEgASgJEg4KBm1ldGhvZBgCIAEoCSo0CgRtb2RlEgoKBmJ5cGFzcxAAEgoKBmRpcmVjdBABEgkKBXByb3h5EAISCQoFYmxvY2sQAypfChByZXNvbHZlX3N0cmF0ZWd5EgsKB2RlZmF1bHQQABIPCgtwcmVmZXJfaXB2NBABEg0KCW9ubHlfaXB2NBACEg8KC3ByZWZlcl9pcHY2EAMSDQoJb25seV9pcHY2EAQqXQoXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kSIwofdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3lfZGVmYXVsdBAAEgsKB3Jlc29sdmUQARIQCgxza2lwX3Jlc29sdmUQAkI3WjVnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvY29uZmlnL2J5cGFzc2IGcHJvdG8z"),o=(0,n.Z)(c,0),t=(0,n.Z)(c,1),r=(0,n.Z)(c,2),i=(0,n.Z)(c,3),d=(0,n.Z)(c,4);var u=function(e){return e[e.bypass=0]="bypass",e[e.direct=1]="direct",e[e.proxy=2]="proxy",e[e.block=3]="block",e}({}),h=function(e){return e[e.default=0]="default",e[e.prefer_ipv4=1]="prefer_ipv4",e[e.only_ipv4=2]="only_ipv4",e[e.prefer_ipv6=3]="prefer_ipv6",e[e.only_ipv6=4]="only_ipv6",e}({}),p=function(e){return e[e.udp_proxy_fqdn_strategy_default=0]="udp_proxy_fqdn_strategy_default",e[e.resolve=1]="resolve",e[e.skip_resolve=2]="skip_resolve",e}({})}},e=>{var l=l=>e(e.s=l);e.O(0,[488,995,515,920,637,842,306,441,517,358],()=>l(1103)),_N_E=e.O()}]);