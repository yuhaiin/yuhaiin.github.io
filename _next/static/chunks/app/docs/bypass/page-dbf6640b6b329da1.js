(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{1103:(e,s,a)=>{Promise.resolve().then(a.bind(a,3678))},3678:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>F});var l=a(5155),n=a(950),o=a(2115),t=a(4617),c=a.n(t),r=a(1653);let i=o.forwardRef((e,s)=>{let{as:a="div",bsPrefix:n,className:o,direction:t,gap:i,...d}=e;n=(0,r.oU)(n,"horizontal"===t?"hstack":"vstack");let u=(0,r.gy)(),h=(0,r.Jm)();return(0,l.jsx)(a,{...d,ref:s,className:c()(o,n,...function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Jy,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.ff,l=[];return Object.entries(e).forEach(e=>{let[n,o]=e;null!=o&&("object"==typeof o?s.forEach(e=>{let s=o[e];null!=s&&l.push("".concat(n).concat(e!==a?"-".concat(e):"","-").concat(s))}):l.push("".concat(n,"-").concat(o)))}),l}({gap:i},u,h))})});i.displayName="Stack";var d=a(2963),u=a(4216),h=a(4995),p=a(9169),m=a(8927),b=a(148),g=a(4805),x=a(6863),v=a(3577),f=a(2981),j=a(6180),y=a(6121),A=a(3667),C=a(2859),R=a(7204);let N=e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S,{label:"Mode",network:!1,value:e.config.mode,onChange:s=>e.onChange({...e.config,mode:s})}),(0,l.jsx)(R.a9,{label:"Tag",value:e.config.tag,onChange:s=>e.onChange({...e.config,tag:s})}),(0,l.jsx)(V,{label:"Resolve Strategy",value:e.config.resolveStrategy,onChange:s=>e.onChange({...e.config,resolveStrategy:s})}),(0,l.jsx)(I,{label:"UDP proxy Fqdn",value:e.config.udpProxyFqdnStrategy,onChange:s=>e.onChange({...e.config,udpProxyFqdnStrategy:s})}),(0,l.jsx)(R.e9,{title:"IP/DOMAIN",data:e.config.hostname,onChange:s=>e.onChange({...e.config,hostname:s}),errorMsgs:e.config.errorMsgs})]}),w=e=>{let s=()=>{switch(e.config.object.case){case"file":return"file";case"http":return"http";default:return""}},a=(e,s)=>{switch(e.object.case){case"file":e.object.value={...e.object.value,path:s};break;case"http":e.object.value={...e.object.value,url:s}}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.$,{label:"Enabled",checked:e.config.enabled,onChange:()=>e.onChange({...e.config,enabled:!e.config.enabled})}),(0,l.jsx)(R.a9,{label:"Name",value:e.config.name,onChange:s=>e.onChange({...e.config,name:s})}),(0,l.jsxs)(j.A.Group,{as:y.A,className:"mb-3",children:[(0,l.jsx)(j.A.Label,{column:!0,sm:2,children:"Type"}),(0,l.jsx)(A.A,{sm:10,children:(0,l.jsxs)(j.A.Select,{value:s(),onChange:a=>{if(s()==a.target.value)return;let l={...e.config};switch(a.target.value){case"file":l.object={case:"file",value:(0,v.v)(g.Uu,{})};break;case"http":l.object={case:"http",value:(0,v.v)(g.ie,{})}}e.onChange(l)},children:[(0,l.jsx)("option",{value:"file",children:"file"}),(0,l.jsx)("option",{value:"http",children:"http"})]})})]}),(0,l.jsx)(R.a9,{label:"Value",value:(()=>{switch(e.config.object.case){case"file":return e.config.object.value.path;case"http":return e.config.object.value.url;default:return""}})(),errorMsg:e.config.errorMsg,onChange:s=>{let l={...e.config};a(l,s),e.onChange(l)}})]})};function S(e){return(0,l.jsxs)(j.A.Group,{as:y.A,className:"mb-3",children:[(0,l.jsx)(j.A.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(A.A,{sm:10,children:(0,l.jsxs)(j.A.Select,{value:g.Mq[e.value],onChange:s=>e.onChange(g.Mq[s.target.value]),children:[e.network&&(0,l.jsx)("option",{value:g.Mq[g.Mq.bypass],children:"BYPASS"}),(0,l.jsx)("option",{value:g.Mq[g.Mq.direct],children:"DIRECT"}),(0,l.jsx)("option",{value:g.Mq[g.Mq.proxy],children:"PROXY"}),(0,l.jsx)("option",{value:g.Mq[g.Mq.block],children:"BLOCK"})]})})]})}function I(e){return(0,l.jsxs)(j.A.Group,{as:y.A,className:"mb-3",children:[(0,l.jsx)(j.A.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(A.A,{sm:10,children:(0,l.jsxs)(j.A.Select,{value:g.f5[e.value],onChange:s=>e.onChange(g.f5[s.target.value]),children:[(0,l.jsx)("option",{value:g.f5[g.f5.udp_proxy_fqdn_strategy_default],children:"Global"}),(0,l.jsx)("option",{value:g.f5[g.f5.resolve],children:"Resolve"}),(0,l.jsx)("option",{value:g.f5[g.f5.skip_resolve],children:"Skip"})]})})]})}function V(e){return(0,l.jsxs)(j.A.Group,{as:y.A,className:"mb-3",children:[(0,l.jsx)(j.A.Label,{column:!0,sm:2,children:e.label}),(0,l.jsx)(A.A,{sm:10,children:(0,l.jsxs)(j.A.Select,{value:g.pI[e.value],onChange:s=>e.onChange(g.pI[s.target.value]),children:[(0,l.jsx)("option",{value:g.pI[g.pI.default],children:"default"}),(0,l.jsx)("option",{value:g.pI[g.pI.prefer_ipv4],children:"prefer_ipv4"}),(0,l.jsx)("option",{value:g.pI[g.pI.only_ipv4],children:"only_ipv4"}),(0,l.jsx)("option",{value:g.pI[g.pI.prefer_ipv6],children:"prefer_ipv6"}),(0,l.jsx)("option",{value:g.pI[g.pI.only_ipv6],children:"only_ipv6"})]})})]})}let k=e=>{let s=(0,v.v)(g.eT,{hostname:["www.example.com"],mode:g.Mq.proxy,tag:"",resolveStrategy:g.pI.default}),a=(0,v.v)(g.Nm,{name:"my rule",enabled:!1,object:{case:"file",value:(0,v.v)(g.Uu,{})}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.A,{className:"mb-3",children:(0,l.jsxs)(f.A.Body,{children:[(0,l.jsx)(S,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:s=>e.onChange({...e.bypass,tcp:s})}),(0,l.jsx)(S,{label:"UDP",network:!0,value:e.bypass.udp,onChange:s=>e.onChange({...e.bypass,udp:s})}),(0,l.jsx)(C.$,{label:"Resolve Locally",checked:e.bypass.resolveLocally,onChange:()=>e.onChange({...e.bypass,resolveLocally:!e.bypass.resolveLocally})}),(0,l.jsx)(C.$,{label:"Udp proxy Fqdn",checked:e.bypass.udpProxyFqdn===g.f5.skip_resolve,onChange:()=>e.onChange({...e.bypass,udpProxyFqdn:e.bypass.udpProxyFqdn===g.f5.skip_resolve?g.f5.resolve:g.f5.skip_resolve})})]})}),e.bypass.remoteRules.map((s,a)=>(0,l.jsx)(R.mc,{title:s.name,onClose:()=>e.onChange({...e.bypass,remoteRules:e.bypass.remoteRules.filter((e,s)=>s!==a)}),moveUpDown:new R.fH(e.bypass.remoteRules,a,s=>e.onChange({...e.bypass,remoteRules:s})),children:(0,l.jsx)(w,{config:s,onChange:s=>e.onChange({...e.bypass,remoteRules:[...e.bypass.remoteRules.slice(0,a),s,...e.bypass.remoteRules.slice(a+1)]})})},"remote_rules"+a)),(0,l.jsx)("div",{className:"d-flex mb-2",children:(0,l.jsxs)(d.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>e.onChange({...e.bypass,remoteRules:[...e.bypass.remoteRules,a]}),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Remote Rule"]})}),(0,l.jsx)("hr",{}),e.bypass.customRuleV3.map((s,a)=>(0,l.jsx)(R.mc,{title:""!==s.tag?s.tag:g.Mq[s.mode],onClose:()=>e.onChange({...e.bypass,customRuleV3:e.bypass.customRuleV3.filter((e,s)=>s!==a)}),moveUpDown:new R.fH(e.bypass.customRuleV3,a,s=>e.onChange({...e.bypass,customRuleV3:s})),children:(0,l.jsx)(N,{config:s,onChange:s=>e.onChange({...e.bypass,customRuleV3:[...e.bypass.customRuleV3.slice(0,a),s,...e.bypass.customRuleV3.slice(a+1)]})})},"rule"+a)),(0,l.jsx)("div",{className:"d-flex mb-2",children:(0,l.jsxs)(d.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>e.onChange({...e.bypass,customRuleV3:[...e.bypass.customRuleV3,s]}),children:[(0,l.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})},F=function(){let e=(0,o.useContext)(b.u),[s,a]=(0,o.useState)(!1),[t,c]=(0,o.useState)(!1),{data:r,error:v,isLoading:f,mutate:j}=(0,h.Ay)("/bypass",(0,m.AD)(x.XH.method.load),{revalidateOnFocus:!1});return v?(0,l.jsx)(p.A,{code:v.code,children:v.msg}):f||!r?(0,l.jsx)(p.A,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(k,{bypass:(0,n.o)(g.Qn,r),onChange:e=>{j(e,!1)}}),(0,l.jsx)("hr",{}),(0,l.jsxs)(i,{gap:1,direction:"horizontal",children:[(0,l.jsxs)(d.A,{variant:"outline-primary",disabled:s,onClick:()=>{a(!0),(0,m.kP)(x.XH.method.save,"/bypass","PATCH",r).then(async s=>{let{error:l}=s;void 0!==l?e.Error("save config failed, ".concat(l.code,"| ").concat(l.msg)):(e.Info("Save Successfully"),j()),a(!1)})},children:["Save",s&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(u.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,l.jsxs)(d.A,{variant:"outline-primary",disabled:t,onClick:()=>{c(!0),(0,m.kP)(x.XH.method.reload,"/bypass/reload","POST").then(async s=>{let{error:a}=s;void 0!==a?e.Error("reload failed, ".concat(a.code,"| ").concat(a.msg)):(e.Info("Reload Successfully"),j()),c(!1)})},children:["Refresh Now",t&&(0,l.jsxs)(l.Fragment,{children:["\xa0",(0,l.jsx)(u.A,{size:"sm",animation:"border",variant:"primary"})]})]})]})]})}},2859:(e,s,a)=>{"use strict";a.d(s,{$:()=>c});var l=a(5155),n=a(6180),o=a(6121),t=a(3667);let c=e=>{let{label:s,checked:a,onChange:c}=e;return(0,l.jsxs)(n.A.Group,{as:o.A,className:"mb-2",children:[(0,l.jsx)(n.A.Label,{column:!0,sm:2,children:s}),(0,l.jsx)(t.A,{sm:10,className:"d-flex align-items-center",children:(0,l.jsx)(n.A.Check,{className:"d-flex align-items-center",type:"switch",checked:a,onChange:e=>c(e.target.checked)})})]})}},148:(e,s,a)=>{"use strict";a.d(s,{u:()=>c,y:()=>r});var l=a(5155),n=a(2115),o=a(1757),t=a(491);let c=(0,n.createContext)({Info:e=>{},Error:e=>{}}),r=e=>{let{children:s}=e,[a,r]=(0,n.useState)([]),i=(e,s)=>r(a=>[...a,{text:e,type:s}]);return(0,l.jsxs)(c.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,l.jsx)(o.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:a.map((e,s)=>(0,l.jsxs)(t.A,{role:"alert","aria-live":"assertive",show:!0,bg:e.type,onClose:()=>{r(e=>[...e.slice(0,s),...e.slice(s+1)])},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,l.jsxs)(t.A.Header,{children:[(0,l.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,l.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,l.jsx)(t.A.Body,{className:"text-center",children:e.text})]},"toast"+s))}),s]})}},3614:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var l=a(4617),n=a.n(l),o=a(2115),t=a(1653),c=a(5155);let r=o.forwardRef((e,s)=>{let{bsPrefix:a,size:l,vertical:o=!1,className:r,role:i="group",as:d="div",...u}=e,h=(0,t.oU)(a,"btn-group"),p=h;return o&&(p="".concat(h,"-vertical")),(0,c.jsx)(d,{...u,ref:s,role:i,className:n()(r,p,l&&"".concat(h,"-").concat(l))})});r.displayName="ButtonGroup";let i=r},8003:(e,s,a)=>{"use strict";a.d(s,{A:()=>h});var l=a(4617),n=a.n(l),o=a(2115),t=a(1653),c=a(2389),r=a(2471),i=a(5155);let d=o.forwardRef((e,s)=>{let{className:a,bsPrefix:l,as:o="span",...c}=e;return l=(0,t.oU)(l,"input-group-text"),(0,i.jsx)(o,{ref:s,className:n()(a,l),...c})});d.displayName="InputGroupText";let u=o.forwardRef((e,s)=>{let{bsPrefix:a,size:l,hasValidation:c,className:d,as:u="div",...h}=e;a=(0,t.oU)(a,"input-group");let p=(0,o.useMemo)(()=>({}),[]);return(0,i.jsx)(r.A.Provider,{value:p,children:(0,i.jsx)(u,{ref:s,...h,className:n()(d,a,l&&"".concat(a,"-").concat(l),c&&"has-validation")})})});u.displayName="InputGroup";let h=Object.assign(u,{Text:d,Radio:e=>(0,i.jsx)(d,{children:(0,i.jsx)(c.A,{type:"radio",...e})}),Checkbox:e=>(0,i.jsx)(d,{children:(0,i.jsx)(c.A,{type:"checkbox",...e})})})},6121:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var l=a(4617),n=a.n(l),o=a(2115),t=a(1653),c=a(5155);let r=o.forwardRef((e,s)=>{let{bsPrefix:a,className:l,as:o="div",...r}=e,i=(0,t.oU)(a,"row"),d=(0,t.gy)(),u=(0,t.Jm)(),h="".concat(i,"-cols"),p=[];return d.forEach(e=>{let s;let a=r[e];delete r[e],null!=a&&"object"==typeof a?{cols:s}=a:s=a,null!=s&&p.push("".concat(h).concat(e!==u?"-".concat(e):"","-").concat(s))}),(0,c.jsx)(o,{ref:s,...r,className:n()(l,i,...p)})});r.displayName="Row";let i=r},9537:(e,s,a)=>{"use strict";function l(e,s,...a){if(0==a.length)return e.enums[s];let n=a.pop();return a.reduce((e,s)=>e.nestedMessages[s],e.messages[s]).nestedEnums[n]}a.d(s,{R:()=>l})},9678:(e,s,a)=>{"use strict";a.d(s,{i:()=>o,w:()=>t});var l=a(6788),n=a(8123);let o=(0,l.w)("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),t=(0,n.Z)(o,0)},1936:(e,s,a)=>{"use strict";a.d(s,{Ax:()=>o,g8:()=>t});var l=a(6788),n=a(8123);let o=(0,l.w)("Ch5nb29nbGUvcHJvdG9idWYvd3JhcHBlcnMucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIcCgtEb3VibGVWYWx1ZRINCgV2YWx1ZRgBIAEoASIbCgpGbG9hdFZhbHVlEg0KBXZhbHVlGAEgASgCIhsKCkludDY0VmFsdWUSDQoFdmFsdWUYASABKAMiHAoLVUludDY0VmFsdWUSDQoFdmFsdWUYASABKAQiGwoKSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoBSIcCgtVSW50MzJWYWx1ZRINCgV2YWx1ZRgBIAEoDSIaCglCb29sVmFsdWUSDQoFdmFsdWUYASABKAgiHAoLU3RyaW5nVmFsdWUSDQoFdmFsdWUYASABKAkiGwoKQnl0ZXNWYWx1ZRINCgV2YWx1ZRgBIAEoDEKDAQoTY29tLmdvb2dsZS5wcm90b2J1ZkINV3JhcHBlcnNQcm90b1ABWjFnb29nbGUuZ29sYW5nLm9yZy9wcm90b2J1Zi90eXBlcy9rbm93bi93cmFwcGVyc3Bi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),t=(0,n.Z)(o,7)}},e=>{var s=s=>e(e.s=s);e.O(0,[295,375,515,920,637,922,863,441,517,358],()=>s(1103)),_N_E=e.O()}]);