(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5753],{1103:(e,a,s)=>{Promise.resolve().then(s.bind(s,7806))},7806:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>D});var t=s(5155),n=s(950),l=s(4504),o=s(9093),r=s(2115),c=s(4617),i=s.n(c),d=s(1653);let u=r.forwardRef((e,a)=>{let{as:s="div",bsPrefix:n,className:l,direction:o,gap:r,...c}=e;n=(0,d.oU)(n,"horizontal"===o?"hstack":"vstack");let u=(0,d.gy)(),m=(0,d.Jm)();return(0,t.jsx)(s,{...c,ref:a,className:i()(l,n,...function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Jy,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.ff,t=[];return Object.entries(e).forEach(e=>{let[n,l]=e;null!=l&&("object"==typeof l?a.forEach(e=>{let a=l[e];null!=a&&t.push("".concat(n).concat(e!==s?"-".concat(e):"","-").concat(a))}):t.push("".concat(n,"-").concat(l)))}),t}({gap:r},u,m))})});u.displayName="Stack";var m=s(3614),h=s(2963),b=s(4216),g=s(7021),p=s(9169),x=s(8927),f=s(148),v=s(4805),y=s(6863),j=s(3577),C=s(2981),A=s(6180),w=s(6121),N=s(3667),R=s(2859),k=s(7204);let S=e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Vx,{label:"Mode",type:v.Ni,filter:e=>e.number!==v.Mq.bypass,value:e.config.mode,onChange:a=>e.onChange({...e.config,mode:a})}),(0,t.jsx)(k.a9,{label:"Tag",value:e.config.tag,onChange:a=>e.onChange({...e.config,tag:a})}),(0,t.jsx)(R.Vx,{label:"Resolve Strategy",type:v.kw,value:e.config.resolveStrategy,onChange:a=>e.onChange({...e.config,resolveStrategy:a})}),(0,t.jsx)(R.Vx,{label:"UDP proxy Fqdn",type:v.ml,format:e=>e===v.f5.udp_proxy_fqdn_strategy_default?"global":v.f5[e],value:e.config.udpProxyFqdnStrategy,onChange:a=>e.onChange({...e.config,udpProxyFqdnStrategy:a})}),(0,t.jsx)(k.e9,{title:"IP/DOMAIN",data:e.config.hostname,onChange:a=>e.onChange({...e.config,hostname:a}),errorMsgs:e.config.errorMsgs,beforeContent:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(m.A,{className:"mb-2 w-100",children:[(0,t.jsxs)(h.A,{variant:"outline-success",onClick:()=>{e.setModalData({show:!0,import:!0,data:void 0,onSave:a=>{let s=JSON.parse(a);e.onChange({...e.config,hostname:[...e.config.hostname,...s]}),e.setModalData(e=>({...e,show:!1}))}})},children:[(0,t.jsx)("i",{className:"bi bi-box-arrow-in-down"})," Import"]}),(0,t.jsxs)(h.A,{variant:"outline-success",onClick:()=>{e.setModalData({show:!0,data:JSON.stringify(e.config.hostname,null,4),import:!1})},children:[(0,t.jsx)("i",{className:"bi bi-box-arrow-in-up"})," Export"]})]})})})]}),F=e=>{let a=()=>{switch(e.config.object.case){case"file":return"file";case"http":return"http";default:return""}},s=(e,a)=>{switch(e.object.case){case"file":e.object.value={...e.object.value,path:a};break;case"http":e.object.value={...e.object.value,url:a}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.$d,{label:"Enabled",checked:e.config.enabled,onChange:()=>e.onChange({...e.config,enabled:!e.config.enabled})}),(0,t.jsx)(k.a9,{label:"Name",value:e.config.name,onChange:a=>e.onChange({...e.config,name:a})}),(0,t.jsxs)(A.A.Group,{as:w.A,className:"mb-3",children:[(0,t.jsx)(A.A.Label,{column:!0,sm:2,children:"Type"}),(0,t.jsx)(N.A,{sm:10,children:(0,t.jsx)(R.FX,{value:a(),values:["file","http"],onChange:s=>{if(a()==s)return;let t={...e.config};switch(s){case"file":t.object={case:"file",value:(0,j.v)(v.Uu,{})};break;case"http":t.object={case:"http",value:(0,j.v)(v.ie,{})}}e.onChange(t)}})})]}),(0,t.jsx)(k.a9,{mb:"",label:"Value",value:(()=>{switch(e.config.object.case){case"file":return e.config.object.value.path;case"http":return e.config.object.value.url;default:return""}})(),errorMsg:e.config.errorMsg,onChange:a=>{let t={...e.config};s(t,a),e.onChange(t)}})]})},M=e=>{let a=(0,j.v)(v.eT,{hostname:["www.example.com"],mode:v.Mq.proxy,tag:"",resolveStrategy:v.pI.default}),s=(0,j.v)(v.Nm,{name:"my rule",enabled:!1,object:{case:"file",value:(0,j.v)(v.Uu,{})}}),[n,l]=(0,r.useState)({start:-1});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.A,{className:"mb-3",children:(0,t.jsxs)(C.A.Body,{children:[(0,t.jsx)(R.Vx,{label:"TCP",type:v.Ni,value:e.bypass.tcp,onChange:a=>e.onChange({...e.bypass,tcp:a})}),(0,t.jsx)(R.Vx,{label:"UDP",type:v.Ni,value:e.bypass.udp,onChange:a=>e.onChange({...e.bypass,udp:a})}),(0,t.jsx)(R.$d,{label:"Resolve Locally",checked:e.bypass.resolveLocally,onChange:()=>e.onChange({...e.bypass,resolveLocally:!e.bypass.resolveLocally})}),(0,t.jsx)(R.$d,{label:"Udp proxy Fqdn",checked:e.bypass.udpProxyFqdn===v.f5.skip_resolve,onChange:()=>e.onChange({...e.bypass,udpProxyFqdn:e.bypass.udpProxyFqdn===v.f5.skip_resolve?v.f5.resolve:v.f5.skip_resolve})})]})}),e.bypass.remoteRules.map((a,s)=>(0,t.jsx)(k.mc,{title:a.name,onClose:()=>e.onChange({...e.bypass,remoteRules:e.bypass.remoteRules.filter((e,a)=>a!==s)}),moveUpDown:new k.fH(e.bypass.remoteRules,s,a=>e.onChange({...e.bypass,remoteRules:a})),children:(0,t.jsx)(F,{config:a,onChange:a=>e.onChange({...e.bypass,remoteRules:[...e.bypass.remoteRules.slice(0,s),a,...e.bypass.remoteRules.slice(s+1)]})})},"remote_rules"+s)),(0,t.jsx)("div",{className:"d-flex mb-2",children:(0,t.jsxs)(h.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>e.onChange({...e.bypass,remoteRules:[...e.bypass.remoteRules,s]}),children:[(0,t.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Remote Rule"]})}),(0,t.jsx)("hr",{}),e.bypass.customRuleV3.map((a,s)=>(0,t.jsx)(k.mc,{fold:!0,title:""!==a.tag?a.tag:v.Mq[a.mode],onClose:()=>e.onChange({...e.bypass,customRuleV3:e.bypass.customRuleV3.filter((e,a)=>a!==s)}),moveUpDown:new k.fH(e.bypass.customRuleV3,s,a=>e.onChange({...e.bypass,customRuleV3:a}),{draggable:!0,onDrop:a=>{if(n.start!==a){let s=[...e.bypass.customRuleV3],t=s[n.start];s[n.start]=s[a],s[a]=t,e.onChange({...e.bypass,customRuleV3:s})}},onDragStart:e=>{l({start:e})}}),children:(0,t.jsx)(S,{config:a,onChange:a=>e.onChange({...e.bypass,customRuleV3:[...e.bypass.customRuleV3.slice(0,s),a,...e.bypass.customRuleV3.slice(s+1)]}),setModalData:e.setModalData})},"rule"+s)),(0,t.jsx)("div",{className:"d-flex mb-2",children:(0,t.jsxs)(h.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>e.onChange({...e.bypass,customRuleV3:[...e.bypass.customRuleV3,a]}),children:[(0,t.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})};var E=s(0);let V=e=>{let{show:a,plaintext:s,data:n,onSave:l,onHide:o}=e,[c,i]=(0,r.useState)({data:""});return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(E.A,{show:a,"aria-labelledby":"contained-modal-title-vcenter",size:"xl",onHide:()=>{o()},centered:!0,children:[(0,t.jsx)(E.A.Body,{children:(0,t.jsx)(A.A.Control,{as:"textarea",readOnly:s,value:n||c.data,style:{height:"65vh",fontFamily:"monospace"},onChange:e=>{i({data:e.target.value})}})}),(0,t.jsxs)(E.A.Footer,{children:[(0,t.jsx)(h.A,{variant:"outline-secondary",onClick:()=>{o()},children:"Close"}),(0,t.jsx)(()=>l?(0,t.jsx)(h.A,{variant:"outline-primary",onClick:()=>{l&&l(c.data)},children:"Save"}):(0,t.jsx)(t.Fragment,{}),{})]})]})})},D=function(){let e=(0,r.useContext)(f.u),[a,s]=(0,r.useState)(!1),[c,i]=(0,r.useState)(!1),[d,j]=(0,r.useState)({show:!1}),{data:C,error:A,isLoading:w,mutate:N}=(0,g.Ay)("/bypass",(0,x.AD)(y.XH.method.load),{revalidateOnFocus:!1});return A?(0,t.jsx)(p.A,{code:A.code,children:A.msg}):w||!C?(0,t.jsx)(p.A,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(V,{onHide:()=>{j(e=>({...e,show:!1}))},show:d.show,plaintext:!d.import,data:d.data,onSave:d.onSave}),(0,t.jsx)(M,{bypass:(0,n.o)(v.Qn,C),onChange:e=>{N(e,!1)},setModalData:j}),(0,t.jsx)("hr",{}),(0,t.jsxs)(u,{gap:1,direction:"horizontal",children:[(0,t.jsxs)(m.A,{children:[(0,t.jsxs)(h.A,{variant:"outline-primary",disabled:a,onClick:()=>{s(!0),(0,x.kP)(y.XH.method.save,"/bypass","PATCH",C).then(async a=>{let{error:t}=a;void 0!==t?e.Error("save config failed, ".concat(t.code,"| ").concat(t.msg)):(e.Info("Save Successfully"),N()),s(!1)})},children:[(0,t.jsx)("i",{className:"bi bi-floppy"})," Save",a&&(0,t.jsxs)(t.Fragment,{children:["\xa0",(0,t.jsx)(b.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,t.jsxs)(h.A,{variant:"outline-primary",disabled:c,onClick:()=>{i(!0),(0,x.kP)(y.XH.method.reload,"/bypass/reload","POST").then(async a=>{let{error:s}=a;void 0!==s?e.Error("reload failed, ".concat(s.code,"| ").concat(s.msg)):(e.Info("Reload Successfully"),N()),i(!1)})},children:[(0,t.jsx)("i",{className:"bi bi-arrow-clockwise"})," Refresh Now",c&&(0,t.jsxs)(t.Fragment,{children:["\xa0",(0,t.jsx)(b.A,{size:"sm",animation:"border",variant:"primary"})]})]})]}),(0,t.jsxs)(m.A,{children:[(0,t.jsxs)(h.A,{variant:"outline-success",onClick:()=>{j({show:!0,import:!0,onSave:e=>{N((0,l.mj)(v.Qn,e),!1),j(e=>({...e,show:!1}))}})},children:[(0,t.jsx)("i",{className:"bi bi-box-arrow-in-down"})," Import"]}),(0,t.jsxs)(h.A,{variant:"outline-success",onClick:()=>{j({show:!0,data:(0,o.J7)(v.Qn,C,{prettySpaces:2})})},children:[(0,t.jsx)("i",{className:"bi bi-box-arrow-in-up"})," Export"]})]})]})]})}},2859:(e,a,s)=>{"use strict";s.d(a,{$d:()=>r,FX:()=>i,Vx:()=>c});var t=s(5155),n=s(6180),l=s(6121),o=s(3667);let r=e=>{let{label:a,checked:s,onChange:r}=e;return(0,t.jsxs)(n.A.Group,{as:l.A,className:"mb-2",children:[(0,t.jsx)(n.A.Label,{column:!0,sm:2,children:a}),(0,t.jsx)(o.A,{sm:10,className:"d-flex align-items-center",children:(0,t.jsx)(n.A.Check,{className:"d-flex align-items-center",type:"switch",checked:s,onChange:e=>r(e.target.checked)})})]})},c=e=>{var a;let{...s}=e;return(0,t.jsxs)(n.A.Group,{as:l.A,className:"mb-3",children:[(0,t.jsx)(n.A.Label,{column:!0,sm:2,children:s.label}),(0,t.jsx)(o.A,{sm:10,children:(0,t.jsx)(n.A.Select,{value:s.value,onChange:e=>s.onChange(Number(e.target.value)),children:s.type.values.filter(null!==(a=s.filter)&&void 0!==a?a:()=>!0).map(e=>(0,t.jsx)("option",{value:e.number,children:s.format?s.format(e.number):e.name},e.number))})})]})},i=e=>{let{values:a,onChange:s,value:l,emptyChoose:o,format:r}=e;return(0,t.jsxs)(n.A.Select,{value:l,onChange:e=>s(e.target.value),children:[o&&(0,t.jsx)("option",{value:"",children:"Choose..."}),a.map(e=>{let a="string"==typeof e?e:e[0],s="string"==typeof e?e:e[1];return(0,t.jsx)("option",{value:s,children:r?r(a):a},a)})]})}},148:(e,a,s)=>{"use strict";s.d(a,{u:()=>r,y:()=>c});var t=s(5155),n=s(2115),l=s(1757),o=s(491);let r=(0,n.createContext)({Info:e=>{console.log(e)},Error:e=>{console.error(e)}}),c=e=>{let{children:a}=e,[s,c]=(0,n.useState)({value:{},index:0}),i=(e,a)=>c(s=>({value:{...s.value,[s.index]:{text:e,type:a}},index:s.index+1}));return(0,t.jsxs)(r.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,t.jsx)(l.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(s.value).map(e=>{let[a,s]=e;return(0,t.jsxs)(o.A,{role:"alert","aria-live":"assertive",show:!0,bg:s.type,onClose:()=>{c(e=>{let s={...e.value};return delete s[a],{...e,value:s}})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,t.jsxs)(o.A.Header,{children:[(0,t.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,t.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,t.jsx)(o.A.Body,{className:"text-center",children:s.text})]},"toast"+a)})}),a]})}},0:(e,a,s)=>{"use strict";s.d(a,{A:()=>V});var t,n=s(4617),l=s.n(n),o=s(6930),r=s(7678),c=s(5255),i=s(9221);function d(e){if((!t&&0!==t||e)&&r.A){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),t=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return t}var u=s(2115),m=s(3853),h=s(804),b=s(8987),g=s(2959),p=s(9952),x=s(3876),f=s(3281),v=s(1653),y=s(5155);let j=u.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:n="div",...o}=e;return t=(0,v.oU)(t,"modal-body"),(0,y.jsx)(n,{ref:a,className:l()(s,t),...o})});j.displayName="ModalBody";var C=s(7467);let A=u.forwardRef((e,a)=>{let{bsPrefix:s,className:t,contentClassName:n,centered:o,size:r,fullscreen:c,children:i,scrollable:d,...u}=e;s=(0,v.oU)(s,"modal");let m="".concat(s,"-dialog"),h="string"==typeof c?"".concat(s,"-fullscreen-").concat(c):"".concat(s,"-fullscreen");return(0,y.jsx)("div",{...u,ref:a,className:l()(m,t,r&&"".concat(s,"-").concat(r),o&&"".concat(m,"-centered"),d&&"".concat(m,"-scrollable"),c&&h),children:(0,y.jsx)("div",{className:l()("".concat(s,"-content"),n),children:i})})});A.displayName="ModalDialog";let w=u.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:n="div",...o}=e;return t=(0,v.oU)(t,"modal-footer"),(0,y.jsx)(n,{ref:a,className:l()(s,t),...o})});w.displayName="ModalFooter";var N=s(2243);let R=u.forwardRef((e,a)=>{let{bsPrefix:s,className:t,closeLabel:n="Close",closeButton:o=!1,...r}=e;return s=(0,v.oU)(s,"modal-header"),(0,y.jsx)(N.A,{ref:a,...r,className:l()(t,s),closeLabel:n,closeButton:o})});R.displayName="ModalHeader";let k=(0,s(7449).A)("h4"),S=u.forwardRef((e,a)=>{let{className:s,bsPrefix:t,as:n=k,...o}=e;return t=(0,v.oU)(t,"modal-title"),(0,y.jsx)(n,{ref:a,className:l()(s,t),...o})});function F(e){return(0,y.jsx)(f.A,{...e,timeout:null})}function M(e){return(0,y.jsx)(f.A,{...e,timeout:null})}S.displayName="ModalTitle";let E=u.forwardRef((e,a)=>{let{bsPrefix:s,className:t,style:n,dialogClassName:f,contentClassName:j,children:w,dialogAs:N=A,"data-bs-theme":R,"aria-labelledby":k,"aria-describedby":S,"aria-label":E,show:V=!1,animation:D=!0,backdrop:U=!0,keyboard:H=!0,onEscapeKeyDown:B,onShow:I,onHide:P,container:L,autoFocus:O=!0,enforceFocus:T=!0,restoreFocus:_=!0,restoreFocusOptions:G,onEntered:z,onExit:q,onExiting:W,onEnter:J,onEntering:Y,onExited:Z,backdropClassName:K,manager:X,...Q}=e,[$,ee]=(0,u.useState)({}),[ea,es]=(0,u.useState)(!1),et=(0,u.useRef)(!1),en=(0,u.useRef)(!1),el=(0,u.useRef)(null),[eo,er]=(0,u.useState)(null),ec=(0,h.A)(a,er),ei=(0,m.A)(P),ed=(0,v.Wz)();s=(0,v.oU)(s,"modal");let eu=(0,u.useMemo)(()=>({onHide:ei}),[ei]);function em(){return X||(0,x.R)({isRTL:ed})}function eh(e){if(!r.A)return;let a=em().getScrollbarWidth()>0,s=e.scrollHeight>(0,c.A)(e).documentElement.clientHeight;ee({paddingRight:a&&!s?d():void 0,paddingLeft:!a&&s?d():void 0})}let eb=(0,m.A)(()=>{eo&&eh(eo.dialog)});(0,b.A)(()=>{(0,i.A)(window,"resize",eb),null==el.current||el.current()});let eg=()=>{et.current=!0},ep=e=>{et.current&&eo&&e.target===eo.dialog&&(en.current=!0),et.current=!1},ex=()=>{es(!0),el.current=(0,g.A)(eo.dialog,()=>{es(!1)})},ef=e=>{e.target===e.currentTarget&&ex()},ev=e=>{if("static"===U){ef(e);return}if(en.current||e.target!==e.currentTarget){en.current=!1;return}null==P||P()},ey=(0,u.useCallback)(e=>(0,y.jsx)("div",{...e,className:l()("".concat(s,"-backdrop"),K,!D&&"show")}),[D,K,s]),ej={...n,...$};return ej.display="block",(0,y.jsx)(C.A.Provider,{value:eu,children:(0,y.jsx)(p.A,{show:V,ref:ec,backdrop:U,container:L,keyboard:!0,autoFocus:O,enforceFocus:T,restoreFocus:_,restoreFocusOptions:G,onEscapeKeyDown:e=>{H?null==B||B(e):(e.preventDefault(),"static"===U&&ex())},onShow:I,onHide:P,onEnter:(e,a)=>{e&&eh(e),null==J||J(e,a)},onEntering:(e,a)=>{null==Y||Y(e,a),(0,o.Ay)(window,"resize",eb)},onEntered:z,onExit:e=>{null==el.current||el.current(),null==q||q(e)},onExiting:W,onExited:e=>{e&&(e.style.display=""),null==Z||Z(e),(0,i.A)(window,"resize",eb)},manager:em(),transition:D?F:void 0,backdropTransition:D?M:void 0,renderBackdrop:ey,renderDialog:e=>(0,y.jsx)("div",{role:"dialog",...e,style:ej,className:l()(t,s,ea&&"".concat(s,"-static"),!D&&"show"),onClick:U?ev:void 0,onMouseUp:ep,"data-bs-theme":R,"aria-label":E,"aria-labelledby":k,"aria-describedby":S,children:(0,y.jsx)(N,{...Q,onMouseDown:eg,className:f,contentClassName:j,children:w})})})})});E.displayName="Modal";let V=Object.assign(E,{Body:j,Header:R,Title:S,Footer:w,Dialog:A,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},9537:(e,a,s)=>{"use strict";function t(e,a,...s){if(0==s.length)return e.enums[a];let n=s.pop();return s.reduce((e,a)=>e.nestedMessages[a],e.messages[a]).nestedEnums[n]}s.d(a,{R:()=>t})},9678:(e,a,s)=>{"use strict";s.d(a,{i:()=>l,w:()=>o});var t=s(6788),n=s(8123);let l=(0,t.w)("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),o=(0,n.Z)(l,0)}},e=>{var a=a=>e(e.s=a);e.O(0,[7295,867,6306,8920,9818,9637,4691,2340,1326,1922,6863,8441,1517,7358],()=>a(1103)),_N_E=e.O()}]);