(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1026],{1754:(e,t,a)=>{"use strict";a.d(t,{u:()=>o});var n=a(95155),r=a(28468),s=a(60902);let o=e=>{let{onOk:t,content:a,show:o,onHide:l}=e;return(0,n.jsxs)(r.A,{show:o,onHide:l,centered:!0,children:[(0,n.jsx)(r.A.Body,{children:a}),(0,n.jsxs)(r.A.Footer,{children:[(0,n.jsx)(s.A,{variant:"outline-secondary",onClick:()=>{l()},children:"Cancel"}),(0,n.jsx)(s.A,{variant:"outline-danger",onClick:()=>{t(),l()},children:"OK"})]})]})}},5717:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var n=a(29300),r=a.n(n),s=a(12115),o=a(97390),l=a(95155);let i=s.forwardRef((e,t)=>{let{bsPrefix:a,bg:n="primary",pill:s=!1,text:i,className:d,as:c="span",...h}=e,u=(0,o.oU)(a,"badge");return(0,l.jsx)(c,{ref:t,...h,className:r()(d,u,s&&"rounded-pill",i&&"text-".concat(i),n&&"bg-".concat(n))})});i.displayName="Badge";let d=i},15564:(e,t,a)=>{"use strict";var n=a(49509);Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return f},defaultHead:function(){return u}});let r=a(88229),s=a(6966),o=a(95155),l=s._(a(12115)),i=r._(a(85029)),d=a(42464),c=a(82830),h=a(17544);function u(e){void 0===e&&(e=!1);let t=[(0,o.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function g(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}a(43230);let p=["name","httpEquiv","charSet","itemProp"];function m(e,t){let{inAmpMode:a}=t;return e.reduce(g,[]).reverse().concat(u(a).reverse()).filter(function(){let e=new Set,t=new Set,a=new Set,n={};return r=>{let s=!0,o=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){o=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?s=!1:t.add(r.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(r.props.hasOwnProperty(t))if("charSet"===t)a.has(t)?s=!1:a.add(t);else{let e=r.props[t],a=n[t]||new Set;("name"!==t||!o)&&a.has(e)?s=!1:(a.add(e),n[t]=a)}}}return s}}()).reverse().map((e,t)=>{let r=e.key||t;if(n.env.__NEXT_OPTIMIZE_FONTS&&!a&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,l.default.cloneElement(e,t)}return l.default.cloneElement(e,{key:r})})}let f=function(e){let{children:t}=e,a=(0,l.useContext)(d.AmpStateContext),n=(0,l.useContext)(c.HeadManagerContext);return(0,o.jsx)(i.default,{reduceComponentsToState:m,headManager:n,inAmpMode:(0,h.isInAmpMode)(a),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17544:(e,t)=>{"use strict";function a(e){let{ampFirst:t=!1,hybrid:a=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||a&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return a}})},27755:(e,t,a)=>{e.exports=a(47588)},38092:(e,t,a)=>{Promise.resolve().then(a.bind(a,82437))},42464:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return n}});let n=a(88229)._(a(12115)).default.createContext({})},47588:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let n=a(88229),r=a(95155),s=n._(a(12115)),o=n._(a(15564)),l={400:"Bad Request",404:"This page could not be found",405:"Method Not Allowed",500:"Internal Server Error"};function i(e){let{req:t,res:a,err:n}=e;return{statusCode:a&&a.statusCode?a.statusCode:n?n.statusCode:404,hostname:window.location.hostname}}let d={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{lineHeight:"48px"},h1:{display:"inline-block",margin:"0 20px 0 0",paddingRight:23,fontSize:24,fontWeight:500,verticalAlign:"top"},h2:{fontSize:14,fontWeight:400,lineHeight:"28px"},wrap:{display:"inline-block"}};class c extends s.default.Component{render(){let{statusCode:e,withDarkMode:t=!0}=this.props,a=this.props.title||l[e]||"An unexpected error has occurred";return(0,r.jsxs)("div",{style:d.error,children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:e?e+": "+a:"Application error: a client-side exception has occurred"})}),(0,r.jsxs)("div",{style:d.desc,children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}"+(t?"@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}":"")}}),e?(0,r.jsx)("h1",{className:"next-error-h1",style:d.h1,children:e}):null,(0,r.jsx)("div",{style:d.wrap,children:(0,r.jsxs)("h2",{style:d.h2,children:[this.props.title||e?a:(0,r.jsxs)(r.Fragment,{children:["Application error: a client-side exception has occurred"," ",!!this.props.hostname&&(0,r.jsxs)(r.Fragment,{children:["while loading ",this.props.hostname]})," ","(see the browser console for more information)"]}),"."]})})]})]})}}c.displayName="ErrorPage",c.getInitialProps=i,c.origGetInitialProps=i,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53298:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(29300),r=a.n(n),s=a(12115),o=a(97390),l=a(60902),i=a(95155);let d=()=>void 0,c=s.forwardRef((e,t)=>{let{bsPrefix:a,name:n,className:s,checked:c,type:h,onChange:u,value:g,disabled:p,id:m,inputRef:f,...x}=e;return a=(0,o.oU)(a,"btn-check"),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{className:a,name:n,type:h,value:g,ref:f,autoComplete:"off",checked:!!c,disabled:!!p,onChange:u||d,id:m}),(0,i.jsx)(l.A,{...x,ref:t,className:r()(s,p&&"disabled"),type:void 0,role:void 0,as:"label",htmlFor:m})]})});c.displayName="ToggleButton";let h=c},82437:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var n=a(95155),r=a(20960),s=a(56487),o=a(27755),l=a.n(o),i=a(12115),d=a(69056),c=a(5717),h=a(60902),u=a(76355),g=a(28468),p=a(66449),m=a(53298),f=a(44342),x=a(98054),j=a(1754),y=a(74086),v=a(98508),b=a(92358),w=a(66835),C=a(4415),A=a(88580),_=a(46928);let k=e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(g.A,{show:e.show,onHide:()=>{e.onHide()},centered:!0,children:[(0,n.jsx)(g.A.Header,{closeButton:!0,children:e.tag.tag}),(0,n.jsxs)(g.A.Body,{children:[(0,n.jsxs)(p.A,{className:"mb-3 d-flex",children:[(0,n.jsx)(m.A,{id:"toggle-node",type:"radio",variant:"outline-primary",value:_.mm.node,onChange:()=>{e.tag.type=_.mm.node,e.onChangeTag(e.tag)},checked:e.tag.type===_.mm.node,children:"Node"}),(0,n.jsx)(m.A,{id:"toggle-mirror",type:"radio",variant:"outline-primary",value:_.mm.mirror,onChange:()=>{e.tag.type=_.mm.mirror,e.onChangeTag(e.tag)},checked:e.tag.type===_.mm.mirror,children:"Mirror"})]}),e.new&&(0,n.jsx)(f.A,{label:"Tag",className:"mb-2",children:(0,n.jsx)(x.A.Control,{placeholder:"Tag","aria-label":"Tag","aria-describedby":"basic-addon1",value:e.tag.tag,onChange:t=>{e.tag.tag=t.target.value,e.onChangeTag(e.tag)}})}),e.tag.type==_.mm.mirror?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(S,{data:e.data,value:e.tag.hash,onChangeMirror:t=>{e.tag.hash=t,e.onChangeTag(e.tag)}})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(O,{data:e.nodes,hash:e.tag.hash,onChangeNode:t=>{e.tag.hash=t,e.onChangeTag(e.tag)}})})]}),(0,n.jsxs)(g.A.Footer,{children:[(0,n.jsx)(h.A,{variant:"outline-secondary",onClick:()=>{e.onHide()},children:"Close"}),(0,n.jsx)(h.A,{variant:"outline-primary",onClick:()=>{e.onSave()},children:"Save"})]})]})}),N=(e,t)=>{if(void 0===t||""===e)return"";for(let a in t.groups)for(let n in t.groups[a].nodesV2)if(t.groups[a].nodesV2[n]===e)return a;return""},O=e=>{var t,a;let[r,s]=(0,i.useState)({data:N(e.hash,e.data)});return(0,i.useEffect)(()=>{e.hash&&s({data:N(e.hash,e.data)})},[e.hash,e.data]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.A,{label:"Group",className:"mb-2",children:(0,n.jsx)(b.FX,{emptyChoose:!0,value:r.data,onChange:e=>{s({data:e})},values:Object.keys(e.data?e.data.groups:{}).sort((e,t)=>e<=t?-1:1)})}),(0,n.jsx)(f.A,{label:"Node",children:(0,n.jsx)(b.FX,{emptyChoose:!0,value:e.hash,onChange:t=>{e.onChangeNode(t)},values:Object.entries(e.data&&null!=(a=null==(t=e.data.groups[r.data])?void 0:t.nodesV2)?a:{}).sort((e,t)=>e<=t?-1:1)})})]})},S=e=>(0,n.jsx)(f.A,{label:"Mirror",className:"mb-2",children:(0,n.jsx)(b.FX,{emptyChoose:!0,value:e.value,onChange:t=>{e.onChangeMirror(t)},values:Object.keys(e.data.tags).sort((e,t)=>e<=t?-1:1)})}),P=function(){let e=(0,i.useContext)(w.u),{data:t,error:a,isLoading:o,mutate:g}=(0,v.mp)(A.Tc.method.list),{data:p}=(0,v.mp)(A.rH.method.list),[m,f]=(0,i.useState)({hash:"",show:!1}),[x,b]=(0,i.useState)({show:!1,tag:(0,r.v)(A.hf,{tag:"",hash:"",type:_.mm.node}),new:!0}),[N,O]=(0,i.useState)({show:!1,name:""});if(void 0!==a)return(0,n.jsx)(l(),{statusCode:a.code,title:a.msg});if(o||void 0==t)return(0,n.jsx)(y.A,{});let S=e=>{let{k:t,v:a}=e;return(0,n.jsxs)(d.A.Item,{className:"align-items-center d-flex justify-content-between",style:{border:"0ch",borderBottom:"1px solid #dee2e6"},action:!0,onClick:()=>{b({show:!0,tag:(0,r.v)(A.hf,{tag:t,hash:a.hash[0],type:a.type}),new:!1})},children:[(0,n.jsxs)("div",{children:[t,(0,n.jsx)(c.A,{className:"rounded-pill bg-light text-dark ms-1",children:0===a.hash.length||""===a.hash[0]?(0,n.jsxs)(n.Fragment,{children:["Fallback ",(0,n.jsx)("i",{className:"bi bi-heart-arrow"})," Global"]}):a.type===_.mm.mirror?(0,n.jsxs)(n.Fragment,{children:["Mirror ",(0,n.jsx)("i",{className:"bi bi-arrow-right"})," ",a.hash]}):(0,n.jsxs)(n.Fragment,{children:["Target ",(0,n.jsx)("i",{className:"bi bi-arrow-right"}),(0,n.jsx)("a",{className:"text-truncate",href:"#",onClick:e=>{e.preventDefault(),e.stopPropagation(),f({hash:a.hash[0],show:!0})},children:a.hash})]})})]}),(0,n.jsx)(h.A,{variant:"outline-danger",as:"span",size:"sm",onClick:e=>{e.stopPropagation(),O({show:!0,name:t})},children:(0,n.jsx)("i",{className:"bi-trash"})})]},t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.u,{show:N.show,content:(0,n.jsxs)("p",{children:["Delete tag ",N.name,"?"]}),onHide:()=>O({...N,show:!1}),onOk:()=>{(0,v.kP)(A.Tc.method.remove,(0,r.v)(s.g8,{value:N.name})).then(async t=>{let{error:a}=t;void 0!==a?e.Error("delete tag ".concat(N.name," failed, ").concat(a.code,"| ").concat(a.msg)):(e.Info("delete tag ".concat(N.name," success")),await g()),O({...N,show:!1})})}}),(0,n.jsx)(C.y,{show:m.show,hash:m.hash,onHide:()=>f({...m,show:!1})}),(0,n.jsx)(k,{show:x.show,nodes:p,data:t,tag:x.tag,onChangeTag:e=>b({...x,tag:e}),new:x.new,onHide:()=>b({...x,show:!1}),onSave:()=>{""!==x.tag.tag&&""!==x.tag.hash&&(0,v.kP)(A.Tc.method.save,x.tag).then(async t=>{let{error:a}=t;void 0!==a?e.Error("save tag ".concat(x.tag.tag," failed, ").concat(a.code,"| ").concat(a.msg)):(e.Info("Set tag ".concat(x.tag.tag," to ").concat(x.tag.hash," successful")),await g()),b({...x,show:!1})})}}),(0,n.jsx)(u.A,{className:"mb-3",children:(0,n.jsxs)(d.A,{variant:"flush",children:[Object.entries(t.tags).sort((e,t)=>e<=t?-1:1).map(e=>{let[t,a]=e;return(0,n.jsx)(S,{k:t,v:(0,r.v)(_.xN,a)},t)}),(0,n.jsx)(d.A.Item,{className:"d-sm-flex",children:(0,n.jsxs)(h.A,{variant:"outline-success",className:"flex-grow-1",onClick:()=>b({show:!0,tag:(0,r.v)(A.hf,{tag:"new tag",hash:"",type:_.mm.node}),new:!0}),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New"]})})]})})]})}},85029:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=a(12115),r=n.useLayoutEffect,s=n.useEffect;function o(e){let{headManager:t,reduceComponentsToState:a}=e;function o(){if(t&&t.mountedInstances){let r=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(a(r,e))}}return r(()=>{var a;return null==t||null==(a=t.mountedInstances)||a.add(e.children),()=>{var a;null==t||null==(a=t.mountedInstances)||a.delete(e.children)}}),r(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}}},e=>{var t=t=>e(e.s=t);e.O(0,[6077,8865,601,3779,5453,2362,2765,7581,1725,4459,3874,3697,9070,4415,8441,1684,7358],()=>t(38092)),_N_E=e.O()}]);