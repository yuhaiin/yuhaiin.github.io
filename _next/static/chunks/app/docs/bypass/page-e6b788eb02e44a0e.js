(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{1103:(e,s,l)=>{Promise.resolve().then(l.bind(l,5297))},5297:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>w});var a=l(5155),n=l(4995),r=l(2115),t=l(2981),o=l(2963),c=l(6180),i=l(6121),d=l(3667),u=l(7204),h=l(4805),p=l(2859),x=l(3577);(0,x.v)(h.Qn,{tcp:h.Mq.bypass,udp:h.Mq.bypass,bypassFile:"yuhaiin.conf",customRuleV3:[]});let m=r.memo(e=>{let s=(0,x.v)(h.eT,{hostname:["www.example.com"],mode:h.Mq.proxy,tag:"",resolveStrategy:h.pI.default}),l=(0,x.v)(h.Nm,{name:"my rule",enabled:!1,object:{case:"file",value:(0,x.v)(h.Uu,{})}}),n=s=>{s(e.bypass),e.onChange(e.bypass)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.A,{className:"mb-3",children:(0,a.jsxs)(t.A.Body,{children:[(0,a.jsx)(g,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>n(s=>s.tcp=e)}),(0,a.jsx)(g,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>n(s=>s.udp=e)}),(0,a.jsx)(p.$d,{label:"Resolve Locally",checked:e.bypass.resolveLocally,onChange:()=>n(e=>e.resolveLocally=!e.resolveLocally)}),(0,a.jsx)(p.$d,{label:"Udp proxy Fqdn",checked:e.bypass.udpProxyFqdn===h.f5.skip_resolve,onChange:()=>n(e=>e.udpProxyFqdn=e.udpProxyFqdn===h.f5.skip_resolve?h.f5.resolve:h.f5.skip_resolve)})]})}),e.bypass.remoteRules.map((e,s)=>(0,a.jsx)(u.mc,{title:e.name,onClose:()=>n(e=>e.remoteRules.splice(s,1)),children:(0,a.jsx)(j,{config:e,onChange:e=>n(l=>l.remoteRules[s]=e)})},"remote_rules"+s)),(0,a.jsx)("div",{className:"d-flex mb-2",children:(0,a.jsxs)(o.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>n(e=>e.remoteRules.push(l)),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Remote Rule"]})}),(0,a.jsx)("hr",{}),e.bypass.customRuleV3.map((e,s)=>(0,a.jsx)(u.mc,{title:""!==e.tag?e.tag:h.Mq[e.mode],onClose:()=>n(e=>e.customRuleV3.splice(s,1)),children:(0,a.jsx)(v,{config:e,onChange:e=>n(l=>l.customRuleV3[s]=e)})},"rule"+s)),(0,a.jsx)("div",{className:"d-flex mb-2",children:(0,a.jsxs)(o.A,{className:"flex-grow-1",variant:"outline-success",onClick:()=>n(e=>e.customRuleV3.push(s)),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})]})}),v=e=>{let s=s=>{s(e.config),e.onChange(e.config)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>s(s=>s.mode=e)}),(0,a.jsx)(u.a9,{label:"Tag",value:e.config.tag,onChange:e=>s(s=>s.tag=e)}),(0,a.jsx)(b,{label:"Resolve Strategy",value:e.config.resolveStrategy,onChange:e=>s(s=>s.resolveStrategy=e)}),(0,a.jsx)(f,{label:"UDP proxy Fqdn",value:e.config.udpProxyFqdnStrategy,onChange:e=>s(s=>s.udpProxyFqdnStrategy=e)}),(0,a.jsx)(u.e9,{title:"IP/DOMAIN",data:e.config.hostname,onChange:e=>s(s=>{e&&(s.hostname=e)}),errorMsgs:e.config.errorMsgs})]})},j=e=>{let s=s=>{s(e.config),e.onChange(e.config)},l=()=>{switch(e.config.object.case){case"file":return"file";case"http":return"http";default:return""}},n=(e,s)=>{switch(e.object.case){case"file":e.object.value.path=s;break;case"http":e.object.value.url=s}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$d,{label:"Enabled",checked:e.config.enabled,onChange:()=>s(e=>e.enabled=!e.enabled)}),(0,a.jsx)(u.a9,{label:"Name",value:e.config.name,onChange:e=>s(s=>s.name=e)}),(0,a.jsxs)(c.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(c.A.Label,{column:!0,sm:2,children:"Type"}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(c.A.Select,{value:l(),onChange:e=>s(s=>{if(l()!=e.target.value)switch(e.target.value){case"file":s.object={case:"file",value:(0,x.v)(h.Uu,{})};break;case"http":s.object={case:"http",value:(0,x.v)(h.ie,{})}}}),children:[(0,a.jsx)("option",{value:"file",children:"file"}),(0,a.jsx)("option",{value:"http",children:"http"})]})})]}),(0,a.jsx)(u.a9,{label:"Value",value:(()=>{switch(e.config.object.case){case"file":return e.config.object.value.path;case"http":return e.config.object.value.url;default:return""}})(),errorMsg:e.config.errorMsg,onChange:e=>s(s=>n(s,e))})]})};function g(e){return(0,a.jsxs)(c.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(c.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(c.A.Select,{value:h.Mq[e.value],onChange:s=>e.onChange(h.Mq[s.target.value]),children:[e.network&&(0,a.jsx)("option",{value:h.Mq[h.Mq.bypass],children:"BYPASS"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.direct],children:"DIRECT"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.proxy],children:"PROXY"}),(0,a.jsx)("option",{value:h.Mq[h.Mq.block],children:"BLOCK"})]})})]})}function f(e){return(0,a.jsxs)(c.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(c.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(c.A.Select,{value:h.f5[e.value],onChange:s=>e.onChange(h.f5[s.target.value]),children:[(0,a.jsx)("option",{value:h.f5[h.f5.udp_proxy_fqdn_strategy_default],children:"Global"}),(0,a.jsx)("option",{value:h.f5[h.f5.resolve],children:"Resolve"}),(0,a.jsx)("option",{value:h.f5[h.f5.skip_resolve],children:"Skip"})]})})]})}function b(e){return(0,a.jsxs)(c.A.Group,{as:i.A,className:"mb-3",children:[(0,a.jsx)(c.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(d.A,{sm:10,children:(0,a.jsxs)(c.A.Select,{value:h.pI[e.value],onChange:s=>e.onChange(h.pI[s.target.value]),children:[(0,a.jsx)("option",{value:h.pI[h.pI.default],children:"default"}),(0,a.jsx)("option",{value:h.pI[h.pI.prefer_ipv4],children:"prefer_ipv4"}),(0,a.jsx)("option",{value:h.pI[h.pI.only_ipv4],children:"only_ipv4"}),(0,a.jsx)("option",{value:h.pI[h.pI.prefer_ipv6],children:"prefer_ipv6"}),(0,a.jsx)("option",{value:h.pI[h.pI.only_ipv6],children:"only_ipv6"})]})})]})}var y=l(8927),A=l(9169),C=l(950),N=l(148),k=l(3339),_=l(4216),q=l(6863);let w=function(){let e=(0,r.useContext)(N.u),[s,l]=(0,r.useState)(!1),[t,c]=(0,r.useState)(!1),{data:i,error:d,isLoading:u,mutate:p}=(0,n.Ay)("/bypass",(0,y.AD)(q.XH.method.load),{revalidateOnFocus:!1});return d?(0,a.jsx)(A.A,{code:d.code,children:d.msg}):u||!i?(0,a.jsx)(A.A,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{bypass:(0,C.o)(h.Qn,i),onChange:e=>{p(e,!1)}}),(0,a.jsx)("hr",{}),(0,a.jsxs)(k.A,{gap:1,direction:"horizontal",children:[(0,a.jsxs)(o.A,{variant:"outline-primary",disabled:s,onClick:()=>{l(!0),(0,y.kP)(q.XH.method.save,"/bypass","PATCH",i).then(async s=>{let{error:a}=s;void 0!==a?e.Error("save config failed, ".concat(a.code,"| ").concat(a.msg)):(e.Info("Save Successfully"),p()),l(!1)})},children:["Save",s&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(_.A,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,a.jsxs)(o.A,{variant:"outline-primary",disabled:t,onClick:()=>{c(!0),(0,y.kP)(q.XH.method.reload,"/bypass/reload","POST").then(async s=>{let{error:l}=s;void 0!==l?e.Error("reload failed, ".concat(l.code,"| ").concat(l.msg)):(e.Info("Reload Successfully"),p()),c(!1)})},children:["Refresh Now",t&&(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(_.A,{size:"sm",animation:"border",variant:"primary"})]})]})]})]})}},9169:(e,s,l)=>{"use strict";l.d(s,{A:()=>o});var a=l(5155),n=l(4216),r=l(5554),t=l.n(r);let o=function(e){return(0,a.jsxs)("div",{className:"z-1090 d-flex flex-column justify-content-center align-items-center",style:{height:"100px"},children:[void 0!==e.children&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(t(),{className:"p2",statusCode:void 0!==e.code?e.code:500,title:e.children})}),(0,a.jsx)("div",{className:"p2",children:(0,a.jsx)(n.A,{})})]})}},2859:(e,s,l)=>{"use strict";l.d(s,{$d:()=>o});var a=l(5155);l(2115);var n=l(6180),r=l(6121),t=l(3667);let o=e=>(0,a.jsxs)(n.A.Group,{as:r.A,className:"mb-2",children:[(0,a.jsx)(n.A.Label,{column:!0,sm:2,children:e.label}),(0,a.jsx)(t.A,{sm:10,className:"d-flex align-items-center",children:(0,a.jsx)(n.A.Check,{className:"d-flex align-items-center",type:"switch",checked:e.checked,onChange:()=>e.onChange()})})]})},148:(e,s,l)=>{"use strict";l.d(s,{u:()=>o,y:()=>c});var a=l(5155),n=l(2115),r=l(1757),t=l(491);let o=(0,n.createContext)({Info:e=>{},Error:e=>{}}),c=e=>{let{children:s}=e,[l,c]=(0,n.useState)({value:{},index:0}),i=(e,s)=>c(l=>({value:{...l.value,[l.index]:{text:e,type:s}},index:l.index+1}));return(0,a.jsxs)(o.Provider,{value:{Info:e=>{console.log(e),i(e,"success")},Error:e=>{console.error(e),i(e,"danger")}},children:[(0,a.jsx)(r.A,{className:"p-3",position:"top-center",containerPosition:"fixed",style:{zIndex:999999},children:Object.entries(l.value).map(e=>{let[s,n]=e;return(0,a.jsxs)(t.A,{role:"alert","aria-live":"assertive",show:!0,bg:n.type,onClose:()=>{let e=l.value;delete e[s],c({...l,value:e})},"aria-atomic":"true",delay:4e3,autohide:!0,animation:!0,children:[(0,a.jsxs)(t.A.Header,{children:[(0,a.jsx)("strong",{className:"me-auto",children:"Notification"}),(0,a.jsx)("small",{className:"text-muted",children:"just now"})]}),(0,a.jsx)(t.A.Body,{className:"text-center",children:n.text})]},"toast"+s)})}),s]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[295,995,515,920,637,392,306,863,441,517,358],()=>s(1103)),_N_E=e.O()}]);