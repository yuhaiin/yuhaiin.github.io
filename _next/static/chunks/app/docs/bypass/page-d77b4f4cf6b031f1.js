(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{2824:function(e,l,n){Promise.resolve().then(n.bind(n,9640))},9640:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return Y}});var s=n(7437),a=n(1617),c=n(2265),o=n(7185),t=n(358),r=n(6712),i=n(2808),u=n(7420),d=n(8727),h=n(1170),p=n(6601),g=n(8537);(0,g.U)(h.jS,{tcp:h.xJ.bypass,udp:h.xJ.bypass,bypassFile:"yuhaiin.conf",customRuleV3:[]});let m=c.memo(e=>{let l=(0,g.U)(h.sj,{hostname:["www.example.com"],mode:h.xJ.proxy,tag:"",resolveStrategy:h.AQ.default}),n=(0,g.U)(h.R3,{name:"my rule",enabled:!1,object:{case:"file",value:(0,g.U)(h.aq,{})}}),a=l=>{l(e.bypass),e.onChange(e.bypass)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"mb-3",children:(0,s.jsxs)(o.Z.Body,{children:[(0,s.jsx)(f,{label:"TCP",network:!0,value:e.bypass.tcp,onChange:e=>a(l=>l.tcp=e)}),(0,s.jsx)(f,{label:"UDP",network:!0,value:e.bypass.udp,onChange:e=>a(l=>l.udp=e)}),(0,s.jsx)(p.Jg,{label:"Resolve Locally",checked:e.bypass.resolveLocally,onChange:()=>a(e=>e.resolveLocally=!e.resolveLocally)}),(0,s.jsx)(p.Jg,{label:"Udp proxy Fqdn",checked:e.bypass.udpProxyFqdn===h.q6.skip_resolve,onChange:()=>a(e=>e.udpProxyFqdn=e.udpProxyFqdn===h.q6.skip_resolve?h.q6.resolve:h.q6.skip_resolve)})]})}),(0,s.jsxs)(t.Z,{className:"row-cols-sm-1 row-cols-lg-2 justify-content-md-center",children:[e.bypass.remoteRules.map((e,l)=>(0,s.jsx)(r.Z,{children:(0,s.jsx)(d.W2,{title:e.name,onClose:()=>a(e=>e.remoteRules.splice(l,1)),children:(0,s.jsx)(b,{config:e,onChange:e=>a(n=>n.remoteRules[l]=e)})},"remote_rules"+l)})),(0,s.jsx)(r.Z,{children:(0,s.jsx)("div",{className:"d-flex mb-2",children:(0,s.jsxs)(i.Z,{className:"flex-grow-1",variant:"outline-success",onClick:()=>a(e=>e.remoteRules.push(n)),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Remote Rule"]})})})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)(t.Z,{className:"row-cols-sm-1 row-cols-lg-2 justify-content-md-center",children:[e.bypass.customRuleV3.map((e,l)=>(0,s.jsx)(r.Z,{children:(0,s.jsx)(d.W2,{title:""!==e.tag?e.tag:h.xJ[e.mode],onClose:()=>a(e=>e.customRuleV3.splice(l,1)),children:(0,s.jsx)(x,{config:e,onChange:e=>a(n=>n.customRuleV3[l]=e)})},"rule"+l)})),(0,s.jsx)(r.Z,{children:(0,s.jsx)("div",{className:"d-flex mb-2",children:(0,s.jsxs)(i.Z,{className:"flex-grow-1",variant:"outline-success",onClick:()=>a(e=>e.customRuleV3.push(l)),children:[(0,s.jsx)("i",{className:"bi bi-plus-lg mb-2"}),"New Rule"]})})})]})]})}),x=e=>{let l=l=>{l(e.config),e.onChange(e.config)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f,{label:"Mode",network:!1,value:e.config.mode,onChange:e=>l(l=>l.mode=e)}),(0,s.jsx)(d.Vf,{label:"Tag",value:e.config.tag,onChange:e=>l(l=>l.tag=e)}),(0,s.jsx)(j,{label:"Resolve Strategy",value:e.config.resolveStrategy,onChange:e=>l(l=>l.resolveStrategy=e)}),(0,s.jsx)(v,{label:"UDP proxy Fqdn",value:e.config.udpProxyFqdnStrategy,onChange:e=>l(l=>l.udpProxyFqdnStrategy=e)}),(0,s.jsx)(d.yh,{title:"IP/DOMAIN",data:e.config.hostname,onChange:e=>l(l=>{e&&(l.hostname=e)}),errorMsgs:e.config.errorMsgs})]})},b=e=>{let l=l=>{l(e.config),e.onChange(e.config)},n=()=>{switch(e.config.object.case){case"file":return"file";case"http":return"http";default:return""}},a=(e,l)=>{switch(e.object.case){case"file":e.object.value.path=l;break;case"http":e.object.value.url=l}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Jg,{label:"Enabled",checked:e.config.enabled,onChange:()=>l(e=>e.enabled=!e.enabled)}),(0,s.jsx)(d.Vf,{label:"Name",value:e.config.name,onChange:e=>l(l=>l.name=e)}),(0,s.jsxs)(u.Z.Group,{as:t.Z,className:"mb-3",children:[(0,s.jsx)(u.Z.Label,{column:!0,sm:2,children:"Type"}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsxs)(u.Z.Select,{value:n(),onChange:e=>l(l=>{if(n()!=e.target.value)switch(e.target.value){case"file":l.object={case:"file",value:(0,g.U)(h.aq,{})};break;case"http":l.object={case:"http",value:(0,g.U)(h.c0,{})}}}),children:[(0,s.jsx)("option",{value:"file",children:"file"}),(0,s.jsx)("option",{value:"http",children:"http"})]})})]}),(0,s.jsx)(d.Vf,{label:"Value",value:(()=>{switch(e.config.object.case){case"file":return e.config.object.value.path;case"http":return e.config.object.value.url;default:return""}})(),errorMsg:e.config.errorMsg,onChange:e=>l(l=>a(l,e))})]})};function f(e){return(0,s.jsxs)(u.Z.Group,{as:t.Z,className:"mb-3",children:[(0,s.jsx)(u.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsxs)(u.Z.Select,{value:h.xJ[e.value],onChange:l=>e.onChange(h.xJ[l.target.value]),children:[e.network&&(0,s.jsx)("option",{value:h.xJ[h.xJ.bypass],children:"BYPASS"}),(0,s.jsx)("option",{value:h.xJ[h.xJ.direct],children:"DIRECT"}),(0,s.jsx)("option",{value:h.xJ[h.xJ.proxy],children:"PROXY"}),(0,s.jsx)("option",{value:h.xJ[h.xJ.block],children:"BLOCK"})]})})]})}function v(e){return(0,s.jsxs)(u.Z.Group,{as:t.Z,className:"mb-3",children:[(0,s.jsx)(u.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsxs)(u.Z.Select,{value:h.q6[e.value],onChange:l=>e.onChange(h.q6[l.target.value]),children:[(0,s.jsx)("option",{value:h.q6[h.q6.udp_proxy_fqdn_strategy_default],children:"Global"}),(0,s.jsx)("option",{value:h.q6[h.q6.resolve],children:"Resolve"}),(0,s.jsx)("option",{value:h.q6[h.q6.skip_resolve],children:"Skip"})]})})]})}function j(e){return(0,s.jsxs)(u.Z.Group,{as:t.Z,className:"mb-3",children:[(0,s.jsx)(u.Z.Label,{column:!0,sm:2,children:e.label}),(0,s.jsx)(r.Z,{sm:10,children:(0,s.jsxs)(u.Z.Select,{value:h.AQ[e.value],onChange:l=>e.onChange(h.AQ[l.target.value]),children:[(0,s.jsx)("option",{value:h.AQ[h.AQ.default],children:"default"}),(0,s.jsx)("option",{value:h.AQ[h.AQ.prefer_ipv4],children:"prefer_ipv4"}),(0,s.jsx)("option",{value:h.AQ[h.AQ.only_ipv4],children:"only_ipv4"}),(0,s.jsx)("option",{value:h.AQ[h.AQ.prefer_ipv6],children:"prefer_ipv6"}),(0,s.jsx)("option",{value:h.AQ[h.AQ.only_ipv6],children:"only_ipv6"})]})})]})}var Z=n(879),y=n(716),A=n(4050),C=n(6878),R=n(1159),X=n(6800),J=n.n(X),V=n(2574);let G=c.forwardRef((e,l)=>{let{as:n="div",bsPrefix:a,className:c,direction:o,gap:t,...r}=e;a=(0,V.vE)(a,"horizontal"===o?"hstack":"vstack");let i=(0,V.pi)(),u=(0,V.zG)();return(0,s.jsx)(n,{...r,ref:l,className:J()(c,a,...function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.Hz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V.cs,s=[];return Object.entries(e).forEach(e=>{let[a,c]=e;null!=c&&("object"==typeof c?l.forEach(e=>{let l=c[e];null!=l&&s.push("".concat(a).concat(e!==n?"-".concat(e):"","-").concat(l))}):s.push("".concat(a,"-").concat(c)))}),s}({gap:t},i,u))})});G.displayName="Stack";var S=n(2514),Y=function(){let e=(0,c.useContext)(R.P),[l,n]=(0,c.useState)(!1),[o,t]=(0,c.useState)(!1),{data:r,error:u,isLoading:d,mutate:p}=(0,a.ZP)("/bypass",(0,Z.D4)(h.jS),{revalidateOnFocus:!1});return u?(0,s.jsx)(y.Z,{code:u.code,children:u.msg}):d||!r?(0,s.jsx)(y.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{bypass:(0,A.d)(h.jS,r),onChange:e=>{p(e,!1)}}),(0,s.jsxs)(G,{gap:1,direction:"horizontal",children:[(0,s.jsxs)(i.Z,{variant:"outline-primary",disabled:l,onClick:()=>{n(!0),(0,Z.Uo)("/bypass",{body:(0,C.O)(h.jS,r),method:"PATCH"}).then(async l=>{let{error:s}=l;void 0!==s?e.Error("save config failed, ".concat(s.code,"| ").concat(await s.msg)):(e.Info("Save Successfully"),p()),n(!1)})},children:["Save",l&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(S.Z,{size:"sm",animation:"border",variant:"primary"})]})]}),(0,s.jsxs)(i.Z,{variant:"outline-primary",disabled:o,onClick:()=>{t(!0),(0,Z.Uo)("/bypass/reload",{method:"POST"}).then(async l=>{let{error:n}=l;void 0!==n?e.Error("reload failed, ".concat(n.code,"| ").concat(await n.msg)):(e.Info("Reload Successfully"),p()),t(!1)})},children:["Refresh Now",o&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(S.Z,{size:"sm",animation:"border",variant:"primary"})]})]})]})]})}},1170:function(e,l,n){"use strict";n.d(l,{AQ:function(){return t},GZ:function(){return d},R3:function(){return g},aq:function(){return m},c0:function(){return x},jS:function(){return h},q6:function(){return r},sj:function(){return p},xJ:function(){return o}});var s,a,c,o,t,r,i=n(200),u=n(9320);let d=(0,i.l)("Chpjb25maWcvYnlwYXNzL2J5cGFzcy5wcm90bxIOeXVoYWlpbi5ieXBhc3Mi9QIKBmNvbmZpZxIhCgN0Y3AYAyABKA4yFC55dWhhaWluLmJ5cGFzcy5tb2RlEiEKA3VkcBgEIAEoDjIULnl1aGFpaW4uYnlwYXNzLm1vZGUSJAoLYnlwYXNzX2ZpbGUYAiABKAlCAhgBUgtieXBhc3NfZmlsZRJPCg51ZHBfcHJveHlfZnFkbhgGIAEoDjInLnl1aGFpaW4uYnlwYXNzLnVkcF9wcm94eV9mcWRuX3N0cmF0ZWd5Ug51ZHBfcHJveHlfZnFkbhJDCg5jdXN0b21fcnVsZV92MxgHIAMoCzIbLnl1aGFpaW4uYnlwYXNzLm1vZGVfY29uZmlnUg5jdXN0b21fcnVsZV92MxI/CgxyZW1vdGVfcnVsZXMYCCADKAsyGy55dWhhaWluLmJ5cGFzcy5yZW1vdGVfcnVsZVIMcmVtb3RlX3J1bGVzEigKD3Jlc29sdmVfbG9jYWxseRgJIAEoCFIPcmVzb2x2ZV9sb2NhbGx5IpQDCgttb2RlX2NvbmZpZxIiCgRtb2RlGAEgASgOMhQueXVoYWlpbi5ieXBhc3MubW9kZRILCgN0YWcYAiABKAkSEAoIaG9zdG5hbWUYAyADKAkSTAoQcmVzb2x2ZV9zdHJhdGVneRgEIAEoDjIgLnl1aGFpaW4uYnlwYXNzLnJlc29sdmVfc3RyYXRlZ3lSEHJlc29sdmVfc3RyYXRlZ3kSYQoXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kYBiABKA4yJy55dWhhaWluLmJ5cGFzcy51ZHBfcHJveHlfZnFkbl9zdHJhdGVneVIXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kSSQoKZXJyb3JfbXNncxgHIAMoCzIqLnl1aGFpaW4uYnlwYXNzLm1vZGVfY29uZmlnLkVycm9yTXNnc0VudHJ5UgllcnJvcl9tc2caMAoORXJyb3JNc2dzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4AUoECAUQBlIOdWRwX3Byb3h5X2ZxZG4i+QEKC3JlbW90ZV9ydWxlEg8KB2VuYWJsZWQYASABKAgSDAoEbmFtZRgCIAEoCRIwCgRmaWxlGAMgASgLMiAueXVoYWlpbi5ieXBhc3MucmVtb3RlX3J1bGVfZmlsZUgAEjAKBGh0dHAYBCABKAsyIC55dWhhaWluLmJ5cGFzcy5yZW1vdGVfcnVsZV9odHRwSAASHAoJZXJyb3JfbXNnGAUgASgJUgllcnJvcl9tc2cSPwoMZGVmYXVsdF9tb2RlGAYgASgLMhsueXVoYWlpbi5ieXBhc3MubW9kZV9jb25maWdSDGRlZmF1bHRfbW9kZUIICgZvYmplY3QiIAoQcmVtb3RlX3J1bGVfZmlsZRIMCgRwYXRoGAEgASgJIi8KEHJlbW90ZV9ydWxlX2h0dHASCwoDdXJsGAEgASgJEg4KBm1ldGhvZBgCIAEoCSo0CgRtb2RlEgoKBmJ5cGFzcxAAEgoKBmRpcmVjdBABEgkKBXByb3h5EAISCQoFYmxvY2sQAypfChByZXNvbHZlX3N0cmF0ZWd5EgsKB2RlZmF1bHQQABIPCgtwcmVmZXJfaXB2NBABEg0KCW9ubHlfaXB2NBACEg8KC3ByZWZlcl9pcHY2EAMSDQoJb25seV9pcHY2EAQqXQoXdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3kSIwofdWRwX3Byb3h5X2ZxZG5fc3RyYXRlZ3lfZGVmYXVsdBAAEgsKB3Jlc29sdmUQARIQCgxza2lwX3Jlc29sdmUQAkI3WjVnaXRodWIuY29tL0FzdXRvcnVmYS95dWhhaWluL3BrZy9wcm90b3MvY29uZmlnL2J5cGFzc2IGcHJvdG8z"),h=(0,u.L)(d,0),p=(0,u.L)(d,1),g=(0,u.L)(d,2),m=(0,u.L)(d,3),x=(0,u.L)(d,4);(s=o||(o={}))[s.bypass=0]="bypass",s[s.direct=1]="direct",s[s.proxy=2]="proxy",s[s.block=3]="block",(a=t||(t={}))[a.default=0]="default",a[a.prefer_ipv4=1]="prefer_ipv4",a[a.only_ipv4=2]="only_ipv4",a[a.prefer_ipv6=3]="prefer_ipv6",a[a.only_ipv6=4]="only_ipv6",(c=r||(r={}))[c.udp_proxy_fqdn_strategy_default=0]="udp_proxy_fqdn_strategy_default",c[c.resolve=1]="resolve",c[c.skip_resolve=2]="skip_resolve"},2312:function(e,l,n){"use strict";n.d(l,{Z:function(){return h}});var s=n(6800),a=n.n(s),c=n(2265),o=n(2574),t=n(8297),r=n(2657),i=n(7437);let u=c.forwardRef((e,l)=>{let{className:n,bsPrefix:s,as:c="span",...t}=e;return s=(0,o.vE)(s,"input-group-text"),(0,i.jsx)(c,{ref:l,className:a()(n,s),...t})});u.displayName="InputGroupText";let d=c.forwardRef((e,l)=>{let{bsPrefix:n,size:s,hasValidation:t,className:u,as:d="div",...h}=e;n=(0,o.vE)(n,"input-group");let p=(0,c.useMemo)(()=>({}),[]);return(0,i.jsx)(r.Z.Provider,{value:p,children:(0,i.jsx)(d,{ref:l,...h,className:a()(u,n,s&&"".concat(n,"-").concat(s),t&&"has-validation")})})});d.displayName="InputGroup";var h=Object.assign(d,{Text:u,Radio:e=>(0,i.jsx)(u,{children:(0,i.jsx)(t.Z,{type:"radio",...e})}),Checkbox:e=>(0,i.jsx)(u,{children:(0,i.jsx)(t.Z,{type:"checkbox",...e})})})}},function(e){e.O(0,[986,256,466,262,364,100,971,23,744],function(){return e(e.s=2824)}),_N_E=e.O()}]);