(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},6242,e=>{"use strict";var t=e.i(43476),n=e.i(932),r=e.i(45535),a=e.i(5260);e.s(["ConfirmModal",0,e=>{let o,s,i,l,c,d=(0,n.c)(15),{onOk:u,content:h,show:m,onHide:p}=e;return d[0]!==h?(o=(0,t.jsx)(a.Modal.Body,{children:h}),d[0]=h,d[1]=o):o=d[1],d[2]!==p?(s=(0,t.jsx)(r.Button,{variant:"outline-secondary",onClick:()=>{p()},children:"Cancel"}),d[2]=p,d[3]=s):s=d[3],d[4]!==p||d[5]!==u?(i=(0,t.jsx)(r.Button,{variant:"outline-danger",onClick:()=>{u(),p()},children:"OK"}),d[4]=p,d[5]=u,d[6]=i):i=d[6],d[7]!==s||d[8]!==i?(l=(0,t.jsxs)(a.Modal.Footer,{children:[s,i]}),d[7]=s,d[8]=i,d[9]=l):l=d[9],d[10]!==p||d[11]!==m||d[12]!==o||d[13]!==l?(c=(0,t.jsxs)(a.Modal,{show:m,onHide:p,centered:!0,children:[o,l]}),d[10]=p,d[11]=m,d[12]=o,d[13]=l,d[14]=c):c=d[14],c}])},18818,e=>{"use strict";var t=e.i(7670),n=e.i(71645),r=e.i(36333),a=e.i(43476);let o=n.forwardRef(({bsPrefix:e,bg:n="primary",pill:o=!1,text:s,className:i,as:l="span",...c},d)=>{let u=(0,r.useBootstrapPrefix)(e,"badge");return(0,a.jsx)(l,{ref:d,...c,className:(0,t.default)(i,u,o&&"rounded-pill",s&&`text-${s}`,n&&`bg-${n}`)})});o.displayName="Badge",e.s(["Badge",0,o],18818)},98879,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});let r=e.r(71645),a="u"<typeof window,o=a?()=>{}:r.useLayoutEffect,s=a?()=>{}:r.useEffect;function i(e){let{headManager:t,reduceComponentsToState:n}=e;function i(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(n(e))}}return a&&(t?.mountedInstances?.add(e.children),i()),o(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),o(()=>(t&&(t._pendingUpdate=i),()=>{t&&(t._pendingUpdate=i)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={default:function(){return f},defaultHead:function(){return u}};for(var a in r)Object.defineProperty(n,a,{enumerable:!0,get:r[a]});let o=e.r(55682),s=e.r(90809),i=e.r(43476),l=s._(e.r(71645)),c=o._(e.r(98879)),d=e.r(42732);function u(){return[(0,i.jsx)("meta",{charSet:"utf-8"},"charset"),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let m=["name","httpEquiv","charSet","itemProp"];function p(e){let t,n,r,a;return e.reduce(h,[]).reverse().concat(u().reverse()).filter((t=new Set,n=new Set,r=new Set,a={},e=>{let o=!0,s=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){s=!0;let n=e.key.slice(e.key.indexOf("$")+1);t.has(n)?o=!1:t.add(n)}switch(e.type){case"title":case"base":n.has(e.type)?o=!1:n.add(e.type);break;case"meta":for(let t=0,n=m.length;t<n;t++){let n=m[t];if(e.props.hasOwnProperty(n))if("charSet"===n)r.has(n)?o=!1:r.add(n);else{let t=e.props[n],r=a[n]||new Set;("name"!==n||!s)&&r.has(t)?o=!1:(r.add(t),a[n]=r)}}}return o})).reverse().map((e,t)=>{let n=e.key||t;return l.default.cloneElement(e,{key:n})})}let f=function({children:e}){let t=(0,l.useContext)(d.HeadManagerContext);return(0,i.jsx)(c.default,{reduceComponentsToState:p,headManager:t,children:e})};("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},45760,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={NEXT_REQUEST_META:function(){return o},addRequestMeta:function(){return l},getRequestMeta:function(){return s},removeRequestMeta:function(){return c},setRequestMeta:function(){return i}};for(var a in r)Object.defineProperty(n,a,{enumerable:!0,get:r[a]});let o=Symbol.for("NextInternalRequestMeta");function s(e,t){let n=e[o]||{};return"string"==typeof t?n[t]:n}function i(e,t){return e[o]=t,t}function l(e,t,n){let r=s(e);return r[t]=n,i(e,r)}function c(e,t){let n=s(e);return delete n[t],i(e,n)}},50691,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return p}});let r=e.r(55682),a=e.r(43476),o=r._(e.r(71645)),s=r._(e.r(25633)),i={400:"Bad Request",404:"This page could not be found",405:"Method Not Allowed",500:"Internal Server Error"};function l({req:t,res:n,err:r}){let a,o=n&&n.statusCode?n.statusCode:r?r.statusCode:404;if("u">typeof window)a=window.location.hostname;else if(t){let{getRequestMeta:n}=e.r(45760),r=n(t,"initURL");r&&(a=new URL(r).hostname)}return{statusCode:o,hostname:a}}let c={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},d={lineHeight:"48px"},u={display:"inline-block",margin:"0 20px 0 0",paddingRight:23,fontSize:24,fontWeight:500,verticalAlign:"top"},h={fontSize:14,fontWeight:400,lineHeight:"28px"},m={display:"inline-block"};class p extends o.default.Component{static{this.displayName="ErrorPage"}static{this.getInitialProps=l}static{this.origGetInitialProps=l}render(){let{statusCode:e,withDarkMode:t=!0}=this.props,n=this.props.title||i[e]||"An unexpected error has occurred";return(0,a.jsxs)("div",{style:c,children:[(0,a.jsx)(s.default,{children:(0,a.jsx)("title",{children:e?`${e}: ${n}`:"Application error: a client-side exception has occurred"})}),(0,a.jsxs)("div",{style:d,children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:`body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}${t?"@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}":""}`}}),e?(0,a.jsx)("h1",{className:"next-error-h1",style:u,children:e}):null,(0,a.jsx)("div",{style:m,children:(0,a.jsxs)("h2",{style:h,children:[this.props.title||e?n:(0,a.jsxs)(a.Fragment,{children:["Application error: a client-side exception has occurred"," ",!!this.props.hostname&&(0,a.jsxs)(a.Fragment,{children:["while loading ",this.props.hostname]})," ","(see the browser console for more information)"]}),"."]})})]})]})}}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},78438,(e,t,n)=>{t.exports=e.r(50691)},5577,e=>{"use strict";var t=e.i(37116);e.s(["FloatingLabel",()=>t.default])},98768,e=>{"use strict";var t=e.i(43476),n=e.i(932),r=e.i(91287),a=e.i(30223),o=e.i(95901),s=e.i(78438),i=e.i(71645),l=e.i(18818),c=e.i(45535),d=e.i(7495),u=e.i(46219),h=e.i(48323),m=e.i(5577),p=e.i(78817),f=e.i(42716),b=e.i(19430),g=e.i(5260),x=e.i(36621),y=e.i(6242),j=e.i(2893),v=e.i(39848),S=e.i(31786),w=e.i(41703),C=e.i(81362);function _(e){let a,o,s,l,u,f,b,x,y,j,_,P,M,N,k,F,O,B,E,I,A,R,U,L,T,H,$,q=(0,n.c)(77),{show:G,isEdit:D,onHide:z,item:W,configName:Y,nodes:K,mutatePub:Q}=e;q[0]!==W?(a=W?(0,r.create)(C.PublishSchema,W):(0,r.create)(C.PublishSchema,{name:"",path:"",password:"",points:[],address:window.location.host,insecure:"https:"!==window.location.protocol}),q[0]=W,q[1]=a):a=q[1];let[V,X]=(0,i.useState)(a),[J,Z]=(0,i.useState)(Y||"");q[2]!==W?.points?(o=W?.points||[],q[2]=W?.points,q[3]=o):o=q[3];let[ee,et]=(0,i.useState)(o),en=(0,i.useContext)(S.GlobalToastContext);q[4]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{et(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},q[4]=s):s=q[4];let er=s;q[5]!==J||q[6]!==en||q[7]!==Q||q[8]!==V||q[9]!==z||q[10]!==ee?(l=()=>{if(!J||!V.name)return void en.Error("Configuration Name and Subscription Name are required.");let e=(0,r.create)(w.SavePublishRequestSchema,{name:J,publish:(0,r.create)(C.PublishSchema,{...V,points:ee})});(0,v.FetchProtobuf)(w.subscribe.method.save_publish,e).then(e=>{let{error:t}=e;t?en.Error(`Failed to save publish config: ${t.msg}`):(en.Info("Successfully saved publish config."),Q(),z())})},q[5]=J,q[6]=en,q[7]=Q,q[8]=V,q[9]=z,q[10]=ee,q[11]=l):l=q[11];let ea=l,eo=D?"Edit":"Add";if(q[12]!==eo?(u=(0,t.jsx)(g.Modal.Header,{closeButton:!0,children:(0,t.jsxs)(g.Modal.Title,{children:[eo," Publish Configuration"]})}),q[12]=eo,q[13]=u):u=q[13],q[14]===Symbol.for("react.memo_cache_sentinel")?(f=e=>Z(e.target.value),q[14]=f):f=q[14],q[15]!==J||q[16]!==D?(b=(0,t.jsx)(m.FloatingLabel,{label:"Configuration Name",className:"mb-3",children:(0,t.jsx)(p.Form.Control,{placeholder:"my-awesome-config",value:J,onChange:f,disabled:D})}),q[15]=J,q[16]=D,q[17]=b):b=q[17],q[18]!==V?(x=e=>X((0,r.create)(C.PublishSchema,{...V,name:e.target.value})),q[18]=V,q[19]=x):x=q[19],q[20]!==V.name||q[21]!==x?(y=(0,t.jsx)(m.FloatingLabel,{label:"Subscription Name",className:"mb-3",children:(0,t.jsx)(p.Form.Control,{placeholder:"my-sub",value:V.name,onChange:x})}),q[20]=V.name,q[21]=x,q[22]=y):y=q[22],q[23]!==V?(j=e=>X((0,r.create)(C.PublishSchema,{...V,path:e.target.value})),q[23]=V,q[24]=j):j=q[24],q[25]!==V.path||q[26]!==j?(_=(0,t.jsx)(m.FloatingLabel,{label:"Subscription Path",className:"mb-3",children:(0,t.jsx)(p.Form.Control,{placeholder:"custom/path",value:V.path,onChange:j})}),q[25]=V.path,q[26]=j,q[27]=_):_=q[27],q[28]!==V?(P=e=>X((0,r.create)(C.PublishSchema,{...V,password:e.target.value})),q[28]=V,q[29]=P):P=q[29],q[30]!==V.password||q[31]!==P?(M=(0,t.jsx)(m.FloatingLabel,{label:"Password",className:"mb-3",children:(0,t.jsx)(p.Form.Control,{type:"password",placeholder:"password",value:V.password,onChange:P})}),q[30]=V.password,q[31]=P,q[32]=M):M=q[32],q[33]!==V?(N=e=>X((0,r.create)(C.PublishSchema,{...V,address:e.target.value})),q[33]=V,q[34]=N):N=q[34],q[35]!==V.address||q[36]!==N?(k=(0,t.jsx)(m.FloatingLabel,{label:"Address",className:"mb-3",children:(0,t.jsx)(p.Form.Control,{placeholder:"example.com:443",value:V.address,onChange:N})}),q[35]=V.address,q[36]=N,q[37]=k):k=q[37],q[38]!==V?(F=e=>X((0,r.create)(C.PublishSchema,{...V,insecure:e.target.checked})),q[38]=V,q[39]=F):F=q[39],q[40]!==V.insecure||q[41]!==F?(O=(0,t.jsx)(p.Form.Check,{type:"switch",label:"Insecure",checked:V.insecure,onChange:F,className:"mb-3"}),q[40]=V.insecure,q[41]=F,q[42]=O):O=q[42],q[43]!==ee.length?(B=(0,t.jsxs)(h.Dropdown.Toggle,{variant:"outline-secondary",className:"w-100",children:["Select Nodes (",ee.length,")"]}),q[43]=ee.length,q[44]=B):B=q[44],q[45]===Symbol.for("react.memo_cache_sentinel")?(E={maxHeight:"200px",overflowY:"auto"},q[45]=E):E=q[45],q[46]!==K.groups||q[47]!==ee){let e;q[49]!==ee?(e=e=>(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Dropdown.Header,{children:e.name}),e.nodes.map(e=>(0,t.jsx)(h.Dropdown.ItemText,{children:(0,t.jsx)(p.Form.Check,{type:"checkbox",label:e.name,checked:ee.includes(e.hash),onChange:()=>er(e.hash)})},e.hash))]},e.name),q[49]=ee,q[50]=e):e=q[50],I=K.groups.map(e),q[46]=K.groups,q[47]=ee,q[48]=I}else I=q[48];return q[51]!==I?(A=(0,t.jsx)(h.Dropdown.Menu,{style:E,children:I}),q[51]=I,q[52]=A):A=q[52],q[53]!==B||q[54]!==A?(R=(0,t.jsxs)(h.Dropdown,{as:d.ButtonGroup,className:"d-block mb-3",children:[B,A]}),q[53]=B,q[54]=A,q[55]=R):R=q[55],q[56]!==_||q[57]!==M||q[58]!==k||q[59]!==O||q[60]!==R||q[61]!==b||q[62]!==y?(U=(0,t.jsxs)(g.Modal.Body,{children:[b,y,_,M,k,O,R]}),q[56]=_,q[57]=M,q[58]=k,q[59]=O,q[60]=R,q[61]=b,q[62]=y,q[63]=U):U=q[63],q[64]!==z?(L=(0,t.jsx)(c.Button,{variant:"secondary",onClick:z,children:"Cancel"}),q[64]=z,q[65]=L):L=q[65],q[66]!==ea?(T=(0,t.jsx)(c.Button,{variant:"primary",onClick:ea,children:"Save"}),q[66]=ea,q[67]=T):T=q[67],q[68]!==L||q[69]!==T?(H=(0,t.jsxs)(g.Modal.Footer,{children:[L,T]}),q[68]=L,q[69]=T,q[70]=H):H=q[70],q[71]!==z||q[72]!==G||q[73]!==U||q[74]!==H||q[75]!==u?($=(0,t.jsxs)(g.Modal,{show:G,onHide:z,centered:!0,children:[u,U,H]}),q[71]=z,q[72]=G,q[73]=U,q[74]=H,q[75]=u,q[76]=$):$=q[76],$}e.s(["default",0,function(){let e,h,m,g,P,M,N,k,F,O,B,E,I,A,R,U,L=(0,n.c)(47),{data:T,error:H,isLoading:$,mutate:q}=(0,v.useProtoSWR)(w.subscribe.method.list_publish),{data:G,error:D,isLoading:z}=(0,v.useProtoSWR)(w.node.method.list),[W,Y]=(0,i.useState)(!1),[K,Q]=(0,i.useState)(!1),[V,X]=(0,i.useState)(void 0),[J,Z]=(0,i.useState)(void 0);L[0]===Symbol.for("react.memo_cache_sentinel")?(e={show:!1,name:""},L[0]=e):e=L[0];let[ee,et]=(0,i.useState)(e),en=(0,i.useContext)(S.GlobalToastContext);L[1]!==en?(h={onCopyError:e=>en.Error(e.message),usePromptAsFallback:!0},L[1]=en,L[2]=h):h=L[2];let{copy:er,copied:ea}=(0,x.useClipboard)(h);if(L[3]!==ea||L[4]!==en?(m=()=>{ea&&en.Info("Copied to clipboard!")},g=[ea,en],L[3]=ea,L[4]=en,L[5]=m,L[6]=g):(m=L[5],g=L[6]),(0,i.useEffect)(m,g),H){let e;return L[7]!==H.code||L[8]!==H.msg?(e=(0,t.jsx)(s.default,{statusCode:H.code,title:H.msg}),L[7]=H.code,L[8]=H.msg,L[9]=e):e=L[9],e}if(D){let e;return L[10]!==D.code||L[11]!==D.msg?(e=(0,t.jsx)(s.default,{statusCode:D.code,title:D.msg}),L[10]=D.code,L[11]=D.msg,L[12]=e):e=L[12],e}if($||z||!T||!G){let e;return L[13]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(j.default,{}),L[13]=e):e=L[13],e}L[14]!==en||L[15]!==q?(P=e=>{(0,v.FetchProtobuf)(w.subscribe.method.remove_publish,(0,r.create)(o.StringValueSchema,{value:e})).then(e=>{let{error:t}=e;t?en.Error(`Failed to remove publish config: ${t.msg}`):(en.Info("Successfully removed publish config."),q())})},L[14]=en,L[15]=q,L[16]=P):P=L[16];let eo=P;L[17]===Symbol.for("react.memo_cache_sentinel")?(M=(e,t,n)=>{Q(e),X(n),Z(t),Y(!0)},L[17]=M):M=L[17];let es=M;L[18]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{Y(!1),X(void 0),Z(void 0)},L[18]=N):N=L[18];let ei=N;return L[19]!==ee.name?(k=(0,t.jsxs)("p",{children:["Delete publish configuration ",ee.name,"?"]}),L[19]=ee.name,L[20]=k):k=L[20],L[21]===Symbol.for("react.memo_cache_sentinel")?(F=()=>et({show:!1,name:""}),L[21]=F):F=L[21],L[22]!==ee.name||L[23]!==eo?(O=()=>{eo(ee.name),et({show:!1,name:""})},L[22]=ee.name,L[23]=eo,L[24]=O):O=L[24],L[25]!==ee.show||L[26]!==k||L[27]!==O?(B=(0,t.jsx)(y.ConfirmModal,{show:ee.show,content:k,onHide:F,onOk:O}),L[25]=ee.show,L[26]=k,L[27]=O,L[28]=B):B=L[28],L[29]!==ea||L[30]!==er||L[31]!==T.publishes?(E=Object.entries(T.publishes).map(e=>{let[n,o]=e,s=(0,r.create)(C.YuhaiinUrl_RemoteSchema,{publish:(0,r.create)(C.PublishSchema,{...o,points:[]})}),i=(0,r.create)(C.YuhaiinUrlSchema,{name:o.name,url:{value:s,case:"remote"}}),u=`yuhaiin://${btoa(String.fromCharCode(...(0,a.toBinary)(C.YuhaiinUrlSchema,i))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}`;return(0,t.jsxs)(b.ListGroup.Item,{className:"mb-3 d-flex flex-column flex-md-row justify-content-between align-items-md-center",children:[(0,t.jsx)(l.Badge,{bg:"primary",className:"me-2",children:n}),(0,t.jsx)("span",{className:"me-2",children:o.name}),(0,t.jsxs)(f.InputGroup,{size:"sm",className:"me-2",children:[(0,t.jsx)(p.Form.Control,{readOnly:!0,value:u,style:{minWidth:"200px"}}),(0,t.jsx)(c.Button,{variant:"outline-secondary",onClick:()=>er(u),children:ea?"Copied":"Copy"})]}),(0,t.jsxs)(d.ButtonGroup,{children:[(0,t.jsx)(c.Button,{variant:"outline-primary",size:"sm",onClick:()=>es(!0,n,o),children:"Edit"}),(0,t.jsx)(c.Button,{variant:"outline-danger",size:"sm",onClick:()=>et({show:!0,name:n}),children:"Delete"})]})]},n)}),L[29]=ea,L[30]=er,L[31]=T.publishes,L[32]=E):E=L[32],L[33]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)(b.ListGroup.Item,{className:"d-sm-flex",children:(0,t.jsxs)(c.Button,{variant:"outline-success",className:"flex-grow-1",onClick:()=>es(!1),children:[(0,t.jsx)("i",{className:"bi bi-plus-lg"}),"Add New Publish"]})}),L[33]=I):I=L[33],L[34]!==E?(A=(0,t.jsx)(u.Card,{children:(0,t.jsxs)(b.ListGroup,{variant:"flush",children:[E,I]})}),L[34]=E,L[35]=A):A=L[35],L[36]!==J||L[37]!==V||L[38]!==K||L[39]!==q||L[40]!==G||L[41]!==W?(R=W&&(0,t.jsx)(_,{show:W,isEdit:K,onHide:ei,item:V,configName:J,nodes:G,mutatePub:q}),L[36]=J,L[37]=V,L[38]=K,L[39]=q,L[40]=G,L[41]=W,L[42]=R):R=L[42],L[43]!==B||L[44]!==A||L[45]!==R?(U=(0,t.jsxs)(t.Fragment,{children:[B,A,R]}),L[43]=B,L[44]=A,L[45]=R,L[46]=U):U=L[46],U}])}]);