"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5822,6251],{15822:(e,t,a)=>{a.r(t),a.d(t,{TLSAuto:()=>h,Tls:()=>x});var n=a(95155),l=a(47319),s=a(36947),r=a(30281),c=a(91602),i=a(96251),o=a(54323),d=a(49288);let h=e=>{var t,a,i,d,h;let{tls:x,onChange:C}=e,j=e=>{let t={...x};x.ech?t.ech={...x.ech}:t.ech=(0,l.v)(o.Jo,{}),e(t.ech),C({...t})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.e9,{title:"Next Protos",className:"mb-2",data:null!=(d=null==x?void 0:x.nextProtos)?d:[],onChange:e=>C({...x,nextProtos:e})}),(0,n.jsx)(c.e9,{title:"Servenames",className:"mb-2",data:null!=(h=null==x?void 0:x.servernames)?h:[],onChange:e=>C({...x,servernames:e})}),(0,n.jsx)(r.$d,{label:"ECH Enabled",checked:!!x.ech&&x.ech.enable,onChange:e=>j(t=>(t.enable=e,t))}),(null==(t=x.ech)?void 0:t.enable)&&(0,n.jsx)(c.a9,{label:"ECH Outer SNI",value:x.ech?x.ech.OuterSNI:"",onChange:e=>j(t=>(t.OuterSNI=e,t))}),(0,n.jsx)(c.jU,{label:"CA Cert",value:new TextDecoder().decode(x.caCert),readonly:!0}),(0,n.jsx)(c.jU,{label:"CA Key",value:new TextDecoder().decode(x.caKey),readonly:!0,password:!0}),(0,n.jsx)(c.a9,{label:"ECH Config",value:x.ech?btoa(String.fromCharCode(...null==(a=x.ech)?void 0:a.config)):"",readonly:!0}),(0,n.jsx)(c.a9,{label:"ECH Key",value:x.ech?btoa(String.fromCharCode(...null==(i=x.ech)?void 0:i.privateKey)):"",readonly:!0,password:!0}),(0,n.jsx)(s.A,{variant:"outline-danger",onClick:()=>C({...x,caCert:new TextEncoder().encode(""),caKey:new TextEncoder().encode(""),ech:{...x.ech,config:new Uint8Array(0),privateKey:new Uint8Array(0)}}),children:"regenerate"})]})},x=e=>{let{tls:t,onChange:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.a9,{plaintext:!0,label:"Protocol",value:"TLS"}),t.tls&&(0,n.jsx)(i.TLSServerComponents,{tls:(0,l.v)(d.Gc,t.tls),onChange:e=>a({...t,tls:e})})]})}},96251:(e,t,a)=>{a.r(t),a.d(t,{TLSServerComponents:()=>x,UnWrapTls:()=>C});var n=a(95155),l=a(47319),s=a(12115),r=a(41531),c=a(36947),i=a(74830),o=a(22452),d=a(91602),h=a(49288);let x=e=>{var t,a;let[x,C]=(0,s.useState)("www.example.com");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.e9,{title:"Next Protos",className:"mb-2",data:null!=(a=null==(t=e.tls)?void 0:t.nextProtos)?a:[],onChange:t=>e.onChange({...e.tls,nextProtos:t})}),e.tls&&e.tls.certificates.map((t,a)=>(0,n.jsx)(r.A,{className:"mb-2",children:(0,n.jsxs)(r.A.Body,{children:[(0,n.jsx)(r.A.Title,{className:"d-flex justify-content-end align-items-center",children:(0,n.jsx)(c.A,{variant:"outline-danger",onClick:()=>e.onChange({...e.tls,certificates:e.tls.certificates.filter((e,t)=>t!==a)}),children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})}),(0,n.jsx)(j,{cert:(0,l.v)(h.f6,t),onChange:t=>{e.onChange({...e.tls,certificates:[...e.tls.certificates.slice(0,a),t,...e.tls.certificates.slice(a+1)]})}})]})},"tls_certificates"+a)),(0,n.jsx)(i.A,{className:"d-flex justify-content-end mb-2",children:(0,n.jsxs)(c.A,{variant:"outline-success",onClick:()=>e.onChange({...e.tls,certificates:[...e.tls.certificates,(0,l.v)(h.f6,{cert:new Uint8Array(0),key:new Uint8Array(0),certFilePath:"",keyFilePath:""})]}),children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New Certificate"]})}),e.tls&&e.tls.serverNameCertificate&&Object.entries(e.tls.serverNameCertificate).map(t=>{let[a,s]=t;return(0,n.jsx)(r.A,{className:"mb-2",children:(0,n.jsxs)(r.A.Body,{children:[(0,n.jsxs)(r.A.Title,{className:"d-flex justify-content-between align-items-center",children:[a,(0,n.jsx)(c.A,{variant:"outline-danger",onClick:()=>{let t={...e.tls.serverNameCertificate};delete t[a],e.onChange({...e.tls,serverNameCertificate:t})},children:(0,n.jsx)("i",{className:"bi bi-x-lg"})})]}),(0,n.jsx)(j,{cert:(0,l.v)(h.f6,s),onChange:t=>{e.onChange({...e.tls,serverNameCertificate:{...e.tls.serverNameCertificate,[a]:t}})}})]})},"server_name_certificate"+a)}),(0,n.jsxs)(i.A,{className:"d-flex justify-content-end",children:[(0,n.jsx)(o.A.Control,{value:x,onChange:e=>C(e.target.value)}),(0,n.jsxs)(c.A,{variant:"outline-success",onClick:()=>{x&&e.onChange({...e.tls,serverNameCertificate:{...e.tls.serverNameCertificate,[x]:(0,l.v)(h.f6,{})}})},children:[(0,n.jsx)("i",{className:"bi bi-plus-lg"}),"New SNI Certificate"]})]})]})},C=e=>{let{value:t,onChange:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x,{tls:t.tls,onChange:e=>a({...t,tls:e})})})},j=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.jU,{label:"Cert",value:new TextDecoder().decode(e.cert.cert),onChange:t=>e.onChange({...e.cert,cert:new TextEncoder().encode(t)})}),(0,n.jsx)(d.jU,{label:"Key",value:new TextDecoder().decode(e.cert.key),onChange:t=>e.onChange({...e.cert,key:new TextEncoder().encode(t)})}),(0,n.jsx)(d.a9,{label:"Cert File",value:e.cert.certFilePath,onChange:t=>e.onChange({...e.cert,certFilePath:t})}),(0,n.jsx)(d.a9,{label:"Key File",value:e.cert.keyFilePath,onChange:t=>e.onChange({...e.cert,keyFilePath:t})})]})}}]);